import{bo as b,aj as E,p as g,j as w}from"./index-cd84bcc9.js";import{D as x}from"./ChamberBox-e4d36ac9.js";import{S as A}from"./ShowAll-226afca1.js";import{r as e}from"./vendor-51460554.js";import"./capitalizeFirstLetter-92ef0abb.js";import"./SkeletonChamberBox-5e97f066.js";import"./consts-be860660.js";import"./useTimeIndicator-3b8ca7e8.js";import"./index-c8a663c0.js";import"./sideNavItems-22800105.js";import"./index-2d186805.js";import"./useResizeObserver-0deb9469.js";import"./storyblok-c16fb040.js";import"./index-4963229a.js";import"./Modal-5a254f40.js";import"./styles-3ceda759.js";import"./ChambersList-14c207f2.js";import"./styles-346e761c.js";import"./constants-ab41c274.js";import"./styles-d2f9f396.js";import"./styles-ec98f338.js";const M=(u,r=0)=>{const[a,s]=e.useState("hasNextPage"),[o,f]=e.useState([]),{data:m,loading:p,error:y,fetchMore:l,refetch:n}=b({variables:{limit:u?r:12,offset:0}});e.useEffect(()=>{var t;f(((t=m==null?void 0:m.userFavourites)==null?void 0:t.data.map(({noum:i})=>i))||[])},[m]);const F=e.useMemo(()=>o==null?void 0:o.filter(t=>{var i;return(t==null?void 0:t.type)!==E.Home&&(t==null?void 0:t.status)===g.Published||(t==null?void 0:t.type)===E.Home&&((i=t==null?void 0:t.uid)==null?void 0:i.userStatus)!=="PENDING"}),[o]),N=e.useCallback(async()=>{var h,d,v,S;const t=await l({variables:{limit:r,offset:(o==null?void 0:o.length)||0}}),i=((d=(h=t==null?void 0:t.data)==null?void 0:h.userFavourites)==null?void 0:d.data)||[],c=[...o,...i.map(({noum:P})=>P)||[]];f(c),(((S=(v=t.data.userFavourites)==null?void 0:v.data)==null?void 0:S.length)||0)<r&&s("end")},[l,o,r]);return e.useEffect(()=>{s(o&&(o==null?void 0:o.length)<r?"end":"hasNextPage")},[o,r]),e.useEffect(()=>{n()},[n]),{noums:F,loading:p,error:y,infiniteState:a,fetchMoreNoums:N,refetchFavouriteNoums:n}},D=20,Z=()=>{const{noums:u,loading:r,infiniteState:a,fetchMoreNoums:s}=M(!0,D);return w(A,{noums:u,loading:r,infiniteState:a,fetchMoreNoums:s,category:x.Spotlight,"data-test":"FavouritesShowAll-ShowAll"})};export{Z as default};
//# sourceMappingURL=FavouritesShowAll-6f07b706.js.map
