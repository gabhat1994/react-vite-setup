import{r as o}from"./vendor-51460554.js";import{bp as P,aj as y,p as v}from"./index-cd84bcc9.js";const H=(C,s=0)=>{const[E,i]=o.useState("hasNextPage"),[e,u]=o.useState([]),{data:n,loading:c,error:N,fetchMore:m,refetch:f}=P({variables:{limit:C?s:12,offset:0}});o.useEffect(()=>{var t;u(((t=n==null?void 0:n.myCircle)==null?void 0:t.data)||[])},[n]);const b=o.useMemo(()=>e==null?void 0:e.filter(t=>{var r;return(t==null?void 0:t.type)!==y.Home&&(t==null?void 0:t.status)===v.Published||(t==null?void 0:t.type)===y.Home&&((r=t==null?void 0:t.uid)==null?void 0:r.userStatus)!=="PENDING"}),[e]),M=o.useCallback(async()=>{var l,a,d,h;const t=await m({variables:{limit:s,offset:(e==null?void 0:e.length)||0}}),r=((a=(l=t==null?void 0:t.data)==null?void 0:l.myCircle)==null?void 0:a.data)||[],x=[...e,...r];u(x),(((h=(d=t.data.myCircle)==null?void 0:d.data)==null?void 0:h.length)||0)<s&&i("end")},[m,e,s]);return o.useEffect(()=>{i(e&&(e==null?void 0:e.length)<s?"end":"hasNextPage")},[e,s]),o.useEffect(()=>{f()},[f]),{noums:b,loading:c,error:N,infiniteState:E,fetchMoreNoums:M,refetchRecommendedNoums:f}};export{H as u};
//# sourceMappingURL=useDiscoveryMyCircleNoums-329af58e.js.map
