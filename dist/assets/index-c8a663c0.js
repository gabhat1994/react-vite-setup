import{f as K,w as V,d8 as q,L as f,u as z,e as J,j as a,a1 as R,d9 as b,c as i,x as A,T as c,B as C,K as D,da as Q,d7 as X,b7 as Y}from"./index-cd84bcc9.js";import{a9 as Z,aB as tt,r as o}from"./vendor-51460554.js";import{s as E,S as at}from"./sideNavItems-22800105.js";import{S as m}from"./index-2d186805.js";import{c as et}from"./storyblok-c16fb040.js";import{A as d}from"./index-4963229a.js";import{S as M,R as W,C as st,M as it,L as ot,a as nt}from"./styles-3ceda759.js";const mt=({type:n,rightContent:r,children:h,onGoBack:P})=>{const p=Z(),S=tt(),{user:u,isUnregistered:g,isUnauthenticated:v}=K(),{flags:U}=V(),[j,k]=o.useState(""),[l,L]=o.useState(!0),[t,O]=o.useState(),G=o.useRef(!0);o.useEffect(()=>{const s=q(f.SHOW_BANNER)===null;L(s)},[l]),o.useEffect(()=>{async function s(){var B,N,T,x,w,H;const{data:e}=await et();if(G.current){const $=(N=(B=e==null?void 0:e.story)==null?void 0:B.content)==null?void 0:N.Description,I=(x=(T=e==null?void 0:e.story)==null?void 0:T.content)==null?void 0:x.ButtonText,F=(H=(w=e==null?void 0:e.story)==null?void 0:w.content)==null?void 0:H.ButtonLink;O({description:$,buttonText:I,buttonLink:F})}}s()},[]),o.useLayoutEffect(()=>{let s="/";E.some(e=>e.value.length>1&&S.pathname.includes(e.value)?(s=e.value,!0):!1),k(s)},[S.pathname]);const y=o.useCallback(s=>{k(s),p(s,{replace:!1})},[p]),_=z().width<J.LAPTOP;return U.newAppNavigation?a(d.Layout,{onGoBack:P,topNavbar:v?null:g?a(R,{isBorderRadius:!1,"data-test":"ListLayout-Header",children:a(b,{leftNavButton:!0,"data-test":"ListLayout-GuestHeader"})}):a(d.TopBar,{}),sideNav:a(d.SideNavigation,{}),children:a(d.MainContent,{children:i(A,{vertical:!0,align:"stretch",gap:24,fullWidth:!0,"data-test":"ListLayout-Stack",children:[l&&(t==null?void 0:t.buttonText)&&i(M,{"data-test":"ListLayout-StyledBanner",children:[a(c,{font:"body-m",colorToken:"--text-campaign-banner-success-primary-default","data-test":"ListLayout-TSpan",children:t==null?void 0:t.description}),i("div",{className:"action-buttons",children:[a(C,{primary:!0,intent:"positive",onClick:()=>y(`/article?slug=articles/${t==null?void 0:t.buttonLink}`),"data-test":"ListLayout-Button",children:t==null?void 0:t.buttonText}),a(c,{font:"button-m",colorToken:"--text-button-success-secondary-default",onClick:()=>{L(!1),D(f.SHOW_BANNER,!1)},"data-test":"ListLayout-TSpan",children:"Dismiss"})]})]}),i(A,{gap:24,align:"start",justify:"stretch",fullWidth:!0,"data-test":"ListLayout-Stack",children:[a(Q,{grow:!0,"data-test":"ListLayout-StackItem",children:h}),!!r&&a(W,{"data-testid":"layout-right-content","data-test":"ListLayout-RightContent",children:a(m,{"data-test":"ListLayout-StickyContainer",children:r})})]})]})})}):i(st,{"data-testid":"layout-container","data-test":"ListLayout-Container",children:[v?null:a(R,{isBorderRadius:!1,"data-test":"ListLayout-Header",children:g?a(b,{leftNavButton:!0,"data-test":"ListLayout-GuestHeader"}):a(X,{avatar:Y.getProfilePicture(u)||void 0,userName:(u==null?void 0:u.firstName)||void 0,"data-test":"ListLayout-MainHeader"})}),l&&(t==null?void 0:t.buttonText)&&i(M,{"data-test":"ListLayout-StyledBanner",children:[a(c,{font:"body-m",colorToken:"--text-campaign-banner-success-primary-default","data-test":"ListLayout-TSpan",children:t==null?void 0:t.description}),i("div",{className:"action-buttons",children:[a(C,{primary:!0,intent:"positive",onClick:()=>y(`/article?slug=articles/${t==null?void 0:t.buttonLink}`),"data-test":"ListLayout-Button",children:t==null?void 0:t.buttonText}),a(c,{font:"button-m",colorToken:"--text-button-success-secondary-default",onClick:()=>{L(!1),D(f.SHOW_BANNER,!1)},"data-test":"ListLayout-TSpan",children:"Dismiss"})]})]}),i(it,{"data-testid":"layout-main",type:n,style:{display:n==="Community"&&_?"block":"flex"},"data-test":"ListLayout-Main",children:[a(ot,{"data-testid":"layout-left-content",type:n,"data-test":"ListLayout-LeftContent",children:a(m,{leftNav:!0,"data-test":"ListLayout-StickyContainer",children:a(at,{onNavChange:y,navItems:E,activeNavValue:j,"data-test":"ListLayout-SideNav"})})}),a(nt,{"data-testid":"layout-main-content",type:n,"data-test":"ListLayout-Content",children:h}),!!r&&a(W,{"data-testid":"layout-right-content","data-test":"ListLayout-RightContent",children:a(m,{"data-test":"ListLayout-StickyContainer",children:r})})]})]})};export{mt as L};
//# sourceMappingURL=index-c8a663c0.js.map
