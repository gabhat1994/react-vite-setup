import{r as e}from"./vendor-51460554.js";import{bq as S,aj as N,p as C}from"./index-cd84bcc9.js";const I=(E,u=0)=>{const[y,f]=e.useState("hasNextPage"),[o,a]=e.useState([]),{data:s,loading:P,error:b,fetchMore:m,refetch:r}=S({variables:{limit:E?u:12,offset:0}});e.useEffect(()=>{var t;a(((t=s==null?void 0:s.popularNoums)==null?void 0:t.data)||[])},[s]);const x=e.useMemo(()=>o==null?void 0:o.filter(t=>{var n;return(t==null?void 0:t.type)!==N.Home&&(t==null?void 0:t.status)===C.Published||(t==null?void 0:t.type)===N.Home&&((n=t==null?void 0:t.uid)==null?void 0:n.userStatus)!=="PENDING"}),[o]),v=e.useCallback(async()=>{var l,i,d,h;const t=await m({variables:{limit:u,offset:(o==null?void 0:o.length)||0}}),n=((i=(l=t==null?void 0:t.data)==null?void 0:l.popularNoums)==null?void 0:i.data)||[],M=[...o,...n];a(M),(((h=(d=t.data.popularNoums)==null?void 0:d.data)==null?void 0:h.length)||0)<u&&f("end")},[m,o,u]);return e.useEffect(()=>{f(o&&(o==null?void 0:o.length)<u?"end":"hasNextPage")},[o,u]),e.useEffect(()=>{r()},[r]),{noums:x,loading:P,error:b,infiniteState:y,fetchMoreNoums:v,refetchRecommendedNoums:r}};export{I as u};
//# sourceMappingURL=useDiscoveryPopularNoums-cdda93b8.js.map
