import{bC as getDefaultExportFromCjs,aU as commonjsGlobal}from"./vendor-51460554.js";var agoraRtmSdkExports={},agoraRtmSdk={get exports(){return agoraRtmSdkExports},set exports(i){agoraRtmSdkExports=i}};/*
 @preserve
 AgoraRTM Web SDK 1.4.5 - commit: v1.4.5-0-g9cf39592
 Copyright (C) 2018-2022 Agora Lab.
 This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
 A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
*/(function(module,exports){(function(i,e){module.exports=e()})(commonjsGlobal,function(){function oe(i,e){var o=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(i,l).enumerable})),o.push.apply(o,s)}return o}function wa(i){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?oe(Object(o),!0).forEach(function(s){m(i,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):oe(Object(o)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(o,s))})}return i}function V(i){return(V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(i)}function um(i,e,o,s,l,f,h){try{var p=i[f](h),d=p.value}catch(g){return void o(g)}p.done?e(d):Promise.resolve(d).then(s,l)}function J(i){return function(){var e=this,o=arguments;return new Promise(function(s,l){function f(d){um(p,s,l,f,h,"next",d)}function h(d){um(p,s,l,f,h,"throw",d)}var p=i.apply(e,o);f(void 0)})}}function X(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function vm(i,e){for(var o=0;o<e.length;o++){var s=e[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Ia(i,e,o){return e&&vm(i.prototype,e),o&&vm(i,o),i}function m(i,e,o){return e in i?Object.defineProperty(i,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[e]=o,i}function ja(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&wf(i,e)}function Fd(i){return(Fd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(i)}function wf(i,e){return(wf=Object.setPrototypeOf||function(o,s){return o.__proto__=s,o})(i,e)}function wm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wi(i,e,o){return(wi=wm()?Reflect.construct:function(s,l,f){var h=[null];return h.push.apply(h,l),s=new(Function.bind.apply(s,h)),f&&wf(s,f.prototype),s}).apply(null,arguments)}function xf(i){var e=typeof Map=="function"?new Map:void 0;return(xf=function(o){function s(){return wi(o,arguments,Fd(this).constructor)}if(o===null||Function.toString.call(o).indexOf("[native code]")===-1)return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(o))return e.get(o);e.set(o,s)}return s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),wf(s,o)})(i)}function yf(i,e){if(i==null)return{};if(i==null)var o={};else{o={};var s,l=Object.keys(i);for(s=0;s<l.length;s++){var f=l[s];0<=e.indexOf(f)||(o[f]=i[f])}}if(Object.getOwnPropertySymbols)for(s=Object.getOwnPropertySymbols(i),f=0;f<s.length;f++)l=s[f],0<=e.indexOf(l)||Object.prototype.propertyIsEnumerable.call(i,l)&&(o[l]=i[l]);return o}function n(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ka(i){var e=wm();return function(){var o=Fd(i);if(e){var s=Fd(this).constructor;o=Reflect.construct(o,arguments,s)}else o=o.apply(this,arguments);return o=!o||typeof o!="object"&&typeof o!="function"?n(this):o}}function xi(i,e,o){return(xi=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(s,l,f){for(;!Object.prototype.hasOwnProperty.call(s,l)&&(s=Fd(s))!==null;);if(s)return(l=Object.getOwnPropertyDescriptor(s,l)).get?l.get.call(f):l.value})(i,e,o||i)}function ua(i,e){var o=Array.isArray(i)?i:void 0;if(!o)if((o=i&&(typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"]))==null)o=void 0;else{var s,l=[],f=!0,h=!1;try{for(o=o.call(i);!(f=(s=o.next()).done)&&(l.push(s.value),!e||l.length!==e);f=!0);}catch(d){h=!0;var p=d}finally{try{f||o.return==null||o.return()}finally{if(h)throw p}}o=l}if(!(i=o||xm(i,e)))throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);return i}function G(i){var e=Array.isArray(i)?yi(i):void 0;if(e||(e=typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null?Array.from(i):void 0),!(i=e||xm(i)))throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);return i}function xm(i,e){if(i){if(typeof i=="string")return yi(i,e);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return yi(i,e)}}function yi(i,e){(e==null||e>i.length)&&(e=i.length);for(var o=0,s=Array(e);o<e;o++)s[o]=i[o];return s}function la(i,e,o,s,l){var f={};return Object.keys(s).forEach(function(h){f[h]=s[h]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=o.slice().reverse().reduce(function(h,p){return p(i,e,h)||h},f),l&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(l):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(i,e,f),f=null),f}function cb(i){var e={exports:{}};return i(e,e.exports),e.exports}function pe(i){i||(i={});var e=i.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var o=iu.test(e)&&!ju.test(e)||!!i.tablet&&ku.test(e);return!o&&i.tablet&&i.featureDetect&&navigator&&1<navigator.maxTouchPoints&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(o=!0),o}function ym(i,e){var o,s=3>arguments.length?i:arguments[2];return sa(i)===s?i[e]:(o=Jb.f(i,e))?Q(o,"value")?o.value:o.get===void 0?void 0:o.get.call(s):ha(o=ac(i))?ym(o,e,s):void 0}function lu(i){var e=i.charCodeAt(0)<<24,o=0|mu(~e),s=0,l=0|i.length,f="";if(5>o&&l>=o){for(e=e<<o>>>24+o,s=1;s<o;s=s+1|0)e=e<<6|63&i.charCodeAt(s);65535>=e?f+=Gd(e):1114111>=e?f+=Gd(55296+((e=e-65536|0)>>10)|0,56320+(1023&e)|0):s=0}for(;s<l;s=s+1|0)f+="ï¿½";return f}function zm(){}function nu(i){var e=0|i.charCodeAt(0);if(55296<=e&&56319>=e){var o=0|i.charCodeAt(1);if(!(o==o&&56320<=o&&57343>=o))return Gd(239,191,189);if(65535<(e=(e-55296<<10)+o-56320+65536|0))return Gd(240|e>>>18,128|e>>>12&63,128|e>>>6&63,128|63&e)}return 127>=e?i:2047>=e?Gd(192|e>>>6,128|63&e):Gd(224|e>>>12,128|e>>>6&63,128|63&e)}function Am(){}function ia(){ia.init.call(this)}function Kg(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+V(i))}function Bm(i,e,o,s){Kg(o);var l=i._events;if(l===void 0)l=i._events=Object.create(null),i._eventsCount=0;else{l.newListener!==void 0&&(i.emit("newListener",e,o.listener?o.listener:o),l=i._events);var f=l[e]}return f===void 0?(l[e]=o,++i._eventsCount):(typeof f=="function"?f=l[e]=s?[o,f]:[f,o]:s?f.unshift(o):f.push(o),0<(o=i._maxListeners===void 0?ia.defaultMaxListeners:i._maxListeners)&&f.length>o&&!f.warned&&(f.warned=!0,(o=Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",o.emitter=i,o.type=e,o.count=f.length,console&&console.warn&&console.warn(o))),i}function ou(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Cm(i,e,o){return i={fired:!1,wrapFn:void 0,target:i,type:e,listener:o},(e=ou.bind(i)).listener=o,i.wrapFn=e}function Dm(i,e,o){if((i=i._events)===void 0)return[];if((e=i[e])===void 0)return[];if(typeof e=="function")return o?[e.listener||e]:[e];if(o)for(o=Array(e.length),i=0;i<o.length;++i)o[i]=e[i].listener||e[i];else o=Em(e,e.length);return o}function Fm(i){var e=this._events;if(e!==void 0){if(typeof(i=e[i])=="function")return 1;if(i!==void 0)return i.length}return 0}function Em(i,e){for(var o=Array(e),s=0;s<e;++s)o[s]=i[s];return o}function pu(i,e,o){typeof i.on=="function"&&Gm(i,"error",e,o)}function Gm(i,e,o,s){if(typeof i.on=="function")s.once?i.once(e,o):i.on(e,o);else{if(typeof i.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+V(i));i.addEventListener(e,function l(f){s.once&&i.removeEventListener(e,l),o(f)})}}function qu(i){return i?G(i):ru(function(){return[]},function(e,o){return e.push(o),e})}function Hm(i,e){var o,s,l,f;return x.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:o=Im(i)([Jm,Jm,function(p,d){return d}])[2],s=0;case 2:if(!(s<e.length)){h.next=17;break}if(l=e[s],!((f=o(zi,l))instanceof Lg)){h.next=11;break}if((f=Ai(f.deref()))===zi){h.next=10;break}return h.next=10,f;case 10:return h.abrupt("return");case 11:if(f===zi){h.next=14;break}return h.next=14,f;case 14:s++,h.next=2;break;case 17:case"end":return h.stop()}},su)}function Mg(i,e){return e!=null&&typeof e[Symbol.iterator]=="function"?Hm(Mg(i),e):function(o){var s=o[2];return tu(o,function(l,f){return s(l,i(f))})}}function Jc(i){return Object.prototype.toString.call(i).slice(8,-1)}function Hd(i){return Jc(i)==="Object"&&i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function Km(i){var e;return(e=Jc(i)==="Boolean"||Jc(i)==="Null"||Jc(i)==="Undefined")||(e=Jc(i)==="Number"&&!isNaN(i)),e||Jc(i)==="String"||Jc(i)==="Symbol"}function Id(i){var e=-1,o=i==null?0:i.length;for(this.clear();++e<o;){var s=i[e];this.set(s[0],s[1])}}function qe(i){var e=-1,o=i==null?0:i.length;for(this.clear();++e<o;){var s=i[e];this.set(s[0],s[1])}}function re(i){var e=-1,o=i==null?0:i.length;for(this.clear();++e<o;){var s=i[e];this.set(s[0],s[1])}}function zf(i){var e=-1,o=i==null?0:i.length;for(this.__data__=new Ng;++e<o;)this.add(i[e])}function se(i){this.size=(this.__data__=new Og(i)).size}function te(i,e,o,s,l,f){var h,p=1&e,d=2&e,g=4&e;if(o&&(h=l?o(i,s,l,f):o(i)),h!==void 0)return h;if(!ob(i))return i;if(s=Za(i)){if(h=uu(i),!p)return Bi(i,h)}else{var b=Af(i),y=b=="[object Function]"||b=="[object GeneratorFunction]";if(Bf(i))return Lm(i,p);if(b=="[object Object]"||b=="[object Arguments]"||y&&!l){if(h=d||y?{}:Mm(i),!p)return d?vu(i,wu(h,i)):xu(i,yu(h,i))}else{if(!xa[b])return l?i:{};h=zu(i,b,p)}}if(f||(f=new ue),l=f.get(i))return l;f.set(i,h),Au(i)?i.forEach(function(_){h.add(te(_,e,o,_,i,f))}):Bu(i)&&i.forEach(function(_,A){h.set(A,te(_,e,o,A,i,f))}),d=g?d?Nm:Ci:d?Cf:Jd;var w=s?void 0:d(i);return Cu(w||i,function(_,A){w&&(_=i[A=_]),Om(h,A,te(_,e,o,A,i,f))}),h}function Di(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var o=function s(){var l=arguments,f=e?e.apply(this,l):l[0],h=s.cache;return h.has(f)?h.get(f):(l=i.apply(this,l),s.cache=h.set(f,l)||h,l)};return o.cache=new(Di.Cache||Ng),o}function Pm(i){if(typeof i=="string")return i;if(Za(i))return ve(i,Pm)+"";if(we(i))return Qm?Qm.call(i):"";var e=i+"";return e=="0"&&1/i==-Du?"-0":e}function Ei(i,e,o,s,l){var f=-1,h=i.length;for(o||(o=Eu),l||(l=[]);++f<h;){var p=i[f];0<e&&o(p)?1<e?Ei(p,e-1,o,s,l):Fi(l,p):s||(l[l.length]=p)}return l}function xe(i,e,o,s,l){if(i===e)e=!0;else if(i==null||e==null||!oc(i)&&!oc(e))e=i!=i&&e!=e;else t:{var f=Za(i),h=Za(e),p=f?"[object Array]":Af(i),d=h?"[object Array]":Af(e),g=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]";if(h=(d=d=="[object Arguments]"?"[object Object]":d)=="[object Object]",(d=p==d)&&Bf(i)){if(!Bf(e)){e=!1;break t}f=!0,g=!1}if(d&&!g)l||(l=new ue),e=f||Gi(i)?Rm(i,e,o,s,xe,l):Fu(i,e,p,o,s,xe,l);else{if(!(1&o)&&(f=g&&Sm.call(i,"__wrapped__"),p=h&&Sm.call(e,"__wrapped__"),f||p)){i=f?i.value():i,e=p?e.value():e,l||(l=new ue),e=xe(i,e,o,s,l);break t}if(d)e:if(l||(l=new ue),f=1&o,p=Ci(i),h=p.length,d=Ci(e).length,h==d||f){for(d=h;d--;){var b=p[d];if(!(f?b in e:Gu.call(e,b))){e=!1;break e}}if(g=l.get(i),b=l.get(e),g&&b)e=g==e&&b==i;else{g=!0,l.set(i,e),l.set(e,i);for(var y=f;++d<h;){var w=i[b=p[d]],_=e[b];if(s)var A=f?s(_,w,b,e,i,l):s(w,_,b,i,e,l);if(A===void 0?w!==_&&!xe(w,_,o,s,l):!A){g=!1;break}y||(y=b=="constructor")}g&&!y&&(o=i.constructor)!=(s=e.constructor)&&"constructor"in i&&"constructor"in e&&!(typeof o=="function"&&o instanceof o&&typeof s=="function"&&s instanceof s)&&(g=!1),l.delete(i),l.delete(e),e=g}}else e=!1;else e=!1}}return e}function ya(i,e,o){this.low=0|i,this.high=0|e,this.unsigned=!!o}function pb(i){return(i&&i.__isLong__)===!0}function Kd(i,e){var o;if(e){if((e=0<=(i>>>=0)&&256>i)&&(o=Tm[i]))return o;o=za(i,0>(0|i)?-1:0,!0),e&&(Tm[i]=o)}else{if((e=-128<=(i|=0)&&128>i)&&(o=Um[i]))return o;o=za(i,0>i?-1:0,!1),e&&(Um[i]=o)}return o}function Kb(i,e){if(isNaN(i))return e?Ld:Lb;if(e){if(0>i)return Ld;if(i>=Vm)return Wm}else{if(i<=-Xm)return qb;if(i+1>=Xm)return Ym}return 0>i?Kb(-i,e).neg():za(i%ye|0,i/ye|0,e)}function za(i,e,o){return new ya(i,e,o)}function Hi(i,e,o){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return Lb;if(typeof e=="number"?(o=e,e=!1):e=!!e,2>(o=o||10)||36<o)throw RangeError("radix");var s;if(0<(s=i.indexOf("-")))throw Error("interior hyphen");if(s===0)return Hi(i.substring(1),e,o).neg();s=Kb(Pg(o,8));for(var l=Lb,f=0;f<i.length;f+=8){var h=Math.min(8,i.length-f),p=parseInt(i.substring(f,f+h),o);8>h?(h=Kb(Pg(o,h)),l=l.mul(h).add(Kb(p))):l=(l=l.mul(s)).add(Kb(p))}return l.unsigned=e,l}function bc(i,e){return typeof i=="number"?Kb(i,e):typeof i=="string"?Hi(i,e):za(i.low,i.high,typeof e=="boolean"?e:i.unsigned)}function O(i,e){function o(){this.constructor=i}Ii(i,e),i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}function ze(i){return typeof i=="function"}function Ae(i){setTimeout(function(){throw i},0)}function Ji(i){return i!==null&&V(i)==="object"}function Zm(i){return i.reduce(function(e,o){return e.concat(o instanceof Df?o.errors:o)},[])}function Ki(i){for(;i;){var e=i.destination,o=i.isStopped;if(i.closed||o)return!1;i=e&&e instanceof ma?e:null}return!0}function ed(i){return i}function Li(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return $m(i)}function $m(i){return i.length===0?ed:i.length===1?i[0]:function(e){return i.reduce(function(o,s){return s(o)},e)}}function an(i){if(i||(i=Mb.Promise||Promise),!i)throw Error("no Promise impl found");return i}function bn(){return function(i){return i.lift(new Hu(i))}}function Ef(i){return i?Iu(i):yb}function Iu(i){return new Y(function(e){return i.schedule(function(){return e.complete()})})}function fd(i){return i&&typeof i.schedule=="function"}function Mi(i,e){return new Y(function(o){var s=new Ta,l=0;return s.add(e.schedule(function(){l===i.length?o.complete():(o.next(i[l++]),o.closed||s.add(this.schedule()))})),s})}function Ff(i,e){return e?Mi(i,e):new Y(cn(i))}function eb(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return fd(e=i[i.length-1])?(i.pop(),Mi(i,e)):Ff(i)}function Z(i,e){return new Y(e?function(o){return e.schedule(Ju,0,{error:i,subscriber:o})}:function(o){return o.error(i)})}function Ju(i){i.subscriber.error(i.error)}function Ku(i,e){return e===void 0&&(e=0),function(o){return o.lift(new Lu(i,e))}}function dn(i){return i in Ni&&(delete Ni[i],!0)}function pc(){}function ea(i,e){return function(o){if(typeof i!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new Mu(i,e))}}function en(i,e,o){if(e){if(!fd(e))return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return en(i,o).apply(void 0,s).pipe(ea(function(f){return Nb(f)?e.apply(void 0,f):e(f)}))};o=e}return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var f,h=this,p={context:h,subject:f,callbackFunc:i,scheduler:o};return new Y(function(d){if(o)return o.schedule(Nu,0,{args:s,subscriber:d,params:p});if(!f){f=new Gf;try{i.apply(h,s.concat([function(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];f.next(1>=g.length?g[0]:g),f.complete()}]))}catch(g){Ki(f)?f.error(g):console.warn(g)}}return f.subscribe(d)})}}function Nu(i){var e=this,o=i.args,s=i.subscriber,l=i.params;i=l.callbackFunc;var f=l.context,h=l.scheduler,p=l.subject;if(!p){p=l.subject=new Gf,l=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];e.add(h.schedule(Ou,0,{value:1>=d.length?d[0]:d,subject:p}))};try{i.apply(f,o.concat([l]))}catch(d){p.error(d)}}this.add(p.subscribe(s))}function Ou(i){var e=i.subject;e.next(i.value),e.complete()}function fn(i,e,o){if(e){if(!fd(e))return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return fn(i,o).apply(void 0,s).pipe(ea(function(f){return Nb(f)?e.apply(void 0,f):e(f)}))};o=e}return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var f={subject:void 0,args:s,callbackFunc:i,scheduler:o,context:this};return new Y(function(h){var p=f.context,d=f.subject;if(o)return o.schedule(Pu,0,{params:f,subscriber:h,context:p});if(!d){d=f.subject=new Gf;try{i.apply(p,s.concat([function(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];(b=g.shift())?d.error(b):(d.next(1>=g.length?g[0]:g),d.complete())}]))}catch(g){Ki(d)?d.error(g):console.warn(g)}}return d.subscribe(h)})}}function Pu(i){var e=this,o=i.params,s=i.subscriber;i=i.context;var l=o.callbackFunc,f=o.args,h=o.scheduler,p=o.subject;if(!p){p=o.subject=new Gf,o=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];(g=d.shift())?e.add(h.schedule(gn,0,{err:g,subject:p})):e.add(h.schedule(Qu,0,{value:1>=d.length?d[0]:d,subject:p}))};try{l.apply(i,f.concat([o]))}catch(d){this.add(h.schedule(gn,0,{err:d,subject:p}))}}this.add(p.subscribe(s))}function Qu(i){var e=i.subject;e.next(i.value),e.complete()}function gn(i){i.subject.error(i.err)}function hn(i){return!!i&&typeof i.subscribe!="function"&&typeof i.then=="function"}function Oi(i,e,o,s,l){if(l===void 0&&(l=new Ru(i,o,s)),!l.closed)return e instanceof Y?e.subscribe(l):Hf(e)(l)}function Su(i,e){return new Y(function(o){var s=new Ta;return s.add(e.schedule(function(){var l=i[Be]();s.add(l.subscribe({next:function(f){s.add(e.schedule(function(){return o.next(f)}))},error:function(f){s.add(e.schedule(function(){return o.error(f)}))},complete:function(){s.add(e.schedule(function(){return o.complete()}))}}))})),s})}function Tu(i,e){return new Y(function(o){var s=new Ta;return s.add(e.schedule(function(){return i.then(function(l){s.add(e.schedule(function(){o.next(l),s.add(e.schedule(function(){return o.complete()}))}))},function(l){s.add(e.schedule(function(){return o.error(l)}))})})),s})}function Uu(i,e){if(!i)throw Error("Iterable cannot be null");return new Y(function(o){var s,l=new Ta;return l.add(function(){s&&typeof s.return=="function"&&s.return()}),l.add(e.schedule(function(){s=i[gd](),l.add(e.schedule(function(){if(!o.closed){try{var f=s.next(),h=f.value,p=f.done}catch(d){return void o.error(d)}p?o.complete():(o.next(h),this.schedule())}}))})),l})}function jn(i,e){if(i!=null){if(i&&typeof i[Be]=="function")return Su(i,e);if(hn(i))return Tu(i,e);if(kn(i))return Mi(i,e);if(i&&typeof i[gd]=="function"||typeof i=="string")return Uu(i,e)}throw new TypeError((i!==null&&V(i)||i)+" is not observable")}function Ob(i,e){return e?jn(i,e):i instanceof Y?i:new Y(Hf(i))}function qc(i,e){if(!e.closed){if(i instanceof Y)return i.subscribe(e);try{var o=Hf(i)(e)}catch(s){e.error(s)}return o}}function fb(i,e,o){return o===void 0&&(o=Number.POSITIVE_INFINITY),typeof e=="function"?function(s){return s.pipe(fb(function(l,f){return Ob(i(l,f)).pipe(ea(function(h,p){return e(l,h,f,p)}))},o))}:(typeof e=="number"&&(o=e),function(s){return s.lift(new Vu(i,o))})}function Qg(i){return i===void 0&&(i=Number.POSITIVE_INFINITY),fb(ed,i)}function ln(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return Qg(1)(eb.apply(void 0,i))}function hd(i){return new Y(function(e){try{var o=i()}catch(s){return void e.error(s)}return(o?Ob(o):Ef()).subscribe(e)})}function mn(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(i.length===1){var o=i[0];if(Nb(o))return Rg(o,null);if(Ji(o)&&Object.getPrototypeOf(o)===Object.prototype)return Rg((i=Object.keys(o)).map(function(l){return o[l]}),i)}if(typeof i[i.length-1]=="function"){var s=i.pop();return Rg(i=i.length===1&&Nb(i[0])?i[0]:i,null).pipe(ea(function(l){return s.apply(void 0,l)}))}return Rg(i,null)}function Rg(i,e){return new Y(function(o){var s=i.length;if(s===0)o.complete();else for(var l=Array(s),f=0,h=0,p=function(g){var b=Ob(i[g]),y=!1;o.add(b.subscribe({next:function(w){y||(y=!0,h++),l[g]=w},error:function(w){return o.error(w)},complete:function(){++f!==s&&y||(h===s&&o.next(e?e.reduce(function(w,_,A){return w[_]=l[A],w},{}):l),o.complete())}}))},d=0;d<s;d++)p(d)})}function jb(i,e,o,s){return ze(o)&&(s=o,o=void 0),s?jb(i,e,o).pipe(ea(function(l){return Nb(l)?s.apply(void 0,l):s(l)})):new Y(function(l){nn(i,e,function(f){1<arguments.length?l.next(Array.prototype.slice.call(arguments)):l.next(f)},l,o)})}function nn(i,e,o,s,l){if(i&&typeof i.addEventListener=="function"&&typeof i.removeEventListener=="function"){i.addEventListener(e,o,l);var f=function(){return i.removeEventListener(e,o,l)}}else if(i&&typeof i.on=="function"&&typeof i.off=="function")i.on(e,o),f=function(){return i.off(e,o)};else if(i&&typeof i.addListener=="function"&&typeof i.removeListener=="function")i.addListener(e,o),f=function(){return i.removeListener(e,o)};else{if(!i||!i.length)throw new TypeError("Invalid event target");for(var h=0,p=i.length;h<p;h++)nn(i[h],e,o,s,l)}s.add(f)}function on(i,e,o){return o?on(i,e).pipe(ea(function(s){return Nb(s)?o.apply(void 0,s):o(s)})):new Y(function(s){var l=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];return s.next(h.length===1?h[0]:h)};try{var f=i(l)}catch(h){return void s.error(h)}if(ze(e))return function(){return e(l,f)}})}function Wu(i){var e=i.subscriber,o=i.condition;if(!e.closed){if(i.needIterate)try{i.state=i.iterate(i.state)}catch(f){return void e.error(f)}else i.needIterate=!0;if(o){var s=void 0;try{s=o(i.state)}catch(f){return void e.error(f)}if(!s)return void e.complete();if(e.closed)return}try{var l=i.resultSelector(i.state)}catch(f){return void e.error(f)}if(!e.closed&&(e.next(l),!e.closed))return this.schedule(i)}}function Pi(i){return!Nb(i)&&0<=i-parseFloat(i)+1}function pn(i,e){return i===void 0&&(i=0),e===void 0&&(e=id),(!Pi(i)||0>i)&&(i=0),e&&typeof e.schedule=="function"||(e=id),new Y(function(o){return o.add(e.schedule(Xu,i,{subscriber:o,counter:0,period:i})),o})}function Xu(i){var e=i.subscriber,o=i.counter;i=i.period,e.next(o),this.schedule({subscriber:e,counter:o+1,period:i},i)}function cc(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];e=Number.POSITIVE_INFINITY;var o=null,s=i[i.length-1];return fd(s)?(o=i.pop(),1<i.length&&typeof i[i.length-1]=="number"&&(e=i.pop())):typeof s=="number"&&(e=i.pop()),o===null&&i.length===1&&i[0]instanceof Y?i[0]:Qg(e)(Ff(i,o))}function Qi(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(i.length===0)return yb;var o=i[0],s=i.slice(1);return i.length===1&&Nb(o)?Qi.apply(void 0,o):new Y(function(l){var f=function(){return l.add(Qi.apply(void 0,s).subscribe(l))};return Ob(o).subscribe({next:function(h){l.next(h)},error:f,complete:f})})}function Yu(i){var e=i.keys,o=i.index,s=i.subscriber,l=i.subscription;if(i=i.obj,!s.closed)if(o<e.length){var f=e[o];s.next([f,i[f]]),l.add(this.schedule({keys:e,index:o+1,subscriber:s,subscription:l,obj:i}))}else s.complete()}function Zu(i,e){function o(){return!o.pred.apply(o.thisArg,arguments)}return o.pred=i,o.thisArg=e,o}function zb(i,e){return function(o){return o.lift(new $u(i,e))}}function Da(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];if(i.length===1){if(!Nb(i[0]))return i[0];i=i[0]}return Ff(i,void 0).lift(new av)}function bv(i){var e=i.start,o=i.index,s=i.subscriber;o>=i.count?s.complete():(s.next(e),s.closed||(i.index=o+1,i.start=e+1,this.schedule(i)))}function Kc(i,e,o){i===void 0&&(i=0);var s=-1;return Pi(e)?s=1>Number(e)?1:Number(e):fd(e)&&(o=e),fd(o)||(o=id),new Y(function(l){var f=Pi(i)?i:+i-o.now();return o.schedule(cv,f,{index:0,period:s,subscriber:l})})}function cv(i){var e=i.index,o=i.period,s=i.subscriber;if(s.next(e),!s.closed){if(o===-1)return s.complete();i.index=e+1,this.schedule(i,o)}}function Ri(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return typeof(e=i[i.length-1])=="function"&&i.pop(),Ff(i,void 0).lift(new dv(e))}function Ja(i){return function(e){var o=new ev(i);return e=e.lift(o),o.caught=e}}function Si(i,e){return fb(i,e,1)}function qn(i){return i===void 0&&(i=null),function(e){return e.lift(new fv(i))}}function jd(i,e){e===void 0&&(e=id);var o=i instanceof Date&&!isNaN(+i)?+i-e.now():Math.abs(i);return function(s){return s.lift(new gv(o,e))}}function rn(i,e){return function(o){return o.lift(new hv(i,e))}}function Md(i){return i===void 0&&(i=iv),function(e){return e.lift(new jv(i))}}function iv(){return new Sg}function Pa(i){return function(e){return i===0?Ef():e.lift(new kv(i))}}function sn(i,e){return e?function(o){return o.pipe(sn(function(s,l){return Ob(i(s,l)).pipe(ea(function(f,h){return e(s,f,l,h)}))}))}:function(o){return o.lift(new lv(i))}}function Tg(i){return function(e){return e.lift(new mv(i))}}function aa(i,e){var o=2<=arguments.length;return function(s){return s.pipe(i?zb(function(l,f){return i(l,f,s)}):ed,Pa(1),o?qn(e):Md(function(){return new Sg}))}}function nv(){return function(i){return i.lift(new ov)}}function tn(i){return function(e){return i===0?Ef():e.lift(new pv(i))}}function If(i){return function(e){return e.lift(new qv(i))}}function Ug(i,e){var o=!1;return 2<=arguments.length&&(o=!0),function(s){return s.lift(new rv(i,e,o))}}function un(i,e){return 2<=arguments.length?function(o){return Li(Ug(i,e),tn(1),qn(e))(o)}:function(o){return Li(Ug(function(s,l,f){return i(s,l,f+1)}),tn(1))(o)}}function sv(i,e){return function(o){var s=typeof i=="function"?i:function(){return i};if(typeof e=="function")return o.lift(new tv(s,e));var l=Object.create(o,uv);return l.source=o,l.subjectFactory=s,l}}function Ce(i){return function(e){return e.lift(new vv(i,e))}}function wv(){return new Ua}function De(){return function(i){return bn()(sv(wv)(i))}}function vn(i,e,o){var s=i&&V(i)==="object"?i:{bufferSize:i,windowTime:e,refCount:!1,scheduler:o};return function(l){return l.lift(xv(s))}}function xv(i){var e,o,s=i.bufferSize,l=s===void 0?Number.POSITIVE_INFINITY:s,f=(s=i.windowTime)===void 0?Number.POSITIVE_INFINITY:s,h=i.refCount,p=i.scheduler,d=0,g=!1,b=!1;return function(y){if(d++,!e||g){g=!1;var w=(e=new Ee(l,f,p)).subscribe(this);o=y.subscribe({next:function(_){e.next(_)},error:function(_){g=!0,e.error(_)},complete:function(){b=!0,o=void 0,e.complete()}}),b&&(o=void 0)}else w=e.subscribe(this);this.add(function(){d--,w.unsubscribe(),w=void 0,o&&!b&&h&&d===0&&(o.unsubscribe(),e=o=void 0)})}}function Lc(i,e){return typeof e=="function"?function(o){return o.pipe(Lc(function(s,l){return Ob(i(s,l)).pipe(ea(function(f,h){return e(s,f,l,h)}))}))}:function(o){return o.lift(new yv(i))}}function rb(i){return function(e){return e.lift(new zv(i))}}function Av(i,e){return e===void 0&&(e=!1),function(o){return o.lift(new Bv(i,e))}}function ba(i,e,o){return function(s){return s.lift(new Cv(i,e,o))}}function Dv(i,e,o){return e===void 0&&(e=id),o===void 0&&(o=Ev),function(s){return s.lift(new Fv(i,e,o.leading,o.trailing))}}function Gv(i){i.subscriber.clearThrottle()}function Hv(i,e,o){return o===void 0&&(o=id),function(s){var l=i instanceof Date&&!isNaN(+i),f=l?+i-o.now():Math.abs(i);return s.lift(new Iv(f,l,e,o))}}function kb(i,e){return e===void 0&&(e=id),Hv(i,Z(new sb),e)}function Jv(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(o){var s;return typeof i[i.length-1]=="function"&&(s=i.pop()),o.lift(new Kv(i,s))}}function wn(i){(Ti||i)&&(xn.abort(),i&&(xn=new AbortController),Ti=i)}function yn(i,e,o,s,l){i!==e&&zn(e,function(f,h){if(l||(l=new ue),ob(f)){f=l;var p=Ui(i,h),d=Ui(e,h),g=f.get(d);if(g)Vi(i,h,g);else{var b=(g=s?s(p,d,h+"",i,e,f):void 0)===void 0;if(b){var y=Za(d),w=!y&&Bf(d),_=!y&&!w&&Gi(d);g=d,y||w||_?Za(p)?g=p:oc(p)&&Nd(p)?g=Bi(p):w?(b=!1,g=Lm(d,!0)):_?(b=!1,g=An(d,!0)):g=[]:Bn(d)||Jf(d)?(g=p,Jf(p)?g=Fe(p,Cf(p)):ob(p)&&!Wi(p)||(g=Mm(d))):b=!1}b&&(f.set(d,g),yn(g,d,o,s,f),f.delete(d)),Vi(i,h,g)}}else(p=s?s(Ui(i,h),f,h+"",i,e,l):void 0)===void 0&&(p=f),Vi(i,h,p)},Cf)}function Lv(i){var e=1,o=Xi;(1>=arguments.length?0:arguments.length-1)==1?typeof(1>=arguments.length?void 0:arguments[1])=="number"?e=1>=arguments.length?void 0:arguments[1]:o=1>=arguments.length?void 0:arguments[1]:(1>=arguments.length?0:arguments.length-1)==2&&(e=1>=arguments.length?void 0:arguments[1],o=2>=arguments.length?void 0:arguments[2]);var s=e||1;return function(l){return l.pipe(Ug(function(f,h){var p=o.now(),d=p-i;if((f=f.filter(function(y){return y.until>d})).length>=s){var g=f[f.length-1],b=f[0].until+i*Math.floor(f.length/s);f.push({delay:g.until<p?b-p:b-g.until,until:b,value:h})}else f.push({delay:0,until:p,value:h});return f},[]),ea(function(f){return f[f.length-1]}),Si(function(f){var h=eb(f.value);return f.delay?h.pipe(jd(f.delay,o)):h}))}}function Mv(i,e){var o=(e=e===void 0?{protocols:Cn,makeWebSocket:Dn}:e).protocols,s=o===void 0?Cn:o,l=(e=e.makeWebSocket)===void 0?Dn:e;return new Y(function(f){var h,p=new Ua,d=l(i,s),g=!1,b=!1,y=!1,w=function(_){if(h)throw g=!0,_=Error("Web socket message factory function called more than once"),f.error(_),_;return h=_.subscribe(function(A){d.send(A)}),p};return d.onopen=function(){y=!0,b?(g=!0,d.close()):f.next(w)},d.onmessage=function(_){p.next(_.data)},d.onerror=function(_){g=!0,f.error(Error(_.message))},d.onclose=function(_){g||(g=!0,b?(f.complete(),p.complete()):f.error(Error(_.code===1e3?"Normal closure":_.reason)))},function(){b=!0,h&&h.unsubscribe(),g||(g=!0,y&&d.close())}})}function Vg(){this._listeners={}}function En(i){return typeof Float32Array<"u"?function(){function e(d,g,b){f[0]=d,g[b]=h[0],g[b+1]=h[1],g[b+2]=h[2],g[b+3]=h[3]}function o(d,g,b){f[0]=d,g[b]=h[3],g[b+1]=h[2],g[b+2]=h[1],g[b+3]=h[0]}function s(d,g){return h[0]=d[g],h[1]=d[g+1],h[2]=d[g+2],h[3]=d[g+3],f[0]}function l(d,g){return h[3]=d[g],h[2]=d[g+1],h[1]=d[g+2],h[0]=d[g+3],f[0]}var f=new Float32Array([-0]),h=new Uint8Array(f.buffer),p=h[3]===128;i.writeFloatLE=p?e:o,i.writeFloatBE=p?o:e,i.readFloatLE=p?s:l,i.readFloatBE=p?l:s}():function(){function e(s,l,f,h){var p=0>l?1:0;if(p&&(l=-l),l===0)s(0<1/l?0:2147483648,f,h);else if(isNaN(l))s(2143289344,f,h);else if(34028234663852886e22<l)s((p<<31|2139095040)>>>0,f,h);else if(11754943508222875e-54>l)s((p<<31|Math.round(l/1401298464324817e-60))>>>0,f,h);else{var d=Math.floor(Math.log(l)/Math.LN2);s((p<<31|d+127<<23|8388607&Math.round(l*Math.pow(2,-d)*8388608))>>>0,f,h)}}function o(s,l,f){return f=s(l,f),s=2*(f>>31)+1,l=f>>>23&255,f&=8388607,l===255?f?NaN:1/0*s:l===0?1401298464324817e-60*s*f:s*Math.pow(2,l-150)*(f+8388608)}i.writeFloatLE=e.bind(null,Fn),i.writeFloatBE=e.bind(null,Gn),i.readFloatLE=o.bind(null,Hn),i.readFloatBE=o.bind(null,In)}(),typeof Float64Array<"u"?function(){function e(d,g,b){f[0]=d,g[b]=h[0],g[b+1]=h[1],g[b+2]=h[2],g[b+3]=h[3],g[b+4]=h[4],g[b+5]=h[5],g[b+6]=h[6],g[b+7]=h[7]}function o(d,g,b){f[0]=d,g[b]=h[7],g[b+1]=h[6],g[b+2]=h[5],g[b+3]=h[4],g[b+4]=h[3],g[b+5]=h[2],g[b+6]=h[1],g[b+7]=h[0]}function s(d,g){return h[0]=d[g],h[1]=d[g+1],h[2]=d[g+2],h[3]=d[g+3],h[4]=d[g+4],h[5]=d[g+5],h[6]=d[g+6],h[7]=d[g+7],f[0]}function l(d,g){return h[7]=d[g],h[6]=d[g+1],h[5]=d[g+2],h[4]=d[g+3],h[3]=d[g+4],h[2]=d[g+5],h[1]=d[g+6],h[0]=d[g+7],f[0]}var f=new Float64Array([-0]),h=new Uint8Array(f.buffer),p=h[7]===128;i.writeDoubleLE=p?e:o,i.writeDoubleBE=p?o:e,i.readDoubleLE=p?s:l,i.readDoubleBE=p?l:s}():function(){function e(s,l,f,h,p,d){var g=0>h?1:0;if(g&&(h=-h),h===0)s(0,p,d+l),s(0<1/h?0:2147483648,p,d+f);else if(isNaN(h))s(0,p,d+l),s(2146959360,p,d+f);else if(17976931348623157e292<h)s(0,p,d+l),s((g<<31|2146435072)>>>0,p,d+f);else if(22250738585072014e-324>h)s((h/=5e-324)>>>0,p,d+l),s((g<<31|h/4294967296)>>>0,p,d+f);else{var b=Math.floor(Math.log(h)/Math.LN2);b===1024&&(b=1023),s(4503599627370496*(h*=Math.pow(2,-b))>>>0,p,d+l),s((g<<31|b+1023<<20|1048576*h&1048575)>>>0,p,d+f)}}function o(s,l,f,h,p){return l=s(h,p+l),h=s(h,p+f),s=2*(h>>31)+1,l=4294967296*(1048575&h)+l,(f=h>>>20&2047)===2047?l?NaN:1/0*s:f===0?5e-324*s*l:s*Math.pow(2,f-1075)*(l+4503599627370496)}i.writeDoubleLE=e.bind(null,Fn,0,4),i.writeDoubleBE=e.bind(null,Gn,4,0),i.readDoubleLE=o.bind(null,Hn,0,4),i.readDoubleBE=o.bind(null,In,4,0)}(),i}function Fn(i,e,o){e[o]=255&i,e[o+1]=i>>>8&255,e[o+2]=i>>>16&255,e[o+3]=i>>>24}function Gn(i,e,o){e[o]=i>>>24,e[o+1]=i>>>16&255,e[o+2]=i>>>8&255,e[o+3]=255&i}function Hn(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24)>>>0}function In(i,e){return(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}function $a(i,e){this.lo=i>>>0,this.hi=e>>>0}function Kf(i,e,o){this.fn=i,this.len=e,this.next=void 0,this.val=o}function Yi(){}function Nv(i){this.head=i.head,this.tail=i.tail,this.len=i.len,this.next=i.states}function na(){this.len=0,this.tail=this.head=new Kf(Yi,0,0),this.states=null}function Zi(i,e,o){e[o]=255&i}function $i(i,e){this.len=i,this.next=void 0,this.val=e}function aj(i,e,o){for(;i.hi;)e[o++]=127&i.lo|128,i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;127<i.lo;)e[o++]=127&i.lo|128,i.lo>>>=7;e[o++]=i.lo}function bj(i,e,o){e[o]=255&i,e[o+1]=i>>>8&255,e[o+2]=i>>>16&255,e[o+3]=i>>>24}function rc(){cj.call(this)}function Ov(i,e,o){40>i.length?W.utf8.write(i,e,o):e.utf8Write?e.utf8Write(i,o):e.write(i,o)}function dc(i,e){return RangeError("index out of range: "+i.pos+" + "+(e||1)+" > "+i.len)}function Qa(i){this.buf=i,this.pos=0,this.len=i.length}function dj(){var i=new Jn(0,0),e=0;if(!(4<this.len-this.pos)){for(;3>e;++e){if(this.pos>=this.len)throw dc(this);if(i.lo=(i.lo|(127&this.buf[this.pos])<<7*e)>>>0,128>this.buf[this.pos++])return i}return i.lo=(i.lo|(127&this.buf[this.pos++])<<7*e)>>>0,i}for(;4>e;++e)if(i.lo=(i.lo|(127&this.buf[this.pos])<<7*e)>>>0,128>this.buf[this.pos++])return i;if(i.lo=(i.lo|(127&this.buf[this.pos])<<28)>>>0,i.hi=(i.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return i;if(e=0,4<this.len-this.pos){for(;5>e;++e)if(i.hi=(i.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,128>this.buf[this.pos++])return i}else for(;5>e;++e){if(this.pos>=this.len)throw dc(this);if(i.hi=(i.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,128>this.buf[this.pos++])return i}throw Error("invalid varint encoding")}function Wg(i,e){return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0}function Kn(){if(this.pos+8>this.len)throw dc(this,8);return new Jn(Wg(this.buf,this.pos+=4),Wg(this.buf,this.pos+=4))}function Od(i){ej.call(this,i)}function Lf(i,e,o){if(typeof i!="function")throw TypeError("rpcImpl must be a function");W.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!e,this.responseDelimited=!!o}function Aa(i){return typeof i=="string"&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(i)&&i!=="null"}function Ln(i){try{var e=i.split(".").map(function(s){return Number(s)})}catch{return!1}if(e.length!==4||e[0]===0)return!1;for(i=0;i<e.length;i++){var o=e[i];if(!Number.isInteger(o)||0>o||255<o)return!1}return!0}function Mn(i,e){if(!Array.isArray(e)||e.length===0||32<e.length||e.some(function(o){return o.length===0||32<o.length}))throw new H("arguments is not valid",Oa);if(!Aa(i))throw new H("ID is invalid",Oa)}function Mf(i){var e=i.attributes,o=i.attrSizeMap,s=i.maxAttrsCount,l=i.maxAttrValueSize;if(i=i.maxTotalSize,!Hd(e))throw new H("attributes must be an object",Oa);if(Object.keys(e).length>s)throw new lb("Exceed the limit of ".concat(s," attributes"),Ge);if(Object.keys(e).length===0)throw new H("The attributes is an empty object",Oa);var f=0,h=0;for(e=Object.entries(e);h<e.length;h++){var p=ua(e[h],2),d=p[1];p=new Blob([p[0]]).size;var g=new Blob([d]).size;if(p===0||32<p)throw new H("Invalid attribute key",Oa);if(g>l)throw new lb("Invalid attribute value, over the limit of ".concat(l," bytes"),Ge);if(typeof d!="string"||d.length===0)throw new H("Invalid attribute value",Oa);f+=p,f+=g}if(f>i)throw new lb("The attributes size overflow",Ge);if(o!==void 0){if(Object.keys(o).length>s)throw new lb("Exceed the limit of ".concat(s," attributes"),Ge);for(f=s=0,o=Object.entries(o);f<o.length;f++){if(h=(e=ua(o[f],2))[1],(e=new Blob([e[0]]).size)===0)throw new H("Invalid attribute key",Oa);if(h>l)throw new lb("Invalid attribute value, over the limit of ".concat(l," bytes"),Ge);s+=e,s+=h}if(s>i)throw new lb("The attributes size overflow",Ge)}}function Xg(i,e){return Math.floor(Math.random()*(Math.floor(e)-Math.ceil(i)+1))+i}function Yg(){var i=Xg(0,4294967295),e=Xg(1,4294967295);return new U(i,e,!0)}function ab(i){return i.toString().padEnd(32,"0")}function Nn(i,e){return new TypeError("Unexpected ".concat(i,": ").concat(e))}function On(i,e){return i=i.split(".").map(function(o){return Number(o)}),e=e.split(".").map(function(o){return Number(o)}),Math.sqrt(1e3*Math.pow(i[0]-e[0],2)+100*Math.pow(i[1]-e[1],2)+10*Math.pow(i[2]-e[2],2)+1*Math.pow(i[3]-e[3],2))}function Pn(i){return i.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?i.toNumber():i.toString()}function fj(i,e){e="".concat(i).concat(e||"");var o=Qn.get(e)||1;return Qn.set(e,o+1),"".concat(i).concat(o)}function Rn(i,e){var o=typeof e=="number"?e:e!==void 0&&typeof e!="string"?e.code:void 0;return e=typeof e!="number"&&typeof e!="string"&&e!==void 0&&e.serverCode!==void 0?e.serverCode:void 0,o="".concat(o!==void 0?" Error Code ".concat(o):"").concat(e!==void 0?", server Code ".concat(e):""),i=typeof i=="string"&&i?Zg(i):Array.isArray(i)&&typeof i[0]=="string"&&i[0]?Zg(Sn.apply(void 0,[i[0]].concat(G(i.slice(1))))):"","".concat(o===""?"":"".concat(o," - ")).concat(i)}function gj(i,e){return hj.apply(this,arguments)}function hj(){return(hj=J(x.mark(function i(e,o){return x.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!o||!o.aborted){s.next=2;break}return s.abrupt("return");case 2:return s.abrupt("return",new Promise(function(l){setTimeout(l,e),o==null||o.addEventListener("abort",l)}));case 3:case"end":return s.stop()}},i)}))).apply(this,arguments)}function Tn(i){return i instanceof Blob||Object.prototype.toString.call(i)==="[object Blob]"}function $g(i){var e=255&i,o=i>>8&255,s=i>>16&255;return"".concat(i>>24&255,".").concat(s,".").concat(o,".").concat(e)}function He(i,e,o){return ij.apply(this,arguments)}function ij(){return(ij=J(x.mark(function i(e,o,s){var l,f,h,p,d,g,b,y,w,_,A,k,I,j,F,K,_t,_a,_i,_o,_c,Nf,B,_r,_n,_s;return x.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(l=o.body,f=o.headers,h=f===void 0?{}:f,p=o.timeout,d=p===void 0?1e4:p,g=o.signal,b=o.withCredentials,y=b!==void 0&&b,w=(s||{}).useBinaryResponse,_=w!==void 0&&w,(A=new XMLHttpRequest).open("POST",e,!0),A.responseType=_?"arraybuffer":"text",A.withCredentials=y,A.timeout=d,k=l instanceof FormData,I=l instanceof Uint8Array,!(1<(j=Object.keys(h).filter(function($){return $.toLowerCase()==="content-type"})).length)){q.next=14;break}throw new RangeError("multiple content-type");case 14:j.length===0&&(I?h["Content-Type"]="application/octet-stream":k||(h["Content-Type"]="application/json"));case 15:if("setRequestHeader"in A){q.next=46;break}return A.abort(),q.next=19,fetch(e,{body:k||I?l:JSON.stringify(l),cache:"no-cache",credentials:y?"include":"same-origin",headers:h,method:"POST",mode:"cors",referrer:"no-referrer",signal:g});case 19:if(F=q.sent,!(200<=(K=F.status)&&300>K||K===304)){q.next=31;break}if(!_){q.next=27;break}return q.next=25,F.arrayBuffer();case 25:return _t=q.sent,q.abrupt("return",{status:K,responseData:_t});case 27:return q.next=29,F.text();case 29:return _a=q.sent,q.abrupt("return",{status:K,responseText:_a});case 31:return _i=new da(["Post XHR failure, status %d",K]),q.prev=32,q.next=35,F.text();case 35:throw _o=q.sent,_i.statusCode=K,_i.message=_o||"Request failed, status ".concat(K),_i;case 41:throw q.prev=41,q.t0=q.catch(32),_i.statusCode=K,_i.message="Request failed, status ".concat(K),_i;case 46:if(Object.keys(h).length!==0)for(_c=0,Nf=Object.entries(h);_c<Nf.length;_c++)B=ua(Nf[_c],2),_r=B[0],_n=B[1],A.setRequestHeader(_r,_n);return g!==void 0&&(_s=function $(){A.abort(),g.removeEventListener("abort",$)},g.addEventListener("abort",_s)),k||I?A.send(l):A.send(JSON.stringify(l)),q.abrupt("return",new Promise(function($,_e){A.onload=function(){var ca=A.status;if(200<=ca&&300>ca||ca===304)$(_?{status:ca,responseData:A.response}:{status:ca,responseText:A.responseText});else{var ga=new da(["Post XHR failure, status %d",ca]);ga.statusCode=ca,ga.message=A.response||"Request failed, status ".concat(A.status),_e(ga)}},A.ontimeout=function(ca){_e(new gb(["XHR request timed out after %d ms",d],{originalError:ca}))},A.onerror=function(){var ca=new da(["Post XHR failure, status %d",A.status]);ca.statusCode=A.status,ca.message=A.response||"Request failed, status ".concat(A.status),_e(ca)},A.onabort=function(){try{_e(new DOMException("The request aborted.","AbortError"))}catch{var ca=Error("The request aborted.");ca.name="AbortError",_e(ca)}}}));case 50:case"end":return q.stop()}},i,null,[[32,41]])}))).apply(this,arguments)}function Un(i){return nj.apply(this,arguments)}function nj(){return(nj=J(x.mark(function i(e){var o;return x.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(o=new Image).src=e,s.abrupt("return",new Promise(function(l,f){o.onload=function(){l({width:o.width,height:o.height})},o.onerror=f}));case 3:case"end":return s.stop()}},i)}))).apply(this,arguments)}function Sv(i,e){return oj.apply(this,arguments)}function oj(){return(oj=J(x.mark(function i(e,o){var s,l,f,h,p,d,g,b,y,w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=e.thumbnailHeight,l=s===void 0?0:s,f=e.thumbnailWidth,h=f===void 0?0:f,p=e.width,d=p===void 0?0:p,g=e.height,b=g===void 0?0:g,y=e.thumbnail,w=[],typeof l=="number"&&typeof h=="number"&&typeof d=="number"&&typeof b=="number"){_.next=5;break}throw new H("Invalid message params",Of);case 5:return 0>=d&&0>=b&&w.push(Un(Vn(o)).then(function(A){d=A.width,b=A.height})),0>=h&&0>=l&&y!==void 0&&w.push(pj(y).then(function(){var A=J(x.mark(function k(I){var j;return x.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,Un(Vn(I));case 2:j=F.sent,h=j.width,l=j.height;case 5:case"end":return F.stop()}},k)}));return function(k){return A.apply(this,arguments)}}())),_.next=9,Promise.all(w).catch(function(){});case 9:return _.abrupt("return",{width:d,height:b,thumbnailWidth:h,thumbnailHeight:l});case 10:case"end":return _.stop()}},i)}))).apply(this,arguments)}function Wn(i,e){if(!Hd(i))throw new H("message object is not a plain object",e);if(i.messageType===void 0)if(i.rawMessage instanceof Uint8Array){if(i.messageType="RAW",i.text!==void 0)throw new H("Raw messages cannot have text property. Use description instead",e)}else{if(typeof i.text!="string")throw new H("messageType is undefined",e);if(i.messageType="TEXT",i.rawMessage!==void 0)throw new H("Text messages cannot have rawMessage property",e)}}function dh(i){return qj.apply(this,arguments)}function qj(){return(qj=J(x.mark(function i(e){var o,s,l,f,h,p,d,g,b,y,w,_,A,k,I,j,F,K,_t,_a,_i;return x.wrap(function(_o){for(;;)switch(_o.prev=_o.next){case 0:if(o=e.message,s=e.peerId,l=e.toPeer,f=e.session,h=e.errorCodes,p=e.diff,d=e.logger,g=e.options,f!==void 0){_o.next=3;break}throw new L("The client is not logged in. Cannot do the operation",h.NOT_LOGGED_IN);case 3:if(b=!1,o.messageType!=="TEXT"||!o.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!l){_o.next=11;break}if(y=o.text.split("_"),w=ua(y,3),_=w[0],A=w[1],w[2]!==void 0&&Aa(A)&&_==="AgoraRTMLegacyEndcallCompatibleMessagePrefix"){_o.next=10;break}throw new H("Message is not valid",Ie);case 10:b=!0;case 11:if(k=Date.now(),I=f.messageSentTimes.length-1,!((j=f.messageSentTimes[I])&&j+3e3<k)){_o.next=18;break}f.messageSentTimes=[k],_o.next=29;break;case 18:F=I;case 19:if(!(0<=F)){_o.next=28;break}if(!(f.messageSentTimes[F]+3e3<k)){_o.next=23;break}return f.messageSentTimes=f.messageSentTimes.slice(F+1,I+1),_o.abrupt("break",28);case 23:if(!(180<=I-F+1)){_o.next=25;break}throw new lb("Message sent failed, exceeded the 180 message in 3 seconds",h.TOO_OFTEN);case 25:F--,_o.next=19;break;case 28:f.messageSentTimes.push(k);case 29:_o.t0=o.messageType,_o.next=_o.t0==="TEXT"?32:_o.t0==="RAW"?37:_o.t0==="FILE"||_o.t0==="IMAGE"?39:40;break;case 32:if(!b){_o.next=36;break}return K=o.text.split("_"),_t=ua(K,3),_a=_t[1],_i=_t[2],d.info("[rtm-API] EndCall message send api is called"),_o.abrupt("return",f.sendInvitationMessage({peerId:s,type:"CallCancel",extra:_i,channelId:_a,callId:"0"}));case 36:return _o.abrupt("return",f.sendTextMessage(o.text,s,l,g,1e4-p));case 37:return o.description===void 0&&(o.description=""),_o.abrupt("return",f.sendRawMessage(o.rawMessage,o.description,s,l,g,1e4-p));case 39:return _o.abrupt("return",f.sendMediaMessage(o.messageType,o,s,l,g,1e4-p));case 40:throw new H("Invalid message type",Ie);case 41:case"end":return _o.stop()}},i)}))).apply(this,arguments)}function Tv(i){var e=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],o=i.replace(/(https?:\/\/)?(www.)?/i,"");return e||(o=o.split(".").slice(i.length-2).join(".")),o.indexOf("/")!==-1?o.split("/")[0]:o}function pa(i){if(typeof i!="string")return"[Sensitive Info]";var e=Math.floor(.7*i.length),o=i.length;return Xn(i,e,o,"*".repeat(o-e))}function Yn(i,e,o){function s(l){if(i===void 0)return i;if(Km(l))return l;if(Array.isArray(l))return l.map(s);var f={},h=0;for(l=eh(l);h<l.length;h++){var p=ua(l[h],2),d=p[0];if(typeof(p=p[1])=="string"&&o.includes(d)){f[d]=typeof p=="string"?pa(p):"[Sensitive Info]";break}e.includes(d)?f[d]="[Hidden Info]":f[d]=p==null?p:o.includes(d)?"[Sensitive Info]":s(p)}return f}return Array.isArray(i)?i.map(s):s(i)}function Zn(i){return Object.getOwnPropertyNames(i).forEach(function(e){V(e=i[e])=="object"&&e!==null&&Zn(e)}),Object.freeze(i)}function ra(i){return new TextDecoder("utf-8").decode(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength))}function fh(i){return new TextEncoder().encode(i).length}function $n(){for(var i=0,e=arguments.length,o=Array(e),s=0;s<e;s++)o[s]=arguments[s];for(e=0;e<o.length;e++)i+=o[e].length;for(i=new Uint8Array(i),s=e=0;s<o.length;s++){var l=o[s];i.set(l,e),e+=l.length}return i}function Je(i,e,o){var s=i.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(i=s==null?void 0:s[1],s=s==null?void 0:s[2]){var l;for(s=s.substr(1).split("&"),l=0;l<s.length;l++)if(s[l].split("=")[0]==e){s[l]=e+"="+encodeURIComponent(o);break}return l==s.length&&s.push(e+"="+encodeURIComponent(o)),i+"?"+s.join("&")}return i+"?"+e+"="+encodeURIComponent(o)}function pj(i){return new Promise(function(e,o){var s=new FileReader;s.onloadend=function(){var l=s.result||new ArrayBuffer(0);e(l)},s.onerror=o,s.readAsArrayBuffer(i)})}function Uv(i,e){i=i=[i],typeof(e=e||{})=="string"&&(e={type:e});try{var o=new Blob(i,e)}catch(l){if(l.name!=="TypeError")throw l;o=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder);for(var s=0;s<i.length;s+=1)o.append(i[s]);o=o.getBlob(e.type)}return o}function Xn(i,e,o,s){return typeof i!="string"?"[Sensitive Info]":i.substring(0,e)+s+i.substring(o)}function Pd(i){return typeof i=="string"&&i.length!==0&&i!=="false"&&i!=="null"&&i!=="undefined"}function ao(i){var e=[];return function o(s){if(s===null||V(s)!=="object")return s;if(e.indexOf(s)!==-1)return"[Circular]";if(e.push(s),typeof s.toJSON=="function")try{var l=o(s.toJSON());return e.pop(),l}catch(f){return"[Throws: "+(f?f.message:"?")+"]"}return Array.isArray(s)?(l=s.map(o),e.pop(),l):(l=Object.keys(s).reduce(function(f,h){t:{if(Vv.call(s,h))try{var p=s[h];break t}catch(d){p="[Throws: "+(d?d.message:"?")+"]";break t}p=s[h]}return f[h]=o(p),f},{}),e.pop(),l)}(i)}function Wv(i){if(!(100<(i=String(i)).length)&&(i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i))){var e=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*e;case"weeks":case"week":case"w":return 6048e5*e;case"days":case"day":case"d":return 864e5*e;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*e;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*e;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e}}}function gh(i,e,o,s){return Math.round(i/o)+" "+s+(e>=1.5*o?"s":"")}function Xv(i){var e=i.areas,o=i.excludedArea;if(e.length===1&&e[0]===D.GLOBAL&&o===D.CHINA)return Ke([D.OVERSEA]);if(e.includes(D.GLOBAL)){if(i=Pf(hh).filter(function(f){return f!==D.GLOBAL&&f!==D.OVERSEA}),o in Qf){e=Qf[o];var s=[].concat(G(e??[]),[o]);return Ke(i.filter(function(f){return!s.includes(f)}))}if(bo(o)){var l=Yv(o);return Ke(i.filter(function(f){return f!==o&&f!==l}))}}if(bo(o)||o in Qf)return Ke(e);throw new H("Invalid excludedArea area config")}function Ra(i,e,o){o===void 0&&(o=Object.getOwnPropertyDescriptor(i,e));var s=o.value;return o.value=function(){for(var l=this,f=arguments.length,h=Array(f),p=0;p<f;p++)h[p]=arguments[p];this.invokeTracker.apply(this,["%s: ".concat(0<h.length?"%s with args: ".concat(h.map(function(){return"%o"})):"%s"),this.name,e].concat(G(h.map(Le))));try{var d=s.apply(this,h)}catch(b){throw this.logError.apply(this,["".concat(b.code!==void 0?"Error Code ".concat(b.code,": "):"","%s failed").concat(0<h.length?" with args: ".concat(h.map(function(){return"%o"})):""),e].concat(G(h.map(Le)))),b.originalError&&this.logError(b.originalError),this.errorTracker(b),b}var g=Date.now();return J(x.mark(function b(){var y,w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,d;case 3:y=_.sent,_.next=12;break;case 6:return _.prev=6,_.t0=_.catch(0),l.logError.apply(l,["".concat(_.t0.code!==void 0?"Error Code ".concat(_.t0.code,": "):"","%s failed").concat(0<h.length?" with args: ".concat(h.map(function(){return"%o"})):""),e].concat(G(h.map(Le)))),_.t0.originalError&&l.logError(_.t0.originalError),l.errorTracker(_.t0),_.abrupt("return");case 12:y!==d?y===void 0?l.resultTracker("%s promise resolves after %dms",e,Date.now()-g):l.resultTracker("%s promise resolves after %dms, result is %o",e,Date.now()-g,Le(y)):Jc(y)!=="Object"||Hd(y)?l.resultTracker("%s result is %o",e,Le(y)):l.resultTracker("%s result is %s",e,y.name||((w=y.constructor)===null||w===void 0?void 0:w.name));case 13:case"end":return _.stop()}},b,null,[[0,6]])}))(),d},o}function Qb(i,e,o){o===void 0&&(o=Object.getOwnPropertyDescriptor(i,e));var s=o.value;return o.value=function(){for(var l=this,f=arguments.length,h=Array(f),p=0;p<f;p++)h[p]=arguments[p];this.invokeTracker.apply(this,["%s: ".concat(0<h.length?"%s with args: ".concat(h.map(function(){return"%o"})):"%s"),this.name,e].concat(h));try{var d=s.apply(this,h)}catch(b){throw this.logError.apply(this,["".concat(b.code!==void 0?"Error Code ".concat(b.code,": "):"","%s failed").concat(0<h.length?" with args: ".concat(h.map(function(){return"%o"})):""),e].concat(h)),b.originalError&&this.logError(b.originalError),this.errorTracker(b),b}var g=Date.now();return J(x.mark(function b(){var y,w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,d;case 3:y=_.sent,_.next=12;break;case 6:return _.prev=6,_.t0=_.catch(0),l.logError.apply(l,["".concat(_.t0.code!==void 0?"Error Code ".concat(_.t0.code,": "):"","%s failed").concat(0<h.length?" with args: ".concat(h.map(function(){return"%o"})):""),e].concat(h)),_.t0.originalError&&l.logError(_.t0.originalError),l.errorTracker(_.t0),_.abrupt("return");case 12:y!==d?y===void 0?l.resultTracker("%s promise resolves after %dms",e,Date.now()-g):l.resultTracker("%s promise resolves after %dms, result is %o",e,Date.now()-g,y):Jc(y)!=="Object"||Hd(y)?l.resultTracker("%s result is %o",e,y):l.resultTracker("%s result is %s",e,y.name||((w=y.constructor)===null||w===void 0?void 0:w.name));case 13:case"end":return _.stop()}},b,null,[[0,6]])}))(),d},o}function Zv(i,e){var o="".concat(i,"Uri");if(typeof(o=rj[o])!="number"||o===0)throw new TypeError("Got Unknown URI Name");return e=new(i=co[i])(e),e=i.encode(e).finish(),new $v({uri:o,data:e})}function eo(i,e){var o=Pd(null);return"".concat(i.split(".").join("-"),".edge.").concat(o?null:e?"sd-rtn.com":"agora.io")}function hb(i,e,o){return sj.apply(this,arguments)}function sj(){return(sj=J(x.mark(function i(e,o,s){var l,f,h,p=arguments;return x.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=3<p.length&&p[3]!==void 0&&p[3],f=aw[e].encode(o).finish(),h=function(){var g=J(x.mark(function b(y){var w,_,A,k=arguments;return x.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(3<(_=1<k.length&&k[1]!==void 0?k[1]:0))){I.next=3;break}return I.abrupt("return");case 3:if(A=Je(A=s?"https://".concat((w=P==null?void 0:P.PROXY_NGINX[0])!==null&&w!==void 0?w:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(y,"&p=443&d=events/proto-raw"):"https://".concat(y,"/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),A=Je(A,"id",bw[e].toString()),!l){I.next=9;break}return I.next=9,gj(1e4);case 9:return I.next=11,He(A,{body:f,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch(function(j){return h(y,_+1)});case 11:case"end":return I.stop()}},b)}));return function(b){return g.apply(this,arguments)}}(),d.prev=3,d.next=6,h((P==null?void 0:P.EVENT_REPORT_DOMAIN[0])||Pd(null)&&null||"webcollector-rtm.agora.io");case 6:d.next=12;break;case 8:return d.prev=8,d.t0=d.catch(3),d.next=12,h(P&&fo(1<(P==null?void 0:P.EVENT_REPORT_DOMAIN.length)?P==null?void 0:P.EVENT_REPORT_DOMAIN.slice(1):P==null?void 0:P.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 12:case"end":return d.stop()}},i,null,[[3,8]])}))).apply(this,arguments)}function ib(i){return i===void 0?U.fromNumber(0):U.fromNumber(Date.now()-i)}function cw(i){return btoa(String.fromCharCode.apply({},i.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map(function(e){return parseInt(e,16)}))).replace(/={1,2}$/,"")}function ih(i,e){return U.fromValue(i).eq(e)}function jh(i,e){var o=e===void 0?i.val:e,s=i.isBoolean;e=i.isNumber;var l=i.oneof,f=i.len;if([s,e,l].filter(function(h){return!h}).length!==2)throw new TypeError("invalid field type");if(o!==void 0&&(i=!1,l!==void 0&&(l=tj(l),dw(l,ih).length===l.length&&ew(l,function(h){return ih(o,h)})!==void 0&&(i=!0)),s=s!==void 0&&(o===0||o===1)&&f===1,e=e!==void 0&&o.toString(2).length<=f,!(i||s||e)))throw Error("invalid field value")}function go(i){return i.reduce(function(e,o){return e.concat(o instanceof kh.UnsubscriptionError?o.errors:o)},[])}function fw(i,e){do Rf==2147483647?Rf=0:Rf++;while(Me.hasOwnProperty(Rf));var o=Rf;return Me[o]={callback:i,parameters:Array.prototype.slice.call(arguments,2)},uj.postMessage({name:"setInterval",fakeId:o,time:e}),o}function ho(i){return function(){var e=i();if(!e)throw new L("Client is not logged in. Cannot do the operation");return e}}var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:{},lh=function(i){return i&&i.Math==Math&&i},C=lh(typeof globalThis=="object"&&globalThis)||lh(typeof window=="object"&&window)||lh(typeof self=="object"&&self)||lh(typeof Ka=="object"&&Ka)||function(){return this}()||Function("return this")(),R=function(i){try{return!!i()}catch{return!0}},fa=!R(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),io={}.propertyIsEnumerable,jo=Object.getOwnPropertyDescriptor,Sf=jo&&!io.call({1:2},1)?function(i){return!!(i=jo(this,i))&&i.enumerable}:io,sc=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}},gw={}.toString,ec=function(i){return gw.call(i).slice(8,-1)},hw="".split,Tf=R(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return ec(i)=="String"?hw.call(i,""):Object(i)}:Object,mb=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i},tb=function(i){return Tf(mb(i))},ha=function(i){return typeof i=="object"?i!==null:typeof i=="function"},tc=function(i,e){if(!ha(i))return i;var o,s;if(e&&typeof(o=i.toString)=="function"&&!ha(s=o.call(i))||typeof(o=i.valueOf)=="function"&&!ha(s=o.call(i))||!e&&typeof(o=i.toString)=="function"&&!ha(s=o.call(i)))return s;throw TypeError("Can't convert object to primitive value")},Va=function(i){return Object(mb(i))},iw={}.hasOwnProperty,Q=function(i,e){return iw.call(Va(i),e)},Ne=C.document,mh=ha(Ne)&&ha(Ne.createElement),ko=!fa&&!R(function(){return Object.defineProperty(mh?Ne.createElement("div"):{},"a",{get:function(){return 7}}).a!=7}),lo=Object.getOwnPropertyDescriptor,Jb={f:fa?lo:function(i,e){if(i=tb(i),e=tc(e,!0),ko)try{return lo(i,e)}catch{}if(Q(i,e))return sc(!Sf.call(i,e),i[e])}},sa=function(i){if(!ha(i))throw TypeError(String(i)+" is not an object");return i},mo=Object.defineProperty,Wa={f:fa?mo:function(i,e,o){if(sa(i),e=tc(e,!0),sa(o),ko)try{return mo(i,e,o)}catch{}if("get"in o||"set"in o)throw TypeError("Accessors not supported");return"value"in o&&(i[e]=o.value),i}},Sa=fa?function(i,e,o){return Wa.f(i,e,sc(1,o))}:function(i,e,o){return i[e]=o,i},vj=function(i,e){try{Sa(C,i,e)}catch{C[i]=e}return e},kd=C["__core-js_shared__"]||vj("__core-js_shared__",{}),jw=Function.toString;typeof kd.inspectSource!="function"&&(kd.inspectSource=function(i){return jw.call(i)});var wj=kd.inspectSource,no=C.WeakMap,kw=typeof no=="function"&&/native code/.test(wj(no)),ld=cb(function(i){(i.exports=function(e,o){return kd[e]||(kd[e]=o!==void 0?o:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})}),lw=0,mw=Math.random(),Oe=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++lw+mw).toString(36)},oo=ld("keys"),nh=function(i){return oo[i]||(oo[i]=Oe(i))},Pe={},nw=C.WeakMap;if(kw||kd.state)var Qd=kd.state||(kd.state=new nw),ow=Qd.get,po=Qd.has,pw=Qd.set,xj=function(i,e){if(po.call(Qd,i))throw new TypeError("Object already initialized");return e.facade=i,pw.call(Qd,i,e),e},oh=function(i){return ow.call(Qd,i)||{}},yj=function(i){return po.call(Qd,i)};else{var Qe=nh("state");Pe[Qe]=!0,xj=function(i,e){if(Q(i,Qe))throw new TypeError("Object already initialized");return e.facade=i,Sa(i,Qe,e),e},oh=function(i){return Q(i,Qe)?i[Qe]:{}},yj=function(i){return Q(i,Qe)}}var La={set:xj,get:oh,has:yj,enforce:function(i){return yj(i)?oh(i):xj(i,{})},getterFor:function(i){return function(e){var o;if(!ha(e)||(o=oh(e)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return o}}},Ea=cb(function(i){var e=La.get,o=La.enforce,s=String(String).split("String");(i.exports=function(l,f,h,p){var d=!!p&&!!p.unsafe,g=!!p&&!!p.enumerable;if(p=!!p&&!!p.noTargetGet,typeof h=="function"){typeof f!="string"||Q(h,"name")||Sa(h,"name",f);var b=o(h);b.source||(b.source=s.join(typeof f=="string"?f:""))}l===C?g?l[f]=h:vj(f,h):(d?!p&&l[f]&&(g=!0):delete l[f],g?l[f]=h:Sa(l,f,h))})(Function.prototype,"toString",function(){return typeof this=="function"&&e(this).source||wj(this)})}),qo=function(i){return typeof i=="function"?i:void 0},Rb=function(i,e){return 2>arguments.length?qo(C[i])||qo(C[i]):C[i]&&C[i][e]||C[i]&&C[i][e]},qw=Math.ceil,rw=Math.floor,fc=function(i){return isNaN(i=+i)?0:(0<i?rw:qw)(i)},sw=Math.min,va=function(i){return 0<i?sw(fc(i),9007199254740991):0},tw=Math.max,uw=Math.min,Ab=function(i,e){return 0>(i=fc(i))?tw(i+e,0):uw(i,e)},ro=function(i){return function(e,o,s){e=tb(e);var l=va(e.length);if(s=Ab(s,l),i&&o!=o){for(;l>s;)if((o=e[s++])!=o)return!0}else for(;l>s;s++)if((i||s in e)&&e[s]===o)return i||s||0;return!i&&-1}},so=ro(!0),zj=ro(!1),to=function(i,e){i=tb(i);var o,s=0,l=[];for(o in i)!Q(Pe,o)&&Q(i,o)&&l.push(o);for(;e.length>s;)Q(i,o=e[s++])&&(~zj(l,o)||l.push(o));return l},ph="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),vw=ph.concat("length","prototype"),Rd={f:Object.getOwnPropertyNames||function(i){return to(i,vw)}},Uf={f:Object.getOwnPropertySymbols},uo=Rb("Reflect","ownKeys")||function(i){var e=Rd.f(sa(i)),o=Uf.f;return o?e.concat(o(i)):e},vo=function(i,e){for(var o=uo(e),s=Wa.f,l=Jb.f,f=0;f<o.length;f++){var h=o[f];Q(i,h)||s(i,h,l(e,h))}},ww=/#|\.prototype\./,uc=function(i,e){return(i=xw[yw(i)])==zw||i!=Aw&&(typeof e=="function"?R(e):!!e)},yw=uc.normalize=function(i){return String(i).replace(ww,".").toLowerCase()},xw=uc.data={},Aw=uc.NATIVE="N",zw=uc.POLYFILL="P",Bw=Jb.f,M=function(i,e){var o,s,l,f=i.target,h=i.global,p=i.stat;if(s=h?C:p?C[f]||vj(f,{}):(C[f]||{}).prototype)for(l in e){var d=e[l],g=i.noTargetGet?(o=Bw(s,l))&&o.value:s[l];if(!(o=uc(h?l:f+(p?".":"#")+l,i.forced))&&g!==void 0){if(typeof d==typeof g)continue;vo(d,g)}(i.sham||g&&g.sham)&&Sa(d,"sham",!0);try{Ea(s,l,d,i)}catch{}}},Aj=function(){var i=sa(this),e="";return i.global&&(e+="g"),i.ignoreCase&&(e+="i"),i.multiline&&(e+="m"),i.dotAll&&(e+="s"),i.unicode&&(e+="u"),i.sticky&&(e+="y"),e},vc=R(function(){var i=RegExp("a","y");return i.lastIndex=2,i.exec("abcd")!=null}),Cw=R(function(){var i=RegExp("^r","gy");return i.lastIndex=2,i.exec("str")!=null}),qh=RegExp.prototype.exec,Dw=ld("native-string-replace",String.prototype.replace),wo=qh,Bj=(c=/a/,a=/b*/g,qh.call(c,"a"),qh.call(a,"a"),c.lastIndex!==0||a.lastIndex!==0),xo=vc||Cw,Cj=/()??/.exec("")[1]!==void 0,c,a;(Bj||Cj||xo)&&(wo=function(i){var e,o=xo&&this.sticky,s=Aj.call(this),l=this.source,f=0,h=i;if(o){(s=s.replace("y","")).indexOf("g")===-1&&(s+="g"),h=String(i).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&i[this.lastIndex-1]!==`
`)&&(l="(?: "+l+")",h=" "+h,f++);var p=new RegExp("^(?:"+l+")",s)}if(Cj&&(p=new RegExp("^"+l+"$(?!\\s)",s)),Bj)var d=this.lastIndex;var g=qh.call(o?p:this,h);return o?g?(g.input=g.input.slice(f),g[0]=g[0].slice(f),g.index=this.lastIndex,this.lastIndex+=g[0].length):this.lastIndex=0:Bj&&g&&(this.lastIndex=this.global?g.index+g[0].length:d),Cj&&g&&1<g.length&&Dw.call(g[0],p,function(){for(e=1;e<arguments.length-2;e++)arguments[e]===void 0&&(g[e]=void 0)}),g});var Vf=wo;M({target:"RegExp",proto:!0,forced:/./.exec!==Vf},{exec:Vf});var Re=Rb("navigator","userAgent")||"",yo=C.process,zo=yo&&yo.versions,Ao=zo&&zo.v8;if(Ao)var md=Ao.split("."),Dj=4>md[0]?1:md[0]+md[1];else Re&&(md=Re.match(/Edge\/(\d+)/),(!md||74<=md[1])&&(md=Re.match(/Chrome\/(\d+)/))&&(Dj=md[1]));var nd=Dj&&+Dj,wc=!!Object.getOwnPropertySymbols&&!R(function(){return!String(Symbol())||!Symbol.sham&&nd&&41>nd}),Bo=wc&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Wf=ld("wks"),Xf=C.Symbol,Ew=Bo?Xf:Xf&&Xf.withoutSetter||Oe,qa=function(i){return Q(Wf,i)&&(wc||typeof Wf[i]=="string")||(wc&&Q(Xf,i)?Wf[i]=Xf[i]:Wf[i]=Ew("Symbol."+i)),Wf[i]},Fw=qa("species"),Ej=RegExp.prototype,Gw=!R(function(){var i=/./;return i.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(i,"$<a>")!=="7"}),Co="a".replace(/./,"$0")==="$0",Do=qa("replace"),Eo=!!/./[Do]&&/./[Do]("a","$0")==="",Hw=!R(function(){var i=/(?:)/,e=i.exec;return i.exec=function(){return e.apply(this,arguments)},(i="ab".split(i)).length!==2||i[0]!=="a"||i[1]!=="b"}),rh=function(i,e,o,s){var l=qa(i),f=!R(function(){var g={};return g[l]=function(){return 7},""[i](g)!=7}),h=f&&!R(function(){var g=!1,b=/a/;return i==="split"&&((b={constructor:{}}).constructor[Fw]=function(){return b},b.flags="",b[l]=/./[l]),b.exec=function(){return g=!0,null},b[l](""),!g});if(!f||!h||i==="replace"&&(!Gw||!Co||Eo)||i==="split"&&!Hw){var p=/./[l],d=(o=o(l,""[i],function(g,b,y,w,_){var A=b.exec;return A===Vf||A===Ej.exec?f&&!_?{done:!0,value:p.call(b,y,w)}:{done:!0,value:g.call(y,b,w)}:{done:!1}},{REPLACE_KEEPS_$0:Co,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Eo}))[1];Ea(String.prototype,i,o[0]),Ea(Ej,l,e==2?function(g,b){return d.call(g,this,b)}:function(g){return d.call(g,this)})}s&&Sa(Ej[l],"sham",!0)},Iw=qa("match"),Fj=function(i){var e;return ha(i)&&((e=i[Iw])!==void 0?!!e:ec(i)=="RegExp")},Bb=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i},Jw=qa("species"),od=function(i,e){var o;return(i=sa(i).constructor)===void 0||(o=sa(i)[Jw])==null?e:Bb(o)},Fo=function(i){return function(e,o){e=String(mb(e)),o=fc(o);var s,l=e.length;if(0>o||o>=l)return i?"":void 0;var f=e.charCodeAt(o);return 55296>f||56319<f||o+1===l||56320>(s=e.charCodeAt(o+1))||57343<s?i?e.charAt(o):f:i?e.slice(o,o+2):s-56320+(f-55296<<10)+65536}},Kw=Fo(!1),Go=Fo(!0),Gj=function(i,e,o){return e+(o?Go(i,e).length:1)},Se=function(i,e){var o=i.exec;if(typeof o=="function"){if(typeof(i=o.call(i,e))!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return i}if(ec(i)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return Vf.call(i,e)},Lw=[].push,Mw=Math.min;rh("split",2,function(i,e,o){var s="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(l,f){var h=String(mb(this));if((f=f===void 0?4294967295:f>>>0)===0)return[];if(l===void 0)return[h];if(!Fj(l))return e.call(h,l,f);var p,d,g,b=[],y=0;for(l=new RegExp(l.source,(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(l.sticky?"y":"")+"g");(p=Vf.call(l,h))&&!((d=l.lastIndex)>y&&(b.push(h.slice(y,p.index)),1<p.length&&p.index<h.length&&Lw.apply(b,p.slice(1)),g=p[0].length,y=d,b.length>=f));)l.lastIndex===p.index&&l.lastIndex++;return y===h.length?(g||!l.test(""))&&b.push(""):b.push(h.slice(y)),b.length>f?b.slice(0,f):b}:"0".split(void 0,0).length?function(l,f){return l===void 0&&f===0?[]:e.call(this,l,f)}:e;return[function(l,f){var h=mb(this),p=l==null?void 0:l[i];return p!==void 0?p.call(l,h,f):s.call(String(h),l,f)},function(l,f){var h=o(s,l,this,f,s!==e);if(h.done)return h.value;var p=sa(l);l=String(this);var d=od(p,RegExp);if(h=p.unicode,p=new d(vc?"^(?:"+p.source+")":p,(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(vc?"g":"y")),(f=f===void 0?4294967295:f>>>0)===0)return[];if(l.length===0)return Se(p,l)===null?[l]:[];var g=0,b=0;for(d=[];b<l.length;){p.lastIndex=vc?0:b;var y,w=Se(p,vc?l.slice(b):l);if(w===null||(y=Mw(va(p.lastIndex+(vc?b:0)),l.length))===g)b=Gj(l,b,h);else{if(d.push(l.slice(g,b)),d.length===f)return d;for(g=1;g<=w.length-1;g++)if(d.push(w[g]),d.length===f)return d;b=g=y}}return d.push(l.slice(g)),d}]},vc);var Nw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Ow=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Hj=function(i){return function(e){return e=String(mb(e)),1&i&&(e=e.replace(Nw,"")),2&i&&(e=e.replace(Ow,"")),e}},Ij=Hj(3),sh=C.parseInt,Pw=/^[+-]?0[Xx]/,Ho=sh(`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF08`)!==8||sh(`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF0x16`)!==22?function(i,e){return i=Ij(String(i)),sh(i,e>>>0||(Pw.test(i)?16:10))}:sh;M({global:!0,forced:parseInt!=Ho},{parseInt:Ho});var pd=function(i,e,o){if(Bb(i),e===void 0)return i;switch(o){case 0:return function(){return i.call(e)};case 1:return function(s){return i.call(e,s)};case 2:return function(s,l){return i.call(e,s,l)};case 3:return function(s,l,f){return i.call(e,s,l,f)}}return function(){return i.apply(e,arguments)}},qd=Array.isArray||function(i){return ec(i)=="Array"},Qw=qa("species"),th=function(i,e){if(qd(i)){var o=i.constructor;typeof o!="function"||o!==Array&&!qd(o.prototype)?ha(o)&&(o=o[Qw])===null&&(o=void 0):o=void 0}return new(o===void 0?Array:o)(e===0?0:e)},Io=[].push,rd=function(i){var e=i==1,o=i==2,s=i==3,l=i==4,f=i==6,h=i==7,p=i==5||f;return function(d,g,b,y){var w=Va(d),_=Tf(w);g=pd(g,b,3),b=va(_.length);var A,k=0;for(y=y||th,d=e?y(d,b):o||h?y(d,0):void 0;b>k;k++)if((p||k in _)&&(A=g(y=_[k],k,w),i))if(e)d[k]=A;else if(A)switch(i){case 3:return!0;case 5:return y;case 6:return k;case 2:Io.call(d,y)}else switch(i){case 4:return!1;case 7:Io.call(d,y)}return f?-1:s||l?l:d}},Sd=rd(0),Jo=rd(1),Ko=rd(2),Rw=rd(3),Sw=rd(4),Lo=rd(5),Mo=rd(6),Tw=qa("species"),Yf=function(i){return 51<=nd||!R(function(){var e=[];return(e.constructor={})[Tw]=function(){return{foo:1}},e[i](Boolean).foo!==1})},Uw=Yf("filter");M({target:"Array",proto:!0,forced:!Uw},{filter:function(i){return Ko(this,i,1<arguments.length?arguments[1]:void 0)}});var Mc=Object.keys||function(i){return to(i,ph)},Vw=R(function(){Mc(1)});M({target:"Object",stat:!0,forced:Vw},{keys:function(i){return Mc(Va(i))}});var Te=function(i,e){var o=[][i];return!!o&&R(function(){o.call(null,e||function(){throw 1},1)})},Ww=[].join,Xw=Tf!=Object,Yw=Te("join",",");M({target:"Array",proto:!0,forced:Xw||!Yw},{join:function(i){return Ww.call(tb(this),i===void 0?",":i)}});var Zw=Yf("map");M({target:"Array",proto:!0,forced:!Zw},{map:function(i){return Jo(this,i,1<arguments.length?arguments[1]:void 0)}});var Jj=function(i){var e=i.return;if(e!==void 0)return sa(e.call(i)).value},Ue={},$w=qa("iterator"),ax=Array.prototype,Kj=function(i){return i!==void 0&&(Ue.Array===i||ax[$w]===i)},Ve=function(i,e,o){(e=tc(e))in i?Wa.f(i,e,sc(0,o)):i[e]=o},bx=qa("toStringTag"),No={};No[bx]="z";var Lj=String(No)==="[object z]",cx=qa("toStringTag"),dx=ec(function(){return arguments}())=="Arguments",We=Lj?ec:function(i){var e;if(i===void 0)var o="Undefined";else{if(i===null)var s="Null";else{t:{var l=i=Object(i);try{s=l[cx];break t}catch{}s=void 0}s=typeof(o=s)=="string"?o:dx?ec(i):(e=ec(i))=="Object"&&typeof i.callee=="function"?"Arguments":e}o=s}return o},ex=qa("iterator"),Zf=function(i){if(i!=null)return i[ex]||i["@@iterator"]||Ue[We(i)]},Td=function(i){var e,o=Va(i),s=typeof this=="function"?this:Array,l=arguments.length,f=1<l?arguments[1]:void 0,h=f!==void 0,p=Zf(o),d=0;if(h&&(f=pd(f,2<l?arguments[2]:void 0,2)),p==null||s==Array&&Kj(p)){var g=va(o.length);for(s=new s(g);g>d;d++)p=h?f(o[d],d):o[d],Ve(s,d,p)}else for(l=(o=p.call(o)).next,s=new s;!(e=l.call(o)).done;d++){if(h){p=o;var b=f;e=[e.value,d];try{g=b(sa(e)[0],e[1])}catch(y){throw Jj(p),y}}else g=e.value;Ve(s,d,p=g)}return s.length=d,s},Oo=qa("iterator"),Po=!1;try{var fx=0,Qo={next:function(){return{done:!!fx++}},return:function(){Po=!0}};Qo[Oo]=function(){return this},Array.from(Qo,function(){throw 2})}catch(i){}var uh=function(i,e){if(!e&&!Po)return!1;var o=!1;try{(e={})[Oo]=function(){return{next:function(){return{done:o=!0}}}},i(e)}catch{}return o},gx=!uh(function(i){Array.from(i)});M({target:"Array",stat:!0,forced:gx},{from:Td});var Ro=!R(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype}),So=nh("IE_PROTO"),hx=Object.prototype,ac=Ro?Object.getPrototypeOf:function(i){return i=Va(i),Q(i,So)?i[So]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?hx:null},Mj=qa("iterator"),To=!1,ix=function(){return this},Ud;if([].keys){var Uo=[].keys();if("next"in Uo){var Vo=ac(ac(Uo));Vo!==Object.prototype&&(Ud=Vo)}else To=!0}(Ud==null||R(function(){var i={};return Ud[Mj].call(i)!==i}))&&(Ud={}),Q(Ud,Mj)||Sa(Ud,Mj,ix);var vh=Ud,wh=To,Wo=fa?Object.defineProperties:function(i,e){sa(i);for(var o,s=Mc(e),l=s.length,f=0;l>f;)Wa.f(i,o=s[f++],e[o]);return i},Nj=Rb("document","documentElement"),Xo=nh("IE_PROTO"),Oj=function(){},Pj,xh=function(){try{Pj=document.domain&&new ActiveXObject("htmlfile")}catch{}if(Pj){var i=Pj;i.write("<script><\/script>"),i.close(),i=i.parentWindow.Object}else(i=mh?Ne.createElement("iframe"):{}).style.display="none",Nj.appendChild(i),i.src="javascript:",(i=i.contentWindow.document).open(),i.write("<script>document.F=Object<\/script>"),i.close(),i=i.F;for(xh=i,i=ph.length;i--;)delete xh.prototype[ph[i]];return xh()};Pe[Xo]=!0;var Sb=Object.create||function(i,e){if(i!==null){Oj.prototype=sa(i);var o=new Oj;Oj.prototype=null,o[Xo]=i}else o=xh();return e===void 0?o:Wo(o,e)},jx=Wa.f,Yo=qa("toStringTag"),gc=function(i,e,o){i&&!Q(i=o?i:i.prototype,Yo)&&jx(i,Yo,{configurable:!0,value:e})},kx=function(){return this},Zo=function(i,e,o){return e+=" Iterator",i.prototype=Sb(vh,{next:sc(1,o)}),gc(i,e,!1),Ue[e]=kx,i},Ya=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,e={};try{var o=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;o.call(e,[]),i=e instanceof Array}catch{}return function(s,l){if(sa(s),!ha(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return i?o.call(s,l):s.__proto__=l,s}}():void 0),$f=qa("iterator"),lx=function(){return this},Qj=function(i,e,o,s,l,f,h){Zo(o,e,s),s=function(k){if(k===l&&w)return w;if(!wh&&k in b)return b[k];switch(k){case"keys":case"values":case"entries":return function(){return new o(this,k)}}return function(){return new o(this)}};var p,d=e+" Iterator",g=!1,b=i.prototype,y=b[$f]||b["@@iterator"]||l&&b[l],w=!wh&&y||s(l),_=e=="Array"&&b.entries||y;if(_&&(i=ac(_.call(new i)),vh!==Object.prototype&&i.next&&(ac(i)!==vh&&(Ya?Ya(i,vh):typeof i[$f]!="function"&&Sa(i,$f,lx)),gc(i,d,!0))),l=="values"&&y&&y.name!=="values"&&(g=!0,w=function(){return y.call(this)}),b[$f]!==w&&Sa(b,$f,w),Ue[e]=w,l){var A={values:s("values"),keys:f?w:s("keys"),entries:s("entries")};if(h)for(p in A)!wh&&!g&&p in b||Ea(b,p,A[p]);else M({target:e,proto:!0,forced:wh||g},A)}return A},mx=La.set,nx=La.getterFor("String Iterator");Qj(String,"String",function(i){mx(this,{type:"String Iterator",string:String(i),index:0})},function(){var i=nx(this),e=i.string,o=i.index;return o>=e.length?{value:void 0,done:!0}:(e=Go(e,o),i.index+=e.length,{value:e,done:!1})});var Rj=qa("unscopables"),Sj=Array.prototype;Sj[Rj]==null&&Wa.f(Sj,Rj,{configurable:!0,value:Sb(null)});var Vd=function(i){Sj[Rj][i]=!0},$o=!0;"find"in[]&&Array(1).find(function(){$o=!1}),M({target:"Array",proto:!0,forced:$o},{find:function(i){return Lo(this,i,1<arguments.length?arguments[1]:void 0)}}),Vd("find");var ap=function(i){var e=String(mb(this)),o="";if(0>(i=fc(i))||1/0==i)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(e+=e))1&i&&(o+=e);return o};M({target:"String",proto:!0},{repeat:ap});var bp=[].indexOf,cp=!!bp&&0>1/[1].indexOf(1,-0),ox=Te("indexOf");M({target:"Array",proto:!0,forced:cp||!ox},{indexOf:function(i){return cp?bp.apply(this,arguments)||0:zj(this,i,1<arguments.length?arguments[1]:void 0)}});var iu=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,ju=/CrOS/,ku=/android|ipad|playbook|silk/i;pe.isMobile=pe,pe.default=pe,M({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),M({target:"Number",stat:!0},{isNaN:function(i){return i!=i}}),C.Number.isNaN;var px=Lj?{}.toString:function(){return"[object "+We(this)+"]"};Lj||Ea(Object.prototype,"toString",px,{unsafe:!0});var Nc=C.Promise,Xe=function(i,e,o){for(var s in e)Ea(i,s,e[s],o);return i},dp=qa("species"),ag=function(i){i=Rb(i);var e=Wa.f;fa&&i&&!i[dp]&&e(i,dp,{configurable:!0,get:function(){return this}})},hc=function(i,e,o){if(!(i instanceof e))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return i},bg=function(i,e){this.stopped=i,this.result=e},yh=function(i,e,o){var s,l=!(!o||!o.AS_ENTRIES),f=!(!o||!o.IS_ITERATOR),h=!(!o||!o.INTERRUPTED),p=pd(e,o&&o.that,1+l+h),d=function(b){return g&&Jj(g),new bg(!0,b)};if(e=function(b){return l?(sa(b),h?p(b[0],b[1],d):p(b[0],b[1])):h?p(b,d):p(b)},f)var g=i;else{if(typeof(f=Zf(i))!="function")throw TypeError("Target is not iterable");if(Kj(f)){for(f=0,o=va(i.length);o>f;f++)if((s=e(i[f]))&&s instanceof bg)return s;return new bg(!1)}g=f.call(i)}for(i=g.next;!(f=i.call(g)).done;){try{s=e(f.value)}catch(b){throw Jj(g),b}if(typeof s=="object"&&s&&s instanceof bg)return s}return new bg(!1)},ep=/(?:iphone|ipod|ipad).*applewebkit/i.test(Re),Oc=ec(C.process)=="process",zh=C.location,Tj=C.setImmediate,fp=C.clearImmediate,qx=C.process,gp=C.MessageChannel,Uj=C.Dispatch,Vj=0,cg={},Wj=function(i){if(cg.hasOwnProperty(i)){var e=cg[i];delete cg[i],e()}},Xj=function(i){return function(){Wj(i)}},hp=function(i){Wj(i.data)},ip=function(i){C.postMessage(i+"",zh.protocol+"//"+zh.host)};if(!Tj||!fp)if(Tj=function(i){for(var e=[],o=1;arguments.length>o;)e.push(arguments[o++]);return cg[++Vj]=function(){(typeof i=="function"?i:Function(i)).apply(void 0,e)},dg(Vj),Vj},fp=function(i){delete cg[i]},Oc)var dg=function(i){qx.nextTick(Xj(i))};else if(Uj&&Uj.now)dg=function(i){Uj.now(Xj(i))};else if(gp&&!ep){var jp=new gp,kp=jp.port2;jp.port1.onmessage=hp,dg=pd(kp.postMessage,kp,1)}else C.addEventListener&&typeof postMessage=="function"&&!C.importScripts&&zh&&zh.protocol!=="file:"&&!R(ip)?(dg=ip,C.addEventListener("message",hp,!1)):dg="onreadystatechange"in(mh?Ne.createElement("script"):{})?function(i){Nj.appendChild(mh?Ne.createElement("script"):{}).onreadystatechange=function(){Nj.removeChild(this),Wj(i)}}:function(i){setTimeout(Xj(i),0)};var Yj=Tj,rx=/web0s(?!.*chrome)/i.test(Re),sx=Jb.f,lp=C.MutationObserver||C.WebKitMutationObserver,mp=C.document,np=C.process,Ah=C.Promise,op=sx(C,"queueMicrotask"),pp=op&&op.value,Wd,eg;if(!pp){var Ch=function(){var i;for(Oc&&(i=np.domain)&&i.exit();Wd;){var e=Wd.fn;Wd=Wd.next;try{e()}catch(o){throw Wd?Bh():eg=void 0,o}}eg=void 0,i&&i.enter()};if(ep||Oc||rx||!lp||!mp)if(Ah&&Ah.resolve){var Zj=Ah.resolve(void 0);Zj.constructor=Ah;var tx=Zj.then,Bh=function(){tx.call(Zj,Ch)}}else Bh=Oc?function(){np.nextTick(Ch)}:function(){Yj.call(C,Ch)};else{var qp=!0,rp=mp.createTextNode("");new lp(Ch).observe(rp,{characterData:!0}),Bh=function(){rp.data=qp=!qp}}}var sp=pp||function(i){i={fn:i,next:void 0},eg&&(eg.next=i),Wd||(Wd=i,Bh()),eg=i},ux=function(i){var e,o;this.promise=new i(function(s,l){if(e!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");e=s,o=l}),this.resolve=Bb(e),this.reject=Bb(o)},ak={f:function(i){return new ux(i)}},bk=function(i,e){return sa(i),ha(e)&&e.constructor===i?e:((0,(i=ak.f(i)).resolve)(e),i.promise)},vx=function(i,e){var o=C.console;o&&o.error&&(arguments.length===1?o.error(i):o.error(i,e))},ck=function(i){try{return{error:!1,value:i()}}catch(e){return{error:!0,value:e}}},wx=typeof window=="object",xx=qa("species"),tp=La.get,yx=La.set,zx=La.getterFor("Promise"),Xd=Nc&&Nc.prototype,Cb=Nc,Dh=Xd,up=C.TypeError,dk=C.document,ek=C.process,Ye=ak.f,Ax=Ye,Bx=!!(dk&&dk.createEvent&&C.dispatchEvent),vp=typeof PromiseRejectionEvent=="function",wp=!1,fg=uc("Promise",function(){var i=wj(Cb)!==String(Cb);if(!i&&nd===66)return!0;if(51<=nd&&/native code/.test(Cb))return!1;var e=new Cb(function(s){s(1)}),o=function(s){s(function(){},function(){})};return(e.constructor={})[xx]=o,!(wp=e.then(function(){})instanceof o)||!i&&wx&&!vp}),Cx=fg||!uh(function(i){Cb.all(i).catch(function(){})}),xp=function(i){var e;return!(!ha(i)||typeof(e=i.then)!="function")&&e},fk=function(i,e){if(!i.notified){i.notified=!0;var o=i.reactions;sp(function(){for(var s=i.value,l=i.state==1,f=0;o.length>f;){var h,p=o[f++],d=l?p.ok:p.fail,g=p.resolve,b=p.reject,y=p.domain;try{if(d){if(l||(i.rejection===2&&Dx(i),i.rejection=1),d===!0)var w=s;else if(y&&y.enter(),w=d(s),y){y.exit();var _=!0}w===p.promise?b(up("Promise-chain cycle")):(h=xp(w))?h.call(w,g,b):g(w)}else b(s)}catch(A){y&&!_&&y.exit(),b(A)}}i.reactions=[],i.notified=!1,e&&!i.rejection&&Ex(i)})}},yp=function(i,e,o){var s;if(Bx){var l=dk.createEvent("Event");l.promise=e,l.reason=o,l.initEvent(i,!1,!0),C.dispatchEvent(l)}else l={promise:e,reason:o};!vp&&(s=C["on"+i])?s(l):i==="unhandledrejection"&&vx("Unhandled promise rejection",o)},Ex=function(i){Yj.call(C,function(){var e=i.facade,o=i.value;if(i.rejection!==1&&!i.parent){var s=ck(function(){Oc?ek.emit("unhandledRejection",o,e):yp("unhandledrejection",e,o)});if(i.rejection=Oc||i.rejection!==1&&!i.parent?2:1,s.error)throw s.value}})},Dx=function(i){Yj.call(C,function(){var e=i.facade;Oc?ek.emit("rejectionHandled",e):yp("rejectionhandled",e,i.value)})},Ze=function(i,e,o){return function(s){i(e,s,o)}},$e=function(i,e,o){i.done||(i.done=!0,o&&(i=o),i.value=e,i.state=2,fk(i,!0))},gk=function(i,e,o){if(!i.done){i.done=!0,o&&(i=o);try{if(i.facade===e)throw up("Promise can't be resolved itself");var s=xp(e);s?sp(function(){var l={done:!1};try{s.call(e,Ze(gk,l,i),Ze($e,l,i))}catch(f){$e(l,f,i)}}):(i.value=e,i.state=1,fk(i,!1))}catch(l){$e({done:!1},l,i)}}};if(fg){Cb=function(i){hc(this,Cb,"Promise"),Bb(i),hk.call(this);var e=tp(this);try{i(Ze(gk,e),Ze($e,e))}catch(o){$e(e,o)}},Dh=Cb.prototype;var hk=function(i){yx(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};hk.prototype=Xe(Dh,{then:function(i,e){var o=zx(this),s=Ye(od(this,Cb));return s.ok=typeof i!="function"||i,s.fail=typeof e=="function"&&e,s.domain=Oc?ek.domain:void 0,o.parent=!0,o.reactions.push(s),o.state!=0&&fk(o,!1),s.promise},catch:function(i){return this.then(void 0,i)}});var Fx=function(){var i=new hk,e=tp(i);this.promise=i,this.resolve=Ze(gk,e),this.reject=Ze($e,e)};if(ak.f=Ye=function(i){return i===Cb||i===Gx?new Fx(i):Ax(i)},typeof Nc=="function"&&Xd!==Object.prototype){var Hx=Xd.then;wp||(Ea(Xd,"then",function(i,e){var o=this;return new Cb(function(s,l){Hx.call(o,s,l)}).then(i,e)},{unsafe:!0}),Ea(Xd,"catch",Dh.catch,{unsafe:!0}));try{delete Xd.constructor}catch{}Ya&&Ya(Xd,Dh)}}M({global:!0,wrap:!0,forced:fg},{Promise:Cb}),gc(Cb,"Promise",!1),ag("Promise");var Gx=Rb("Promise");M({target:"Promise",stat:!0,forced:fg},{reject:function(i){var e=Ye(this);return e.reject.call(void 0,i),e.promise}}),M({target:"Promise",stat:!0,forced:fg},{resolve:function(i){return bk(this,i)}}),M({target:"Promise",stat:!0,forced:Cx},{all:function(i){var e=this,o=Ye(e),s=o.resolve,l=o.reject,f=ck(function(){var h=Bb(e.resolve),p=[],d=0,g=1;yh(i,function(b){var y=d++,w=!1;p.push(void 0),g++,h.call(e,b).then(function(_){w||(w=!0,p[y]=_,--g||s(p))},l)}),--g||s(p)});return f.error&&l(f.value),o.promise},race:function(i){var e=this,o=Ye(e),s=o.reject,l=ck(function(){var f=Bb(e.resolve);yh(i,function(h){f.call(e,h).then(o.resolve,s)})});return l.error&&s(l.value),o.promise}});var Ix=Math.floor,Jx="".replace,Kx=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Lx=/\$([$&'`]|\d{1,2})/g,Mx=function(i,e,o,s,l,f){var h=o+i.length,p=s.length,d=Lx;return l!==void 0&&(l=Va(l),d=Kx),Jx.call(f,d,function(g,b){switch(b.charAt(0)){case"$":return"$";case"&":return i;case"`":return e.slice(0,o);case"'":return e.slice(h);case"<":g=l[b.slice(1,-1)];break;default:var y=+b;if(y===0)return g;if(y>p)return(y=Ix(y/10))===0?g:y<=p?s[y-1]===void 0?b.charAt(1):s[y-1]+b.charAt(1):g;g=s[y-1]}return g===void 0?"":g})},Nx=Math.max,Ox=Math.min,Px=function(i){return i===void 0?i:String(i)};rh("replace",2,function(i,e,o,s){var l=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=s.REPLACE_KEEPS_$0,h=l?"$":"$0";return[function(p,d){var g=mb(this),b=p==null?void 0:p[i];return b!==void 0?b.call(p,g,d):e.call(String(g),p,d)},function(p,d){if(!l&&f||typeof d=="string"&&d.indexOf(h)===-1){var g=o(e,p,this,d);if(g.done)return g.value}var b=sa(p);p=String(this),(g=typeof d=="function")||(d=String(d));var y=b.global;if(y){var w=b.unicode;b.lastIndex=0}for(var _=[];;){var A=Se(b,p);if(A===null||(_.push(A),!y))break;String(A[0])===""&&(b.lastIndex=Gj(p,va(b.lastIndex),w))}for(w="",y=b=0;y<_.length;y++){A=_[y];for(var k=String(A[0]),I=Nx(Ox(fc(A.index),p.length),0),j=[],F=1;F<A.length;F++)j.push(Px(A[F]));A=A.groups,g?(j=[k].concat(j,I,p),A!==void 0&&j.push(A),A=String(d.apply(void 0,j))):A=Mx(k,p,I,j,A,d),I>=b&&(w+=p.slice(b,I)+A,b=I+k.length)}return w+p.slice(b)}]});var Qx=Yf("slice"),Rx=qa("species"),Sx=[].slice,Tx=Math.max;M({target:"Array",proto:!0,forced:!Qx},{slice:function(i,e){var o=tb(this),s=va(o.length);if(i=Ab(i,s),e=Ab(e===void 0?s:e,s),qd(o)){var l=o.constructor;if(typeof l!="function"||l!==Array&&!qd(l.prototype)?ha(l)&&(l=l[Rx])===null&&(l=void 0):l=void 0,l===Array||l===void 0)return Sx.call(o,i,e)}for(l=new(l===void 0?Array:l)(Tx(e-i,0)),s=0;i<e;i++,s++)i in o&&Ve(l,s,o[i]);return l.length=s,l}});var Ux=La.set,Vx=La.getterFor("Array Iterator"),sd=Qj(Array,"Array",function(i,e){Ux(this,{type:"Array Iterator",target:tb(i),index:0,kind:e})},function(){var i=Vx(this),e=i.target,o=i.kind,s=i.index++;return!e||s>=e.length?(i.target=void 0,{value:void 0,done:!0}):o=="keys"?{value:s,done:!1}:o=="values"?{value:e[s],done:!1}:{value:[s,e[s]],done:!1}},"values");Ue.Arguments=Ue.Array,Vd("keys"),Vd("values"),Vd("entries");var zp=typeof ArrayBuffer<"u"&&typeof DataView<"u",af=function(i){if(i===void 0)return 0;i=fc(i);var e=va(i);if(i!==e)throw RangeError("Wrong length or index");return e},Wx=Math.abs,Pc=Math.pow,Xx=Math.floor,Yx=Math.log,Zx=Math.LN2,ik=function(i){var e=Va(this),o=va(e.length),s=arguments.length,l=Ab(1<s?arguments[1]:void 0,o);for(o=(s=2<s?arguments[2]:void 0)===void 0?o:Ab(s,o);o>l;)e[l++]=i;return e},$x=Rd.f,ay=Wa.f,bf=La.get,Ap=La.set,ic=C.ArrayBuffer,Db=ic,jc=C.DataView,Eh=jc&&jc.prototype,Bp=Object.prototype,Fh=C.RangeError,Cp=function(i,e,o){var s,l=Array(o),f=(1<<(o=8*o-e-1))-1,h=f>>1,p=e===23?Pc(2,-24)-Pc(2,-77):0,d=0>i||i===0&&0>1/i?1:0,g=0;if((i=Wx(i))!=i||1/0===i){i=i!=i?1:0;var b=f}else b=Xx(Yx(i)/Zx),1>i*(s=Pc(2,-b))&&(b--,s*=2),2<=(i=1<=b+h?i+p/s:i+p*Pc(2,1-h))*s&&(b++,s/=2),b+h>=f?(i=0,b=f):1<=b+h?(i=(i*s-1)*Pc(2,e),b+=h):(i=i*Pc(2,h-1)*Pc(2,e),b=0);for(;8<=e;l[g++]=255&i,i/=256,e-=8);for(b=b<<e|i,o+=e;0<o;l[g++]=255&b,b/=256,o-=8);return l[--g]|=128*d,l},Dp=function(i,e){var o=i.length,s=8*o-e-1,l=(1<<s)-1,f=l>>1;s-=7,--o;var h=i[o--],p=127&h;for(h>>=7;0<s;p=256*p+i[o],o--,s-=8);var d=p&(1<<-s)-1;for(p>>=-s,s+=e;0<s;d=256*d+i[o],o--,s-=8);if(p===0)p=1-f;else{if(p===l)return d?NaN:h?-1/0:1/0;d+=Pc(2,e),p-=f}return(h?-1:1)*d*Pc(2,p-e)},Ep=function(i){return[255&i]},Fp=function(i){return[255&i,i>>8&255]},Gp=function(i){return[255&i,i>>8&255,i>>16&255,i>>24&255]},Hp=function(i){return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},by=function(i){return Cp(i,23,4)},cy=function(i){return Cp(i,52,8)},Gh=function(i,e){ay(i.prototype,e,{get:function(){return bf(this)[e]}})},td=function(i,e,o,s){o=af(o);var l=bf(i);if(o+e>l.byteLength)throw Fh("Wrong index");return i=bf(l.buffer).bytes,o+=l.byteOffset,e=i.slice(o,o+e),s?e:e.reverse()},ud=function(i,e,o,s,l,f){o=af(o);var h=bf(i);if(o+e>h.byteLength)throw Fh("Wrong index");for(i=bf(h.buffer).bytes,o+=h.byteOffset,s=s(+l),l=0;l<e;l++)i[o+l]=s[f?l:e-l-1]};if(zp){if(!R(function(){ic(1)})||!R(function(){new ic(-1)})||R(function(){return new ic,new ic(1.5),new ic(NaN),ic.name!="ArrayBuffer"})){Db=function(i){return hc(this,Db),new ic(af(i))};for(var dy=Db.prototype=ic.prototype,Ip=$x(ic),Jp=0,jk;Ip.length>Jp;)(jk=Ip[Jp++])in Db||Sa(Db,jk,ic[jk]);dy.constructor=Db}Ya&&ac(Eh)!==Bp&&Ya(Eh,Bp);var Hh=new jc(new Db(2)),Kp=Eh.setInt8;Hh.setInt8(0,2147483648),Hh.setInt8(1,2147483649),!Hh.getInt8(0)&&Hh.getInt8(1)||Xe(Eh,{setInt8:function(i,e){Kp.call(this,i,e<<24>>24)},setUint8:function(i,e){Kp.call(this,i,e<<24>>24)}},{unsafe:!0})}else Db=function(i){hc(this,Db,"ArrayBuffer"),i=af(i),Ap(this,{bytes:ik.call(Array(i),0),byteLength:i}),fa||(this.byteLength=i)},jc=function(i,e,o){hc(this,jc,"DataView"),hc(i,Db,"DataView");var s=bf(i).byteLength;if(0>(e=fc(e))||e>s)throw Fh("Wrong offset");if(e+(o=o===void 0?s-e:va(o))>s)throw Fh("Wrong length");Ap(this,{buffer:i,byteLength:o,byteOffset:e}),fa||(this.buffer=i,this.byteLength=o,this.byteOffset=e)},fa&&(Gh(Db,"byteLength"),Gh(jc,"buffer"),Gh(jc,"byteLength"),Gh(jc,"byteOffset")),Xe(jc.prototype,{getInt8:function(i){return td(this,1,i)[0]<<24>>24},getUint8:function(i){return td(this,1,i)[0]},getInt16:function(i){var e=td(this,2,i,1<arguments.length?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(i){var e=td(this,2,i,1<arguments.length?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(i){return Hp(td(this,4,i,1<arguments.length?arguments[1]:void 0))},getUint32:function(i){return Hp(td(this,4,i,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(i){return Dp(td(this,4,i,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(i){return Dp(td(this,8,i,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(i,e){ud(this,1,i,Ep,e)},setUint8:function(i,e){ud(this,1,i,Ep,e)},setInt16:function(i,e){ud(this,2,i,Fp,e,2<arguments.length?arguments[2]:void 0)},setUint16:function(i,e){ud(this,2,i,Fp,e,2<arguments.length?arguments[2]:void 0)},setInt32:function(i,e){ud(this,4,i,Gp,e,2<arguments.length?arguments[2]:void 0)},setUint32:function(i,e){ud(this,4,i,Gp,e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(i,e){ud(this,4,i,by,e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(i,e){ud(this,8,i,cy,e,2<arguments.length?arguments[2]:void 0)}});gc(Db,"ArrayBuffer"),gc(jc,"DataView");var gg={ArrayBuffer:Db,DataView:jc},kk=gg.ArrayBuffer,Lp=gg.DataView,Mp=kk.prototype.slice,ey=R(function(){return!new kk(2).slice(1,void 0).byteLength});M({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:ey},{slice:function(i,e){if(Mp!==void 0&&e===void 0)return Mp.call(sa(this),i);var o=sa(this).byteLength;i=Ab(i,o),e=Ab(e===void 0?o:e,o),o=new(od(this,kk))(va(e-i));for(var s=new Lp(this),l=new Lp(o),f=0;i<e;)l.setUint8(f++,s.getUint8(i++));return o}});var fy=Wa.f,Ih=C.Int8Array,lk=Ih&&Ih.prototype,Np=C.Uint8ClampedArray,Op=Np&&Np.prototype,xc=Ih&&ac(Ih),kc=lk&&ac(lk),Pp=Object.prototype,Qp=Pp.isPrototypeOf,Rp=qa("toStringTag"),mk=Oe("TYPED_ARRAY_TAG"),Qc=zp&&!!Ya&&We(C.opera)!=="Opera",Sp=!1,Eb,yc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},gy={BigInt64Array:8,BigUint64Array:8},Jh=function(i){return!!ha(i)&&(i=We(i),Q(yc,i)||Q(gy,i))};for(Eb in yc)C[Eb]||(Qc=!1);if((!Qc||typeof xc!="function"||xc===Function.prototype)&&(xc=function(){throw TypeError("Incorrect invocation")},Qc))for(Eb in yc)C[Eb]&&Ya(C[Eb],xc);if((!Qc||!kc||kc===Pp)&&(kc=xc.prototype,Qc))for(Eb in yc)C[Eb]&&Ya(C[Eb].prototype,kc);if(Qc&&ac(Op)!==kc&&Ya(Op,kc),fa&&!Q(kc,Rp))for(Eb in Sp=!0,fy(kc,Rp,{get:function(){return ha(this)?this[mk]:void 0}}),yc)C[Eb]&&Sa(C[Eb],mk,Eb);var hg=Qc,Tp=Sp&&mk,Fa=function(i){if(Jh(i))return i;throw TypeError("Target is not a typed array")},cf=function(i){if(Ya){if(Qp.call(xc,i))return i}else for(var e in yc)if(Q(yc,Eb)){var o=C[e];if(o&&(i===o||Qp.call(o,i)))return i}throw TypeError("Target is not a typed array constructor")},Ba=function(i,e,o){if(fa){if(o)for(var s in yc){var l=C[s];if(l&&Q(l.prototype,i))try{delete l.prototype[i]}catch{}}kc[i]&&!o||Ea(kc,i,o?e:Qc&&lk[i]||e)}},Up=function(i,e,o){var s,l;if(fa){if(Ya){if(o){for(s in yc)if((l=C[s])&&Q(l,i))try{delete l[i]}catch{}}if(xc[i]&&!o)return;try{return Ea(xc,i,o?e:Qc&&xc[i]||e)}catch{}}for(s in yc)!(l=C[s])||l[i]&&!o||Ea(l,i,e)}},Vp=xc,ig=kc,hy=C.ArrayBuffer,Yd=C.Int8Array,nk=!hg||!R(function(){Yd(1)})||!R(function(){new Yd(-1)})||!uh(function(i){new Yd,new Yd(null),new Yd(1.5),new Yd(i)},!0)||R(function(){return new Yd(new hy(2),1,void 0).length!==1}),Kh=function(i,e){if(0>(i=fc(i)))throw RangeError("The argument can't be less than 0");if(i%e)throw RangeError("Wrong offset");return i},ok=function(i){var e=Va(i),o=arguments.length,s=1<o?arguments[1]:void 0,l=s!==void 0,f=Zf(e);if(f!=null&&!Kj(f)){var h=f.call(e),p=h.next;for(e=[];!(f=p.call(h)).done;)e.push(f.value)}for(l&&2<o&&(s=pd(s,arguments[2],2)),f=va(e.length),h=new(cf(this))(f),o=0;f>o;o++)h[o]=l?s(e[o],o):e[o];return h},Lh=function(i,e,o){var s,l;return Ya&&typeof(s=e.constructor)=="function"&&s!==o&&ha(l=s.prototype)&&l!==o.prototype&&Ya(i,l),i},jg=cb(function(i){var e=Rd.f,o=La.get,s=La.set,l=Wa.f,f=Jb.f,h=Math.round,p=C.RangeError,d=gg.ArrayBuffer,g=gg.DataView,b=function(I,j){var F=0,K=j.length;for(I=new(cf(I))(K);K>F;)I[F]=j[F++];return I},y=function(I,j){l(I,j,{get:function(){return o(this)[j]}})},w=function(I){var j;return I instanceof d||(j=We(I))=="ArrayBuffer"||j=="SharedArrayBuffer"},_=function(I,j){return Jh(I)&&typeof j!="symbol"&&j in I&&String(+j)==String(j)},A=function(I,j){return _(I,j=tc(j,!0))?sc(2,I[j]):f(I,j)},k=function(I,j,F){return!(_(I,j=tc(j,!0))&&ha(F)&&Q(F,"value"))||Q(F,"get")||Q(F,"set")||F.configurable||Q(F,"writable")&&!F.writable||Q(F,"enumerable")&&!F.enumerable?l(I,j,F):(I[j]=F.value,I)};fa?(hg||(Jb.f=A,Wa.f=k,y(ig,"buffer"),y(ig,"byteOffset"),y(ig,"byteLength"),y(ig,"length")),M({target:"Object",stat:!0,forced:!hg},{getOwnPropertyDescriptor:A,defineProperty:k}),i.exports=function(I,j,F){var K=I.match(/\d+$/)[0]/8,_t=I+(F?"Clamped":"")+"Array",_a="get"+I,_i="set"+I,_o=C[_t],_c=_o;I=_c&&_c.prototype;var Nf={},B=function(_r,_n){l(_r,_n,{get:function(){var _s=o(this);return _s.view[_a](_n*K+_s.byteOffset,!0)},set:function(_s){var q=o(this);F&&(_s=0>(_s=h(_s))?0:255<_s?255:255&_s),q.view[_i](_n*K+q.byteOffset,_s,!0)},enumerable:!0})};hg?nk&&(_c=j(function(_r,_n,_s,q){return hc(_r,_c,_t),Lh(ha(_n)?w(_n)?q!==void 0?new _o(_n,Kh(_s,K),q):_s!==void 0?new _o(_n,Kh(_s,K)):new _o(_n):Jh(_n)?b(_c,_n):ok.call(_c,_n):new _o(af(_n)),_r,_c)}),Ya&&Ya(_c,Vp),Sd(e(_o),function(_r){_r in _c||Sa(_c,_r,_o[_r])}),_c.prototype=I):(_c=j(function(_r,_n,_s,q){hc(_r,_c,_t);var $=0,_e=0;if(ha(_n)){if(!w(_n))return Jh(_n)?b(_c,_n):ok.call(_c,_n);var ca=_n;if(_e=Kh(_s,K),_n=_n.byteLength,q===void 0){if(_n%K||0>(q=_n-_e))throw p("Wrong length")}else if((q=va(q)*K)+_e>_n)throw p("Wrong length");_n=q/K}else _n=af(_n),ca=new d(q=_n*K);for(s(_r,{buffer:ca,byteOffset:_e,byteLength:q,length:_n,view:new g(ca)});$<_n;)B(_r,$++)}),Ya&&Ya(_c,Vp),I=_c.prototype=Sb(ig)),I.constructor!==_c&&Sa(I,"constructor",_c),Tp&&Sa(I,Tp,_t),Nf[_t]=_c,M({global:!0,forced:_c!=_o,sham:!hg},Nf),"BYTES_PER_ELEMENT"in _c||Sa(_c,"BYTES_PER_ELEMENT",K),"BYTES_PER_ELEMENT"in I||Sa(I,"BYTES_PER_ELEMENT",K),ag(_t)}):i.exports=function(){}});jg("Uint8",function(i){return function(e,o,s){return i(this,e,o,s)}});var iy=Math.min,jy=[].copyWithin||function(i,e){var o=Va(this),s=va(o.length),l=Ab(i,s),f=Ab(e,s),h=2<arguments.length?arguments[2]:void 0;for(s=iy((h===void 0?s:Ab(h,s))-f,s-l),h=1,f<l&&l<f+s&&(h=-1,f+=s-1,l+=s-1);0<s--;)f in o?o[l]=o[f]:delete o[l],l+=h,f+=h;return o};Ba("copyWithin",function(i,e){return jy.call(Fa(this),i,e,2<arguments.length?arguments[2]:void 0)}),Ba("every",function(i){return Sw(Fa(this),i,1<arguments.length?arguments[1]:void 0)}),Ba("fill",function(i){return ik.apply(Fa(this),arguments)}),Ba("filter",function(i){var e=Ko(Fa(this),i,1<arguments.length?arguments[1]:void 0),o=od(this,this.constructor),s=0,l=e.length;for(o=new(cf(o))(l);l>s;)o[s]=e[s++];return o}),Ba("find",function(i){return Lo(Fa(this),i,1<arguments.length?arguments[1]:void 0)}),Ba("findIndex",function(i){return Mo(Fa(this),i,1<arguments.length?arguments[1]:void 0)}),Ba("forEach",function(i){Sd(Fa(this),i,1<arguments.length?arguments[1]:void 0)}),Ba("includes",function(i){return so(Fa(this),i,1<arguments.length?arguments[1]:void 0)}),Ba("indexOf",function(i){return zj(Fa(this),i,1<arguments.length?arguments[1]:void 0)});var Wp=qa("iterator"),Xp=C.Uint8Array,ky=sd.values,ly=sd.keys,my=sd.entries,pk=Xp&&Xp.prototype[Wp],Yp=!!pk&&(pk.name=="values"||pk.name==null),Zp=function(){return ky.call(Fa(this))};Ba("entries",function(){return my.call(Fa(this))}),Ba("keys",function(){return ly.call(Fa(this))}),Ba("values",Zp,!Yp),Ba(Wp,Zp,!Yp);var ny=[].join;Ba("join",function(i){return ny.apply(Fa(this),arguments)});var oy=Math.min,qk=[].lastIndexOf,$p=!!qk&&0>1/[1].lastIndexOf(1,-0),py=Te("lastIndexOf"),qy=$p||!py?function(i){if($p)return qk.apply(this,arguments)||0;var e=tb(this),o=va(e.length),s=o-1;for(1<arguments.length&&(s=oy(s,fc(arguments[1]))),0>s&&(s=o+s);0<=s;s--)if(s in e&&e[s]===i)return s||0;return-1}:qk;Ba("lastIndexOf",function(i){return qy.apply(Fa(this),arguments)}),Ba("map",function(i){return Jo(Fa(this),i,1<arguments.length?arguments[1]:void 0,function(e,o){return new(cf(od(e,e.constructor)))(o)})});var aq=function(i){return function(e,o,s,l){Bb(o),e=Va(e);var f=Tf(e),h=va(e.length),p=i?h-1:0,d=i?-1:1;if(2>s)for(;;){if(p in f){l=f[p],p+=d;break}if(p+=d,i?0>p:h<=p)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=p:h>p;p+=d)p in f&&(l=o(l,f[p],p,e));return l}},bq=aq(!1),ry=aq(!0);Ba("reduce",function(i){return bq(Fa(this),i,arguments.length,1<arguments.length?arguments[1]:void 0)}),Ba("reduceRight",function(i){return ry(Fa(this),i,arguments.length,1<arguments.length?arguments[1]:void 0)});var sy=Math.floor;Ba("reverse",function(){for(var i,e=Fa(this).length,o=sy(e/2),s=0;s<o;)i=this[s],this[s++]=this[--e],this[e]=i;return this});var ty=R(function(){new Int8Array(1).set({})});Ba("set",function(i){Fa(this);var e=Kh(1<arguments.length?arguments[1]:void 0,1),o=this.length,s=Va(i),l=va(s.length),f=0;if(l+e>o)throw RangeError("Wrong length");for(;f<l;)this[e+f]=s[f++]},ty);var uy=[].slice,vy=R(function(){new Int8Array(1).slice()});Ba("slice",function(i,e){i=uy.call(Fa(this),i,e);var o=od(this,this.constructor);e=0;var s=i.length;for(o=new(cf(o))(s);s>e;)o[e]=i[e++];return o},vy),Ba("some",function(i){return Rw(Fa(this),i,1<arguments.length?arguments[1]:void 0)});var wy=[].sort;Ba("sort",function(i){return wy.call(Fa(this),i)}),Ba("subarray",function(i,e){var o=Fa(this),s=o.length;return i=Ab(i,s),new(od(o,o.constructor))(o.buffer,o.byteOffset+i*o.BYTES_PER_ELEMENT,va((e===void 0?s:Ab(e,s))-i))});var Mh=C.Int8Array,cq=[].toLocaleString,xy=[].slice,yy=!!Mh&&R(function(){cq.call(new Mh(1))}),zy=R(function(){return[1,2].toLocaleString()!=new Mh([1,2]).toLocaleString()})||!R(function(){Mh.prototype.toLocaleString.call([1,2])});Ba("toLocaleString",function(){return cq.apply(yy?xy.call(Fa(this)):Fa(this),arguments)},zy);var dq=C.Uint8Array,Ay=dq&&dq.prototype||{},Nh=[].toString,By=[].join;R(function(){Nh.call({})})&&(Nh=function(){return By.call(this)}),Ba("toString",Nh,Ay.toString!=Nh);var eq=gg.ArrayBuffer;M({global:!0,forced:C.ArrayBuffer!==eq},{ArrayBuffer:eq}),ag("ArrayBuffer");var Cy=Wa.f,rk=Function.prototype,Dy=rk.toString,Ey=/^\s*function ([^ (]*)/;!fa||"name"in rk||Cy(rk,"name",{configurable:!0,get:function(){try{return Dy.call(this).match(Ey)[1]}catch{return""}}});var fq=RegExp.prototype,gq=fq.toString,Fy=R(function(){return gq.call({source:"a",flags:"b"})!="/a/b"}),Gy=gq.name!="toString";(Fy||Gy)&&Ea(RegExp.prototype,"toString",function(){var i=sa(this),e=String(i.source),o=i.flags;return"/"+e+"/"+(i=String(o===void 0&&i instanceof RegExp&&!("flags"in fq)?Aj.call(i):o))},{unsafe:!0});var Hy=Yf("splice"),Iy=Math.max,Jy=Math.min;M({target:"Array",proto:!0,forced:!Hy},{splice:function(i,e){var o,s,l=Va(this),f=va(l.length),h=Ab(i,f),p=arguments.length;if(p===0?p=o=0:p===1?(p=0,o=f-h):(p-=2,o=Jy(Iy(fc(e),0),f-h)),9007199254740991<f+p-o)throw TypeError("Maximum allowed length exceeded");var d=th(l,o);for(s=0;s<o;s++){var g=h+s;g in l&&Ve(d,s,l[g])}if(d.length=o,p<o){for(s=h;s<f-o;s++){var b=s+p;(g=s+o)in l?l[b]=l[g]:delete l[b]}for(s=f;s>f-o+p;s--)delete l[s-1]}else if(p>o)for(s=f-o;s>h;s--)b=s+p-1,(g=s+o-1)in l?l[b]=l[g]:delete l[b];for(s=0;s<p;s++)l[s+h]=arguments[s+2];return l.length=f-o+p,d}});var sk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},tk=qa("iterator"),hq=qa("toStringTag"),uk=sd.values,Oh;for(Oh in sk){var iq=C[Oh],Rc=iq&&iq.prototype;if(Rc){if(Rc[tk]!==uk)try{Sa(Rc,tk,uk)}catch{Rc[tk]=uk}if(Rc[hq]||Sa(Rc,hq,Oh),sk[Oh]){for(var df in sd)if(Rc[df]!==sd[df])try{Sa(Rc,df,sd[df])}catch{Rc[df]=sd[df]}}}}var jq=Object.is||function(i,e){return i===e?i!==0||1/i==1/e:i!=i&&e!=e};rh("search",1,function(i,e,o){return[function(s){var l=mb(this),f=s==null?void 0:s[i];return f!==void 0?f.call(s,l):new RegExp(s)[i](String(l))},function(s){var l=o(e,s,this);if(l.done)return l.value;s=sa(s);var f=String(this);return l=s.lastIndex,jq(l,0)||(s.lastIndex=0),f=Se(s,f),jq(s.lastIndex,l)||(s.lastIndex=l),f===null?-1:f.index}]}),cb(function(i){(function(e,o){i.exports?i.exports=o(e):o(e)})(typeof self<"u"?self:Ka,function(e){function o(B){return btoa(B).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(B){return B=(B+="===").slice(0,-B.length%4),atob(B.replace(/-/g,"+").replace(/_/g,"/"))}function l(B){for(var _r=new Uint8Array(B.length),_n=0;_n<B.length;_n++)_r[_n]=B.charCodeAt(_n);return _r}function f(B){return B instanceof ArrayBuffer&&(B=new Uint8Array(B)),String.fromCharCode.apply(String,B)}function h(B){var _r={name:(B.name||B||"").toUpperCase().replace("V","v")};switch(_r.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":B.length&&(_r.length=B.length);break;case"HMAC":B.hash&&(_r.hash=h(B.hash)),B.length&&(_r.length=B.length);break;case"RSAES-PKCS1-v1_5":B.publicExponent&&(_r.publicExponent=new Uint8Array(B.publicExponent)),B.modulusLength&&(_r.modulusLength=B.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":B.hash&&(_r.hash=h(B.hash)),B.publicExponent&&(_r.publicExponent=new Uint8Array(B.publicExponent)),B.modulusLength&&(_r.modulusLength=B.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return _r}function p(B){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[B.name][(B.hash||{}).name||B.length||""]}function d(B){(B instanceof ArrayBuffer||B instanceof Uint8Array)&&(B=JSON.parse(decodeURIComponent(escape(f(B)))));var _r={kty:B.kty,alg:B.alg,ext:B.ext||B.extractable};switch(_r.kty){case"oct":_r.k=B.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach(function(_n){_n in B&&(_r[_n]=B[_n])});break;default:throw new TypeError("Unsupported key type")}return _r}function g(B){return B=d(B),_a&&(B.extractable=B.ext,delete B.ext),l(unescape(encodeURIComponent(JSON.stringify(B)))).buffer}function b(B){var _r=y(B),_n=!1;switch(2<_r.length&&(_n=!0,_r.shift()),B={ext:!0},_r[0][0]){case"1.2.840.113549.1.1.1":var _s="n e d p q dp dq qi".split(" ");for(_r=y(_r[1]),_n&&_r.shift(),_n=0;_n<_r.length;_n++)_r[_n][0]||(_r[_n]=_r[_n].subarray(1)),B[_s[_n]]=o(f(_r[_n]));B.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return B}function y(B,_r){if(B instanceof ArrayBuffer&&(B=new Uint8Array(B)),_r||(_r={pos:0,end:B.length}),2>_r.end-_r.pos||_r.end>B.length)throw new RangeError("Malformed DER");var _n=B[_r.pos++],_s=B[_r.pos++];if(128<=_s){if(_s&=127,_r.end-_r.pos<_s)throw new RangeError("Malformed DER");for(var q=0;_s--;)q<<=8,q|=B[_r.pos++];_s=q}if(_r.end-_r.pos<_s)throw new RangeError("Malformed DER");switch(_n){case 2:_n=B.subarray(_r.pos,_r.pos+=_s);break;case 3:if(B[_r.pos++])throw Error("Unsupported bit string");_s--;case 4:_n=new Uint8Array(B.subarray(_r.pos,_r.pos+=_s)).buffer;break;case 5:_n=null;break;case 6:if(!((B=btoa(f(B.subarray(_r.pos,_r.pos+=_s))))in _o))throw Error("Unsupported OBJECT ID "+B);_n=_o[B];break;case 48:for(_n=[],_s=_r.pos+_s;_r.pos<_s;)_n.push(y(B,_r));break;default:throw Error("Unsupported DER tag 0x"+_n.toString(16))}return _n}function w(B,_r){_r||(_r=[]);var _n=_r.length+2;if(_r.push(0,0),B instanceof Uint8Array)for(var _s=2,q=B.length,$=0;$<q;$++)_r.push(B[$]);else if(B instanceof ArrayBuffer)for(_s=4,q=B.byteLength,B=new Uint8Array(B),$=0;$<q;$++)_r.push(B[$]);else if(B===null)_s=5,q=0;else if(typeof B=="string"&&B in _c)for(_s=6,q=(B=l(atob(_c[B]))).length,$=0;$<q;$++)_r.push(B[$]);else if(B instanceof Array){for($=0;$<B.length;$++)w(B[$],_r);_s=48,q=_r.length-_n}else{if(!(V(B)==="object"&&B.tag===3&&B.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+B);for(_s=3,q=(B=new Uint8Array(B.value)).byteLength,_r.push(0),$=0;$<q;$++)_r.push(B[$]);q++}if(128<=q){for($=q,q=4,_r.splice(_n,0,$>>24&255,$>>16&255,$>>8&255,255&$);1<q&&!($>>24);)$<<=8,q--;4>q&&_r.splice(_n,4-q),q|=128}return _r.splice(_n-2,2,_s,q),_r}function _(B,_r,_n,_s){Object.defineProperties(this,{_key:{value:B},type:{value:B.type,enumerable:!0},extractable:{value:_n===void 0?B.extractable:_n,enumerable:!0},algorithm:{value:_r===void 0?B.algorithm:_r,enumerable:!0},usages:{value:_s===void 0?B.usages:_s,enumerable:!0}})}function A(B){return B==="verify"||B==="encrypt"||B==="wrapKey"}function k(B){return B==="sign"||B==="decrypt"||B==="unwrapKey"}if(typeof Promise!="function")throw"Promise support required";var I=e.crypto||e.msCrypto;if(I){var j=I.subtle||I.webkitSubtle;if(j){var F=e.Crypto||I.constructor||Object,K=e.SubtleCrypto||j.constructor||Object;e.CryptoKey||e.Key;var _t=-1<e.navigator.userAgent.indexOf("Edge/"),_a=!!e.msCrypto&&!_t,_i=!I.subtle&&!!I.webkitSubtle;if(_a||_i){var _o={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},_c={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach(function(B){var _r=j[B];j[B]=function(_n,_s,q){var $=[].slice.call(arguments);switch(B){case"generateKey":var _e=h(_n),ca=_s,ga=q;break;case"importKey":_e=h(q),ca=$[3],ga=$[4],_n==="jwk"&&((_s=d(_s)).alg||(_s.alg=p(_e)),_s.key_ops||(_s.key_ops=_s.kty!=="oct"?"d"in _s?ga.filter(k):ga.filter(A):ga.slice()),$[1]=g(_s));break;case"unwrapKey":_e=$[4],ca=$[5],ga=$[6],$[2]=q._key}if(B==="generateKey"&&_e.name==="HMAC"&&_e.hash)return _e.length=_e.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[_e.hash.name],j.importKey("raw",I.getRandomValues(new Uint8Array(_e.length+7>>3)),_e,ca,ga);if(_i&&B==="generateKey"&&_e.name==="RSASSA-PKCS1-v1_5"&&(!_e.modulusLength||2048<=_e.modulusLength))return(_n=h(_n)).name="RSAES-PKCS1-v1_5",delete _n.hash,j.generateKey(_n,!0,["encrypt","decrypt"]).then(function(_u){return Promise.all([j.exportKey("jwk",_u.publicKey),j.exportKey("jwk",_u.privateKey)])}).then(function(_u){return _u[0].alg=_u[1].alg=p(_e),_u[0].key_ops=ga.filter(A),_u[1].key_ops=ga.filter(k),Promise.all([j.importKey("jwk",_u[0],_e,!0,_u[0].key_ops),j.importKey("jwk",_u[1],_e,ca,_u[1].key_ops)])}).then(function(_u){return{publicKey:_u[0],privateKey:_u[1]}});if((_i||_a&&(_e.hash||{}).name==="SHA-1")&&B==="importKey"&&_n==="jwk"&&_e.name==="HMAC"&&_s.kty==="oct")return j.importKey("raw",l(s(_s.k)),q,$[3],$[4]);if(_i&&B==="importKey"&&(_n==="spki"||_n==="pkcs8"))return j.importKey("jwk",b(_s),q,$[3],$[4]);if(_a&&B==="unwrapKey")return j.decrypt($[3],q,_s).then(function(_u){return j.importKey(_n,_u,$[4],$[5],$[6])});try{var _f=_r.apply(j,$)}catch(_u){return Promise.reject(_u)}return _a&&(_f=new Promise(function(_u,ah){_f.onabort=_f.onerror=function(_l){ah(_l)},_f.oncomplete=function(_l){_u(_l.target.result)}})),_f=_f.then(function(_u){return _e.name!=="HMAC"||_e.length||(_e.length=8*_u.algorithm.length),_e.name.search("RSA")==0&&(_e.modulusLength||(_e.modulusLength=(_u.publicKey||_u).algorithm.modulusLength),_e.publicExponent||(_e.publicExponent=(_u.publicKey||_u).algorithm.publicExponent)),_u.publicKey&&_u.privateKey?{publicKey:new _(_u.publicKey,_e,ca,ga.filter(A)),privateKey:new _(_u.privateKey,_e,ca,ga.filter(k))}:new _(_u,_e,ca,ga)})}}),["exportKey","wrapKey"].forEach(function(B){var _r=j[B];j[B]=function(_n,_s,q){var $=[].slice.call(arguments);switch(B){case"exportKey":$[1]=_s._key;break;case"wrapKey":$[1]=_s._key,$[2]=q._key}if((_i||_a&&(_s.algorithm.hash||{}).name==="SHA-1")&&B==="exportKey"&&_n==="jwk"&&_s.algorithm.name==="HMAC"&&($[0]="raw"),!_i||B!=="exportKey"||_n!=="spki"&&_n!=="pkcs8"||($[0]="jwk"),_a&&B==="wrapKey")return j.exportKey(_n,_s).then(function(ca){return _n==="jwk"&&(ca=l(unescape(encodeURIComponent(JSON.stringify(d(ca)))))),j.encrypt($[3],q,ca)});try{var _e=_r.apply(j,$)}catch(ca){return Promise.reject(ca)}return _a&&(_e=new Promise(function(ca,ga){_e.onabort=_e.onerror=function(_f){ga(_f)},_e.oncomplete=function(_f){ca(_f.target.result)}})),B==="exportKey"&&_n==="jwk"&&(_e=_e.then(function(ca){return(_i||_a&&(_s.algorithm.hash||{}).name==="SHA-1")&&_s.algorithm.name==="HMAC"?{kty:"oct",alg:p(_s.algorithm),key_ops:_s.usages.slice(),ext:!0,k:o(f(ca))}:((ca=d(ca)).alg||(ca.alg=p(_s.algorithm)),ca.key_ops||(ca.key_ops=_s.type==="public"?_s.usages.filter(A):_s.type==="private"?_s.usages.filter(k):_s.usages.slice()),ca)})),!_i||B!=="exportKey"||_n!=="spki"&&_n!=="pkcs8"||(_e=_e.then(function(ca){var ga=[["",null]],_f=!1;switch((ca=d(ca)).kty){case"RSA":for(var _u="n e d p q dp dq qi".split(" "),ah=[],_l=0;_l<_u.length&&_u[_l]in ca;_l++){var ch=ah[_l]=l(s(ca[_u[_l]]));128&ch[0]&&(ah[_l]=new Uint8Array(ch.length+1),ah[_l].set(ch,1))}2<ah.length&&(_f=!0,ah.unshift(new Uint8Array([0]))),ga[0][0]="1.2.840.113549.1.1.1";break;default:throw new TypeError("Unsupported key type")}return ga.push(new Uint8Array(w(ah)).buffer),_f?ga.unshift(new Uint8Array([0])):ga[1]={tag:3,value:ga[1]},new Uint8Array(w(ga)).buffer})),_e}}),["encrypt","decrypt","sign","verify"].forEach(function(B){var _r=j[B];j[B]=function(_n,_s,q,$){if(_a&&(!q.byteLength||$&&!$.byteLength))throw Error("Empty input is not allowed");var _e=[].slice.call(arguments),ca=h(_n);if(!_a||B!=="sign"&&B!=="verify"||_n!=="RSASSA-PKCS1-v1_5"&&_n!=="HMAC"||(_e[0]={name:_n}),_a&&_s.algorithm.hash&&(_e[0].hash=_e[0].hash||_s.algorithm.hash),_a&&B==="decrypt"&&ca.name==="AES-GCM"){var ga=_n.tagLength>>3;_e[2]=(q.buffer||q).slice(0,q.byteLength-ga),_n.tag=(q.buffer||q).slice(q.byteLength-ga)}_a&&ca.name==="AES-GCM"&&_e[0].tagLength===void 0&&(_e[0].tagLength=128),_e[1]=_s._key;try{var _f=_r.apply(j,_e)}catch(_u){return Promise.reject(_u)}return _a&&(_f=new Promise(function(_u,ah){_f.onabort=_f.onerror=function(_l){ah(_l)},_f.oncomplete=function(_l){if(_l=_l.target.result,B==="encrypt"&&_l instanceof AesGcmEncryptResult){var ch=_l.ciphertext,_p=_l.tag;(_l=new Uint8Array(ch.byteLength+_p.byteLength)).set(new Uint8Array(ch),0),_l.set(new Uint8Array(_p),ch.byteLength),_l=_l.buffer}_u(_l)}})),_f}}),_a){var Nf=j.digest;j.digest=function(B,_r){if(!_r.byteLength)throw Error("Empty input is not allowed");try{var _n=Nf.call(j,B,_r)}catch(_s){return Promise.reject(_s)}return _n=new Promise(function(_s,q){_n.onabort=_n.onerror=function($){q($)},_n.oncomplete=function($){_s($.target.result)}})},e.crypto=Object.create(I,{getRandomValues:{value:function(B){return I.getRandomValues(B)}},subtle:{value:j}}),e.CryptoKey=_}_i&&(I.subtle=j,e.Crypto=F,e.SubtleCrypto=K,e.CryptoKey=_)}}}})}),function(i){i.console||(i.console={}),i=i.console;for(var e,o=function(){},s=["memory"],l="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");e=s.pop();)i[e]||(i[e]={});for(;e=l.pop();)i[e]||(i[e]=o)}(typeof window>"u"?Ka:window),M({target:"Object",stat:!0},{setPrototypeOf:Ya});var Ky=R(function(){ac(1)});M({target:"Object",stat:!0,forced:Ky,sham:!Ro},{getPrototypeOf:function(i){return ac(Va(i))}});var kq=[].slice,vk={},Ly=Function.bind||function(i){var e=Bb(this),o=kq.call(arguments,1),s=function(){var l=o.concat(kq.call(arguments));if(this instanceof s){var f=l.length;if(!(f in vk)){for(var h=[],p=0;p<f;p++)h[p]="a["+p+"]";vk[f]=Function("C,a","return new C("+h.join(",")+")")}l=vk[f](e,l)}else l=e.apply(i,l);return l};return ha(e.prototype)&&(s.prototype=e.prototype),s},wk=Rb("Reflect","construct"),lq=R(function(){function i(){}return!(wk(function(){},[],i)instanceof i)}),mq=!R(function(){wk(function(){})}),nq=lq||mq;M({target:"Reflect",stat:!0,forced:nq,sham:nq},{construct:function(i,e){Bb(i),sa(e);var o=3>arguments.length?i:Bb(arguments[2]);if(mq&&!lq)return wk(i,e,o);if(i==o){switch(e.length){case 0:return new i;case 1:return new i(e[0]);case 2:return new i(e[0],e[1]);case 3:return new i(e[0],e[1],e[2]);case 4:return new i(e[0],e[1],e[2],e[3])}return(o=[null]).push.apply(o,e),new(Ly.apply(i,o))}o=o.prototype,o=Sb(ha(o)?o:Object.prototype);var s=Function.apply.call(i,o,e);return ha(s)?s:o}}),M({target:"Reflect",stat:!0},{get:ym});var oq=Jb.f,My=R(function(){oq(1)});M({target:"Object",stat:!0,forced:!fa||My,sham:!fa},{getOwnPropertyDescriptor:function(i,e){return oq(tb(i),e)}});var pq=Rd.f,Ny={}.toString,qq=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],xk=function(i){if(qq&&Ny.call(i)=="[object Window]")try{var e=pq(i)}catch{e=qq.slice()}else e=pq(tb(i));return e},rq={f:qa},Oy=Wa.f,Ph=function(i){var e=C.Symbol||(C.Symbol={});Q(e,i)||Oy(e,i,{value:rq.f(i)})},ub=nh("hidden"),sq=qa("toPrimitive"),Py=La.set,tq=La.getterFor("Symbol"),Tb=Object.prototype,vb=C.Symbol,kg=Rb("JSON","stringify"),uq=Jb.f,vd=Wa.f,vq=xk,Qy=Sf,Sc=ld("symbols"),lg=ld("op-symbols"),yk=ld("string-to-symbol-registry"),zk=ld("symbol-to-string-registry"),Ry=ld("wks"),Ak=C.QObject,Bk=!Ak||!Ak.prototype||!Ak.prototype.findChild,Ck=fa&&R(function(){return Sb(vd({},"a",{get:function(){return vd(this,"a",{value:7}).a}})).a!=7})?function(i,e,o){var s=uq(Tb,e);s&&delete Tb[e],vd(i,e,o),s&&i!==Tb&&vd(Tb,e,s)}:vd,Dk=function(i,e){var o=Sc[i]=Sb(vb.prototype);return Py(o,{type:"Symbol",tag:i,description:e}),fa||(o.description=e),o},Ek=Bo?function(i){return typeof i=="symbol"}:function(i){return Object(i)instanceof vb},Qh=function(i,e,o){return i===Tb&&Qh(lg,e,o),sa(i),e=tc(e,!0),sa(o),Q(Sc,e)?(o.enumerable?(Q(i,ub)&&i[ub][e]&&(i[ub][e]=!1),o=Sb(o,{enumerable:sc(0,!1)})):(Q(i,ub)||vd(i,ub,sc(1,{})),i[ub][e]=!0),Ck(i,e,o)):vd(i,e,o)},wq=function(i,e){sa(i);var o=tb(e);return e=Mc(o).concat(Fk(o)),Sd(e,function(s){fa&&!Gk.call(o,s)||Qh(i,s,o[s])}),i},Gk=function(i){i=tc(i,!0);var e=Qy.call(this,i);return!(this===Tb&&Q(Sc,i)&&!Q(lg,i))&&(!(e||!Q(this,i)||!Q(Sc,i)||Q(this,ub)&&this[ub][i])||e)},xq=function(i,e){if(i=tb(i),e=tc(e,!0),i!==Tb||!Q(Sc,e)||Q(lg,e)){var o=uq(i,e);return!o||!Q(Sc,e)||Q(i,ub)&&i[ub][e]||(o.enumerable=!0),o}},yq=function(i){i=vq(tb(i));var e=[];return Sd(i,function(o){Q(Sc,o)||Q(Pe,o)||e.push(o)}),e},Fk=function(i){var e=i===Tb;i=vq(e?lg:tb(i));var o=[];return Sd(i,function(s){!Q(Sc,s)||e&&!Q(Tb,s)||o.push(Sc[s])}),o};if(wc||(vb=function(){if(this instanceof vb)throw TypeError("Symbol is not a constructor");var i=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,e=Oe(i),o=function(s){this===Tb&&o.call(lg,s),Q(this,ub)&&Q(this[ub],e)&&(this[ub][e]=!1),Ck(this,e,sc(1,s))};return fa&&Bk&&Ck(Tb,e,{configurable:!0,set:o}),Dk(e,i)},Ea(vb.prototype,"toString",function(){return tq(this).tag}),Ea(vb,"withoutSetter",function(i){return Dk(Oe(i),i)}),Sf=Gk,Wa.f=Qh,Jb.f=xq,Rd.f=xk=yq,Uf.f=Fk,rq.f=function(i){return Dk(qa(i),i)},fa&&(vd(vb.prototype,"description",{configurable:!0,get:function(){return tq(this).description}}),Ea(Tb,"propertyIsEnumerable",Gk,{unsafe:!0}))),M({global:!0,wrap:!0,forced:!wc,sham:!wc},{Symbol:vb}),Sd(Mc(Ry),function(i){Ph(i)}),M({target:"Symbol",stat:!0,forced:!wc},{for:function(i){if(i=String(i),Q(yk,i))return yk[i];var e=vb(i);return yk[i]=e,zk[e]=i,e},keyFor:function(i){if(!Ek(i))throw TypeError(i+" is not a symbol");if(Q(zk,i))return zk[i]},useSetter:function(){Bk=!0},useSimple:function(){Bk=!1}}),M({target:"Object",stat:!0,forced:!wc,sham:!fa},{create:function(i,e){return e===void 0?Sb(i):wq(Sb(i),e)},defineProperty:Qh,defineProperties:wq,getOwnPropertyDescriptor:xq}),M({target:"Object",stat:!0,forced:!wc},{getOwnPropertyNames:yq,getOwnPropertySymbols:Fk}),M({target:"Object",stat:!0,forced:R(function(){Uf.f(1)})},{getOwnPropertySymbols:function(i){return Uf.f(Va(i))}}),kg){var Sy=!wc||R(function(){var i=vb();return kg([i])!="[null]"||kg({a:i})!="{}"||kg(Object(i))!="{}"});M({target:"JSON",stat:!0,forced:Sy},{stringify:function(i,e,o){for(var s,l=[i],f=1;arguments.length>f;)l.push(arguments[f++]);if(s=e,(ha(e)||i!==void 0)&&!Ek(i))return qd(e)||(e=function(h,p){if(typeof s=="function"&&(p=s.call(this,h,p)),!Ek(p))return p}),l[1]=e,kg.apply(null,l)}})}vb.prototype[sq]||Sa(vb.prototype,sq,vb.prototype.valueOf),gc(vb,"Symbol"),Pe[ub]=!0;var Ty=Wa.f,Tc=C.Symbol;if(fa&&typeof Tc=="function"&&(!("description"in Tc.prototype)||Tc().description!==void 0)){var zq={},mg=function(){var i=1>arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),e=this instanceof mg?new Tc(i):i===void 0?Tc():Tc(i);return i===""&&(zq[e]=!0),e};vo(mg,Tc);var Hk=mg.prototype=Tc.prototype;Hk.constructor=mg;var Uy=Hk.toString,Vy=String(Tc("test"))=="Symbol(test)",Wy=/^Symbol\((.*)\)[^)]+$/;Ty(Hk,"description",{configurable:!0,get:function(){var i=ha(this)?this.valueOf():this,e=Uy.call(i);return Q(zq,i)?"":(i=Vy?e.slice(7,-1):e.replace(Wy,"$1"))===""?void 0:i}}),M({global:!0,forced:!0},{Symbol:mg})}Ph("toStringTag"),gc(C.JSON,"JSON",!0),gc(Math,"Math",!0),function(){function i(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function e(w,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}function o(w,_,A){return _&&e(w.prototype,_),A&&e(w,A),w}function s(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),_&&f(w,_)}function l(w){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(w)}function f(w,_){return(f=Object.setPrototypeOf||function(A,k){return A.__proto__=k,A})(w,_)}function h(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function p(w){var _=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var A=l(w);if(_){var k=l(this).constructor;A=Reflect.construct(A,arguments,k)}else A=A.apply(this,arguments);return A=!A||V(A)!=="object"&&typeof A!="function"?h(this):A}}function d(w,_,A){return(d=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(k,I,j){for(;!Object.prototype.hasOwnProperty.call(k,I)&&(k=l(k))!==null;);if(k)return(I=Object.getOwnPropertyDescriptor(k,I)).get?I.get.call(j):I.value})(w,_,A||w)}var g=function(){function w(){i(this,w),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return o(w,[{key:"addEventListener",value:function(_,A,k){_ in this.listeners||(this.listeners[_]=[]),this.listeners[_].push({callback:A,options:k})}},{key:"removeEventListener",value:function(_,A){if(_ in this.listeners){for(var k=0,I=(_=this.listeners[_]).length;k<I;k++)if(_[k].callback===A){_.splice(k,1);break}}}},{key:"dispatchEvent",value:function(_){if(_.type in this.listeners){for(var A=this.listeners[_.type].slice(),k=0,I=A.length;k<I;k++){var j=A[k];try{j.callback.call(this,_)}catch(F){Promise.resolve().then(function(){throw F})}j.options&&j.options.once&&this.removeEventListener(_.type,j.callback)}return!_.defaultPrevented}}}]),w}(),b=function(w){function _(){i(this,_);var k=A.call(this);return k.listeners||g.call(h(k)),Object.defineProperty(h(k),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(h(k),"onabort",{value:null,writable:!0,configurable:!0}),k}s(_,w);var A=p(_);return o(_,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(k){k.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,k)),d(l(_.prototype),"dispatchEvent",this).call(this,k)}}]),_}(g),y=function(){function w(){i(this,w),Object.defineProperty(this,"signal",{value:new b,writable:!0,configurable:!0})}return o(w,[{key:"abort",value:function(){try{var _=new Event("abort")}catch{typeof document<"u"?document.createEvent?(_=document.createEvent("Event")).initEvent("abort",!1,!1):(_=document.createEventObject()).type="abort":_={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(_)}},{key:"toString",value:function(){return"[object AbortController]"}}]),w}();typeof Symbol<"u"&&Symbol.toStringTag&&(y.prototype[Symbol.toStringTag]="AbortController",b.prototype[Symbol.toStringTag]="AbortSignal"),function(w){if(w.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var _=!0}else _=typeof w.Request=="function"&&!w.Request.prototype.hasOwnProperty("signal")||!w.AbortController;_&&(w.AbortController=y,w.AbortSignal=b)}(typeof self<"u"?self:Ka)}();var Xy=Math.floor,Yy=Math.log,Zy=Math.LOG2E;M({target:"Math",stat:!0},{clz32:function(i){return(i>>>=0)?31-Xy(Yy(i+.5)*Zy):32}});var $y=Math.log,az=Math.LN2,mu=Math.clz32||function(i){return 31-$y(i>>>0)/az|0},Gd=String.fromCharCode,Aq={}.toString,Ik=window.Uint8Array,Jk=Ik||Array,bz=Aq.call((window.ArrayBuffer||Jk).prototype),Kk;zm.prototype.decode=function(i){if(i=i&&i.buffer||i,Aq.call(i)!==bz)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var e="",o=0,s=0|(i=Ik?new Jk(i):i).length;o<s;o=o+32768|0)e+=Gd.apply(0,i[Ik?"slice":"subarray"](o,o+32768|0));return e.replace(/[\xc0-\xff][\x80-\xbf]*/g,lu)},window.TextDecoder||(window.TextDecoder=zm),Am.prototype.encode=function(i){for(var e=0|(i=i===void 0?"":(""+i).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nu)).length,o=new Jk(e),s=0;s<e;s=s+1|0)o[s]=i.charCodeAt(s);return o},window.TextEncoder||(window.TextEncoder=Am),function(i){var e,o,s,l,f,h,p,d,g,b,y;(function(w){w.LOGIN="LOGIN",w.LOGIN_SUCCESS="LOGIN_SUCCESS",w.LOGIN_FAILURE="LOGIN_FAILURE",w.LOGIN_TIMEOUT="LOGIN_TIMEOUT",w.INTERRUPTED="INTERRUPTED",w.LOGOUT="LOGOUT",w.BANNED_BY_SERVER="BANNED_BY_SERVER",w.REMOTE_LOGIN="REMOTE_LOGIN"})(e||(e={})),i.ConnectionChangeReason=e,function(w){w.DISCONNECTED="DISCONNECTED",w.CONNECTING="CONNECTING",w.CONNECTED="CONNECTED",w.RECONNECTING="RECONNECTING",w.ABORTED="ABORTED"}(o||(o={})),i.ConnectionState=o,function(w){w.IDLE="IDLE",w.SENT_TO_REMOTE="SENT_TO_REMOTE",w.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",w.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",w.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",w.CANCELED="CANCELED",w.FAILURE="FAILURE"}(s||(s={})),i.LocalInvitationState=s,function(w){w.INVITATION_RECEIVED="INVITATION_RECEIVED",w.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",w.REFUSED="REFUSED",w.ACCEPTED="ACCEPTED",w.CANCELED="CANCELED",w.FAILURE="FAILURE"}(l||(l={})),i.RemoteInvitationState=l,function(w){w.UNKNOWN="UNKNOWN",w.PEER_NO_RESPONSE="PEER_NO_RESPONSE",w.INVITATION_EXPIRE="INVITATION_EXPIRE",w.PEER_OFFLINE="PEER_OFFLINE",w.NOT_LOGGEDIN="NOT_LOGGEDIN"}(f||(f={})),i.LocalInvitationFailureReason=f,function(w){w.UNKNOWN="UNKNOWN",w.PEER_OFFLINE="PEER_OFFLINE",w.ACCEPT_FAILURE="ACCEPT_FAILURE",w.INVITATION_EXPIRE="INVITATION_EXPIRE"}(h||(h={})),i.RemoteInvitationFailureReason=h,function(w){w.ONLINE="ONLINE",w.UNREACHABLE="UNREACHABLE",w.OFFLINE="OFFLINE"}(p||(p={})),i.PeerOnlineState=p,(d||(d={})).ONLINE_STATUS="ONLINE_STATUS",i.PeerSubscriptionOption=d,function(w){w.TEXT="TEXT",w.RAW="RAW",w.IMAGE="IMAGE",w.FILE="FILE"}(g||(g={})),i.MessageType=g,function(w){w.CN="CN",w.NA="NA",w.EU="EU",w.AS="AS",w.JP="JP",w.IN="IN",w.GLOB="GLOB",w.OC="OC",w.SA="SA",w.AF="AF",w.OVS="OVS"}(b||(b={})),i.LegacyAreaCode=b,function(w){w.GLOBAL="GLOBAL",w.INDIA="INDIA",w.JAPAN="JAPAN",w.ASIA="ASIA",w.EUROPE="EUROPE",w.CHINA="CHINA",w.NORTH_AMERICA="NORTH_AMERICA"}(y||(y={})),i.AreaCode=y}(Kk||(Kk={}));var S=Kk;M({target:"Array",proto:!0},{includes:function(i){return so(this,i,1<arguments.length?arguments[1]:void 0)}}),Vd("includes");var Lk=function(i){if(Fj(i))throw TypeError("The method doesn't accept regular expressions");return i},cz=qa("match"),Mk=function(i){var e=/./;try{"/./"[i](e)}catch{try{return e[cz]=!1,"/./"[i](e)}catch{}}return!1};M({target:"String",proto:!0,forced:!Mk("includes")},{includes:function(i){return!!~String(mb(this)).indexOf(Lk(i),1<arguments.length?arguments[1]:void 0)}});var lc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0};Ph("iterator"),Ph("asyncIterator");var Nk=Te("forEach")?[].forEach:function(i){return Sd(this,i,1<arguments.length?arguments[1]:void 0)},Bq;for(Bq in sk){var Cq=C[Bq],Rh=Cq&&Cq.prototype;if(Rh&&Rh.forEach!==Nk)try{Sa(Rh,"forEach",Nk)}catch{Rh.forEach=Nk}}var dz=[].reverse,Dq=[1,2];M({target:"Array",proto:!0,forced:String(Dq)===String(Dq.reverse())},{reverse:function(){return qd(this)&&(this.length=this.length),dz.call(this)}});var x=cb(function(i){i=function(e){function o(q,$,_e){return Object.defineProperty(q,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}),q[$]}function s(q,$,_e,ca){return $=Object.create(($&&$.prototype instanceof f?$:f).prototype),ca=new _(ca||[]),$._invoke=function(ga,_f,_u){var ah=_o;return function(_l,ch){if(ah===Nf)throw Error("Generator is already running");if(ah===B){if(_l==="throw")throw ch;return k()}for(_u.method=_l,_u.arg=ch;;){if((_l=_u.delegate)&&(_l=b(_l,_u))){if(_l===_r)continue;return _l}if(_u.method==="next")_u.sent=_u._sent=_u.arg;else if(_u.method==="throw"){if(ah===_o)throw ah=B,_u.arg;_u.dispatchException(_u.arg)}else _u.method==="return"&&_u.abrupt("return",_u.arg);if(ah=Nf,(_l=l(ga,_f,_u)).type==="normal"){if(ah=_u.done?B:_c,_l.arg===_r)continue;return{value:_l.arg,done:_u.done}}_l.type==="throw"&&(ah=B,_u.method="throw",_u.arg=_l.arg)}}}(q,_e,ca),$}function l(q,$,_e){try{return{type:"normal",arg:q.call($,_e)}}catch(ca){return{type:"throw",arg:ca}}}function f(){}function h(){}function p(){}function d(q){["next","throw","return"].forEach(function($){o(q,$,function(_e){return this._invoke($,_e)})})}function g(q,$){function _e(ga,_f,_u,ah){if((ga=l(q[ga],q,_f)).type!=="throw"){var _l=ga.arg;return(ga=_l.value)&&V(ga)==="object"&&F.call(ga,"__await")?$.resolve(ga.__await).then(function(ch){_e("next",ch,_u,ah)},function(ch){_e("throw",ch,_u,ah)}):$.resolve(ga).then(function(ch){_l.value=ch,_u(_l)},function(ch){return _e("throw",ch,_u,ah)})}ah(ga.arg)}var ca;this._invoke=function(ga,_f){function _u(){return new $(function(ah,_l){_e(ga,_f,ah,_l)})}return ca=ca?ca.then(_u,_u):_u()}}function b(q,$){var _e=q.iterator[$.method];if(_e===I){if($.delegate=null,$.method==="throw"){if(q.iterator.return&&($.method="return",$.arg=I,b(q,$),$.method==="throw"))return _r;$.method="throw",$.arg=new TypeError("The iterator does not provide a 'throw' method")}return _r}return(_e=l(_e,q.iterator,$.arg)).type==="throw"?($.method="throw",$.arg=_e.arg,$.delegate=null,_r):(_e=_e.arg)?_e.done?($[q.resultName]=_e.value,$.next=q.nextLoc,$.method!=="return"&&($.method="next",$.arg=I),$.delegate=null,_r):_e:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,_r)}function y(q){var $={tryLoc:q[0]};1 in q&&($.catchLoc=q[1]),2 in q&&($.finallyLoc=q[2],$.afterLoc=q[3]),this.tryEntries.push($)}function w(q){var $=q.completion||{};$.type="normal",delete $.arg,q.completion=$}function _(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(y,this),this.reset(!0)}function A(q){if(q){var $=q[_t];if($)return $.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var _e=-1;return($=function ca(){for(;++_e<q.length;)if(F.call(q,_e))return ca.value=q[_e],ca.done=!1,ca;return ca.value=I,ca.done=!0,ca}).next=$}}return{next:k}}function k(){return{value:I,done:!0}}var I,j=Object.prototype,F=j.hasOwnProperty,K=typeof Symbol=="function"?Symbol:{},_t=K.iterator||"@@iterator",_a=K.asyncIterator||"@@asyncIterator",_i=K.toStringTag||"@@toStringTag";try{o({},"")}catch{o=function($,_e,ca){return $[_e]=ca}}e.wrap=s;var _o="suspendedStart",_c="suspendedYield",Nf="executing",B="completed",_r={};o(K={},_t,function(){return this});var _n=Object.getPrototypeOf;(_n=_n&&_n(_n(A([]))))&&_n!==j&&F.call(_n,_t)&&(K=_n);var _s=p.prototype=f.prototype=Object.create(K);return h.prototype=p,o(_s,"constructor",p),o(p,"constructor",h),h.displayName=o(p,_i,"GeneratorFunction"),e.isGeneratorFunction=function(q){return!!(q=typeof q=="function"&&q.constructor)&&(q===h||(q.displayName||q.name)==="GeneratorFunction")},e.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,p):(q.__proto__=p,o(q,_i,"GeneratorFunction")),q.prototype=Object.create(_s),q},e.awrap=function(q){return{__await:q}},d(g.prototype),o(g.prototype,_a,function(){return this}),e.AsyncIterator=g,e.async=function(q,$,_e,ca,ga){ga===void 0&&(ga=Promise);var _f=new g(s(q,$,_e,ca),ga);return e.isGeneratorFunction($)?_f:_f.next().then(function(_u){return _u.done?_u.value:_f.next()})},d(_s),o(_s,_i,"Generator"),o(_s,_t,function(){return this}),o(_s,"toString",function(){return"[object Generator]"}),e.keys=function(q){var $,_e=[];for($ in q)_e.push($);return _e.reverse(),function ca(){for(;_e.length;){var ga=_e.pop();if(ga in q)return ca.value=ga,ca.done=!1,ca}return ca.done=!0,ca}},e.values=A,_.prototype={constructor:_,reset:function(q){if(this.next=this.prev=0,this.sent=this._sent=I,this.done=!1,this.delegate=null,this.method="next",this.arg=I,this.tryEntries.forEach(w),!q)for(var $ in this)$.charAt(0)==="t"&&F.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=I)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){function $(_l,ch){return _f.type="throw",_f.arg=q,_e.next=_l,ch&&(_e.method="next",_e.arg=I),!!ch}if(this.done)throw q;for(var _e=this,ca=this.tryEntries.length-1;0<=ca;--ca){var ga=this.tryEntries[ca],_f=ga.completion;if(ga.tryLoc==="root")return $("end");if(ga.tryLoc<=this.prev){var _u=F.call(ga,"catchLoc"),ah=F.call(ga,"finallyLoc");if(_u&&ah){if(this.prev<ga.catchLoc)return $(ga.catchLoc,!0);if(this.prev<ga.finallyLoc)return $(ga.finallyLoc)}else if(_u){if(this.prev<ga.catchLoc)return $(ga.catchLoc,!0)}else{if(!ah)throw Error("try statement without catch or finally");if(this.prev<ga.finallyLoc)return $(ga.finallyLoc)}}}},abrupt:function(q,$){for(var _e=this.tryEntries.length-1;0<=_e;--_e){var ca=this.tryEntries[_e];if(ca.tryLoc<=this.prev&&F.call(ca,"finallyLoc")&&this.prev<ca.finallyLoc){var ga=ca;break}}return ga&&(q==="break"||q==="continue")&&ga.tryLoc<=$&&$<=ga.finallyLoc&&(ga=null),(_e=ga?ga.completion:{}).type=q,_e.arg=$,ga?(this.method="next",this.next=ga.finallyLoc,_r):this.complete(_e)},complete:function(q,$){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&$&&(this.next=$),_r},finish:function(q){for(var $=this.tryEntries.length-1;0<=$;--$){var _e=this.tryEntries[$];if(_e.finallyLoc===q)return this.complete(_e.completion,_e.afterLoc),w(_e),_r}},catch:function(q){for(var $=this.tryEntries.length-1;0<=$;--$){var _e=this.tryEntries[$];if(_e.tryLoc===q){if((q=_e.completion).type==="throw"){var ca=q.arg;w(_e)}return ca}}throw Error("illegal catch attempt")},delegateYield:function(q,$,_e){return this.delegate={iterator:A(q),resultName:$,nextLoc:_e},this.method==="next"&&(this.arg=I),_r}},e}(i.exports);try{regeneratorRuntime=i}catch{(typeof globalThis>"u"?"undefined":V(globalThis))==="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}),Eq=!R(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ok=cb(function(i){var e=Wa.f,o=Oe("meta"),s=0,l=Object.isExtensible||function(){return!0},f=function(p){e(p,o,{value:{objectID:"O"+ ++s,weakData:{}}})},h=i.exports={REQUIRED:!1,fastKey:function(p,d){if(!ha(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!Q(p,o)){if(!l(p))return"F";if(!d)return"E";f(p)}return p[o].objectID},getWeakData:function(p,d){if(!Q(p,o)){if(!l(p))return!0;if(!d)return!1;f(p)}return p[o].weakData},onFreeze:function(p){return Eq&&h.REQUIRED&&l(p)&&!Q(p,o)&&f(p),p}};Pe[o]=!0}),Fq=function(i,e,o){var s=i.indexOf("Map")!==-1,l=i.indexOf("Weak")!==-1,f=s?"set":"add",h=C[i],p=h&&h.prototype,d=h,g={},b=function(I){var j=p[I];Ea(p,I,I=="add"?function(F){return j.call(this,F===0?0:F),this}:I=="delete"?function(F){return!(l&&!ha(F))&&j.call(this,F===0?0:F)}:I=="get"?function(F){return l&&!ha(F)?void 0:j.call(this,F===0?0:F)}:I=="has"?function(F){return!(l&&!ha(F))&&j.call(this,F===0?0:F)}:function(F,K){return j.call(this,F===0?0:F,K),this})};if(uc(i,typeof h!="function"||!(l||p.forEach&&!R(function(){new h().entries().next()}))))d=o.getConstructor(e,i,s,f),Ok.REQUIRED=!0;else if(uc(i,!0)){var y=new d,w=y[f](l?{}:-0,1)!=y,_=R(function(){y.has(1)}),A=uh(function(I){new h(I)}),k=!l&&R(function(){for(var I=new h,j=5;j--;)I[f](j,j);return!I.has(-0)});A||((d=e(function(I,j){return hc(I,d,i),I=Lh(new h,I,d),j!=null&&yh(j,I[f],{that:I,AS_ENTRIES:s}),I})).prototype=p,p.constructor=d),(_||k)&&(b("delete"),b("has"),s&&b("get")),(k||w)&&b(f),l&&p.clear&&delete p.clear}return g[i]=d,M({global:!0,forced:d!=h},g),gc(d,i),l||o.setStrong(d,i,s),d},ez=Wa.f,Gq=Ok.fastKey,Hq=La.set,Pk=La.getterFor,Iq={getConstructor:function(i,e,o,s){var l=i(function(d,g){hc(d,l,e),Hq(d,{type:e,index:Sb(null),first:void 0,last:void 0,size:0}),fa||(d.size=0),g!=null&&yh(g,d[s],{that:d,AS_ENTRIES:o})}),f=Pk(e),h=function(d,g,b){var y,w=f(d),_=p(d,g);return _?_.value=b:(w.last=_={index:y=Gq(g,!0),key:g,value:b,previous:g=w.last,next:void 0,removed:!1},w.first||(w.first=_),g&&(g.next=_),fa?w.size++:d.size++,y!=="F"&&(w.index[y]=_)),d},p=function(d,g){d=f(d);var b=Gq(g);if(b!=="F")return d.index[b];for(d=d.first;d;d=d.next)if(d.key==g)return d};return Xe(l.prototype,{clear:function(){for(var d=f(this),g=d.index,b=d.first;b;)b.removed=!0,b.previous&&(b.previous=b.previous.next=void 0),delete g[b.index],b=b.next;d.first=d.last=void 0,fa?d.size=0:this.size=0},delete:function(d){var g=f(this);if(d=p(this,d)){var b=d.next,y=d.previous;delete g.index[d.index],d.removed=!0,y&&(y.next=b),b&&(b.previous=y),g.first==d&&(g.first=b),g.last==d&&(g.last=y),fa?g.size--:this.size--}return!!d},forEach:function(d){for(var g,b=f(this),y=pd(d,1<arguments.length?arguments[1]:void 0,3);g=g?g.next:b.first;)for(y(g.value,g.key,this);g&&g.removed;)g=g.previous},has:function(d){return!!p(this,d)}}),Xe(l.prototype,o?{get:function(d){return(d=p(this,d))&&d.value},set:function(d,g){return h(this,d===0?0:d,g)}}:{add:function(d){return h(this,d=d===0?0:d,d)}}),fa&&ez(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(i,e,o){var s=e+" Iterator",l=Pk(e),f=Pk(s);Qj(i,e,function(h,p){Hq(this,{type:s,target:h,state:l(h),kind:p,last:void 0})},function(){for(var h=f(this),p=h.kind,d=h.last;d&&d.removed;)d=d.previous;return h.target&&(h.last=d=d?d.next:h.state.first)?p=="keys"?{value:d.key,done:!1}:p=="values"?{value:d.value,done:!1}:{value:[d.key,d.value],done:!1}:(h.target=void 0,{value:void 0,done:!0})},o?"entries":"values",!o,!0),ag(e)}};Fq("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},Iq);var fz=Rd.f,gz=Jb.f,hz=Wa.f,wd=C.Number,Sh=wd.prototype,iz=ec(Sb(Sh))=="Number",Jq=function(i){var e,o=tc(i,!1);if(typeof o=="string"&&2<o.length){if((i=(o=Ij(o)).charCodeAt(0))===43||i===45){if((i=o.charCodeAt(2))===88||i===120)return NaN}else if(i===48){switch(o.charCodeAt(1)){case 66:case 98:i=2;var s=49;break;case 79:case 111:i=8,s=55;break;default:return+o}var l=(o=o.slice(2)).length;for(e=0;e<l;e++){var f=o.charCodeAt(e);if(48>f||f>s)return NaN}return parseInt(o,i)}}return+o};if(uc("Number",!wd(" 0o1")||!wd("0b1")||wd("+0x1"))){for(var Zd=function(i){var e=1>arguments.length?0:i,o=this;return o instanceof Zd&&(iz?R(function(){Sh.valueOf.call(o)}):ec(o)!="Number")?Lh(new wd(Jq(e)),o,Zd):Jq(e)},Kq=fa?fz(wd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Qk=0,Th;Kq.length>Qk;Qk++)Q(wd,Th=Kq[Qk])&&!Q(Zd,Th)&&hz(Zd,Th,gz(wd,Th));Zd.prototype=Sh,Sh.constructor=Zd,Ea(C,"Number",Zd)}var Lq=qa("isConcatSpreadable"),jz=51<=nd||!R(function(){var i=[];return i[Lq]=!1,i.concat()[0]!==i}),kz=Yf("concat");M({target:"Array",proto:!0,forced:!jz||!kz},{concat:function(i){var e,o=Va(this),s=th(o,0),l=0,f=-1;for(e=arguments.length;f<e;f++){var h=f===-1?o:arguments[f],p=h;if(ha(p)){var d=p[Lq];p=d!==void 0?!!d:qd(p)}else p=!1;if(p){if(9007199254740991<l+(d=va(h.length)))throw TypeError("Maximum allowed index exceeded");for(p=0;p<d;p++,l++)p in h&&Ve(s,l,h[p])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");Ve(s,l++,h)}}return s.length=l,s}});var Rk=Rb("Reflect","apply"),lz=Function.apply,mz=!R(function(){Rk(function(){})});M({target:"Reflect",stat:!0,forced:mz},{apply:function(i,e,o){return Bb(i),sa(o),Rk?Rk(i,e,o):lz.call(i,e,o)}}),M({target:"Reflect",stat:!0},{ownKeys:uo});var nz=xk,oz=R(function(){return!Object.getOwnPropertyNames(1)});M({target:"Object",stat:!0,forced:oz},{getOwnPropertyNames:nz});var ef=(typeof Reflect>"u"?"undefined":V(Reflect))==="object"?Reflect:null,Mq=ef&&typeof ef.apply=="function"?ef.apply:function(i,e,o){return Function.prototype.apply.call(i,e,o)},pz=ef&&typeof ef.ownKeys=="function"?ef.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)},Nq=Number.isNaN||function(i){return i!=i};ia.EventEmitter=ia,ia.prototype._events=void 0,ia.prototype._eventsCount=0,ia.prototype._maxListeners=void 0;var Oq=10;Object.defineProperty(ia,"defaultMaxListeners",{enumerable:!0,get:function(){return Oq},set:function(i){if(typeof i!="number"||0>i||Nq(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Oq=i}}),ia.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ia.prototype.setMaxListeners=function(i){if(typeof i!="number"||0>i||Nq(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},ia.prototype.getMaxListeners=function(){return this._maxListeners===void 0?ia.defaultMaxListeners:this._maxListeners},ia.prototype.emit=function(i){for(var e=[],o=1;o<arguments.length;o++)e.push(arguments[o]);o=i==="error";var s=this._events;if(s!==void 0)o=o&&s.error===void 0;else if(!o)return!1;if(o){var l;throw 0<e.length&&(l=e[0]),l instanceof Error?l:((e=Error("Unhandled error."+(l?" ("+l.message+")":""))).context=l,e)}if((o=s[i])===void 0)return!1;if(typeof o=="function")Mq(o,this,e);else for(s=Em(o,l=o.length),o=0;o<l;++o)Mq(s[o],this,e);return!0},ia.prototype.addListener=function(i,e){return Bm(this,i,e,!1)},ia.prototype.on=ia.prototype.addListener,ia.prototype.prependListener=function(i,e){return Bm(this,i,e,!0)},ia.prototype.once=function(i,e){return Kg(e),this.on(i,Cm(this,i,e)),this},ia.prototype.prependOnceListener=function(i,e){return Kg(e),this.prependListener(i,Cm(this,i,e)),this},ia.prototype.removeListener=function(i,e){var o;Kg(e);var s=this._events;if(s===void 0)return this;var l=s[i];if(l===void 0)return this;if(l===e||l.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete s[i],s.removeListener&&this.emit("removeListener",i,l.listener||e));else if(typeof l!="function"){var f=-1;for(o=l.length-1;0<=o;o--)if(l[o]===e||l[o].listener===e){var h=l[o].listener;f=o;break}if(0>f)return this;if(f===0)l.shift();else{for(;f+1<l.length;f++)l[f]=l[f+1];l.pop()}l.length===1&&(s[i]=l[0]),s.removeListener!==void 0&&this.emit("removeListener",i,h||e)}return this},ia.prototype.off=ia.prototype.removeListener,ia.prototype.removeAllListeners=function(i){var e=this._events;if(e===void 0)return this;if(e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):e[i]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete e[i]),this;if(arguments.length===0){var o=Object.keys(e);for(e=0;e<o.length;++e){var s=o[e];s!=="removeListener"&&this.removeAllListeners(s)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(o=e[i])=="function")this.removeListener(i,o);else if(o!==void 0)for(e=o.length-1;0<=e;e--)this.removeListener(i,o[e]);return this},ia.prototype.listeners=function(i){return Dm(this,i,!0)},ia.prototype.rawListeners=function(i){return Dm(this,i,!1)},ia.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Fm.call(i,e)},ia.prototype.listenerCount=Fm,ia.prototype.eventNames=function(){return 0<this._eventsCount?pz(this._events):[]},ia.once=function(i,e){return new Promise(function(o,s){function l(h){i.removeListener(e,f),s(h)}function f(){typeof i.removeListener=="function"&&i.removeListener("error",l),o([].slice.call(arguments))}Gm(i,e,f,{once:!0}),e!=="error"&&pu(i,l,{once:!0})})};var ff=Object.assign,Pq=Object.defineProperty,ng=!ff||R(function(){if(fa&&ff({b:1},ff(Pq({},"a",{enumerable:!0,get:function(){Pq(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},e={},o=Symbol();return i[o]=7,"abcdefghijklmnopqrst".split("").forEach(function(s){e[s]=s}),ff({},i)[o]!=7||Mc(ff({},e)).join("")!="abcdefghijklmnopqrst"})?function(i,e){for(var o=Va(i),s=arguments.length,l=1,f=Uf.f,h=Sf;s>l;)for(var p,d=Tf(arguments[l++]),g=f?Mc(d).concat(f(d)):Mc(d),b=g.length,y=0;b>y;)p=g[y++],(!fa||h.call(d,p))&&(o[p]=d[p]);return o}:ff;M({target:"Object",stat:!0,forced:Object.assign!==ng},{assign:ng}),Fq("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},Iq);var qz=Math.log,rz=Math.LN2;M({target:"Math",stat:!0},{log2:function(i){return qz(i)/rz}});var sz=Wa.f,tz=Rd.f,uz=La.enforce,vz=qa("match"),zc=C.RegExp,Sk=zc.prototype,og=/a/g,Tk=/a/g,Uk=new zc(og)!==og;if(fa&&uc("RegExp",!Uk||vc||R(function(){return Tk[vz]=!1,zc(og)!=og||zc(Tk)==Tk||zc(og,"i")!="/a/i"}))){for(var Uc=function(i,e){var o,s=this instanceof Uc,l=Fj(i),f=e===void 0;return!s&&l&&i.constructor===Uc&&f||(Uk?l&&!f&&(i=i.source):i instanceof Uc&&(f&&(e=Aj.call(i)),i=i.source),vc&&(o=!!e&&-1<e.indexOf("y"))&&(e=e.replace(/y/g,"")),i=Lh(Uk?new zc(i,e):zc(i,e),s?this:Sk,Uc),vc&&o&&(uz(i).sticky=!0)),i},wz=function(i){i in Uc||sz(Uc,i,{configurable:!0,get:function(){return zc[i]},set:function(e){zc[i]=e}})},Qq=tz(zc),Rq=0;Qq.length>Rq;)wz(Qq[Rq++]);Sk.constructor=Uc,Uc.prototype=Sk,Ea(C,"RegExp",Uc)}ag("RegExp"),jg("Float32",function(i){return function(e,o,s){return i(this,e,o,s)}}),jg("Float64",function(i){return function(e,o,s){return i(this,e,o,s)}}),jg("Uint32",function(i){return function(e,o,s){return i(this,e,o,s)}}),jg("Uint16",function(i){return function(e,o,s){return i(this,e,o,s)}});var Vk=function(i,e){return i===e?0:i==null?e==null?0:-1:e==null?i==null?0:1:typeof i.compare=="function"?i.compare(e):typeof e.compare=="function"?-e.compare(i):i<e?-1:i>e?1:0},Wk=[],Sq=Wk.sort,xz=R(function(){Wk.sort(void 0)}),yz=R(function(){Wk.sort(null)}),zz=Te("sort");M({target:"Array",proto:!0,forced:xz||!yz||!zz},{sort:function(i){return i===void 0?Sq.call(Va(this)):Sq.call(Va(this),Bb(i))}});var Tq=Object.getPrototypeOf({}),pg=function(i,e){var o;return i===e||(i==null?i==e:V(i.equiv)==="function"?i.equiv(e):e==null?i==e:V(e.equiv)==="function"?e.equiv(i):V(i)!=="string"&&V(e)!=="string"&&((o=Object.getPrototypeOf(i))!=null&&o!==Tq||(o=Object.getPrototypeOf(e))!=null&&o!==Tq?V(i)!=="function"&&i.length!==void 0&&V(e)!=="function"&&e.length!==void 0?Bz(i,e):i instanceof Set&&e instanceof Set?Cz(i,e):i instanceof Map&&e instanceof Map?Dz(i,e):i instanceof Date&&e instanceof Date?i.getTime()===e.getTime():i instanceof RegExp&&e instanceof RegExp?i.toString()===e.toString():i!=i&&e!=e:Az(i,e)))},Bz=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pg,s=i.length;if(s===e.length)for(;0<=--s&&o(i[s],e[s]););return 0>s},Cz=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pg;return i.size===e.size&&o(G(i.keys()).sort(),G(e.keys()).sort())},Dz=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pg;return i.size===e.size&&o(G(i).sort(),G(e).sort())},Az=function(i,e){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pg;if(Object.keys(i).length!==Object.keys(e).length)return!1;for(var s in i)if(!e.hasOwnProperty(s)||!o(i[s],e[s]))return!1;return!0},Uq=function(i){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:function(o){return o!==void 0?": "+o:""};return function(o){function s(f){return X(this,s),l.call(this,i(f)+e(f))}ja(s,o);var l=ka(s);return s}(xf(Error))},Ez=Uq(function(){return"illegal argument(s)"}),Uh=function(i){throw new Ez(i)},Xk=Uq(function(){return"index out of bounds"}),Vq=1/4294967295,Fz=function(){function i(){X(this,i)}return Ia(i,[{key:"float",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return this.int()*Vq*e}},{key:"norm",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return 2*(this.int()*Vq-.5)*e}},{key:"minmax",value:function(e,o){return this.float()*(o-e)+e}}]),i}(),Yk=Math.random,Gz=new(function(i){function e(){return X(this,e),o.apply(this,arguments)}ja(e,i);var o=ka(e);return Ia(e,[{key:"int",value:function(){return 4294967296*Yk()>>>0}},{key:"float",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return Yk()*s}},{key:"norm",value:function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;return 2*(Yk()-.5)*s}}]),e}(Fz)),zi=Symbol(),Jm=function(){},Hz=Ok.onFreeze,Zk=Object.freeze,Iz=R(function(){Zk(1)});M({target:"Object",stat:!0,forced:Iz,sham:!Eq},{freeze:function(i){return Zk&&ha(i)?Zk(Hz(i)):i}});var Jz=Te("reduce"),Kz=!Oc&&79<nd&&83>nd;M({target:"Array",proto:!0,forced:!Jz||Kz},{reduce:function(i){return bq(this,i,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Im=function(i){return i!=null&&typeof i.xform=="function"?i.xform():i},Lg=function(){function i(e){X(this,i),this.value=e}return Ia(i,[{key:"deref",value:function(){return this.value}}]),i}(),Ai=function(i){return i instanceof Lg?i.deref():i},ru=function(i,e){return[i,function(o){return o},e]},Lz=x.mark(function(i,e){var o,s,l,f,h,p;return x.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:o=Im(i)(qu()),s=o[1],l=o[2],f=0;case 4:if(!(f<e.length)){d.next=15;break}if(h=e[f],!((p=l([],h))instanceof Lg)){d.next=10;break}return d.delegateYield(Ai(s(p.deref())),"t0",9);case 9:return d.abrupt("return");case 10:if(!p.length){d.next=12;break}return d.delegateYield(p,"t1",12);case 12:f++,d.next=4;break;case 15:return d.delegateYield(Ai(s([])),"t2",16);case 16:case"end":return d.stop()}},Lz)}),su=x.mark(Hm),tu=function(i,e){return[i[0],i[1],e]},Wq=!0;"findIndex"in[]&&Array(1).findIndex(function(){Wq=!1}),M({target:"Array",proto:!0,forced:Wq},{findIndex:function(i){return Mo(this,i,1<arguments.length?arguments[1]:void 0)}}),Vd("findIndex"),M({target:"Array",proto:!0},{fill:ik}),Vd("fill");var Mz=function(){function i(e){X(this,i),this._length=0,e&&this.into(e)}return Ia(i,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new i(this)}},{key:"empty",value:function(){return new i}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,o=this.head;o;)e=o.next,delete o.value,delete o.prev,delete o.next,o=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var o=this._length;if(o<e._length)return-1;if(o>e._length)return 1;if(o===0)return 0;o=this.head,e=e.head;for(var s=0;o&&s==0;)s=Vk(o.value,e.value),o=o.next,e=e.next;return s}},{key:"equiv",value:function(e){if(!(e instanceof i||e!=null&&typeof e!="function"&&e.length!==void 0)||this._length!==e.length)return!1;if(!this._length||this===e)return!0;for(var o=this.head,s=0;s<e.length;s++){if(!pg(o.value,e[s]))return!1;o=o.next}return!0}},{key:Symbol.iterator,value:x.mark(function e(){var o;return x.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:o=this.head;case 1:if(!o){s.next=7;break}return s.next=4,o.value;case 4:o=o.next,s.next=1;break;case 7:case"end":return s.stop()}},e,this)})},{key:"seq",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.length;if(!(e>=o||0>e)){e=this.nthCell(e);var s=this.nthCell(o-1);return o=function l(f){return{first:function(){return f.value},next:function(){return f!==s&&f.next?l(f.next):void 0}}},e?o(e):void 0}}},{key:"cycle",value:x.mark(function e(){return x.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.delegateYield(this,"t0",2);case 2:o.next=0;break;case 4:case"end":return o.stop()}},e,this)})},{key:"$reduce",value:function(e,o){for(var s=this.head;s&&!(o instanceof Lg);)o=e(o,s.value),s=s.next;return o}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,o){return e||Uh("cell is undefined"),o={value:o,next:e,prev:e.prev},e.prev?e.prev.next=o:this.head=o,e.prev=o,this._length++,this}},{key:"insertAfter",value:function(e,o){return e||Uh("cell is undefined"),o={value:o,next:e.next,prev:e},e.next?e.next.prev=o:this.tail=o,e.next=o,this._length++,this}},{key:"insertBeforeNth",value:function(e,o){if(0>e&&(e+=this._length),0>=e)return this.cons(o);if(0>e||e>=this._length)throw new Xk(e);return this.insertBefore(this.nthCellUnsafe(e),o)}},{key:"insertAfterNth",value:function(e,o){if(0>e&&(e+=this._length),e>=this._length-1)return this.push(o);if(0>e||e>=this._length)throw new Xk(e);return this.insertAfter(this.nthCellUnsafe(e),o)}},{key:"insertSorted",value:function(e,o){o=o||Vk;for(var s=this.head;s;){if(0>=o(e,s.value))return this.insertBefore(s,e);s=s.next}return this.push(e)}},{key:"find",value:function(e){for(var o=this.head;o;){if(o.value===e)return o;o=o.next}}},{key:"findWith",value:function(e){for(var o=this.head;o;){if(e(o.value))return o;o=o.next}}},{key:"concat",value:function(){for(var e=this.copy(),o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];for(o=0;o<s.length;o++)e.into(s[o]);return e}},{key:"into",value:function(e){for(var o=0;o<e.length;o++)this.push(e[o])}},{key:"slice",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.length;e=0>e?e+this._length:e,o=0>o?o+this._length:o,(0>e||0>o)&&Uh("invalid indices: ${from} / ${to}");for(var s=new i,l=this.nthCell(e);l&&++e<=o;)s.push(l.value),l=l.next;return s}},{key:"splice",value:function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,s=2<arguments.length?arguments[2]:void 0;if(typeof e=="number"){if(0>e&&(e+=this._length),0>e||e>=this._length)throw new Xk(e);var l=this.nthCellUnsafe(e)}else l=e;var f=new i;if(0<o)for(;l&&0<o--;)this.remove(l),f.push(l.value),l=l.next;else l&&(l=l.next);if(s)if(l)for(o=0;o<s.length;o++)this.insertBefore(l,s[o]);else for(l=0;l<s.length;l++)this.push(s[l]);return f}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,o){if(e!==o){var s=e.value;e.value=o.value,o.value=s}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,o){var s=this.nthCell(e);return!s&&Uh("index out of bounds: ".concat(e)),s.value=o,this}},{key:"nth",value:function(e,o){return(e=this.nthCell(e))?e.value:o}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(e){for(var o=new i,s=this.head;s;)o.push(e(s.value)),s=s.next;return o}},{key:"filter",value:function(e){for(var o=new i,s=this.head;s;)e(s.value)&&o.push(s.value),s=s.next;return o}},{key:"reduce",value:function(e,o){for(var s=this.head;s;)o=e(o,s.value),s=s.next;return o}},{key:"shuffle",value:function(e){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Gz;if(2>this._length)return this;for(e=e??Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var s=this.head;s;){var l=s.next;.5>o.float()?this.asHead(s):this.asTail(s),s=l}return this}},{key:"sort",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Vk;if(!this._length)return this;for(var o=1;;){var s=this.head;this.tail=this.head=void 0;for(var l=0;s;){l++;for(var f=s,h=0,p=0;p<o&&(h++,f=f.next);p++);for(p=o;0<h||0<p&&f;){if(h===0){var d=f;f=f.next,p--}else f&&p!==0?0>=e(s.value,f.value)?(d=s,s=s.next,h--):(d=f,f=f.next,p--):(d=s,s=s.next,h--);this.tail?this.tail.next=d:this.head=d,d.prev=this.tail,this.tail=d}s=f}if(this.tail.next=void 0,1>=l)return this;o*=2}}},{key:"reverse",value:function(){for(var e=this.head,o=this.tail,s=(this._length>>>1)+(1&this._length);e&&o&&0<s;){var l=e.value;e.value=o.value,o.value=l,e=e.next,o=o.prev,s--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],o=this.head;o;)e.push(String(o.value)),o=o.next;return e.join(", ")}},{key:"toJSON",value:function(){return G(this)}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var o=this.head,s="next";else o=this.tail,s="prev",e=this._length-e-1;for(;0<e--&&o;)o=o[s];return o}}]),i}(),Ac=function(){function i(e,o){X(this,i),o=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},o),this.map=o.map(),this.items=new Mz,this._size=0,this.opts=o,e&&this.into(e)}return Ia(i,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return Mg(function(e){return[e.k,e]},this.items)}},{key:"keys",value:function(){return Mg(function(e){return e.k},this.items)}},{key:"values",value:function(){return Mg(function(e){return e.v},this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var o=e.items.head;o;)e.map.set(o.value.k,o),o=o.next;return e}},{key:"empty",value:function(){return new i(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var o;o=this.items.drop();)e(o.k,o.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,o){return(e=this.map.get(e))?this.resetEntry(e):o}},{key:"set",value:function(e,o){var s=this.opts.ksize(e)+this.opts.vsize(o),l=this.map.get(e);return this._size+=Math.max(0,s-(l?l.value.s:0)),this.ensureSize()&&this.doSetEntry(l,e,o,s),o}},{key:"into",value:function(e){for(var o=0;o<e.length;o++){var s=e[o];this.set(s[0],s[1])}return this}},{key:"getSet",value:function(e,o){var s=this,l=this.map.get(e);return l?Promise.resolve(this.resetEntry(l)):o().then(function(f){return s.set(e,f)})}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,o=this.opts.maxsize,s=this.opts.maxlen;this._size>o||this.length>=s;){var l=this.items.drop();if(!l)return!1;this.map.delete(l.k),e&&e(l.k,l.v),this._size-=l.s}return!0}},{key:"removeEntry",value:function(e){var o=e.value;this.map.delete(o.k),this.items.remove(e),this.opts.release&&this.opts.release(o.k,o.v),this._size-=o.s}},{key:"doSetEntry",value:function(e,o,s,l){e?(e.value.v=s,e.value.s=l,this.items.asTail(e)):(this.items.push({k:o,v:s,s:l}),this.map.set(o,this.items.tail))}}]),i}(),Nz=function(i){function e(s,l){return X(this,e),l=Object.assign({ttl:36e5},l),o.call(this,s,l)}ja(e,i);var o=ka(e);return Ia(e,[{key:"empty",value:function(){return new e(null,this.opts)}},{key:"has",value:function(s){return this.get(s)!==void 0}},{key:"get",value:function(s,l){if(s=this.map.get(s)){if(s.value.t>=Date.now())return this.resetEntry(s);this.removeEntry(s)}return l}},{key:"set",value:function(s,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.opts.ttl,h=this.opts.ksize(s)+this.opts.vsize(l),p=this.map.get(s);return this._size+=Math.max(0,h-(p?p.value.s:0)),this.ensureSize()&&(f=Date.now()+f,p?(p.value.v=l,p.value.s=h,p.value.t=f,this.items.asTail(p)):(this.items.push({k:s,v:l,s:h,t:f}),this.map.set(s,this.items.tail))),l}},{key:"getSet",value:function(s,l){var f=this,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.opts.ttl,p=this.get(s);return p?Promise.resolve(p):l().then(function(d){return f.set(s,d,h)})}},{key:"prune",value:function(){for(var s=Date.now(),l=this.items.head;l;)l.value.t<s&&this.removeEntry(l),l=l.next}},{key:"ensureSize",value:function(){for(var s=this.opts.maxsize,l=this.opts.maxlen,f=Date.now(),h=this.items.head;h&&(this._size>s||this.length>=l);)h.value.t<f&&this.removeEntry(h),h=h.next;return xi(Fd(e.prototype),"ensureSize",this).call(this)}}]),e}(Ac),Xq=V(Ka)=="object"&&Ka&&Ka.Object===Object&&Ka,Oz=(typeof self>"u"?"undefined":V(self))=="object"&&self&&self.Object===Object&&self,Fb=Xq||Oz||Function("return this")(),Ub=Fb.Symbol,Yq=Object.prototype,Pz=Yq.hasOwnProperty,Qz=Yq.toString,qg=Ub?Ub.toStringTag:void 0,Rz=Object.prototype.toString,Zq=Ub?Ub.toStringTag:void 0,$d=function(i){if(i==null)i=i===void 0?"[object Undefined]":"[object Null]";else if(Zq&&Zq in Object(i)){var e=Pz.call(i,qg),o=i[qg];try{i[qg]=void 0;var s=!0}catch{}var l=Qz.call(i);s&&(e?i[qg]=o:delete i[qg]),i=l}else i=Rz.call(i);return i},ob=function(i){var e=V(i);return i!=null&&(e=="object"||e=="function")},Wi=function(i){return!!ob(i)&&((i=$d(i))=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]")},$k=Fb["__core-js_shared__"],$q=function(){var i=/[^.]+$/.exec($k&&$k.keys&&$k.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Sz=Function.prototype.toString,ae=function(i){if(i!=null){try{return Sz.call(i)}catch{}return i+""}return""},Tz=/^\[object .+?Constructor\]$/,Uz=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=function(i,e){return i=i==null?void 0:i[e],!ob(i)||$q&&$q in i||!(Wi(i)?Uz:Tz).test(ae(i))?void 0:i},rg=be(Object,"create"),Vz=Object.prototype.hasOwnProperty,Wz=Object.prototype.hasOwnProperty;Id.prototype.clear=function(){this.__data__=rg?rg(null):{},this.size=0},Id.prototype.delete=function(i){return i=this.has(i)&&delete this.__data__[i],this.size-=i?1:0,i},Id.prototype.get=function(i){var e=this.__data__;return rg?(i=e[i])==="__lodash_hash_undefined__"?void 0:i:Vz.call(e,i)?e[i]:void 0},Id.prototype.has=function(i){var e=this.__data__;return rg?e[i]!==void 0:Wz.call(e,i)},Id.prototype.set=function(i,e){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=rg&&e===void 0?"__lodash_hash_undefined__":e,this};var sg=function(i,e){return i===e||i!=i&&e!=e},Vh=function(i,e){for(var o=i.length;o--;)if(sg(i[o][0],e))return o;return-1},Xz=Array.prototype.splice;qe.prototype.clear=function(){this.__data__=[],this.size=0},qe.prototype.delete=function(i){var e=this.__data__;return!(0>(i=Vh(e,i)))&&(i==e.length-1?e.pop():Xz.call(e,i,1),--this.size,!0)},qe.prototype.get=function(i){var e=this.__data__;return 0>(i=Vh(e,i))?void 0:e[i][1]},qe.prototype.has=function(i){return-1<Vh(this.__data__,i)},qe.prototype.set=function(i,e){var o=this.__data__,s=Vh(o,i);return 0>s?(++this.size,o.push([i,e])):o[s][1]=e,this};var Og=qe,tg=be(Fb,"Map"),Wh=function(i,e){i=i.__data__;var o=V(e);return(o=="string"||o=="number"||o=="symbol"||o=="boolean"?e!=="__proto__":e===null)?i[typeof e=="string"?"string":"hash"]:i.map};re.prototype.clear=function(){this.size=0,this.__data__={hash:new Id,map:new(tg||Og),string:new Id}},re.prototype.delete=function(i){return i=Wh(this,i).delete(i),this.size-=i?1:0,i},re.prototype.get=function(i){return Wh(this,i).get(i)},re.prototype.has=function(i){return Wh(this,i).has(i)},re.prototype.set=function(i,e){var o=Wh(this,i),s=o.size;return o.set(i,e),this.size+=o.size==s?0:1,this};var Ng=re;zf.prototype.add=zf.prototype.push=function(i){return this.__data__.set(i,"__lodash_hash_undefined__"),this},zf.prototype.has=function(i){return this.__data__.has(i)};var ar=function(i,e,o,s){var l=i.length;for(o+=s?1:-1;s?o--:++o<l;)if(e(i[o],o,i))return o;return-1},Yz=function(i){return i!=i},Zz=function(i,e){var o;if(o=!(i==null||!i.length)){if(e==e)t:{o=-1;for(var s=i.length;++o<s;)if(i[o]===e){i=o;break t}i=-1}else i=ar(i,Yz,0);o=-1<i}return o},$z=function(i,e,o){for(var s=-1,l=i==null?0:i.length;++s<l;)if(o(e,i[s]))return!0;return!1},aA=function(i,e){return i.has(e)},gf=be(Fb,"Set"),bA=function(){},al=function(i){var e=-1,o=Array(i.size);return i.forEach(function(s){o[++e]=s}),o},cA=1/0,dA=gf&&1/al(new gf([,-0]))[1]==cA?function(i){return new gf(i)}:bA,bl=function(i,e,o){var s=-1,l=Zz,f=i.length,h=!0,p=[],d=p;if(o)h=!1,l=$z;else if(200<=f){if(l=e?null:dA(i))return al(l);h=!1,l=aA,d=new zf}else d=e?[]:p;t:for(;++s<f;){var g=i[s],b=e?e(g):g;if(g=o||g!==0?g:0,h&&b==b){for(var y=d.length;y--;)if(d[y]===b)continue t;e&&d.push(b),p.push(g)}else l(d,b,o)||(d!==p&&d.push(b),p.push(g))}return p},br=function(i){for(var e=-1,o=i==null?0:i.length,s={};++e<o;){var l=i[e];s[l[0]]=l[1]}return s},ve=function(i,e){for(var o=-1,s=i==null?0:i.length,l=Array(s);++o<s;)l[o]=e(i[o],o,i);return l};se.prototype.clear=function(){this.__data__=new Og,this.size=0},se.prototype.delete=function(i){var e=this.__data__;return i=e.delete(i),this.size=e.size,i},se.prototype.get=function(i){return this.__data__.get(i)},se.prototype.has=function(i){return this.__data__.has(i)},se.prototype.set=function(i,e){var o=this.__data__;if(o instanceof Og){var s=o.__data__;if(!tg||199>s.length)return s.push([i,e]),this.size=++o.size,this;o=this.__data__=new Ng(s)}return o.set(i,e),this.size=o.size,this};var ue=se,Cu=function(i,e){for(var o=-1,s=i==null?0:i.length;++o<s&&e(i[o],o,i)!==!1;);return i},Xh=function(){try{var i=be(Object,"defineProperty");return i({},"",{}),i}catch{}}(),ug=function(i,e,o){e=="__proto__"&&Xh?Xh(i,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):i[e]=o},eA=Object.prototype.hasOwnProperty,Om=function(i,e,o){var s=i[e];eA.call(i,e)&&sg(s,o)&&(o!==void 0||e in i)||ug(i,e,o)},Fe=function(i,e,o,s){var l=!o;o||(o={});for(var f=-1,h=e.length;++f<h;){var p=e[f],d=s?s(o[p],i[p],p,o,i):void 0;d===void 0&&(d=i[p]),l?ug(o,p,d):Om(o,p,d)}return o},oc=function(i){return i!=null&&V(i)=="object"},cr=function(i){return oc(i)&&$d(i)=="[object Arguments]"},dr=Object.prototype,fA=dr.hasOwnProperty,gA=dr.propertyIsEnumerable,Jf=cr(function(){return arguments}())?cr:function(i){return oc(i)&&fA.call(i,"callee")&&!gA.call(i,"callee")},Za=Array.isArray,hA=function(){return!1},Bf=cb(function(i,e){var o=(e=e&&!e.nodeType&&e)&&i&&!i.nodeType&&i;e=o&&o.exports===e?Fb.Buffer:void 0,i.exports=(e?e.isBuffer:void 0)||hA}),iA=/^(?:0|[1-9]\d*)$/,cl=function(i,e){var o=V(i);return!!(e=e??9007199254740991)&&(o=="number"||o!="symbol"&&iA.test(i))&&-1<i&&i%1==0&&i<e},dl=function(i){return typeof i=="number"&&-1<i&&i%1==0&&9007199254740991>=i},Ga={};Ga["[object Float32Array]"]=Ga["[object Float64Array]"]=Ga["[object Int8Array]"]=Ga["[object Int16Array]"]=Ga["[object Int32Array]"]=Ga["[object Uint8Array]"]=Ga["[object Uint8ClampedArray]"]=Ga["[object Uint16Array]"]=Ga["[object Uint32Array]"]=!0,Ga["[object Arguments]"]=Ga["[object Array]"]=Ga["[object ArrayBuffer]"]=Ga["[object Boolean]"]=Ga["[object DataView]"]=Ga["[object Date]"]=Ga["[object Error]"]=Ga["[object Function]"]=Ga["[object Map]"]=Ga["[object Number]"]=Ga["[object Object]"]=Ga["[object RegExp]"]=Ga["[object Set]"]=Ga["[object String]"]=Ga["[object WeakMap]"]=!1;var jA=function(i){return oc(i)&&dl(i.length)&&!!Ga[$d(i)]},Yh=function(i){return function(e){return i(e)}},hf=cb(function(i,e){var o=e&&!e.nodeType&&e;o=(e=o&&i&&!i.nodeType&&i)&&e.exports===o&&Xq.process;t:{try{var s=e&&e.require&&e.require("util").types;if(s){var l=s;break t}l=o&&o.binding&&o.binding("util");break t}catch{}l=void 0}i.exports=l}),er=hf&&hf.isTypedArray,Gi=er?Yh(er):jA,kA=Object.prototype.hasOwnProperty,fr=function(i,e){var o=Za(i),s=!o&&Jf(i),l=!o&&!s&&Bf(i),f=!o&&!s&&!l&&Gi(i);if(o=o||s||l||f){s=i.length;for(var h=String,p=-1,d=Array(s);++p<s;)d[p]=h(p);s=d}else s=[];for(var g in h=s.length,i)!e&&!kA.call(i,g)||o&&(g=="length"||l&&(g=="offset"||g=="parent")||f&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||cl(g,h))||s.push(g);return s},lA=Object.prototype,el=function(i){var e=i&&i.constructor;return i===(typeof e=="function"&&e.prototype||lA)},gr=function(i,e){return function(o){return i(e(o))}},mA=gr(Object.keys,Object),nA=Object.prototype.hasOwnProperty,Nd=function(i){return i!=null&&dl(i.length)&&!Wi(i)},Jd=function(i){if(Nd(i))i=fr(i);else if(el(i)){var e,o=[];for(e in Object(i))nA.call(i,e)&&e!="constructor"&&o.push(e);i=o}else i=mA(i);return i},yu=function(i,e){return i&&Fe(e,Jd(e),i)},oA=Object.prototype.hasOwnProperty,Cf=function(i){if(Nd(i))i=fr(i,!0);else if(ob(i)){var e=el(i),o=[];for(s in i)(s!="constructor"||!e&&oA.call(i,s))&&o.push(s);i=o}else{var s=[];if(i!=null)for(e in Object(i))s.push(e);i=s}return i},wu=function(i,e){return i&&Fe(e,Cf(e),i)},Lm=cb(function(i,e){var o=(e=e&&!e.nodeType&&e)&&i&&!i.nodeType&&i,s=(e=o&&o.exports===e?Fb.Buffer:void 0)?e.allocUnsafe:void 0;i.exports=function(l,f){return f?l.slice():(f=l.length,f=s?s(f):new l.constructor(f),l.copy(f),f)}}),Bi=function(i,e){var o=-1,s=i.length;for(e||(e=Array(s));++o<s;)e[o]=i[o];return e},pA=function(i,e){for(var o=-1,s=i==null?0:i.length,l=0,f=[];++o<s;){var h=i[o];e(h,o,i)&&(f[l++]=h)}return f},hr=function(){return[]},qA=Object.prototype.propertyIsEnumerable,ir=Object.getOwnPropertySymbols,fl=ir?function(i){return i==null?[]:(i=Object(i),pA(ir(i),function(e){return qA.call(i,e)}))}:hr,xu=function(i,e){return Fe(i,fl(i),e)},Fi=function(i,e){for(var o=-1,s=e.length,l=i.length;++o<s;)i[l+o]=e[o];return i},gl=gr(Object.getPrototypeOf,Object),jr=Object.getOwnPropertySymbols?function(i){for(var e=[];i;)Fi(e,fl(i)),i=gl(i);return e}:hr,vu=function(i,e){return Fe(i,jr(i),e)},kr=function(i,e,o){return e=e(i),Za(i)?e:Fi(e,o(i))},Ci=function(i){return kr(i,Jd,fl)},Nm=function(i){return kr(i,Cf,jr)},hl=be(Fb,"DataView"),il=be(Fb,"Promise"),jl=be(Fb,"WeakMap"),rA=ae(hl),sA=ae(tg),tA=ae(il),uA=ae(gf),vA=ae(jl),ce=$d;(hl&&ce(new hl(new ArrayBuffer(1)))!="[object DataView]"||tg&&ce(new tg)!="[object Map]"||il&&ce(il.resolve())!="[object Promise]"||gf&&ce(new gf)!="[object Set]"||jl&&ce(new jl)!="[object WeakMap]")&&(ce=function(i){var e=$d(i);if(i=(i=e=="[object Object]"?i.constructor:void 0)?ae(i):"")switch(i){case rA:return"[object DataView]";case sA:return"[object Map]";case tA:return"[object Promise]";case uA:return"[object Set]";case vA:return"[object WeakMap]"}return e});var Af=ce,wA=Object.prototype.hasOwnProperty,uu=function(i){var e=i.length,o=new i.constructor(e);return e&&typeof i[0]=="string"&&wA.call(i,"index")&&(o.index=i.index,o.input=i.input),o},Zh=Fb.Uint8Array,kl=function(i){var e=new i.constructor(i.byteLength);return new Zh(e).set(new Zh(i)),e},xA=/\w*$/,lr=Ub?Ub.prototype:void 0,mr=lr?lr.valueOf:void 0,An=function(i,e){return e=e?kl(i.buffer):i.buffer,new i.constructor(e,i.byteOffset,i.length)},zu=function(i,e,o){var s=i.constructor;switch(e){case"[object ArrayBuffer]":return kl(i);case"[object Boolean]":case"[object Date]":return new s(+i);case"[object DataView]":return e=o?kl(i.buffer):i.buffer,new i.constructor(e,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return An(i,o);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(i);case"[object RegExp]":return(e=new i.constructor(i.source,xA.exec(i))).lastIndex=i.lastIndex,e;case"[object Set]":return new s;case"[object Symbol]":return mr?Object(mr.call(i)):{}}},nr=Object.create,yA=function(){function i(){}return function(e){return ob(e)?nr?nr(e):(i.prototype=e,e=new i,i.prototype=void 0,e):{}}}(),Mm=function(i){return typeof i.constructor!="function"||el(i)?{}:yA(gl(i))},zA=function(i){return oc(i)&&Af(i)=="[object Map]"},or=hf&&hf.isMap,Bu=or?Yh(or):zA,AA=function(i){return oc(i)&&Af(i)=="[object Set]"},pr=hf&&hf.isSet,Au=pr?Yh(pr):AA,xa={};xa["[object Arguments]"]=xa["[object Array]"]=xa["[object ArrayBuffer]"]=xa["[object DataView]"]=xa["[object Boolean]"]=xa["[object Date]"]=xa["[object Float32Array]"]=xa["[object Float64Array]"]=xa["[object Int8Array]"]=xa["[object Int16Array]"]=xa["[object Int32Array]"]=xa["[object Map]"]=xa["[object Number]"]=xa["[object Object]"]=xa["[object RegExp]"]=xa["[object Set]"]=xa["[object String]"]=xa["[object Symbol]"]=xa["[object Uint8Array]"]=xa["[object Uint8ClampedArray]"]=xa["[object Uint16Array]"]=xa["[object Uint32Array]"]=!0,xa["[object Error]"]=xa["[object Function]"]=xa["[object WeakMap]"]=!1;var we=function(i){return V(i)=="symbol"||oc(i)&&$d(i)=="[object Symbol]"},BA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CA=/^\w*$/,ll=function(i,e){if(Za(i))return!1;var o=V(i);return!(o!="number"&&o!="symbol"&&o!="boolean"&&i!=null&&!we(i))||CA.test(i)||!BA.test(i)||e!=null&&i in Object(e)};Di.Cache=Ng;var DA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EA=/\\(\\)?/g,FA=function(i){var e=(i=Di(i,function(o){return e.size===500&&e.clear(),o})).cache;return i}(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(DA,function(o,s,l,f){e.push(l?f.replace(EA,"$1"):s||o)}),e}),Du=1/0,qr=Ub?Ub.prototype:void 0,Qm=qr?qr.toString:void 0,$h=function(i,e){return Za(i)?i:ll(i,e)?[i]:FA(i==null?"":Pm(i))},GA=1/0,vg=function(i){if(typeof i=="string"||we(i))return i;var e=i+"";return e=="0"&&1/i==-GA?"-0":e},ai=function(i,e){for(var o=0,s=(e=$h(e,i)).length;i!=null&&o<s;)i=i[vg(e[o++])];return o&&o==s?i:void 0},HA=function(i,e){if(!(2>(e=$h(e,i)).length)){var o=e,s=0,l=-1,f=-1,h=o.length;for(0>s&&(s=-s>h?0:h+s),0>(l=l>h?h:l)&&(l+=h),h=s>l?0:l-s>>>0,s>>>=0,l=Array(h);++f<h;)l[f]=o[f+s];i=ai(i,l)}return(o=i==null)||(o=e==null?0:e.length,o=delete i[vg(o?e[o-1]:void 0)]),o},rr=Function.prototype.toString,IA=Object.prototype.hasOwnProperty,JA=rr.call(Object),Bn=function(i){return!(!oc(i)||$d(i)!="[object Object]")&&((i=gl(i))===null||typeof(i=IA.call(i,"constructor")&&i.constructor)=="function"&&i instanceof i&&rr.call(i)==JA)},KA=function(i){return Bn(i)?void 0:i},sr=Ub?Ub.isConcatSpreadable:void 0,Eu=function(i){return Za(i)||Jf(i)||!!(sr&&i&&i[sr])},LA=function(i){return i!=null&&i.length?Ei(i,1):[]},MA=function(i,e,o){switch(o.length){case 0:return i.call(e);case 1:return i.call(e,o[0]);case 2:return i.call(e,o[0],o[1]);case 3:return i.call(e,o[0],o[1],o[2])}return i.apply(e,o)},tr=Math.max,ur=function(i,e,o){return e=tr(e===void 0?i.length-1:e,0),function(){for(var s=arguments,l=-1,f=tr(s.length-e,0),h=Array(f);++l<f;)h[l]=s[e+l];for(l=-1,f=Array(e+1);++l<e;)f[l]=s[l];return f[e]=o(h),MA(i,this,f)}},NA=function(i){return function(){return i}},bi=function(i){return i},OA=Date.now,vr=function(i){var e=0,o=0;return function(){var s=OA(),l=16-(s-o);if(o=s,0<l){if(800<=++e)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}(Xh?function(i,e){return Xh(i,"toString",{configurable:!0,enumerable:!1,value:NA(e),writable:!0})}:bi),ml=function(i){return vr(ur(i,void 0,LA),i+"")}(function(i,e){var o={};if(i==null)return o;var s=!1;e=ve(e,function(f){return f=$h(f,i),s||(s=1<f.length),f}),Fe(i,Nm(i),o),s&&(o=te(o,7,KA));for(var l=e.length;l--;)HA(o,e[l]);return o}),PA=function(i,e,o,s){for(var l=-1,f=i==null?0:i.length;++l<f;){var h=i[l];e(s,h,o(h),i)}return s},zn=function(i,e,o){for(var s=-1,l=Object(i),f=(o=o(i)).length;f--;){var h=o[++s];if(e(l[h],h,l)===!1)break}return i},wr=function(i,e){return i&&zn(i,e,Jd)},nl=function(i,e){return function(o,s){if(o==null)return o;if(!Nd(o))return i(o,s);for(var l=o.length,f=-1,h=Object(o);++f<l&&s(h[f],f,h)!==!1;);return o}}(wr),QA=function(i,e,o,s){return nl(i,function(l,f,h){e(s,l,o(l),h)}),s},xr=function(i,e){for(var o=-1,s=i==null?0:i.length;++o<s;)if(e(i[o],o,i))return!0;return!1},Rm=function(i,e,o,s,l,f){var h=1&o,p=i.length,d=e.length;if(p!=d&&!(h&&d>p))return!1;d=f.get(i);var g=f.get(e);if(d&&g)return d==e&&g==i;d=-1,g=!0;var b=2&o?new zf:void 0;for(f.set(i,e),f.set(e,i);++d<p;){var y=i[d],w=e[d];if(s)var _=h?s(w,y,d,e,i,f):s(y,w,d,i,e,f);if(_!==void 0){if(_)continue;g=!1;break}if(b){if(!xr(e,function(A,k){if(!b.has(k)&&(y===A||l(y,A,o,s,f)))return b.push(k)})){g=!1;break}}else if(y!==w&&!l(y,w,o,s,f)){g=!1;break}}return f.delete(i),f.delete(e),g},RA=function(i){var e=-1,o=Array(i.size);return i.forEach(function(s,l){o[++e]=[l,s]}),o},yr=Ub?Ub.prototype:void 0,ol=yr?yr.valueOf:void 0,Fu=function(i,e,o,s,l,f,h){switch(o){case"[object DataView]":if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)break;i=i.buffer,e=e.buffer;case"[object ArrayBuffer]":if(i.byteLength!=e.byteLength||!f(new Zh(i),new Zh(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return sg(+i,+e);case"[object Error]":return i.name==e.name&&i.message==e.message;case"[object RegExp]":case"[object String]":return i==e+"";case"[object Map]":var p=RA;case"[object Set]":if(p||(p=al),i.size!=e.size&&!(1&s))break;return(o=h.get(i))?o==e:(s|=2,h.set(i,e),e=Rm(p(i),p(e),s,l,f,h),h.delete(i),e);case"[object Symbol]":if(ol)return ol.call(i)==ol.call(e)}return!1},Gu=Object.prototype.hasOwnProperty,Sm=Object.prototype.hasOwnProperty,SA=function(i,e,o,s){var l=o.length,f=l,h=!s;if(i==null)return!f;for(i=Object(i);l--;){var p=o[l];if(h&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++l<f;){var d=(p=o[l])[0],g=i[d],b=p[1];if(h&&p[2]){if(g===void 0&&!(d in i))return!1}else{if(p=new ue,s)var y=s(g,b,d,i,e,p);if(y===void 0?!xe(b,g,3,s,p):!y)return!1}}return!0},TA=function(i){for(var e=Jd(i),o=e.length;o--;){var s=e[o],l=i[s];e[o]=[s,l,l==l&&!ob(l)]}return e},zr=function(i,e){return function(o){return o!=null&&o[i]===e&&(e!==void 0||i in Object(o))}},UA=function(i){var e=TA(i);return e.length==1&&e[0][2]?zr(e[0][0],e[0][1]):function(o){return o===i||SA(o,i,e)}},VA=function(i,e){return ll(i)&&e==e&&!ob(e)?zr(vg(i),e):function(o){var s=o==null?void 0:ai(o,i);if((s=s===void 0?void 0:s)===void 0&&s===e){if(s=o!=null){for(var l=-1,f=(s=$h(s=i,o)).length,h=!1;++l<f;){var p=vg(s[l]);if(!(h=o!=null&&o!=null&&p in Object(o)))break;o=o[p]}h||++l!=f?s=h:s=!!(f=o==null?0:o.length)&&dl(f)&&cl(p,f)&&(Za(o)||Jf(o))}p=s}else p=xe(e,s,3);return p}},WA=function(i){return function(e){return e==null?void 0:e[i]}},XA=function(i){return function(e){return ai(e,i)}},jf=function(i){return typeof i=="function"?i:i==null?bi:V(i)=="object"?Za(i)?VA(i[0],i[1]):UA(i):ll(i)?WA(vg(i)):XA(i)},pl=function(i,e){return function(o,s){var l={};return(Za(o)?PA:QA)(o,i,jf(s),l)}}(function(i,e,o){ug(i,o,e)}),Bc=function(i,e){var o={};return e=jf(e),wr(i,function(s,l,f){ug(o,l,e(s,l,f))}),o};M({target:"String",proto:!0,forced:R(function(){var i="".sub('"');return i!==i.toLowerCase()||3<i.split('"').length})},{sub:function(){return"<sub>"+String(mb(this))+"</sub>"}});var U=ya,Vb=null;try{Vb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(i){}ya.prototype.__isLong__,Object.defineProperty(ya.prototype,"__isLong__",{value:!0}),ya.isLong=pb;var Um={},Tm={};ya.fromInt=Kd,ya.fromNumber=Kb,ya.fromBits=za;var Pg=Math.pow;ya.fromString=Hi,ya.fromValue=bc;var ye=4294967296,Vm=ye*ye,Xm=Vm/2,Ar=Kd(16777216),Lb=Kd(0);ya.ZERO=Lb;var Ld=Kd(0,!0);ya.UZERO=Ld;var kf=Kd(1);ya.ONE=kf;var Br=Kd(1,!0);ya.UONE=Br;var ql=Kd(-1);ya.NEG_ONE=ql;var Ym=za(-1,2147483647,!1);ya.MAX_VALUE=Ym;var Wm=za(-1,-1,!0);ya.MAX_UNSIGNED_VALUE=Wm;var qb=za(0,-2147483648,!1);ya.MIN_VALUE=qb;var z=ya.prototype;z.toInt=function(){return this.unsigned?this.low>>>0:this.low},z.toNumber=function(){return this.unsigned?(this.high>>>0)*ye+(this.low>>>0):this.high*ye+(this.low>>>0)},z.toString=function(i){if(2>(i=i||10)||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(qb)){var e=Kb(i),o=this.div(e);return e=o.mul(e).sub(this),o.toString(i)+e.toInt().toString(i)}return"-"+this.neg().toString(i)}o=Kb(Pg(i,6),this.unsigned),e=this;for(var s="";;){var l=e.div(o),f=(e.sub(l.mul(o)).toInt()>>>0).toString(i);if((e=l).isZero())return f+s;for(;6>f.length;)f="0"+f;s=""+f+s}},z.getHighBits=function(){return this.high},z.getHighBitsUnsigned=function(){return this.high>>>0},z.getLowBits=function(){return this.low},z.getLowBitsUnsigned=function(){return this.low>>>0},z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(qb)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,e=31;0<e&&!(i&1<<e);e--);return this.high!=0?e+33:e+1},z.isZero=function(){return this.high===0&&this.low===0},z.eqz=z.isZero,z.isNegative=function(){return!this.unsigned&&0>this.high},z.isPositive=function(){return this.unsigned||0<=this.high},z.isOdd=function(){return(1&this.low)==1},z.isEven=function(){return(1&this.low)==0},z.equals=function(i){return pb(i)||(i=bc(i)),(this.unsigned===i.unsigned||this.high>>>31!=1||i.high>>>31!=1)&&this.high===i.high&&this.low===i.low},z.eq=z.equals,z.notEquals=function(i){return!this.eq(i)},z.neq=z.notEquals,z.ne=z.notEquals,z.lessThan=function(i){return 0>this.comp(i)},z.lt=z.lessThan,z.lessThanOrEqual=function(i){return 0>=this.comp(i)},z.lte=z.lessThanOrEqual,z.le=z.lessThanOrEqual,z.greaterThan=function(i){return 0<this.comp(i)},z.gt=z.greaterThan,z.greaterThanOrEqual=function(i){return 0<=this.comp(i)},z.gte=z.greaterThanOrEqual,z.ge=z.greaterThanOrEqual,z.compare=function(i){if(pb(i)||(i=bc(i)),this.eq(i))return 0;var e=this.isNegative(),o=i.isNegative();return e&&!o?-1:!e&&o?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1},z.comp=z.compare,z.negate=function(){return!this.unsigned&&this.eq(qb)?qb:this.not().add(kf)},z.neg=z.negate,z.add=function(i){pb(i)||(i=bc(i));var e=this.high>>>16,o=65535&this.high,s=this.low>>>16,l=i.high>>>16,f=65535&i.high,h=i.low>>>16;return s=(h=((i=(65535&this.low)+(65535&i.low))>>>16)+(s+h))>>>16,za((65535&h)<<16|65535&i,(e=((s+=o+f)>>>16)+(e+l)&65535)<<16|65535&s,this.unsigned)},z.subtract=function(i){return pb(i)||(i=bc(i)),this.add(i.neg())},z.sub=z.subtract,z.multiply=function(i){if(this.isZero())return Lb;if(pb(i)||(i=bc(i)),Vb){var e=Vb.mul(this.low,this.high,i.low,i.high);return za(e,Vb.get_high(),this.unsigned)}if(i.isZero())return Lb;if(this.eq(qb))return i.isOdd()?qb:Lb;if(i.eq(qb))return this.isOdd()?qb:Lb;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(Ar)&&i.lt(Ar))return Kb(this.toNumber()*i.toNumber(),this.unsigned);e=this.high>>>16;var o=65535&this.high,s=this.low>>>16,l=65535&this.low,f=i.high>>>16,h=65535&i.high,p=i.low>>>16,d=l*(i=65535&i.low),g=(d>>>16)+s*i,b=g>>>16;b+=(g=(65535&g)+l*p)>>>16;var y=(b+=o*i)>>>16;return za((65535&g)<<16|65535&d,(y=(y+=(b=(65535&b)+s*p)>>>16)+((b=(65535&b)+l*h)>>>16)+(e*i+o*p+s*h+l*f)&65535)<<16|65535&b,this.unsigned)},z.mul=z.multiply,z.divide=function(i){if(pb(i)||(i=bc(i)),i.isZero())throw Error("division by zero");if(Vb)return this.unsigned||this.high!==-2147483648||i.low!==-1||i.high!==-1?za(i=(this.unsigned?Vb.div_u:Vb.div_s)(this.low,this.high,i.low,i.high),Vb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ld:Lb;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return Ld;if(i.gt(this.shru(1)))return Br;var e=Ld}else{if(this.eq(qb)){if(i.eq(kf)||i.eq(ql))return qb;if(i.eq(qb))return kf;var o=this.shr(1).div(i).shl(1);if(o.eq(Lb))return i.isNegative()?kf:ql;var s=this.sub(i.mul(o));return o.add(s.div(i))}if(i.eq(qb))return this.unsigned?Ld:Lb;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();e=Lb}for(s=this;s.gte(i);){o=Math.max(1,Math.floor(s.toNumber()/i.toNumber()));var l=Math.ceil(Math.log(o)/Math.LN2);l=48>=l?1:Pg(2,l-48);for(var f=Kb(o),h=f.mul(i);h.isNegative()||h.gt(s);)h=(f=Kb(o-=l,this.unsigned)).mul(i);f.isZero()&&(f=kf),e=e.add(f),s=s.sub(h)}return e},z.div=z.divide,z.modulo=function(i){return pb(i)||(i=bc(i)),Vb?za(i=(this.unsigned?Vb.rem_u:Vb.rem_s)(this.low,this.high,i.low,i.high),Vb.get_high(),this.unsigned):this.sub(this.div(i).mul(i))},z.mod=z.modulo,z.rem=z.modulo,z.not=function(){return za(~this.low,~this.high,this.unsigned)},z.and=function(i){return pb(i)||(i=bc(i)),za(this.low&i.low,this.high&i.high,this.unsigned)},z.or=function(i){return pb(i)||(i=bc(i)),za(this.low|i.low,this.high|i.high,this.unsigned)},z.xor=function(i){return pb(i)||(i=bc(i)),za(this.low^i.low,this.high^i.high,this.unsigned)},z.shiftLeft=function(i){return pb(i)&&(i=i.toInt()),(i&=63)==0?this:32>i?za(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):za(0,this.low<<i-32,this.unsigned)},z.shl=z.shiftLeft,z.shiftRight=function(i){return pb(i)&&(i=i.toInt()),(i&=63)==0?this:32>i?za(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):za(this.high>>i-32,0<=this.high?0:-1,this.unsigned)},z.shr=z.shiftRight,z.shiftRightUnsigned=function(i){if(pb(i)&&(i=i.toInt()),(i&=63)===0)return this;var e=this.high;return 32>i?za(this.low>>>i|e<<32-i,e>>>i,this.unsigned):za(i===32?e:e>>>i-32,0,this.unsigned)},z.shru=z.shiftRightUnsigned,z.shr_u=z.shiftRightUnsigned,z.toSigned=function(){return this.unsigned?za(this.low,this.high,!1):this},z.toUnsigned=function(){return this.unsigned?this:za(this.low,this.high,!0)},z.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()},z.toBytesLE=function(){var i=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&i,i>>>8&255,i>>>16&255,i>>>24]},z.toBytesBE=function(){var i=this.high,e=this.low;return[i>>>24,i>>>16&255,i>>>8&255,255&i,e>>>24,e>>>16&255,e>>>8&255,255&e]},ya.fromBytes=function(i,e,o){return o?ya.fromBytesLE(i,e):ya.fromBytesBE(i,e)},ya.fromBytesLE=function(i,e){return new ya(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,e)},ya.fromBytesBE=function(i,e){return new ya(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],e)};var Ii=function(i,e){return(Ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)s.hasOwnProperty(l)&&(o[l]=s[l])})(i,e)},rl=!1,Mb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(i){i?console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+Error().stack):rl&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),rl=i},get useDeprecatedSynchronousErrorHandling(){return rl}},ci={closed:!0,next:function(i){},error:function(i){if(Mb.useDeprecatedSynchronousErrorHandling)throw i;Ae(i)},complete:function(){}},Nb=Array.isArray||function(i){return i&&typeof i.length=="number"},Df=function(){function i(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(o,s){return s+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return i.prototype=Object.create(Error.prototype),i}(),Ta=function(){function i(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return i.prototype.unsubscribe=function(){if(!this.closed){var e=this._parentOrParents,o=this._ctorUnsubscribe,s=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,e instanceof i)e.remove(this);else if(e!==null)for(var f=0;f<e.length;++f)e[f].remove(this);if(ze(s)){o&&(this._unsubscribe=void 0);try{s.call(this)}catch(p){var h=p instanceof Df?Zm(p.errors):[p]}}if(Nb(l)){for(f=-1,e=l.length;++f<e;)if(Ji(o=l[f]))try{o.unsubscribe()}catch(p){h=h||[],p instanceof Df?h=h.concat(Zm(p.errors)):h.push(p)}}if(h)throw new Df(h)}},i.prototype.add=function(e){var o=e;if(!e)return i.EMPTY;switch(V(e)){case"function":o=new i(e);case"object":if(o===this||o.closed||typeof o.unsubscribe!="function")return o;if(this.closed)return o.unsubscribe(),o;o instanceof i||(e=o,(o=new i)._subscriptions=[e]);break;default:throw Error("unrecognized teardown "+e+" added to Subscription.")}if((e=o._parentOrParents)===null)o._parentOrParents=this;else if(e instanceof i){if(e===this)return o;o._parentOrParents=[e,this]}else{if(e.indexOf(this)!==-1)return o;e.push(this)}return(e=this._subscriptions)===null?this._subscriptions=[o]:e.push(o),o},i.prototype.remove=function(e){var o=this._subscriptions;o&&(e=o.indexOf(e))!==-1&&o.splice(e,1)},i.EMPTY=function(e){return e.closed=!0,e}(new i),i}(),di=typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ma=function(i){function e(o,s,l){var f=i.call(this)||this;switch(f.syncErrorValue=null,f.syncErrorThrown=!1,f.syncErrorThrowable=!1,f.isStopped=!1,arguments.length){case 0:f.destination=ci;break;case 1:if(!o){f.destination=ci;break}if(V(o)==="object"){o instanceof e?(f.syncErrorThrowable=o.syncErrorThrowable,f.destination=o,o.add(f)):(f.syncErrorThrowable=!0,f.destination=new Cr(f,o));break}default:f.syncErrorThrowable=!0,f.destination=new Cr(f,o,s,l)}return f}return O(e,i),e.prototype[di]=function(){return this},e.create=function(o,s,l){return(o=new e(o,s,l)).syncErrorThrowable=!1,o},e.prototype.next=function(o){this.isStopped||this._next(o)},e.prototype.error=function(o){this.isStopped||(this.isStopped=!0,this._error(o))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},e.prototype._next=function(o){this.destination.next(o)},e.prototype._error=function(o){this.destination.error(o),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var o=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=o,this},e}(Ta),Cr=function(i){function e(o,s,l,f){var h=i.call(this)||this;if(h._parentSubscriber=o,o=h,ze(s))var p=s;else s&&(p=s.next,l=s.error,f=s.complete,s!==ci&&(ze((o=Object.create(s)).unsubscribe)&&h.add(o.unsubscribe.bind(o)),o.unsubscribe=h.unsubscribe.bind(h)));return h._context=o,h._next=p,h._error=l,h._complete=f,h}return O(e,i),e.prototype.next=function(o){if(!this.isStopped&&this._next){var s=this._parentSubscriber;Mb.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable?this.__tryOrSetError(s,this._next,o)&&this.unsubscribe():this.__tryOrUnsub(this._next,o)}},e.prototype.error=function(o){if(!this.isStopped){var s=this._parentSubscriber,l=Mb.useDeprecatedSynchronousErrorHandling;if(this._error)l&&s.syncErrorThrowable?this.__tryOrSetError(s,this._error,o):this.__tryOrUnsub(this._error,o),this.unsubscribe();else if(s.syncErrorThrowable)l?(s.syncErrorValue=o,s.syncErrorThrown=!0):Ae(o),this.unsubscribe();else{if(this.unsubscribe(),l)throw o;Ae(o)}}},e.prototype.complete=function(){var o=this;if(!this.isStopped){var s=this._parentSubscriber;if(this._complete){var l=function(){return o._complete.call(o._context)};Mb.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable?this.__tryOrSetError(s,l):this.__tryOrUnsub(l)}this.unsubscribe()}},e.prototype.__tryOrUnsub=function(o,s){try{o.call(this._context,s)}catch(l){if(this.unsubscribe(),Mb.useDeprecatedSynchronousErrorHandling)throw l;Ae(l)}},e.prototype.__tryOrSetError=function(o,s,l){if(!Mb.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{s.call(this._context,l)}catch(f){return Mb.useDeprecatedSynchronousErrorHandling?(o.syncErrorValue=f,o.syncErrorThrown=!0):Ae(f),!0}return!1},e.prototype._unsubscribe=function(){var o=this._parentSubscriber;this._parentSubscriber=this._context=null,o.unsubscribe()},e}(ma),Be=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y=function(){function i(e){this._isScalar=!1,e&&(this._subscribe=e)}return i.prototype.lift=function(e){var o=new i;return o.source=this,o.operator=e,o},i.prototype.subscribe=function(e,o,s){var l=this.operator;t:{if(e){if(e instanceof ma)break t;if(e[di]){e=e[di]();break t}}e=e||o||s?new ma(e,o,s):new ma(ci)}if(l?e.add(l.call(e,this.source)):e.add(this.source||Mb.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),Mb.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(o){Mb.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=o),Ki(e)?e.error(o):console.warn(o)}},i.prototype.forEach=function(e,o){var s=this;return new(o=an(o))(function(l,f){var h=s.subscribe(function(p){try{e(p)}catch(d){f(d),h&&h.unsubscribe()}},f,l)})},i.prototype._subscribe=function(e){var o=this.source;return o&&o.subscribe(e)},i.prototype[Be]=function(){return this},i.prototype.pipe=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return e.length===0?this:$m(e)(this)},i.prototype.toPromise=function(e){var o=this;return new(e=an(e))(function(s,l){var f;o.subscribe(function(h){return f=h},function(h){return l(h)},function(){return s(f)})})},i.create=function(e){return new i(e)},i}(),xd=function(){function i(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return i.prototype=Object.create(Error.prototype),i}(),Dr=function(i){function e(o,s){var l=i.call(this)||this;return l.subject=o,l.subscriber=s,l.closed=!1,l}return O(e,i),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var o=this.subject,s=o.observers;this.subject=null,!s||s.length===0||o.isStopped||o.closed||(o=s.indexOf(this.subscriber))!==-1&&s.splice(o,1)}},e}(Ta),Er=function(i){function e(o){var s=i.call(this,o)||this;return s.destination=o,s}return O(e,i),e}(ma),Ua=function(i){function e(){var o=i.call(this)||this;return o.observers=[],o.closed=!1,o.isStopped=!1,o.hasError=!1,o.thrownError=null,o}return O(e,i),e.prototype[di]=function(){return new Er(this)},e.prototype.lift=function(o){var s=new Fr(this,this);return s.operator=o,s},e.prototype.next=function(o){if(this.closed)throw new xd;if(!this.isStopped){var s=this.observers,l=s.length;s=s.slice();for(var f=0;f<l;f++)s[f].next(o)}},e.prototype.error=function(o){if(this.closed)throw new xd;this.hasError=!0,this.thrownError=o,this.isStopped=!0;var s=this.observers,l=s.length;s=s.slice();for(var f=0;f<l;f++)s[f].error(o);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new xd;this.isStopped=!0;var o=this.observers,s=o.length;o=o.slice();for(var l=0;l<s;l++)o[l].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},e.prototype._trySubscribe=function(o){if(this.closed)throw new xd;return i.prototype._trySubscribe.call(this,o)},e.prototype._subscribe=function(o){if(this.closed)throw new xd;return this.hasError?(o.error(this.thrownError),Ta.EMPTY):this.isStopped?(o.complete(),Ta.EMPTY):(this.observers.push(o),new Dr(this,o))},e.prototype.asObservable=function(){var o=new Y;return o.source=this,o},e.create=function(o,s){return new Fr(o,s)},e}(Y),Fr=function(i){function e(o,s){var l=i.call(this)||this;return l.destination=o,l.source=s,l}return O(e,i),e.prototype.next=function(o){var s=this.destination;s&&s.next&&s.next(o)},e.prototype.error=function(o){var s=this.destination;s&&s.error&&this.destination.error(o)},e.prototype.complete=function(){var o=this.destination;o&&o.complete&&this.destination.complete()},e.prototype._subscribe=function(o){return this.source?this.source.subscribe(o):Ta.EMPTY},e}(Ua),Hu=function(){function i(e){this.connectable=e}return i.prototype.call=function(e,o){var s=this.connectable;return s._refCount++,e=new YA(e,s),o=o.subscribe(e),e.closed||(e.connection=s.connect()),o},i}(),YA=function(i){function e(o,s){return(o=i.call(this,o)||this).connectable=s,o}return O(e,i),e.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var s=o._refCount;0>=s?this.connection=null:(o._refCount=s-1,1<s?this.connection=null:(s=this.connection,o=o._connection,this.connection=null,!o||s&&o!==s||o.unsubscribe()))}else this.connection=null},e}(ma),Gr=function(i){function e(o,s){var l=i.call(this)||this;return l.source=o,l.subjectFactory=s,l._refCount=0,l._isComplete=!1,l}return O(e,i),e.prototype._subscribe=function(o){return this.getSubject().subscribe(o)},e.prototype.getSubject=function(){var o=this._subject;return o&&!o.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var o=this._connection;return o||(this._isComplete=!1,(o=this._connection=new Ta).add(this.source.subscribe(new ZA(this.getSubject(),this))),o.closed&&(this._connection=null,o=Ta.EMPTY)),o},e.prototype.refCount=function(){return bn()(this)},e}(Y),uv=function(){var i=Gr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:i._subscribe},_isComplete:{value:i._isComplete,writable:!0},getSubject:{value:i.getSubject},connect:{value:i.connect},refCount:{value:i.refCount}}}(),ZA=function(i){function e(o,s){return(o=i.call(this,o)||this).connectable=s,o}return O(e,i),e.prototype._error=function(o){this._unsubscribe(),i.prototype._error.call(this,o)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),i.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var s=o._connection;o._refCount=0,o._subject=null,o._connection=null,s&&s.unsubscribe()}},e}(Er);(function(i){function e(o,s){return(o=i.call(this,o)||this).connectable=s,o}O(e,i),e.prototype._unsubscribe=function(){var o=this.connectable;if(o){this.connectable=null;var s=o._refCount;0>=s?this.connection=null:(o._refCount=s-1,1<s?this.connection=null:(s=this.connection,o=o._connection,this.connection=null,!o||s&&o!==s||o.unsubscribe()))}else this.connection=null}})(ma),function(i){function e(o,s,l,f,h){return(o=i.call(this,o)||this).keySelector=s,o.elementSelector=l,o.durationSelector=f,o.subjectSelector=h,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}O(e,i),e.prototype._next=function(o){try{var s=this.keySelector(o)}catch(l){return void this.error(l)}this._group(o,s)},e.prototype._group=function(o,s){var l=this.groups;l||(l=this.groups=new Map);var f=l.get(s);if(this.elementSelector)try{var h=this.elementSelector(o)}catch(p){this.error(p)}else h=o;if(!f&&(f=this.subjectSelector?this.subjectSelector():new Ua,l.set(s,f),o=new sl(s,f,this),this.destination.next(o),this.durationSelector)){o=void 0;try{o=this.durationSelector(new sl(s,f))}catch(p){return void this.error(p)}this.add(o.subscribe(new $A(s,f,this)))}f.closed||f.next(h)},e.prototype._error=function(o){var s=this.groups;s&&(s.forEach(function(l,f){l.error(o)}),s.clear()),this.destination.error(o)},e.prototype._complete=function(){var o=this.groups;o&&(o.forEach(function(s,l){s.complete()}),o.clear()),this.destination.complete()},e.prototype.removeGroup=function(o){this.groups.delete(o)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&i.prototype.unsubscribe.call(this))}}(ma);var $A=function(i){function e(o,s,l){var f=i.call(this,s)||this;return f.key=o,f.group=s,f.parent=l,f}return O(e,i),e.prototype._next=function(o){this.complete()},e.prototype._unsubscribe=function(){var o=this.parent,s=this.key;this.key=this.parent=null,o&&o.removeGroup(s)},e}(ma),sl=function(i){function e(o,s,l){var f=i.call(this)||this;return f.key=o,f.groupSubject=s,f.refCountSubscription=l,f}return O(e,i),e.prototype._subscribe=function(o){var s=new Ta,l=this.refCountSubscription,f=this.groupSubject;return l&&!l.closed&&s.add(new aB(l)),s.add(f.subscribe(o)),s},e}(Y),aB=function(i){function e(o){var s=i.call(this)||this;return s.parent=o,o.count++,s}return O(e,i),e.prototype.unsubscribe=function(){var o=this.parent;o.closed||this.closed||(i.prototype.unsubscribe.call(this),--o.count,o.count===0&&o.attemptedToUnsubscribe&&o.unsubscribe())},e}(Ta),bB=function(i){function e(o){var s=i.call(this)||this;return s._value=o,s}return O(e,i),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(o){var s=i.prototype._subscribe.call(this,o);return s&&!s.closed&&o.next(this._value),s},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new xd;return this._value},e.prototype.next=function(o){i.prototype.next.call(this,this._value=o)},e}(Ua),wg=function(i){function e(o,s){var l=i.call(this,o,s)||this;return l.scheduler=o,l.work=s,l.pending=!1,l}return O(e,i),e.prototype.schedule=function(o,s){if(s===void 0&&(s=0),this.closed)return this;this.state=o,o=this.id;var l=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(l,o,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(l,this.id,s),this},e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),setInterval(o.flush.bind(o,this),l)},e.prototype.recycleAsyncId=function(o,s,l){if(l===void 0&&(l=0),l!==null&&this.delay===l&&this.pending===!1)return s;clearInterval(s)},e.prototype.execute=function(o,s){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(o=this._execute(o,s))?o:void(this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},e.prototype._execute=function(o,s){s=!1;var l=void 0;try{this.work(o)}catch(f){s=!0,l=!!f&&f||Error(f)}if(s)return this.unsubscribe(),l},e.prototype._unsubscribe=function(){var o=this.id,s=this.scheduler,l=s.actions,f=l.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,f!==-1&&l.splice(f,1),o!=null&&(this.id=this.recycleAsyncId(s,o,null)),this.delay=null},e}(function(i){function e(o,s){return i.call(this)||this}return O(e,i),e.prototype.schedule=function(o,s){return this},e}(Ta)),cB=function(i){function e(o,s){var l=i.call(this,o,s)||this;return l.scheduler=o,l.work=s,l}return O(e,i),e.prototype.schedule=function(o,s){return s===void 0&&(s=0),0<s?i.prototype.schedule.call(this,o,s):(this.delay=s,this.state=o,this.scheduler.flush(this),this)},e.prototype.execute=function(o,s){return 0<s||this.closed?i.prototype.execute.call(this,o,s):this._execute(o,s)},e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),l!==null&&0<l||l===null&&0<this.delay?i.prototype.requestAsyncId.call(this,o,s,l):o.flush(this)},e}(wg),tl=function(){function i(e,o){o===void 0&&(o=i.now),this.SchedulerAction=e,this.now=o}return i.prototype.schedule=function(e,o,s){return o===void 0&&(o=0),new this.SchedulerAction(this,e).schedule(s,o)},i.now=function(){return Date.now()},i}(),xg=function(i){function e(o,s){s===void 0&&(s=tl.now);var l=i.call(this,o,function(){return e.delegate&&e.delegate!==l?e.delegate.now():s()})||this;return l.actions=[],l.active=!1,l.scheduled=void 0,l}return O(e,i),e.prototype.schedule=function(o,s,l){return s===void 0&&(s=0),e.delegate&&e.delegate!==this?e.delegate.schedule(o,s,l):i.prototype.schedule.call(this,o,s,l)},e.prototype.flush=function(o){var s=this.actions;if(this.active)s.push(o);else{var l;this.active=!0;do if(l=o.execute(o.state,o.delay))break;while(o=s.shift());if(this.active=!1,l){for(;o=s.shift();)o.unsubscribe();throw l}}},e}(tl),yg=new(function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e}(xg))(cB),yb=new Y(function(i){return i.complete()}),cn=function(i){return function(e){for(var o=0,s=i.length;o<s&&!e.closed;o++)e.next(i[o]);e.complete()}},ul;(function(i){i.NEXT="N",i.ERROR="E",i.COMPLETE="C"})(ul||(ul={}));var lf=function(){function i(e,o,s){this.kind=e,this.value=o,this.error=s,this.hasValue=e==="N"}return i.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},i.prototype.do=function(e,o,s){switch(this.kind){case"N":return e&&e(this.value);case"E":return o&&o(this.error);case"C":return s&&s()}},i.prototype.accept=function(e,o,s){return e&&typeof e.next=="function"?this.observe(e):this.do(e,o,s)},i.prototype.toObservable=function(){switch(this.kind){case"N":return eb(this.value);case"E":return Z(this.error);case"C":return Ef()}throw Error("unexpected notification kind value")},i.createNext=function(e){return e!==void 0?new i("N",e):i.undefinedValueNotification},i.createError=function(e){return new i("E",void 0,e)},i.createComplete=function(){return i.completeNotification},i.completeNotification=new i("C"),i.undefinedValueNotification=new i("N",void 0),i}(),Lu=function(){function i(e,o){o===void 0&&(o=0),this.scheduler=e,this.delay=o}return i.prototype.call=function(e,o){return o.subscribe(new Hr(e,this.scheduler,this.delay))},i}(),Hr=function(i){function e(o,s,l){return l===void 0&&(l=0),(o=i.call(this,o)||this).scheduler=s,o.delay=l,o}return O(e,i),e.dispatch=function(o){o.notification.observe(o.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(o){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new dB(o,this.destination)))},e.prototype._next=function(o){this.scheduleMessage(lf.createNext(o))},e.prototype._error=function(o){this.scheduleMessage(lf.createError(o)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(lf.createComplete()),this.unsubscribe()},e}(ma),dB=function(i,e){this.notification=i,this.destination=e},Ee=function(i){function e(o,s,l){o===void 0&&(o=Number.POSITIVE_INFINITY),s===void 0&&(s=Number.POSITIVE_INFINITY);var f=i.call(this)||this;return f.scheduler=l,f._events=[],f._infiniteTimeWindow=!1,f._bufferSize=1>o?1:o,f._windowTime=1>s?1:s,s===Number.POSITIVE_INFINITY?(f._infiniteTimeWindow=!0,f.next=f.nextInfiniteTimeWindow):f.next=f.nextTimeWindow,f}return O(e,i),e.prototype.nextInfiniteTimeWindow=function(o){if(!this.isStopped){var s=this._events;s.push(o),s.length>this._bufferSize&&s.shift()}i.prototype.next.call(this,o)},e.prototype.nextTimeWindow=function(o){this.isStopped||(this._events.push(new eB(this._getNow(),o)),this._trimBufferThenGetEvents()),i.prototype.next.call(this,o)},e.prototype._subscribe=function(o){var s=this._infiniteTimeWindow,l=s?this._events:this._trimBufferThenGetEvents(),f=this.scheduler,h=l.length;if(this.closed)throw new xd;if(this.isStopped||this.hasError)var p=Ta.EMPTY;else this.observers.push(o),p=new Dr(this,o);if(f&&o.add(o=new Hr(o,f)),s)for(s=0;s<h&&!o.closed;s++)o.next(l[s]);else for(s=0;s<h&&!o.closed;s++)o.next(l[s].value);return this.hasError?o.error(this.thrownError):this.isStopped&&o.complete(),p},e.prototype._getNow=function(){return(this.scheduler||yg).now()},e.prototype._trimBufferThenGetEvents=function(){for(var o=this._getNow(),s=this._bufferSize,l=this._windowTime,f=this._events,h=f.length,p=0;p<h&&!(o-f[p].time<l);)p++;return h>s&&(p=Math.max(p,h-s)),0<p&&f.splice(0,p),f},e}(Ua),eB=function(i,e){this.time=i,this.value=e},Gf=function(i){function e(){var o=i!==null&&i.apply(this,arguments)||this;return o.value=null,o.hasNext=!1,o.hasCompleted=!1,o}return O(e,i),e.prototype._subscribe=function(o){return this.hasError?(o.error(this.thrownError),Ta.EMPTY):this.hasCompleted&&this.hasNext?(o.next(this.value),o.complete(),Ta.EMPTY):i.prototype._subscribe.call(this,o)},e.prototype.next=function(o){this.hasCompleted||(this.value=o,this.hasNext=!0)},e.prototype.error=function(o){this.hasCompleted||i.prototype.error.call(this,o)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&i.prototype.next.call(this,this.value),i.prototype.complete.call(this)},e}(Ua),fB=1,gB=Promise.resolve(),Ni={},Ir={setImmediate:function(i){var e=fB++;return Ni[e]=!0,gB.then(function(){return dn(e)&&i()}),e},clearImmediate:function(i){dn(i)}},hB=function(i){function e(o,s){var l=i.call(this,o,s)||this;return l.scheduler=o,l.work=s,l}return O(e,i),e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),l!==null&&0<l?i.prototype.requestAsyncId.call(this,o,s,l):(o.actions.push(this),o.scheduled||(o.scheduled=Ir.setImmediate(o.flush.bind(o,null))))},e.prototype.recycleAsyncId=function(o,s,l){if(l===void 0&&(l=0),l!==null&&0<l||l===null&&0<this.delay)return i.prototype.recycleAsyncId.call(this,o,s,l);o.actions.length===0&&(Ir.clearImmediate(s),o.scheduled=void 0)},e}(wg),Xi=new(function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e.prototype.flush=function(o){this.active=!0,this.scheduled=void 0;var s,l=this.actions,f=-1,h=l.length;o=o||l.shift();do if(s=o.execute(o.state,o.delay))break;while(++f<h&&(o=l.shift()));if(this.active=!1,s){for(;++f<h&&(o=l.shift());)o.unsubscribe();throw s}},e}(xg))(hB),iB=Xi,vl=new xg(wg),id=vl,jB=function(i){function e(o,s){var l=i.call(this,o,s)||this;return l.scheduler=o,l.work=s,l}return O(e,i),e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),l!==null&&0<l?i.prototype.requestAsyncId.call(this,o,s,l):(o.actions.push(this),o.scheduled||(o.scheduled=requestAnimationFrame(function(){return o.flush(null)})))},e.prototype.recycleAsyncId=function(o,s,l){if(l===void 0&&(l=0),l!==null&&0<l||l===null&&0<this.delay)return i.prototype.recycleAsyncId.call(this,o,s,l);o.actions.length===0&&(cancelAnimationFrame(s),o.scheduled=void 0)},e}(wg),Jr=new(function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e.prototype.flush=function(o){this.active=!0,this.scheduled=void 0;var s,l=this.actions,f=-1,h=l.length;o=o||l.shift();do if(s=o.execute(o.state,o.delay))break;while(++f<h&&(o=l.shift()));if(this.active=!1,s){for(;++f<h&&(o=l.shift());)o.unsubscribe();throw s}},e}(xg))(jB),kB=function(i){function e(o,s){o===void 0&&(o=Kr),s===void 0&&(s=Number.POSITIVE_INFINITY);var l=i.call(this,o,function(){return l.frame})||this;return l.maxFrames=s,l.frame=0,l.index=-1,l}return O(e,i),e.prototype.flush=function(){for(var o,s,l=this.actions,f=this.maxFrames;(s=l[0])&&s.delay<=f&&(l.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=l.shift();)s.unsubscribe();throw o}},e.frameTimeFactor=10,e}(xg),Kr=function(i){function e(o,s,l){l===void 0&&(l=o.index+=1);var f=i.call(this,o,s)||this;return f.scheduler=o,f.work=s,f.index=l,f.active=!0,f.index=o.index=l,f}return O(e,i),e.prototype.schedule=function(o,s){if(s===void 0&&(s=0),!this.id)return i.prototype.schedule.call(this,o,s);this.active=!1;var l=new e(this.scheduler,this.work);return this.add(l),l.schedule(o,s)},e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),this.delay=o.frame+l,(o=o.actions).push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(o,s,l){},e.prototype._execute=function(o,s){if(this.active===!0)return i.prototype._execute.call(this,o,s)},e.sortActions=function(o,s){return o.delay===s.delay?o.index===s.index?0:o.index>s.index?1:-1:o.delay>s.delay?1:-1},e}(wg),wl=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),Sg=function(){function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i}(),sb=function(){function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return i.prototype=Object.create(Error.prototype),i}(),Mu=function(){function i(e,o){this.project=e,this.thisArg=o}return i.prototype.call=function(e,o){return o.subscribe(new lB(e,this.project,this.thisArg))},i}(),lB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).project=s,o.count=0,o.thisArg=l||o,o}return O(e,i),e.prototype._next=function(o){try{var s=this.project.call(this.thisArg,o,this.count++)}catch(l){return void this.destination.error(l)}this.destination.next(s)},e}(ma),xl=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e.prototype.notifyNext=function(o,s,l,f,h){this.destination.next(s)},e.prototype.notifyError=function(o,s){this.destination.error(o)},e.prototype.notifyComplete=function(o){this.destination.complete()},e}(ma),Ru=function(i){function e(o,s,l){var f=i.call(this)||this;return f.parent=o,f.outerValue=s,f.outerIndex=l,f.index=0,f}return O(e,i),e.prototype._next=function(o){this.parent.notifyNext(this.outerValue,o,this.outerIndex,this.index++,this)},e.prototype._error=function(o){this.parent.notifyError(o,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ma),mB=function(i){return function(e){return i.then(function(o){e.closed||(e.next(o),e.complete())},function(o){return e.error(o)}).then(null,Ae),e}},gd=typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator",nB=function(i){return function(e){for(var o=i[gd]();;){var s=void 0;try{s=o.next()}catch(l){return e.error(l),e}if(s.done){e.complete();break}if(e.next(s.value),e.closed)break}return typeof o.return=="function"&&e.add(function(){o.return&&o.return()}),e}},oB=function(i){return function(e){var o=i[Be]();if(typeof o.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return o.subscribe(e)}},kn=function(i){return i&&typeof i.length=="number"&&typeof i!="function"},Hf=function(i){if(i&&typeof i[Be]=="function")return oB(i);if(kn(i))return cn(i);if(hn(i))return mB(i);if(i&&typeof i[gd]=="function")return nB(i);throw i=Ji(i)?"an invalid object":"'"+i+"'",new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Lr={},qB=function(){function i(e){this.resultSelector=e}return i.prototype.call=function(e,o){return o.subscribe(new pB(e,this.resultSelector))},i}(),pB=function(i){function e(o,s){return(o=i.call(this,o)||this).resultSelector=s,o.active=0,o.values=[],o.observables=[],o}return O(e,i),e.prototype._next=function(o){this.values.push(Lr),this.observables.push(o)},e.prototype._complete=function(){var o=this.observables,s=o.length;if(s===0)this.destination.complete();else{this.toRespond=this.active=s;for(var l=0;l<s;l++)this.add(Oi(this,o[l],void 0,l))}},e.prototype.notifyComplete=function(o){--this.active==0&&this.destination.complete()},e.prototype.notifyNext=function(o,s,l){var f=(o=this.values)[l];f=this.toRespond?f===Lr?--this.toRespond:this.toRespond:0,o[l]=s,f===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(o){try{var s=this.resultSelector.apply(this,o)}catch(l){return void this.destination.error(l)}this.destination.next(s)},e}(xl),Cc=function(i){function e(o){var s=i.call(this)||this;return s.parent=o,s}return O(e,i),e.prototype._next=function(o){this.parent.notifyNext(o)},e.prototype._error=function(o){this.parent.notifyError(o),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(ma);(function(i){function e(o,s,l){var f=i.call(this)||this;return f.parent=o,f.outerValue=s,f.outerIndex=l,f}O(e,i),e.prototype._next=function(o){this.parent.notifyNext(this.outerValue,o,this.outerIndex,this)},e.prototype._error=function(o){this.parent.notifyError(o),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}})(ma);var Dc=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e.prototype.notifyNext=function(o){this.destination.next(o)},e.prototype.notifyError=function(o){this.destination.error(o)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(ma);(function(i){function e(){return i!==null&&i.apply(this,arguments)||this}O(e,i),e.prototype.notifyNext=function(o,s,l,f){this.destination.next(s)},e.prototype.notifyError=function(o){this.destination.error(o)},e.prototype.notifyComplete=function(o){this.destination.complete()}})(ma);var Vu=function(){function i(e,o){o===void 0&&(o=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=o}return i.prototype.call=function(e,o){return o.subscribe(new rB(e,this.project,this.concurrent))},i}(),rB=function(i){function e(o,s,l){return l===void 0&&(l=Number.POSITIVE_INFINITY),(o=i.call(this,o)||this).project=s,o.concurrent=l,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return O(e,i),e.prototype._next=function(o){this.active<this.concurrent?this._tryNext(o):this.buffer.push(o)},e.prototype._tryNext=function(o){var s=this.index++;try{var l=this.project(o,s)}catch(f){return void this.destination.error(f)}this.active++,this._innerSub(l)},e.prototype._innerSub=function(o){var s=new Cc(this),l=this.destination;l.add(s),(o=qc(o,s))!==s&&l.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(o){this.destination.next(o)},e.prototype.notifyComplete=function(){var o=this.buffer;this.active--,0<o.length?this._next(o.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Dc),yl=C.parseFloat,Mr=-1/0!=1/yl(`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF-0`)?function(i){i=Ij(String(i));var e=yl(i);return e===0&&i.charAt(0)=="-"?-0:e}:yl;M({global:!0,forced:parseFloat!=Mr},{parseFloat:Mr});var zl=new Y(pc),$u=function(){function i(e,o){this.predicate=e,this.thisArg=o}return i.prototype.call=function(e,o){return o.subscribe(new sB(e,this.predicate,this.thisArg))},i}(),sB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).predicate=s,o.thisArg=l,o.count=0,o}return O(e,i),e.prototype._next=function(o){try{var s=this.predicate.call(this.thisArg,o,this.count++)}catch(l){return void this.destination.error(l)}s&&this.destination.next(o)},e}(ma),av=function(){function i(){}return i.prototype.call=function(e,o){return o.subscribe(new tB(e))},i}(),tB=function(i){function e(o){return(o=i.call(this,o)||this).hasFirst=!1,o.observables=[],o.subscriptions=[],o}return O(e,i),e.prototype._next=function(o){this.observables.push(o)},e.prototype._complete=function(){var o=this.observables,s=o.length;if(s===0)this.destination.complete();else{for(var l=0;l<s&&!this.hasFirst;l++){var f=Oi(this,o[l],void 0,l);this.subscriptions&&this.subscriptions.push(f),this.add(f)}this.observables=null}},e.prototype.notifyNext=function(o,s,l){if(!this.hasFirst){for(this.hasFirst=!0,o=0;o<this.subscriptions.length;o++)if(o!==l){var f=this.subscriptions[o];f.unsubscribe(),this.remove(f)}this.subscriptions=null}this.destination.next(s)},e}(xl),dv=function(){function i(e){this.resultSelector=e}return i.prototype.call=function(e,o){return o.subscribe(new uB(e,this.resultSelector))},i}(),uB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).resultSelector=s,o.iterators=[],o.active=0,o.resultSelector=typeof s=="function"?s:void 0,o}return O(e,i),e.prototype._next=function(o){var s=this.iterators;Nb(o)?s.push(new vB(o)):typeof o[gd]=="function"?s.push(new wB(o[gd]())):s.push(new xB(this.destination,this,o))},e.prototype._complete=function(){var o=this.iterators,s=o.length;if(this.unsubscribe(),s===0)this.destination.complete();else{this.active=s;for(var l=0;l<s;l++){var f=o[l];f.stillUnsubscribed?this.destination.add(f.subscribe()):this.active--}}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var o=this.iterators,s=o.length,l=this.destination,f=0;f<s;f++){var h=o[f];if(typeof h.hasValue=="function"&&!h.hasValue())return}var p=!1,d=[];for(f=0;f<s;f++){var g=(h=o[f]).next();if(h.hasCompleted()&&(p=!0),g.done)return void l.complete();d.push(g.value)}this.resultSelector?this._tryresultSelector(d):l.next(d),p&&l.complete()},e.prototype._tryresultSelector=function(o){try{var s=this.resultSelector.apply(this,o)}catch(l){return void this.destination.error(l)}this.destination.next(s)},e}(ma),wB=function(){function i(e){this.iterator=e,this.nextResult=e.next()}return i.prototype.hasValue=function(){return!0},i.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},i.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},i}(),vB=function(){function i(e){this.array=e,this.length=this.index=0,this.length=e.length}return i.prototype[gd]=function(){return this},i.prototype.next=function(e){e=this.index++;var o=this.array;return e<this.length?{value:o[e],done:!1}:{value:null,done:!0}},i.prototype.hasValue=function(){return this.array.length>this.index},i.prototype.hasCompleted=function(){return this.array.length===this.index},i}(),xB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).parent=s,o.observable=l,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return O(e,i),e.prototype[gd]=function(){return this},e.prototype.next=function(){var o=this.buffer;return o.length===0&&this.isComplete?{value:null,done:!0}:{value:o.shift(),done:!1}},e.prototype.hasValue=function(){return 0<this.buffer.length},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(o){this.buffer.push(o),this.parent.checkIterators()},e.prototype.subscribe=function(){return qc(this.observable,new Cc(this))},e}(Dc),yB=Object.freeze({__proto__:null,Observable:Y,ConnectableObservable:Gr,GroupedObservable:sl,observable:Be,Subject:Ua,BehaviorSubject:bB,ReplaySubject:Ee,AsyncSubject:Gf,asap:iB,asapScheduler:Xi,async:id,asyncScheduler:vl,queue:yg,queueScheduler:yg,animationFrame:Jr,animationFrameScheduler:Jr,VirtualTimeScheduler:kB,VirtualAction:Kr,Scheduler:tl,Subscription:Ta,Subscriber:ma,Notification:lf,get NotificationKind(){return ul},pipe:Li,noop:pc,identity:ed,isObservable:function(i){return!!i&&(i instanceof Y||typeof i.lift=="function"&&typeof i.subscribe=="function")},ArgumentOutOfRangeError:wl,EmptyError:Sg,ObjectUnsubscribedError:xd,UnsubscriptionError:Df,TimeoutError:sb,bindCallback:en,bindNodeCallback:fn,combineLatest:function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var o=e=void 0;return fd(i[i.length-1])&&(o=i.pop()),typeof i[i.length-1]=="function"&&(e=i.pop()),i.length===1&&Nb(i[0])&&(i=i[0]),Ff(i,o).lift(new qB(e))},concat:ln,defer:hd,empty:Ef,forkJoin:mn,from:Ob,fromEvent:jb,fromEventPattern:on,generate:function(i,e,o,s,l){if(arguments.length==1){var f=i.initialState;e=i.condition,o=i.iterate;var h=i.resultSelector||ed;l=i.scheduler}else s===void 0||fd(s)?(f=i,h=ed,l=s):(f=i,h=s);return new Y(function(p){var d=f;if(l)return l.schedule(Wu,0,{subscriber:p,iterate:o,condition:e,resultSelector:h,state:d});for(;;){if(e){var g=void 0;try{g=e(d)}catch(b){p.error(b);break}if(!g){p.complete();break}}g=void 0;try{g=h(d)}catch(b){p.error(b);break}if(p.next(g),p.closed)break;try{d=o(d)}catch(b){p.error(b);break}}})},iif:function(i,e,o){return e===void 0&&(e=yb),o===void 0&&(o=yb),hd(function(){return i()?e:o})},interval:pn,merge:cc,never:function(){return zl},of:eb,onErrorResumeNext:Qi,pairs:function(i,e){return new Y(e?function(o){var s=Object.keys(i),l=new Ta;return l.add(e.schedule(Yu,0,{keys:s,index:0,subscriber:o,subscription:l,obj:i})),l}:function(o){for(var s=Object.keys(i),l=0;l<s.length&&!o.closed;l++){var f=s[l];i.hasOwnProperty(f)&&o.next([f,i[f]])}o.complete()})},partition:function(i,e,o){return[zb(e,o)(new Y(Hf(i))),zb(Zu(e,o))(new Y(Hf(i)))]},race:Da,range:function(i,e,o){return i===void 0&&(i=0),new Y(function(s){e===void 0&&(e=i,i=0);var l=0,f=i;if(o)return o.schedule(bv,0,{index:l,count:e,start:i,subscriber:s});for(;;){if(l++>=e){s.complete();break}if(s.next(f++),s.closed)break}})},throwError:Z,timer:Kc,using:function(i,e){return new Y(function(o){try{var s=i()}catch(h){return void o.error(h)}try{var l=e(s)}catch(h){return void o.error(h)}var f=(l?Ob(l):yb).subscribe(o);return function(){f.unsubscribe(),s&&s.unsubscribe()}})},zip:Ri,scheduled:jn,EMPTY:yb,NEVER:zl,config:Mb}),ev=function(){function i(e){this.selector=e}return i.prototype.call=function(e,o){return o.subscribe(new zB(e,this.selector,this.caught))},i}(),zB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).selector=s,o.caught=l,o}return O(e,i),e.prototype.error=function(o){if(!this.isStopped){var s=void 0;try{s=this.selector(o,this.caught)}catch(l){return void i.prototype.error.call(this,l)}this._unsubscribeAndRecycle(),o=new Cc(this),this.add(o),(s=qc(s,o))!==o&&this.add(s)}},e}(Dc),fv=function(){function i(e){this.defaultValue=e}return i.prototype.call=function(e,o){return o.subscribe(new AB(e,this.defaultValue))},i}(),AB=function(i){function e(o,s){return(o=i.call(this,o)||this).defaultValue=s,o.isEmpty=!0,o}return O(e,i),e.prototype._next=function(o){this.isEmpty=!1,this.destination.next(o)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(ma),gv=function(){function i(e,o){this.delay=e,this.scheduler=o}return i.prototype.call=function(e,o){return o.subscribe(new BB(e,this.delay,this.scheduler))},i}(),BB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).delay=s,o.scheduler=l,o.queue=[],o.active=!1,o.errored=!1,o}return O(e,i),e.dispatch=function(o){for(var s=o.source,l=s.queue,f=o.scheduler,h=o.destination;0<l.length&&0>=l[0].time-f.now();)l.shift().notification.observe(h);0<l.length?(s=Math.max(0,l[0].time-f.now()),this.schedule(o,s)):(this.unsubscribe(),s.active=!1)},e.prototype._schedule=function(o){this.active=!0,this.destination.add(o.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:o}))},e.prototype.scheduleNotification=function(o){if(this.errored!==!0){var s=this.scheduler;o=new CB(s.now()+this.delay,o),this.queue.push(o),this.active===!1&&this._schedule(s)}},e.prototype._next=function(o){this.scheduleNotification(lf.createNext(o))},e.prototype._error=function(o){this.errored=!0,this.queue=[],this.destination.error(o),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(lf.createComplete()),this.unsubscribe()},e}(ma),CB=function(i,e){this.time=i,this.notification=e},hv=function(){function i(e,o){this.keySelector=e,this.flushes=o}return i.prototype.call=function(e,o){return o.subscribe(new DB(e,this.keySelector,this.flushes))},i}(),DB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).keySelector=s,o.values=new Set,l&&o.add(qc(l,new Cc(o))),o}return O(e,i),e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(o){this._error(o)},e.prototype._next=function(o){this.keySelector?this._useKeySelector(o):this._finalizeNext(o,o)},e.prototype._useKeySelector=function(o){var s=this.destination;try{var l=this.keySelector(o)}catch(f){return void s.error(f)}this._finalizeNext(l,o)},e.prototype._finalizeNext=function(o,s){var l=this.values;l.has(o)||(l.add(o),this.destination.next(s))},e}(Dc),jv=function(){function i(e){this.errorFactory=e}return i.prototype.call=function(e,o){return o.subscribe(new EB(e,this.errorFactory))},i}(),EB=function(i){function e(o,s){return(o=i.call(this,o)||this).errorFactory=s,o.hasValue=!1,o}return O(e,i),e.prototype._next=function(o){this.hasValue=!0,this.destination.next(o)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var o=void 0;try{o=this.errorFactory()}catch(s){o=s}this.destination.error(o)},e}(ma),kv=function(){function i(e){if(this.total=e,0>this.total)throw new wl}return i.prototype.call=function(e,o){return o.subscribe(new FB(e,this.total))},i}(),FB=function(i){function e(o,s){return(o=i.call(this,o)||this).total=s,o.count=0,o}return O(e,i),e.prototype._next=function(o){var s=this.total,l=++this.count;l<=s&&(this.destination.next(o),l===s&&(this.destination.complete(),this.unsubscribe()))},e}(ma),lv=function(){function i(e){this.project=e}return i.prototype.call=function(e,o){return o.subscribe(new GB(e,this.project))},i}(),GB=function(i){function e(o,s){return(o=i.call(this,o)||this).project=s,o.hasSubscription=!1,o.hasCompleted=!1,o.index=0,o}return O(e,i),e.prototype._next=function(o){this.hasSubscription||this.tryNext(o)},e.prototype.tryNext=function(o){var s=this.index++;try{var l=this.project(o,s)}catch(f){return void this.destination.error(f)}this.hasSubscription=!0,this._innerSub(l)},e.prototype._innerSub=function(o){var s=new Cc(this),l=this.destination;l.add(s),(o=qc(o,s))!==s&&l.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(o){this.destination.next(o)},e.prototype.notifyError=function(o){this.destination.error(o)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Dc),mv=function(){function i(e){this.callback=e}return i.prototype.call=function(e,o){return o.subscribe(new HB(e,this.callback))},i}(),HB=function(i){function e(o,s){return(o=i.call(this,o)||this).add(new Ta(s)),o}return O(e,i),e}(ma),ov=function(){function i(){}return i.prototype.call=function(e,o){return o.subscribe(new IB(e))},i}(),IB=function(i){function e(){return i!==null&&i.apply(this,arguments)||this}return O(e,i),e.prototype._next=function(o){},e}(ma),pv=function(){function i(e){if(this.total=e,0>this.total)throw new wl}return i.prototype.call=function(e,o){return o.subscribe(new JB(e,this.total))},i}(),JB=function(i){function e(o,s){return(o=i.call(this,o)||this).total=s,o.ring=[],o.count=0,o}return O(e,i),e.prototype._next=function(o){var s=this.ring,l=this.total,f=this.count++;s.length<l?s.push(o):s[f%l]=o},e.prototype._complete=function(){var o=this.destination,s=this.count;if(0<s)for(var l=this.count>=this.total?this.total:this.count,f=this.ring,h=0;h<l;h++){var p=s++%l;o.next(f[p])}o.complete()},e}(ma),qv=function(){function i(e){this.value=e}return i.prototype.call=function(e,o){return o.subscribe(new KB(e,this.value))},i}(),KB=function(i){function e(o,s){return(o=i.call(this,o)||this).value=s,o}return O(e,i),e.prototype._next=function(o){this.destination.next(this.value)},e}(ma),rv=function(){function i(e,o,s){s===void 0&&(s=!1),this.accumulator=e,this.seed=o,this.hasSeed=s}return i.prototype.call=function(e,o){return o.subscribe(new LB(e,this.accumulator,this.seed,this.hasSeed))},i}(),LB=function(i){function e(o,s,l,f){return(o=i.call(this,o)||this).accumulator=s,o._seed=l,o.hasSeed=f,o.index=0,o}return O(e,i),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(o){this.hasSeed=!0,this._seed=o},enumerable:!0,configurable:!0}),e.prototype._next=function(o){if(this.hasSeed)return this._tryNext(o);this.seed=o,this.destination.next(o)},e.prototype._tryNext=function(o){var s=this.index++;try{var l=this.accumulator(this.seed,o,s)}catch(f){this.destination.error(f)}this.seed=l,this.destination.next(l)},e}(ma),tv=function(){function i(e,o){this.subjectFactory=e,this.selector=o}return i.prototype.call=function(e,o){var s=this.selector,l=this.subjectFactory();return(e=s(l).subscribe(e)).add(o.subscribe(l)),e},i}(),vv=function(){function i(e,o){this.notifier=e,this.source=o}return i.prototype.call=function(e,o){return o.subscribe(new MB(e,this.notifier,this.source))},i}(),MB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).notifier=s,o.source=l,o}return O(e,i),e.prototype.error=function(o){if(!this.isStopped){var s=this.errors,l=this.retries,f=this.retriesSubscription;if(l)this.retriesSubscription=this.errors=void 0;else{s=new Ua;try{l=(0,this.notifier)(s)}catch(h){return i.prototype.error.call(this,h)}f=qc(l,new Cc(this))}this._unsubscribeAndRecycle(),this.errors=s,this.retries=l,this.retriesSubscription=f,s.next(o)}},e.prototype._unsubscribe=function(){var o=this.errors,s=this.retriesSubscription;o&&(o.unsubscribe(),this.errors=void 0),s&&(s.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(Dc),yv=function(){function i(e){this.project=e}return i.prototype.call=function(e,o){return o.subscribe(new NB(e,this.project))},i}(),NB=function(i){function e(o,s){return(o=i.call(this,o)||this).project=s,o.index=0,o}return O(e,i),e.prototype._next=function(o){var s=this.index++;try{var l=this.project(o,s)}catch(f){return void this.destination.error(f)}this._innerSub(l)},e.prototype._innerSub=function(o){var s=this.innerSubscription;s&&s.unsubscribe(),s=new Cc(this);var l=this.destination;l.add(s),this.innerSubscription=qc(o,s),this.innerSubscription!==s&&l.add(this.innerSubscription)},e.prototype._complete=function(){var o=this.innerSubscription;o&&!o.closed||i.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&i.prototype._complete.call(this)},e.prototype.notifyNext=function(o){this.destination.next(o)},e}(Dc),zv=function(){function i(e){this.notifier=e}return i.prototype.call=function(e,o){e=new OB(e);var s=qc(this.notifier,new Cc(e));return s&&!e.seenValue?(e.add(s),o.subscribe(e)):e},i}(),OB=function(i){function e(o){return(o=i.call(this,o)||this).seenValue=!1,o}return O(e,i),e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Dc),Bv=function(){function i(e,o){this.predicate=e,this.inclusive=o}return i.prototype.call=function(e,o){return o.subscribe(new PB(e,this.predicate,this.inclusive))},i}(),PB=function(i){function e(o,s,l){return(o=i.call(this,o)||this).predicate=s,o.inclusive=l,o.index=0,o}return O(e,i),e.prototype._next=function(o){var s=this.destination;try{var l=this.predicate(o,this.index++)}catch(f){return void s.error(f)}this.nextOrComplete(o,l)},e.prototype.nextOrComplete=function(o,s){var l=this.destination;s?l.next(o):(this.inclusive&&l.next(o),l.complete())},e}(ma),Cv=function(){function i(e,o,s){this.nextOrObserver=e,this.error=o,this.complete=s}return i.prototype.call=function(e,o){return o.subscribe(new QB(e,this.nextOrObserver,this.error,this.complete))},i}(),QB=function(i){function e(o,s,l,f){return(o=i.call(this,o)||this)._tapNext=pc,o._tapError=pc,o._tapComplete=pc,o._tapError=l||pc,o._tapComplete=f||pc,ze(s)?(o._context=o,o._tapNext=s):s&&(o._context=s,o._tapNext=s.next||pc,o._tapError=s.error||pc,o._tapComplete=s.complete||pc),o}return O(e,i),e.prototype._next=function(o){try{this._tapNext.call(this._context,o)}catch(s){return void this.destination.error(s)}this.destination.next(o)},e.prototype._error=function(o){try{this._tapError.call(this._context,o)}catch(s){return void this.destination.error(s)}this.destination.error(o)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(o){return void this.destination.error(o)}return this.destination.complete()},e}(ma),Ev={leading:!0,trailing:!1};(function(i){function e(o,s,l,f){var h=i.call(this,o)||this;return h.destination=o,h.durationSelector=s,h._leading=l,h._trailing=f,h._hasValue=!1,h}O(e,i),e.prototype._next=function(o){this._hasValue=!0,this._sendValue=o,this._throttled||(this._leading?this.send():this.throttle(o))},e.prototype.send=function(){var o=this._sendValue;this._hasValue&&(this.destination.next(o),this.throttle(o)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(o){(o=this.tryDurationSelector(o))&&this.add(this._throttled=qc(o,new Cc(this)))},e.prototype.tryDurationSelector=function(o){try{return this.durationSelector(o)}catch(s){return this.destination.error(s),null}},e.prototype.throttlingDone=function(){var o=this._throttled,s=this._trailing;o&&o.unsubscribe(),this._throttled=void 0,s&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()}})(Dc);for(var Fv=function(){function i(e,o,s,l){this.duration=e,this.scheduler=o,this.leading=s,this.trailing=l}return i.prototype.call=function(e,o){return o.subscribe(new RB(e,this.duration,this.scheduler,this.leading,this.trailing))},i}(),RB=function(i){function e(o,s,l,f,h){return(o=i.call(this,o)||this).duration=s,o.scheduler=l,o.leading=f,o.trailing=h,o._hasTrailingValue=!1,o._trailingValue=null,o}return O(e,i),e.prototype._next=function(o){this.throttled?this.trailing&&(this._trailingValue=o,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Gv,this.duration,{subscriber:this})),this.leading?this.destination.next(o):this.trailing&&(this._trailingValue=o,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},e.prototype.clearThrottle=function(){var o=this.throttled;o&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),o.unsubscribe(),this.remove(o),this.throttled=null)},e}(ma),Iv=function(){function i(e,o,s,l){this.waitFor=e,this.absoluteTimeout=o,this.withObservable=s,this.scheduler=l}return i.prototype.call=function(e,o){return o.subscribe(new SB(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},i}(),SB=function(i){function e(o,s,l,f,h){return(o=i.call(this,o)||this).absoluteTimeout=s,o.waitFor=l,o.withObservable=f,o.scheduler=h,o.scheduleTimeout(),o}return O(e,i),e.dispatchTimeout=function(o){var s=o.withObservable;o._unsubscribeAndRecycle(),o.add(qc(s,new Cc(o)))},e.prototype.scheduleTimeout=function(){var o=this.action;o?this.action=o.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(o){this.absoluteTimeout||this.scheduleTimeout(),i.prototype._next.call(this,o)},e.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},e}(Dc),Kv=function(){function i(e,o){this.observables=e,this.project=o}return i.prototype.call=function(e,o){return o.subscribe(new TB(e,this.observables,this.project))},i}(),TB=function(i){function e(o,s,l){(o=i.call(this,o)||this).observables=s,o.project=l,o.toRespond=[],l=s.length,o.values=Array(l);for(var f=0;f<l;f++)o.toRespond.push(f);for(f=0;f<l;f++)o.add(Oi(o,s[f],void 0,f));return o}return O(e,i),e.prototype.notifyNext=function(o,s,l){this.values[l]=s,0<(o=this.toRespond).length&&(l=o.indexOf(l))!==-1&&o.splice(l,1)},e.prototype.notifyComplete=function(){},e.prototype._next=function(o){this.toRespond.length===0&&(o=[o].concat(this.values),this.project?this._tryProject(o):this.destination.next(o))},e.prototype._tryProject=function(o){try{var s=this.project.apply(this,o)}catch(l){return void this.destination.error(l)}this.destination.next(s)},e}(xl),Nr=cb(function(i){var e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);i.exports=function(){return e(o),o}}else{var s=Array(16);i.exports=function(){for(var l,f=0;16>f;f++)!(3&f)&&(l=4294967296*Math.random()),s[f]=l>>>((3&f)<<3)&255;return s}}}),db=[],ei=0;256>ei;++ei)db[ei]=(ei+256).toString(16).substr(1);var Or=function(i,e){return e=e||0,[db[i[e++]],db[i[e++]],db[i[e++]],db[i[e++]],"-",db[i[e++]],db[i[e++]],"-",db[i[e++]],db[i[e++]],"-",db[i[e++]],db[i[e++]],"-",db[i[e++]],db[i[e++]],db[i[e++]],db[i[e++]],db[i[e++]],db[i[e++]]].join("")},de=function(i,e,o){if(o=e&&o||0,typeof i=="string"&&(e=i==="binary"?Array(16):null,i=null),(i=(i=i||{}).random||(i.rng||Nr)())[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;16>s;++s)e[o+s]=i[s];return e||Or(i)},zg=de(),Ti=!1,xn=new AbortController,Vc,yd,Al,Bl,zd,ee,mc,mf,Wb,Cl,Wc,fe,Xc,Yc,Zc,nf,$c,ad;(function(i){i[i.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",i[i.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",i[i.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",i[i.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",i[i.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",i[i.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",i[i.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"})(Vc||(Vc={})),function(i){i[i.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",i[i.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",i[i.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",i[i.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",i[i.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",i[i.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(yd||(yd={})),function(i){i[i.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Al||(Al={})),function(i){i[i.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Bl||(Bl={})),function(i){i[i.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",i[i.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",i[i.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",i[i.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",i[i.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",i[i.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(zd||(zd={})),function(i){i[i.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",i[i.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",i[i.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",i[i.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",i[i.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(ee||(ee={})),function(i){i[i.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",i[i.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",i[i.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",i[i.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",i[i.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",i[i.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",i[i.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",i[i.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",i[i.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",i[i.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",i[i.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(mc||(mc={})),function(i){i[i.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",i[i.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",i[i.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",i[i.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(mf||(mf={})),function(i){i[i.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",i[i.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",i[i.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",i[i.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",i[i.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",i[i.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",i[i.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",i[i.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",i[i.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",i[i.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",i[i.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Wb||(Wb={})),function(i){i[i.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Cl||(Cl={})),function(i){i[i.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",i[i.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",i[i.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",i[i.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",i[i.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",i[i.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",i[i.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Wc||(Wc={})),function(i){i[i.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",i[i.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",i[i.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",i[i.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",i[i.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(fe||(fe={})),function(i){i[i.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",i[i.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",i[i.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",i[i.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",i[i.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",i[i.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",i[i.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",i[i.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Xc||(Xc={})),function(i){i[i.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",i[i.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Yc||(Yc={})),function(i){i[i.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",i[i.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",i[i.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",i[i.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",i[i.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",i[i.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",i[i.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Zc||(Zc={})),function(i){i[i.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",i[i.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",i[i.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",i[i.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(nf||(nf={})),function(i){i[i.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",i[i.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",i[i.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",i[i.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",i[i.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",i[i.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",i[i.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}($c||($c={})),function(i){i[i.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",i[i.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",i[i.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",i[i.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",i[i.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",i[i.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",i[i.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(ad||(ad={}));var Xb=Vc.ATTRIBUTE_OPERATION_ERR_FAILURE,Oa=Vc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,Ge=Vc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Vc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Pr=Vc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Yb=Vc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Zb=Vc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,Ag=yd.CHANNEL_MESSAGE_ERR_FAILURE,Dl=yd.CHANNEL_MESSAGE_ERR_TIMEOUT,Qr=yd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,fi=yd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,UB=yd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL,El=yd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,VB=Al.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Rr=Bl.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Yc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Sr=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Yc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Tr=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,WB=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Yc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var XB=Yc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,YB=zd.GET_MEMBERS_ERR_FAILURE,ZB=zd.GET_MEMBERS_ERR_REJECTED;zd.GET_MEMBERS_ERR_TIMEOUT,zd.GET_MEMBERS_ERR_TOO_OFTEN;var $B=zd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,aC=zd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,Ec=ee.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,bC=ee.INVITATION_API_CALL_ERR_NOT_STARTED,gi=ee.INVITATION_API_CALL_ERR_ALREADY_END,Ur=ee.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,cC=ee.INVITATION_API_CALL_ERR_ALREADY_SENT,Vr=mc.JOIN_CHANNEL_ERR_FAILURE;mc.JOIN_CHANNEL_ERR_REJECTED;var dC=mc.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Wr=mc.JOIN_CHANNEL_TIMEOUT,Xr=mc.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Yr=mc.JOIN_CHANNEL_ERR_ALREADY_JOINED;mc.JOIN_CHANNEL_ERR_TOO_OFTEN;var Zr=mc.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,$r=mc.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,as=mf.LEAVE_CHANNEL_ERR_FAILURE,bs=mf.LEAVE_CHANNEL_ERR_REJECTED,eC=mf.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,fC=mf.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,cs=Wb.LOGIN_ERR_UNKNOWN,Bg=Wb.LOGIN_ERR_REJECTED,hi=Wb.LOGIN_ERR_INVALID_ARGUMENT,ds=Wb.LOGIN_ERR_INVALID_APP_ID,es=Wb.LOGIN_ERR_INVALID_TOKEN,ii=Wb.LOGIN_ERR_TOKEN_EXPIRED;Wb.LOGIN_ERR_NOT_AUTHORIZED;var gC=Wb.LOGIN_ERR_ALREADY_LOGIN,hC=Wb.LOGIN_ERR_TIMEOUT,iC=Wb.LOGIN_ERR_TOO_OFTEN,fs=Cl.LOGOUT_ERR_USER_NOT_LOGGED_IN,gs=Wc.PEER_MESSAGE_ERR_FAILURE,Fl=Wc.PEER_MESSAGE_ERR_TIMEOUT,hs=Wc.PEER_MESSAGE_ERR_TOO_OFTEN,Gl=Wc.PEER_MESSAGE_ERR_INVALID_USERID,Ie=Wc.PEER_MESSAGE_ERR_INVALID_MESSAGE,Hl=Wc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,jC=Wc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,is=fe.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;fe.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var kC=fe.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;fe.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var lC=fe.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,mC=Xc.RENEW_TOKEN_ERR_FAILURE,nC=Xc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Xc.RENEW_TOKEN_ERR_REJECTED,Xc.RENEW_TOKEN_ERR_TOO_OFTEN;var oC=Xc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,pC=Xc.RENEW_TOKEN_ERR_INVALID_TOKEN,qC=Xc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,js=Zc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Cg=Zc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Zc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var rC=Zc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Zc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var ks=Zc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Il=Zc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;nf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,nf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,nf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,nf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var Dg=$c.UPLOAD_MEDIA_ERR_FAILURE,Of=$c.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,ji=$c.UPLOAD_MEDIA_ERR_TIMEOUT,sC=$c.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,tC=$c.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ls=$c.UPLOAD_MEDIA_ERR_INTERRUPTED,uC=$c.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,Eg=ad.DOWNLOAD_MEDIA_ERR_FAILURE,Jl=ad.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,vC=ad.DOWNLOAD_MEDIA_ERR_TIMEOUT,wC=ad.DOWNLOAD_MEDIA_ERR_NOT_EXIST,xC=ad.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ms=ad.DOWNLOAD_MEDIA_ERR_INTERRUPTED,yC=ad.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,zC=function(i,e){var o;return nl(i,function(s,l,f){return!(o=e(s,l,f))}),!!o},ki=function(i,e,o){if(!ob(o))return!1;var s=V(e);return!!(s=="number"?Nd(o)&&cl(e,o.length):s=="string"&&e in o)&&sg(o[e],i)},Kl=function(i,e,o){var s=Za(i)?xr:zC;return o&&ki(i,e,o)&&(e=void 0),s(i,jf(e))},AC=function(i,e){var o=-1,s=Nd(i)?Array(i.length):[];return nl(i,function(l,f,h){s[++o]=e(l,f,h)}),s},BC=function(i,e){var o=i.length;for(i.sort(e);o--;)i[o]=i[o].value;return i},CC=function(i,e,o){e=e.length?ve(e,function(l){return Za(l)?function(f){return ai(f,l.length===1?l[0]:l)}:l}):[bi];var s=-1;return e=ve(e,Yh(jf)),i=AC(i,function(l,f,h){return{criteria:ve(e,function(p){return p(l)}),index:++s,value:l}}),BC(i,function(l,f){t:{for(var h=-1,p=l.criteria,d=f.criteria,g=p.length,b=o.length;++h<g;){e:{var y=p[h],w=d[h];if(y!==w){var _=y!==void 0,A=y===null,k=y==y,I=we(y),j=w!==void 0,F=w===null,K=w==w,_t=we(w);if(!F&&!_t&&!I&&y>w||I&&j&&K&&!F&&!_t||A&&j&&K||!_&&K||!k){y=1;break e}if(!A&&!I&&!_t&&y<w||_t&&_&&k&&!A&&!I||F&&_&&k||!j&&k||!K){y=-1;break e}}y=0}if(y){l=h>=b?y:y*(o[h]=="desc"?-1:1);break t}}l=l.index-f.index}return l})},ns=function(i,e){return vr(ur(i,e,bi),i+"")},os=ns(function(i,e){if(i==null)return[];var o=e.length;return 1<o&&ki(i,e[0],e[1])?e=[]:2<o&&ki(e[0],e[1],e[2])&&(e=[e[0]]),CC(i,Ei(e,1),[])}),ps=function(i){if(i.__esModule)return i;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(i).forEach(function(o){var s=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:function(){return i[o]}})}),e}(yB),qs=cb(function(i,e){Object.defineProperty(e,"__esModule",{value:!0});var o=[],s=function(l,f){return new WebSocket(l,f)};e.normalClosureMessage="Normal closure",e.default=function(l,f){var h=(f=f===void 0?{protocols:o,makeWebSocket:s}:f).protocols,p=h===void 0?o:h,d=(f=f.makeWebSocket)===void 0?s:f;return new ps.Observable(function(g){var b,y=new ps.Subject,w=d(l,p),_=!1,A=!1,k=function(I){if(b)throw _=!0,I=Error("Web socket message factory function called more than once"),g.error(I),I;return b=I.subscribe(function(j){w.send(j)}),y};return w.onopen=function(){A?(_=!0,w.close()):g.next(k)},w.onmessage=function(I){y.next(I.data)},w.onerror=function(I){_=!0,g.error(Error(I.message))},w.onclose=function(I){_||(_=!0,A?(g.complete(),y.complete()):g.error(Error(I.code===1e3?e.normalClosureMessage:I.reason)))},function(){A=!0,b&&b.unsubscribe(),_||(_=!0,w.close())}})}});(function(i){i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")&&i.default})(qs);var Vi=function(i,e,o){(o===void 0||sg(i[e],o))&&(o!==void 0||e in i)||ug(i,e,o)},Ui=function(i,e){if((e!=="constructor"||typeof i[e]!="function")&&e!="__proto__")return i[e]},DC=function(i){return ns(function(e,o){var s=-1,l=o.length,f=1<l?o[l-1]:void 0,h=2<l?o[2]:void 0;for(f=3<i.length&&typeof f=="function"?(l--,f):void 0,h&&ki(o[0],o[1],h)&&(f=3>l?void 0:f,l=1),e=Object(e);++s<l;)(h=o[s])&&i(e,h,s,f);return e})}(function(i,e,o,s){yn(i,e,o,s)}),EC=Math.floor,FC=Math.random,rs=function(i,e){return i+EC(FC()*(e-i+1))},ss=function(i){var e=i.length;return e?i[rs(0,e-1)]:void 0},GC=function(i,e){return ve(e,function(o){return i[o]})},tj=function(i){return i==null?[]:GC(i,Jd(i))},HC=function(i){return ss(tj(i))},fo=function(i){return(Za(i)?ss:HC)(i)},Cn=[],Dn=function(i,e){return new WebSocket(i,e)},IC=Math.floor;M({target:"Number",stat:!0},{isInteger:function(i){return!ha(i)&&isFinite(i)&&IC(i)===i}}),Up("from",ok,nk);var JC=function(i,e){for(var o=Array(arguments.length-1),s=0,l=2,f=!0;l<arguments.length;)o[s++]=arguments[l++];return new Promise(function(h,p){o[s]=function(d){if(f)if(f=!1,d)p(d);else{for(var g=Array(arguments.length-1),b=0;b<g.length;)g[b++]=arguments[b];h.apply(null,g)}};try{i.apply(e||null,o)}catch(d){f&&(f=!1,p(d))}})},KC=cb(function(i,e){e.length=function(l){var f=l.length;if(!f)return 0;for(var h=0;1<--f%4&&l.charAt(f)==="=";)++h;return Math.ceil(3*l.length)/4-h};var o=Array(64),s=Array(123);for(i=0;64>i;)s[o[i]=26>i?i+65:52>i?i+71:62>i?i-4:i-59|43]=i++;e.encode=function(l,f,h){for(var p,d=null,g=[],b=0,y=0;f<h;){var w=l[f++];switch(y){case 0:g[b++]=o[w>>2],p=(3&w)<<4,y=1;break;case 1:g[b++]=o[p|w>>4],p=(15&w)<<2,y=2;break;case 2:g[b++]=o[p|w>>6],g[b++]=o[63&w],y=0}8191<b&&((d||(d=[])).push(String.fromCharCode.apply(String,g)),b=0)}return y&&(g[b++]=o[p],g[b++]=61,y===1&&(g[b++]=61)),d?(b&&d.push(String.fromCharCode.apply(String,g.slice(0,b))),d.join("")):String.fromCharCode.apply(String,g.slice(0,b))},e.decode=function(l,f,h){for(var p,d=h,g=0,b=0;b<l.length;){var y=l.charCodeAt(b++);if(y===61&&1<g)break;if((y=s[y])===void 0)throw Error("invalid encoding");switch(g){case 0:p=y,g=1;break;case 1:f[h++]=p<<2|(48&y)>>4,p=y,g=2;break;case 2:f[h++]=(15&p)<<4|(60&y)>>2,p=y,g=3;break;case 3:f[h++]=(3&p)<<6|y,g=0}}if(g===1)throw Error("invalid encoding");return h-d},e.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}});Vg.prototype.on=function(i,e,o){return(this._listeners[i]||(this._listeners[i]=[])).push({fn:e,ctx:o||this}),this},Vg.prototype.off=function(i,e){if(i===void 0)this._listeners={};else if(e===void 0)this._listeners[i]=[];else{i=this._listeners[i];for(var o=0;o<i.length;)i[o].fn===e?i.splice(o,1):++o}return this},Vg.prototype.emit=function(i){var e=this._listeners[i];if(e){for(var o=[],s=1;s<arguments.length;)o.push(arguments[s++]);for(s=0;s<e.length;)e[s].fn.apply(e[s++].ctx,o)}return this};var LC=En(En),MC=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(i){}return null},NC=cb(function(i,e){e.length=function(o){for(var s,l=0,f=0;f<o.length;++f)128>(s=o.charCodeAt(f))?l+=1:2048>s?l+=2:(64512&s)==55296&&(64512&o.charCodeAt(f+1))==56320?(++f,l+=4):l+=3;return l},e.read=function(o,s,l){if(1>l-s)return"";for(var f,h=null,p=[],d=0;s<l;)128>(f=o[s++])?p[d++]=f:191<f&&224>f?p[d++]=(31&f)<<6|63&o[s++]:239<f&&365>f?(f=((7&f)<<18|(63&o[s++])<<12|(63&o[s++])<<6|63&o[s++])-65536,p[d++]=55296+(f>>10),p[d++]=56320+(1023&f)):p[d++]=(15&f)<<12|(63&o[s++])<<6|63&o[s++],8191<d&&((h||(h=[])).push(String.fromCharCode.apply(String,p)),d=0);return h?(d&&h.push(String.fromCharCode.apply(String,p.slice(0,d))),h.join("")):String.fromCharCode.apply(String,p.slice(0,d))},e.write=function(o,s,l){for(var f,h,p=l,d=0;d<o.length;++d)128>(f=o.charCodeAt(d))?s[l++]=f:(2048>f?s[l++]=f>>6|192:((64512&f)==55296&&(64512&(h=o.charCodeAt(d+1)))==56320?(f=65536+((1023&f)<<10)+(1023&h),++d,s[l++]=f>>18|240,s[l++]=f>>12&63|128):s[l++]=f>>12|224,s[l++]=f>>6&63|128),s[l++]=63&f|128);return l-p}}),OC=function(i,e,o){var s=o||8192,l=s>>>1,f=null,h=s;return function(p){return 1>p||p>l?i(p):(h+p>s&&(f=i(s),h=0),p=e.call(f,h,h+=p),7&h&&(h=1+(7|h)),p)}},ge=$a.zero=new $a(0,0);ge.toNumber=function(){return 0},ge.zzEncode=ge.zzDecode=function(){return this},ge.length=function(){return 1};var PC=$a.zeroHash="\0\0\0\0\0\0\0\0";$a.fromNumber=function(i){if(i===0)return ge;var e=0>i;e&&(i=-i);var o=i>>>0;return i=(i-o)/4294967296>>>0,e&&(i=~i>>>0,o=~o>>>0,4294967295<++o&&(o=0,4294967295<++i&&(i=0))),new $a(o,i)},$a.from=function(i){if(typeof i=="number")return $a.fromNumber(i);if(W.isString(i)){if(!W.Long)return $a.fromNumber(parseInt(i,10));i=W.Long.fromString(i)}return i.low||i.high?new $a(i.low>>>0,i.high>>>0):ge},$a.prototype.toNumber=function(i){if(!i&&this.hi>>>31){i=1+~this.lo>>>0;var e=~this.hi>>>0;return i||(e=e+1>>>0),-(i+4294967296*e)}return this.lo+4294967296*this.hi},$a.prototype.toLong=function(i){return W.Long?new W.Long(0|this.lo,0|this.hi,!!i):{low:0|this.lo,high:0|this.hi,unsigned:!!i}};var Ad=String.prototype.charCodeAt;$a.fromHash=function(i){return i===PC?ge:new $a((Ad.call(i,0)|Ad.call(i,1)<<8|Ad.call(i,2)<<16|Ad.call(i,3)<<24)>>>0,(Ad.call(i,4)|Ad.call(i,5)<<8|Ad.call(i,6)<<16|Ad.call(i,7)<<24)>>>0)},$a.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},$a.prototype.zzEncode=function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},$a.prototype.zzDecode=function(){var i=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},$a.prototype.length=function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?e===0?16384>i?128>i?1:2:2097152>i?3:4:16384>e?128>e?5:6:2097152>e?7:8:128>o?9:10};var W=cb(function(i,e){function o(l,f,h){for(var p=Object.keys(f),d=0;d<p.length;++d)l[p[d]]!==void 0&&h||(l[p[d]]=f[p[d]]);return l}function s(l){function f(h,p){if(!(this instanceof f))return new f(h,p);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:Error().stack||""}),p&&o(this,p)}return(f.prototype=Object.create(Error.prototype)).constructor=f,Object.defineProperty(f.prototype,"name",{get:function(){return l}}),f.prototype.toString=function(){return this.name+": "+this.message},f}e.asPromise=JC,e.base64=KC,e.EventEmitter=Vg,e.float=LC,e.inquire=MC,e.utf8=NC,e.pool=OC,e.LongBits=$a,e.isNode=!!(Ka!==void 0&&Ka&&Ka.process&&Ka.process.versions&&Ka.process.versions.node),e.global=e.isNode&&Ka||typeof window<"u"&&window||typeof self<"u"&&self||Ka,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},e.isString=function(l){return typeof l=="string"||l instanceof String},e.isObject=function(l){return l&&V(l)==="object"},e.isset=e.isSet=function(l,f){var h=l[f];return!(h==null||!l.hasOwnProperty(f))&&(V(h)!=="object"||0<(Array.isArray(h)?h.length:Object.keys(h).length))},e.Buffer=function(){try{var l=e.inquire("buffer").Buffer;return l.prototype.utf8Write?l:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(l){return typeof l=="number"?e.Buffer?e._Buffer_allocUnsafe(l):new e.Array(l):e.Buffer?e._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(l){return l?e.LongBits.from(l).toHash():e.LongBits.zeroHash},e.longFromHash=function(l,f){return l=e.LongBits.fromHash(l),e.Long?e.Long.fromBits(l.lo,l.hi,f):l.toNumber(!!f)},e.merge=o,e.lcFirst=function(l){return l.charAt(0).toLowerCase()+l.substring(1)},e.newError=s,e.ProtocolError=s("ProtocolError"),e.oneOfGetter=function(l){for(var f={},h=0;h<l.length;++h)f[l[h]]=1;return function(){for(var p=Object.keys(this),d=p.length-1;-1<d;--d)if(f[p[d]]===1&&this[p[d]]!==void 0&&this[p[d]]!==null)return p[d]}},e.oneOfSetter=function(l){return function(f){for(var h=0;h<l.length;++h)l[h]!==f&&delete this[l[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var l=e.Buffer;l?(e._Buffer_from=l.from!==Uint8Array.from&&l.from||function(f,h){return new l(f,h)},e._Buffer_allocUnsafe=l.allocUnsafe||function(f){return new l(f)}):e._Buffer_from=e._Buffer_allocUnsafe=null}}),cj=na,Ll,li=W.LongBits,ts=W.base64,us=W.utf8,vs=function(){return W.Buffer?function(){return(na.create=function(){return new Ll})()}:function(){return new na}};na.create=vs(),na.alloc=function(i){return new W.Array(i)},W.Array!==Array&&(na.alloc=W.pool(na.alloc,W.Array.prototype.subarray)),na.prototype._push=function(i,e,o){return this.tail=this.tail.next=new Kf(i,e,o),this.len+=e,this},$i.prototype=Object.create(Kf.prototype),$i.prototype.fn=function(i,e,o){for(;127<i;)e[o++]=127&i|128,i>>>=7;e[o]=i},na.prototype.uint32=function(i){return this.len+=(this.tail=this.tail.next=new $i(128>(i>>>=0)?1:16384>i?2:2097152>i?3:268435456>i?4:5,i)).len,this},na.prototype.int32=function(i){return 0>i?this._push(aj,10,li.fromNumber(i)):this.uint32(i)},na.prototype.sint32=function(i){return this.uint32((i<<1^i>>31)>>>0)},na.prototype.uint64=function(i){return i=li.from(i),this._push(aj,i.length(),i)},na.prototype.int64=na.prototype.uint64,na.prototype.sint64=function(i){return i=li.from(i).zzEncode(),this._push(aj,i.length(),i)},na.prototype.bool=function(i){return this._push(Zi,1,i?1:0)},na.prototype.fixed32=function(i){return this._push(bj,4,i>>>0)},na.prototype.sfixed32=na.prototype.fixed32,na.prototype.fixed64=function(i){return i=li.from(i),this._push(bj,4,i.lo)._push(bj,4,i.hi)},na.prototype.sfixed64=na.prototype.fixed64,na.prototype.float=function(i){return this._push(W.float.writeFloatLE,4,i)},na.prototype.double=function(i){return this._push(W.float.writeDoubleLE,8,i)};var QC=W.Array.prototype.set?function(i,e,o){e.set(i,o)}:function(i,e,o){for(var s=0;s<i.length;++s)e[o+s]=i[s]};na.prototype.bytes=function(i){var e=i.length>>>0;if(!e)return this._push(Zi,1,0);if(W.isString(i)){var o=na.alloc(e=ts.length(i));ts.decode(i,o,0),i=o}return this.uint32(e)._push(QC,e,i)},na.prototype.string=function(i){var e=us.length(i);return e?this.uint32(e)._push(us.write,e,i):this._push(Zi,1,0)},na.prototype.fork=function(){return this.states=new Nv(this),this.head=this.tail=new Kf(Yi,0,0),this.len=0,this},na.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Kf(Yi,0,0),this.len=0),this},na.prototype.ldelim=function(){var i=this.head,e=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=i.next,this.tail=e,this.len+=o),this},na.prototype.finish=function(){for(var i=this.head.next,e=this.constructor.alloc(this.len),o=0;i;)i.fn(i.val,e,o),o+=i.len,i=i.next;return e},na._configure=function(i){Ll=i,na.create=vs(),Ll._configure()},(rc.prototype=Object.create(cj.prototype)).constructor=rc,rc._configure=function(){rc.alloc=W._Buffer_allocUnsafe,rc.writeBytesBuffer=W.Buffer&&W.Buffer.prototype instanceof Uint8Array&&W.Buffer.prototype.set.name==="set"?function(i,e,o){e.set(i,o)}:function(i,e,o){if(i.copy)i.copy(e,o,0,i.length);else for(var s=0;s<i.length;)e[o++]=i[s++]}},rc.prototype.bytes=function(i){W.isString(i)&&(i=W._Buffer_from(i,"base64"));var e=i.length>>>0;return this.uint32(e),e&&this._push(rc.writeBytesBuffer,e,i),this},rc.prototype.string=function(i){var e=W.Buffer.byteLength(i);return this.uint32(e),e&&this._push(Ov,e,i),this},rc._configure();var ej=Qa,Ml,Jn=W.LongBits,RC=W.utf8,ws=typeof Uint8Array<"u"?function(i){if(i instanceof Uint8Array||Array.isArray(i))return new Qa(i);throw Error("illegal buffer")}:function(i){if(Array.isArray(i))return new Qa(i);throw Error("illegal buffer")},xs=function(){return W.Buffer?function(i){return(Qa.create=function(e){return W.Buffer.isBuffer(e)?new Ml(e):ws(e)})(i)}:ws};Qa.create=xs(),Qa.prototype._slice=W.Array.prototype.subarray||W.Array.prototype.slice,Qa.prototype.uint32=function(){var i=4294967295;return function(){if(i=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++]||(i=(i|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])||(i=(i|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])||(i=(i|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])||(i=(i|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++]))return i;if((this.pos+=5)>this.len)throw this.pos=this.len,dc(this,10);return i}}(),Qa.prototype.int32=function(){return 0|this.uint32()},Qa.prototype.sint32=function(){var i=this.uint32();return i>>>1^-(1&i)|0},Qa.prototype.bool=function(){return this.uint32()!==0},Qa.prototype.fixed32=function(){if(this.pos+4>this.len)throw dc(this,4);return Wg(this.buf,this.pos+=4)},Qa.prototype.sfixed32=function(){if(this.pos+4>this.len)throw dc(this,4);return 0|Wg(this.buf,this.pos+=4)},Qa.prototype.float=function(){if(this.pos+4>this.len)throw dc(this,4);var i=W.float.readFloatLE(this.buf,this.pos);return this.pos+=4,i},Qa.prototype.double=function(){if(this.pos+8>this.len)throw dc(this,4);var i=W.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,i},Qa.prototype.bytes=function(){var i=this.uint32(),e=this.pos,o=this.pos+i;if(o>this.len)throw dc(this,i);return this.pos+=i,Array.isArray(this.buf)?this.buf.slice(e,o):e===o?new this.buf.constructor(0):this._slice.call(this.buf,e,o)},Qa.prototype.string=function(){var i=this.bytes();return RC.read(i,0,i.length)},Qa.prototype.skip=function(i){if(typeof i=="number"){if(this.pos+i>this.len)throw dc(this,i);this.pos+=i}else do if(this.pos>=this.len)throw dc(this);while(128&this.buf[this.pos++]);return this},Qa.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=7&this.uint32())!=4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this},Qa._configure=function(i){Ml=i,Qa.create=xs(),Ml._configure();var e=W.Long?"toLong":"toNumber";W.merge(Qa.prototype,{int64:function(){return dj.call(this)[e](!1)},uint64:function(){return dj.call(this)[e](!0)},sint64:function(){return dj.call(this).zzDecode()[e](!1)},fixed64:function(){return Kn.call(this)[e](!0)},sfixed64:function(){return Kn.call(this)[e](!1)}})},(Od.prototype=Object.create(ej.prototype)).constructor=Od,Od._configure=function(){W.Buffer&&(Od.prototype._slice=W.Buffer.prototype.slice)},Od.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))},Od._configure(),(Lf.prototype=Object.create(W.EventEmitter.prototype)).constructor=Lf,Lf.prototype.rpcCall=function i(e,o,s,l,f){if(!l)throw TypeError("request must be specified");var h=this;if(!f)return W.asPromise(i,h,e,o,s,l);if(h.rpcImpl)try{return h.rpcImpl(e,o[h.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(p,d){if(p)return h.emit("error",p,e),f(p);if(d!==null){if(!(d instanceof s))try{d=s[h.responseDelimited?"decodeDelimited":"decode"](d)}catch(g){return h.emit("error",g,e),f(g)}return h.emit("data",d,e),f(null,d)}h.end(!0)})}catch(p){h.emit("error",p,e),setTimeout(function(){f(p)},0)}else setTimeout(function(){f(Error("already ended"))},0)},Lf.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var SC=cb(function(i,e){e.Service=Lf}),TC={},nc=cb(function(i,e){function o(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}var s=e;s.build="minimal",s.Writer=cj,s.BufferWriter=rc,s.Reader=ej,s.BufferReader=Od,s.util=W,s.rpc=SC,s.roots=TC,s.configure=o,o()});nc.util.Long=U,nc.configure();var u=nc.Reader,N=nc.Writer,r=nc.util,t=nc.roots.default||(nc.roots.default={}),UC=t.URI=function(){var i={},e=Object.create(i);return e[i[0]="Unknown"]=0,e[i[1]="PingUri"]=1,e[i[2]="PongUri"]=2,e[i[11]="UserJoinUri"]=11,e[i[12]="UserRespUri"]=12,e[i[21]="UserQuitUri"]=21,e[i[22]="UserDropUri"]=22,e[i[31]="GroupEnterUri"]=31,e[i[32]="GroupLeaveUri"]=32,e[i[33]="GroupReplyUri"]=33,e[i[36]="GroupEnterNoticeUri"]=36,e[i[37]="GroupLeaveNoticeUri"]=37,e[i[38]="GroupEventNoticeUri"]=38,e[i[39]="GroupCountNoticeUri"]=39,e[i[41]="UserStatusListUri"]=41,e[i[42]="UserStatusResultUri"]=42,e[i[51]="GroupStatusListUri"]=51,e[i[52]="GroupStatusResultUri"]=52,e[i[55]="GroupAllUsersListUri"]=55,e[i[56]="GroupAllUsersResultUri"]=56,e[i[100]="MessageUri"]=100,e[i[101]="AckUri"]=101,e[i[115]="FileUploadIndexGetUri"]=115,e[i[116]="FileUploadIndexRetUri"]=116,e[i[117]="FileUploadIndexSetUri"]=117,e[i[118]="FileUploadIndexFinUri"]=118,e[i[119]="FileUploadIndexErrUri"]=119,e[i[125]="FileDownloadIndexGetUri"]=125,e[i[126]="FileDownloadIndexRetUri"]=126,e[i[127]="FileDownloadIndexErrUri"]=127,e[i[201]="UserJoinNoticeUri"]=201,e[i[202]="UserQuitNoticeUri"]=202,e[i[203]="UserWaitNoticeUri"]=203,e[i[301]="UserAttributeGetUri"]=301,e[i[302]="UserAttributeRetUri"]=302,e[i[303]="UserAttributeSetUri"]=303,e[i[304]="UserAttributeModUri"]=304,e[i[305]="UserAttributeDelUri"]=305,e[i[307]="UserAttributeRspUri"]=307,e[i[308]="UserAttributeErrUri"]=308,e[i[311]="UserAttributeKeysGetUri"]=311,e[i[312]="UserAttributeKeysRetUri"]=312,e[i[351]="GroupAttributeGetUri"]=351,e[i[352]="GroupAttributeRetUri"]=352,e[i[353]="GroupAttributeSetUri"]=353,e[i[354]="GroupAttributeModUri"]=354,e[i[355]="GroupAttributeDelUri"]=355,e[i[356]="GroupAttributeAltUri"]=356,e[i[357]="GroupAttributeRspUri"]=357,e[i[358]="GroupAttributeErrUri"]=358,e[i[361]="GroupAttributeKeysGetUri"]=361,e[i[362]="GroupAttributeKeysRetUri"]=362,e[i[401]="SubscribeUserStatusUri"]=401,e[i[402]="UnsubscribeUserStatusUri"]=402,e[i[499]="SubscribeResponseUri"]=499,e}(),mi=t.Wrapper=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.uri=0,i.prototype.data=r.newBuffer([]),i.encode=function(e,o){return o||(o=N.create()),e.uri!=null&&Object.hasOwnProperty.call(e,"uri")&&o.uint32(8).int32(e.uri),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&o.uint32(18).bytes(e.data),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.Wrapper;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.uri=e.int32();break;case 2:s.data=e.bytes();break;default:e.skipType(7&l)}}return s},i}(),VC=t.Ping=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.ms!=null&&Object.hasOwnProperty.call(e,"ms")&&o.uint32(16).uint64(e.ms),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.Ping;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.ms=e.uint64();break;default:e.skipType(7&l)}}return s},i}(),WC=t.Pong=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.ms!=null&&Object.hasOwnProperty.call(e,"ms")&&o.uint32(16).uint64(e.ms),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.Pong;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.ms=e.uint64();break;default:e.skipType(7&l)}}return s},i}(),XC=t.UserJoin=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.opt=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.ticket="",i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.opt!=null&&Object.hasOwnProperty.call(e,"opt")&&o.uint32(16).uint64(e.opt),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(24).uint64(e.instance),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(34).string(e.account),e.ticket!=null&&Object.hasOwnProperty.call(e,"ticket")&&o.uint32(42).string(e.ticket),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserJoin;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.opt=e.uint64();break;case 3:s.instance=e.uint64();break;case 4:s.account=e.string();break;case 5:s.ticket=e.string();break;default:e.skipType(7&l)}}return s},i}(),YC=t.UserResp=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(24).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserResp;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),ZC=t.UserQuit=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.encode=function(e,o){return o||(o=N.create()),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserQuit;e.pos<o;){var l=e.uint32();e.skipType(7&l)}return s},i}(),$C=t.UserDrop=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(8).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserDrop;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),aD=t.GroupEnter=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupEnter;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;default:e.skipType(7&l)}}return s},i}(),bD=t.GroupLeave=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.account="",i.encode=function(e,o){return o||(o=N.create()),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(10).string(e.account),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupLeave;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.account=e.string();break;default:e.skipType(7&l)}}return s},i}(),cD=t.GroupReply=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(24).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupReply;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),ys=t.GroupLeaveNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.user="",i.prototype.group="",i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.size=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.user!=null&&Object.hasOwnProperty.call(e,"user")&&o.uint32(18).string(e.user),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(26).string(e.group),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(32).uint64(e.instance),e.size!=null&&Object.hasOwnProperty.call(e,"size")&&o.uint32(40).uint32(e.size),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupLeaveNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.user=e.string();break;case 3:s.group=e.string();break;case 4:s.instance=e.uint64();break;case 5:s.size=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),zs=t.GroupEnterNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.user="",i.prototype.group="",i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.size=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.user!=null&&Object.hasOwnProperty.call(e,"user")&&o.uint32(18).string(e.user),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(26).string(e.group),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(32).uint64(e.instance),e.size!=null&&Object.hasOwnProperty.call(e,"size")&&o.uint32(40).uint32(e.size),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupEnterNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.user=e.string();break;case 3:s.group=e.string();break;case 4:s.instance=e.uint64();break;case 5:s.size=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),As=t.Message=function(){function i(e){if(this.MiscMap={},e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.dialogue=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.sequence=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.options=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.src="",i.prototype.dst="",i.prototype.payload=r.newBuffer([]),i.prototype.MiscMap=r.emptyObject,i.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,i.encode=function(e,o){if(o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.dialogue!=null&&Object.hasOwnProperty.call(e,"dialogue")&&o.uint32(16).uint64(e.dialogue),e.sequence!=null&&Object.hasOwnProperty.call(e,"sequence")&&o.uint32(24).uint64(e.sequence),e.options!=null&&Object.hasOwnProperty.call(e,"options")&&o.uint32(32).uint64(e.options),e.src!=null&&Object.hasOwnProperty.call(e,"src")&&o.uint32(42).string(e.src),e.dst!=null&&Object.hasOwnProperty.call(e,"dst")&&o.uint32(50).string(e.dst),e.payload!=null&&Object.hasOwnProperty.call(e,"payload")&&o.uint32(58).bytes(e.payload),e.MiscMap!=null&&Object.hasOwnProperty.call(e,"MiscMap"))for(var s=Object.keys(e.MiscMap),l=0;l<s.length;++l)o.uint32(66).fork().uint32(10).string(s[l]).uint32(18).bytes(e.MiscMap[s[l]]).ldelim();return e.ms!=null&&Object.hasOwnProperty.call(e,"ms")&&o.uint32(72).uint64(e.ms),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s,l,f=new t.Message;e.pos<o;)switch(s=e.uint32(),s>>>3){case 1:f.instance=e.uint64();break;case 2:f.dialogue=e.uint64();break;case 3:f.sequence=e.uint64();break;case 4:f.options=e.uint64();break;case 5:f.src=e.string();break;case 6:f.dst=e.string();break;case 7:f.payload=e.bytes();break;case 8:f.MiscMap===r.emptyObject&&(f.MiscMap={});var h=e.uint32()+e.pos;for(s="",l=[];e.pos<h;){var p=e.uint32();switch(p>>>3){case 1:s=e.string();break;case 2:l=e.bytes();break;default:e.skipType(7&p)}}f.MiscMap[s]=l;break;case 9:f.ms=e.uint64();break;default:e.skipType(7&s)}return f},i}(),Bs=t.Ack=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.dialogue=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.sequence=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.dialogue!=null&&Object.hasOwnProperty.call(e,"dialogue")&&o.uint32(16).uint64(e.dialogue),e.sequence!=null&&Object.hasOwnProperty.call(e,"sequence")&&o.uint32(24).uint64(e.sequence),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(32).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.Ack;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.instance=e.uint64();break;case 2:s.dialogue=e.uint64();break;case 3:s.sequence=e.uint64();break;case 4:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),dD=t.FileUploadIndexGet=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.hash=r.newBuffer([]),i.prototype.size=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.hash!=null&&Object.hasOwnProperty.call(e,"hash")&&o.uint32(18).bytes(e.hash),e.size!=null&&Object.hasOwnProperty.call(e,"size")&&o.uint32(24).uint32(e.size),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileUploadIndexGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.hash=e.bytes();break;case 3:s.size=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),eD=t.FileUploadIndexRet=function(){function i(e){if(this.servers=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.unit=0,i.prototype.servers=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.unit!=null&&Object.hasOwnProperty.call(e,"unit")&&o.uint32(16).uint32(e.unit),e.servers!=null&&e.servers.length){o.uint32(26).fork();for(var s=0;s<e.servers.length;++s)o.uint32(e.servers[s]);o.ldelim()}return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileUploadIndexRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.unit=e.uint32();break;case 3:if(s.servers&&s.servers.length||(s.servers=[]),(7&l)==2)for(l=e.uint32()+e.pos;e.pos<l;)s.servers.push(e.uint32());else s.servers.push(e.uint32());break;default:e.skipType(7&l)}}return s},i}(),fD=t.FileUploadIndexSet=function(){function i(e){if(this.servers=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.hash=r.newBuffer([]),i.prototype.unit=0,i.prototype.servers=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.hash!=null&&Object.hasOwnProperty.call(e,"hash")&&o.uint32(18).bytes(e.hash),e.unit!=null&&Object.hasOwnProperty.call(e,"unit")&&o.uint32(24).uint32(e.unit),e.servers!=null&&e.servers.length){o.uint32(34).fork();for(var s=0;s<e.servers.length;++s)o.uint32(e.servers[s]);o.ldelim()}return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileUploadIndexSet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.hash=e.bytes();break;case 3:s.unit=e.uint32();break;case 4:if(s.servers&&s.servers.length||(s.servers=[]),(7&l)==2)for(l=e.uint32()+e.pos;e.pos<l;)s.servers.push(e.uint32());else s.servers.push(e.uint32());break;default:e.skipType(7&l)}}return s},i}(),gD=t.FileUploadIndexFin=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.zone=0,i.prototype.unit=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.zone!=null&&Object.hasOwnProperty.call(e,"zone")&&o.uint32(16).uint32(e.zone),e.unit!=null&&Object.hasOwnProperty.call(e,"unit")&&o.uint32(24).uint32(e.unit),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileUploadIndexFin;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.zone=e.uint32();break;case 3:s.unit=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),hD=t.FileUploadIndexErr=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(16).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileUploadIndexErr;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),iD=t.FileDownloadIndexGet=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.zone=0,i.prototype.hash=r.newBuffer([]),i.prototype.size=0,i.prototype.unit=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.zone!=null&&Object.hasOwnProperty.call(e,"zone")&&o.uint32(16).uint32(e.zone),e.hash!=null&&Object.hasOwnProperty.call(e,"hash")&&o.uint32(26).bytes(e.hash),e.size!=null&&Object.hasOwnProperty.call(e,"size")&&o.uint32(32).uint32(e.size),e.unit!=null&&Object.hasOwnProperty.call(e,"unit")&&o.uint32(40).uint32(e.unit),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileDownloadIndexGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.zone=e.uint32();break;case 3:s.hash=e.bytes();break;case 4:s.size=e.uint32();break;case 5:s.unit=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),jD=t.FileDownloadIndexRet=function(){function i(e){if(this.servers=[],this.backups=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.unit=0,i.prototype.zone=0,i.prototype.servers=r.emptyArray,i.prototype.backups=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.unit!=null&&Object.hasOwnProperty.call(e,"unit")&&o.uint32(16).uint32(e.unit),e.zone!=null&&Object.hasOwnProperty.call(e,"zone")&&o.uint32(24).uint32(e.zone),e.servers!=null&&e.servers.length){o.uint32(34).fork();for(var s=0;s<e.servers.length;++s)o.uint32(e.servers[s]);o.ldelim()}if(e.backups!=null&&e.backups.length){for(o.uint32(42).fork(),s=0;s<e.backups.length;++s)o.uint32(e.backups[s]);o.ldelim()}return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileDownloadIndexRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.unit=e.uint32();break;case 3:s.zone=e.uint32();break;case 4:if(s.servers&&s.servers.length||(s.servers=[]),(7&l)==2)for(l=e.uint32()+e.pos;e.pos<l;)s.servers.push(e.uint32());else s.servers.push(e.uint32());break;case 5:if(s.backups&&s.backups.length||(s.backups=[]),(7&l)==2)for(l=e.uint32()+e.pos;e.pos<l;)s.backups.push(e.uint32());else s.backups.push(e.uint32());break;default:e.skipType(7&l)}}return s},i}(),kD=t.FileDownloadIndexErr=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(16).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.FileDownloadIndexErr;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),lD=t.GroupAllUsersList=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.pageSize=0,i.prototype.pageNumber=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.pageSize!=null&&Object.hasOwnProperty.call(e,"pageSize")&&o.uint32(24).uint32(e.pageSize),e.pageNumber!=null&&Object.hasOwnProperty.call(e,"pageNumber")&&o.uint32(32).uint32(e.pageNumber),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAllUsersList;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.pageSize=e.uint32();break;case 4:s.pageNumber=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),mD=t.GroupAllUsersResult=function(){function i(e){if(this.memberInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.totalSize=0,i.prototype.pageSize=0,i.prototype.pageNumber=0,i.prototype.memberInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.totalSize!=null&&Object.hasOwnProperty.call(e,"totalSize")&&o.uint32(24).uint32(e.totalSize),e.pageSize!=null&&Object.hasOwnProperty.call(e,"pageSize")&&o.uint32(32).uint32(e.pageSize),e.pageNumber!=null&&Object.hasOwnProperty.call(e,"pageNumber")&&o.uint32(40).uint32(e.pageNumber),e.memberInfos!=null&&e.memberInfos.length)for(var s=0;s<e.memberInfos.length;++s)t.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[s],o.uint32(50).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAllUsersResult;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.totalSize=e.uint32();break;case 4:s.pageSize=e.uint32();break;case 5:s.pageNumber=e.uint32();break;case 6:s.memberInfos&&s.memberInfos.length||(s.memberInfos=[]),s.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.MemberInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(o,s){return s||(s=N.create()),o.account!=null&&Object.hasOwnProperty.call(o,"account")&&s.uint32(10).string(o.account),o.ts!=null&&Object.hasOwnProperty.call(o,"ts")&&s.uint32(16).uint32(o.ts),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupAllUsersResult.MemberInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.account=o.string();break;case 2:l.ts=o.uint32();break;default:o.skipType(7&f)}}return l},e}(),i}(),nD=t.UserStatusList=function(){function i(e){if(this.users=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.users=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.users!=null&&e.users.length)for(var s=0;s<e.users.length;++s)o.uint32(18).string(e.users[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserStatusList;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.users&&s.users.length||(s.users=[]),s.users.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),oD=t.UserStatusResult=function(){function i(e){if(this.userInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.userInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.userInfos!=null&&e.userInfos.length)for(var s=0;s<e.userInfos.length;++s)t.UserStatusResult.UserStatusInfo.encode(e.userInfos[s],o.uint32(18).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserStatusResult;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.userInfos&&s.userInfos.length||(s.userInfos=[]),s.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.UserStatusInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(o,s){return s||(s=N.create()),o.account!=null&&Object.hasOwnProperty.call(o,"account")&&s.uint32(10).string(o.account),o.ts!=null&&Object.hasOwnProperty.call(o,"ts")&&s.uint32(16).uint32(o.ts),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.UserStatusResult.UserStatusInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.account=o.string();break;case 2:l.ts=o.uint32();break;default:o.skipType(7&f)}}return l},e}(),i}(),pD=t.UserAttributeGet=function(){function i(e){if(this.attributes=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.attributes=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.attributes!=null&&e.attributes.length)for(var s=0;s<e.attributes.length;++s)o.uint32(26).string(e.attributes[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.attributes&&s.attributes.length||(s.attributes=[]),s.attributes.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),qD=t.UserAttributeRet=function(){function i(e){if(this.attributeInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.attributeInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.attributeInfos!=null&&e.attributeInfos.length)for(var s=0;s<e.attributeInfos.length;++s)t.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[s],o.uint32(18).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.attributeInfos&&s.attributeInfos.length||(s.attributeInfos=[]),s.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.UserAttributeRet.AttributeInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;default:o.skipType(7&f)}}return l},e}(),i}(),rD=t.UserAttributeSet=function(){function i(e){if(this.attributeInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.attributeInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.attributeInfos!=null&&e.attributeInfos.length)for(var s=0;s<e.attributeInfos.length;++s)t.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[s],o.uint32(26).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeSet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.attributeInfos&&s.attributeInfos.length||(s.attributeInfos=[]),s.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.UserAttributeSet.AttributeInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;default:o.skipType(7&f)}}return l},e}(),i}(),sD=t.UserAttributeMod=function(){function i(e){if(this.attributeInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.attributeInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.attributeInfos!=null&&e.attributeInfos.length)for(var s=0;s<e.attributeInfos.length;++s)t.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[s],o.uint32(26).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeMod;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.attributeInfos&&s.attributeInfos.length||(s.attributeInfos=[]),s.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.UserAttributeMod.AttributeInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;default:o.skipType(7&f)}}return l},e}(),i}(),tD=t.UserAttributeDel=function(){function i(e){if(this.attributes=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.prototype.attributes=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),e.attributes!=null&&e.attributes.length)for(var s=0;s<e.attributes.length;++s)o.uint32(26).string(e.attributes[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeDel;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;case 3:s.attributes&&s.attributes.length||(s.attributes=[]),s.attributes.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),uD=t.UserAttributeErr=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(16).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeErr;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),vD=t.UserAttributeKeysGet=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.account="",i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.account!=null&&Object.hasOwnProperty.call(e,"account")&&o.uint32(18).string(e.account),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeKeysGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.account=e.string();break;default:e.skipType(7&l)}}return s},i}(),wD=t.UserAttributeKeysRet=function(){function i(e){if(this.keys=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.keys=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.keys!=null&&e.keys.length)for(var s=0;s<e.keys.length;++s)o.uint32(18).string(e.keys[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeKeysRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.keys&&s.keys.length||(s.keys=[]),s.keys.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),xD=t.UserAttributeRsp=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserAttributeRsp;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;default:e.skipType(7&l)}}return s},i}(),yD=t.GroupStatusList=function(){function i(e){if(this.groups=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.groups=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.groups!=null&&e.groups.length)for(var s=0;s<e.groups.length;++s)o.uint32(18).string(e.groups[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupStatusList;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.groups&&s.groups.length||(s.groups=[]),s.groups.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),zD=t.GroupStatusResult=function(){function i(e){if(this.groupInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.groupInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.groupInfos!=null&&e.groupInfos.length)for(var s=0;s<e.groupInfos.length;++s)t.GroupStatusResult.GroupInfo.encode(e.groupInfos[s],o.uint32(18).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupStatusResult;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.groupInfos&&s.groupInfos.length||(s.groupInfos=[]),s.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.GroupInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(o,s){return s||(s=N.create()),o.group!=null&&Object.hasOwnProperty.call(o,"group")&&s.uint32(10).string(o.group),o.memberCount!=null&&Object.hasOwnProperty.call(o,"memberCount")&&s.uint32(16).uint32(o.memberCount),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupStatusResult.GroupInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.group=o.string();break;case 2:l.memberCount=o.uint32();break;default:o.skipType(7&f)}}return l},e}(),i}(),AD=t.GroupCountNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.size=0,i.encode=function(e,o){return o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(16).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(26).string(e.group),e.size!=null&&Object.hasOwnProperty.call(e,"size")&&o.uint32(32).uint32(e.size),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupCountNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.instance=e.uint64();break;case 2:s.seq=e.uint64();break;case 3:s.group=e.string();break;case 4:s.size=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),BD=t.GroupAttributeGet=function(){function i(e){if(this.attributes=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.attributes=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.attributes!=null&&e.attributes.length)for(var s=0;s<e.attributes.length;++s)o.uint32(26).string(e.attributes[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.attributes&&s.attributes.length||(s.attributes=[]),s.attributes.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),CD=t.GroupAttributeRet=function(){function i(e){if(this.attributeMaps=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.attributeMaps=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.attributeMaps!=null&&e.attributeMaps.length)for(var s=0;s<e.attributeMaps.length;++s)t.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[s],o.uint32(18).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.attributeMaps&&s.attributeMaps.length||(s.attributeMaps=[]),s.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeMap=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),o.origin!=null&&Object.hasOwnProperty.call(o,"origin")&&s.uint32(26).string(o.origin),o.ms!=null&&Object.hasOwnProperty.call(o,"ms")&&s.uint32(32).uint64(o.ms),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupAttributeRet.AttributeMap;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;case 3:l.origin=o.string();break;case 4:l.ms=o.uint64();break;default:o.skipType(7&f)}}return l},e}(),i}(),DD=t.GroupAttributeSet=function(){function i(e){if(this.attributeInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.broadcast=!1,i.prototype.attributeInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.broadcast!=null&&Object.hasOwnProperty.call(e,"broadcast")&&o.uint32(24).bool(e.broadcast),e.attributeInfos!=null&&e.attributeInfos.length)for(var s=0;s<e.attributeInfos.length;++s)t.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[s],o.uint32(34).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeSet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.broadcast=e.bool();break;case 4:s.attributeInfos&&s.attributeInfos.length||(s.attributeInfos=[]),s.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupAttributeSet.AttributeInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;default:o.skipType(7&f)}}return l},e}(),i}(),ED=t.GroupAttributeMod=function(){function i(e){if(this.attributeInfos=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.broadcast=!1,i.prototype.attributeInfos=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.broadcast!=null&&Object.hasOwnProperty.call(e,"broadcast")&&o.uint32(24).bool(e.broadcast),e.attributeInfos!=null&&e.attributeInfos.length)for(var s=0;s<e.attributeInfos.length;++s)t.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[s],o.uint32(34).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeMod;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.broadcast=e.bool();break;case 4:s.attributeInfos&&s.attributeInfos.length||(s.attributeInfos=[]),s.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeInfo=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupAttributeMod.AttributeInfo;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;default:o.skipType(7&f)}}return l},e}(),i}(),FD=t.GroupAttributeDel=function(){function i(e){if(this.attributes=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.broadcast=!1,i.prototype.attributes=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.broadcast!=null&&Object.hasOwnProperty.call(e,"broadcast")&&o.uint32(24).bool(e.broadcast),e.attributes!=null&&e.attributes.length)for(var s=0;s<e.attributes.length;++s)o.uint32(34).string(e.attributes[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeDel;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.broadcast=e.bool();break;case 4:s.attributes&&s.attributes.length||(s.attributes=[]),s.attributes.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),GD=t.GroupAttributeAlt=function(){function i(e){if(this.attributeMaps=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.attributeMaps=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(24).uint64(e.instance),e.attributeMaps!=null&&e.attributeMaps.length)for(var s=0;s<e.attributeMaps.length;++s)t.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[s],o.uint32(34).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeAlt;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;case 3:s.instance=e.uint64();break;case 4:s.attributeMaps&&s.attributeMaps.length||(s.attributeMaps=[]),s.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.AttributeMap=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=r.Long?r.Long.fromBits(0,0,!0):0,e.encode=function(o,s){return s||(s=N.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&s.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&s.uint32(18).string(o.value),o.origin!=null&&Object.hasOwnProperty.call(o,"origin")&&s.uint32(26).string(o.origin),o.ms!=null&&Object.hasOwnProperty.call(o,"ms")&&s.uint32(32).uint64(o.ms),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.GroupAttributeAlt.AttributeMap;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.key=o.string();break;case 2:l.value=o.string();break;case 3:l.origin=o.string();break;case 4:l.ms=o.uint64();break;default:o.skipType(7&f)}}return l},e}(),i}(),HD=t.GroupAttributeRsp=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeRsp;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;default:e.skipType(7&l)}}return s},i}(),ID=t.GroupAttributeErr=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.code=0,i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(16).uint32(e.code),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeErr;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.code=e.uint32();break;default:e.skipType(7&l)}}return s},i}(),JD=t.GroupAttributeKeysGet=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.group="",i.encode=function(e,o){return o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.group!=null&&Object.hasOwnProperty.call(e,"group")&&o.uint32(18).string(e.group),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeKeysGet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.group=e.string();break;default:e.skipType(7&l)}}return s},i}(),KD=t.GroupAttributeKeysRet=function(){function i(e){if(this.keys=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.keys=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.keys!=null&&e.keys.length)for(var s=0;s<e.keys.length;++s)o.uint32(18).string(e.keys[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.GroupAttributeKeysRet;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.keys&&s.keys.length||(s.keys=[]),s.keys.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),LD=t.SubscribeUserStatus=function(){function i(e){if(this.users=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.users=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.users!=null&&e.users.length)for(var s=0;s<e.users.length;++s)o.uint32(18).string(e.users[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.SubscribeUserStatus;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.users&&s.users.length||(s.users=[]),s.users.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),MD=t.UnsubscribeUserStatus=function(){function i(e){if(this.users=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.users=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.users!=null&&e.users.length)for(var s=0;s<e.users.length;++s)o.uint32(18).string(e.users[s]);return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UnsubscribeUserStatus;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.users&&s.users.length||(s.users=[]),s.users.push(e.string());break;default:e.skipType(7&l)}}return s},i}(),ND=t.UserJoinNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.user="",i.encode=function(e,o){return o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(16).uint64(e.seq),e.user!=null&&Object.hasOwnProperty.call(e,"user")&&o.uint32(26).string(e.user),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserJoinNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.instance=e.uint64();break;case 2:s.seq=e.uint64();break;case 3:s.user=e.string();break;default:e.skipType(7&l)}}return s},i}(),OD=t.UserQuitNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.user="",i.encode=function(e,o){return o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(16).uint64(e.seq),e.user!=null&&Object.hasOwnProperty.call(e,"user")&&o.uint32(26).string(e.user),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserQuitNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.instance=e.uint64();break;case 2:s.seq=e.uint64();break;case 3:s.user=e.string();break;default:e.skipType(7&l)}}return s},i}(),PD=t.UserWaitNotice=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.instance=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.user="",i.encode=function(e,o){return o||(o=N.create()),e.instance!=null&&Object.hasOwnProperty.call(e,"instance")&&o.uint32(8).uint64(e.instance),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(16).uint64(e.seq),e.user!=null&&Object.hasOwnProperty.call(e,"user")&&o.uint32(26).string(e.user),o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.UserWaitNotice;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.instance=e.uint64();break;case 2:s.seq=e.uint64();break;case 3:s.user=e.string();break;default:e.skipType(7&l)}}return s},i}(),QD=t.SubscribeResponse=function(){function i(e){if(this.errors=[],e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.seq=r.Long?r.Long.fromBits(0,0,!0):0,i.prototype.errors=r.emptyArray,i.encode=function(e,o){if(o||(o=N.create()),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&o.uint32(8).uint64(e.seq),e.errors!=null&&e.errors.length)for(var s=0;s<e.errors.length;++s)t.SubscribeResponse.SubscribeErrorsType.encode(e.errors[s],o.uint32(18).fork()).ldelim();return o},i.decode=function(e,o){e instanceof u||(e=u.create(e)),o=o===void 0?e.len:e.pos+o;for(var s=new t.SubscribeResponse;e.pos<o;){var l=e.uint32();switch(l>>>3){case 1:s.seq=e.uint64();break;case 2:s.errors&&s.errors.length||(s.errors=[]),s.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&l)}}return s},i.SubscribeErrorsType=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(o,s){return s||(s=N.create()),o.account!=null&&Object.hasOwnProperty.call(o,"account")&&s.uint32(10).string(o.account),o.code!=null&&Object.hasOwnProperty.call(o,"code")&&s.uint32(16).uint32(o.code),s},e.decode=function(o,s){o instanceof u||(o=u.create(o)),s=s===void 0?o.len:o.pos+s;for(var l=new t.SubscribeResponse.SubscribeErrorsType;o.pos<s;){var f=o.uint32();switch(f>>>3){case 1:l.account=o.string();break;case 2:l.code=o.uint32();break;default:o.skipType(7&f)}}return l},e}(),i}(),RD=Object.freeze({__proto__:null,URI:UC,Wrapper:mi,Ping:VC,Pong:WC,UserJoin:XC,UserResp:YC,UserQuit:ZC,UserDrop:$C,GroupEnter:aD,GroupLeave:bD,GroupReply:cD,GroupLeaveNotice:ys,GroupEnterNotice:zs,Message:As,Ack:Bs,FileUploadIndexGet:dD,FileUploadIndexRet:eD,FileUploadIndexSet:fD,FileUploadIndexFin:gD,FileUploadIndexErr:hD,FileDownloadIndexGet:iD,FileDownloadIndexRet:jD,FileDownloadIndexErr:kD,GroupAllUsersList:lD,GroupAllUsersResult:mD,UserStatusList:nD,UserStatusResult:oD,UserAttributeGet:pD,UserAttributeRet:qD,UserAttributeSet:rD,UserAttributeMod:sD,UserAttributeDel:tD,UserAttributeErr:uD,UserAttributeKeysGet:vD,UserAttributeKeysRet:wD,UserAttributeRsp:xD,GroupStatusList:yD,GroupStatusResult:zD,GroupCountNotice:AD,GroupAttributeGet:BD,GroupAttributeRet:CD,GroupAttributeSet:DD,GroupAttributeMod:ED,GroupAttributeDel:FD,GroupAttributeAlt:GD,GroupAttributeRsp:HD,GroupAttributeErr:ID,GroupAttributeKeysGet:JD,GroupAttributeKeysRet:KD,SubscribeUserStatus:LD,UnsubscribeUserStatus:MD,UserJoinNotice:ND,UserQuitNotice:OD,UserWaitNotice:PD,SubscribeResponse:QD,default:t}),SD=Math.ceil,Cs=function(i){return function(e,o,s){var l=(e=String(mb(e))).length;return s=s===void 0?" ":String(s),(o=va(o))<=l||s==""?e:(o-=l,(l=ap.call(s,SD(o/s.length))).length>o&&(l=l.slice(0,o)),i?e+l:l+e)}},TD=Cs(!1),UD=Cs(!0),Ds=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Re);M({target:"String",proto:!0,forced:Ds},{padEnd:function(i){return UD(this,i,1<arguments.length?arguments[1]:void 0)}});var VD=Sf,Es=function(i){return function(e){e=tb(e);for(var o,s=Mc(e),l=s.length,f=0,h=[];l>f;)o=s[f++],fa&&!VD.call(e,o)||h.push(i?[o,e[o]]:e[o]);return h}},WD=Es(!0),XD=Es(!1);M({target:"Object",stat:!0},{entries:function(i){return WD(i)}});var YD=Jb.f,Fs="".endsWith,ZD=Math.min,Gs=Mk("endsWith"),$D=!Gs&&!!function(){var i=YD(String.prototype,"endsWith");return i&&!i.writable}();M({target:"String",proto:!0,forced:!$D&&!Gs},{endsWith:function(i){var e=String(mb(this));Lk(i);var o=1<arguments.length?arguments[1]:void 0,s=va(e.length);return o=o===void 0?s:ZD(va(o),s),s=String(i),Fs?Fs.call(e,s,o):e.slice(o-s.length,o)===s}}),rh("match",1,function(i,e,o){return[function(s){var l=mb(this),f=s==null?void 0:s[i];return f!==void 0?f.call(s,l):new RegExp(s)[i](String(l))},function(s){var l=o(e,s,this);if(l.done)return l.value;if(s=sa(s),l=String(this),!s.global)return Se(s,l);var f=s.unicode;s.lastIndex=0;for(var h,p=[],d=0;(h=Se(s,l))!==null;)h=String(h[0]),p[d]=h,h===""&&(s.lastIndex=Gj(l,va(s.lastIndex),f)),d++;return d===0?null:p}]});var aE=Jb.f,Hs="".startsWith,bE=Math.min,Is=Mk("startsWith"),cE=!Is&&!!function(){var i=aE(String.prototype,"startsWith");return i&&!i.writable}();M({target:"String",proto:!0,forced:!cE&&!Is},{startsWith:function(i){var e=String(mb(this));Lk(i);var o=va(bE(1<arguments.length?arguments[1]:void 0,e.length)),s=String(i);return Hs?Hs.call(e,s,o):e.slice(o,o+s.length)===s}});var Sn=function(i){var e=/(%?)(%([jds]))/g,o=Array.prototype.slice.call(arguments,1);return o.length&&(i=i.replace(e,function(s,l,f,h){switch(f=o.shift(),h){case"s":f=""+f;break;case"d":f=Number(f);break;case"j":f=JSON.stringify(f)}return l?(o.unshift(f),s):f})),o.length&&(i+=" "+o.join(" ")),""+(i=i.replace(/%{2,2}/g,"%"))},dE=/\s/,eE=function(i){for(var e=i.length;e--&&dE.test(i.charAt(e)););return e},fE=/^\s+/,Js=NaN,gE=/^[-+]0x[0-9a-f]+$/i,hE=/^0b[01]+$/i,iE=/^0o[0-7]+$/i,jE=parseInt,Nl=function(i){if(typeof i=="number")return i;if(we(i))return Js;if(ob(i)&&(i=typeof i.valueOf=="function"?i.valueOf():i,i=ob(i)?i+"":i),typeof i!="string")return i===0?i:+i;i=i&&i.slice(0,eE(i)+1).replace(fE,"");var e=hE.test(i);return e||iE.test(i)?jE(i.slice(2),e?2:8):gE.test(i)?Js:+i},kE=Math.max,lE=Math.min,mE=function(i,e,o){function s(F){var K=d,_t=g;return d=g=void 0,_=F,b=i.apply(_t,K)}function l(F){var K=F-w;return F-=_,w===void 0||K>=e||0>K||k&&F>=j}function f(){var F=Fb.Date.now();if(l(F))return h(F);var K=setTimeout,_t=F-_;F=e-(F-w),_t=k?lE(F,j-_t):F,y=K(f,_t)}function h(F){return y=void 0,I&&d?s(F):(d=g=void 0,b)}function p(){var F=Fb.Date.now(),K=l(F);if(d=arguments,g=this,w=F,K){if(y===void 0)return _=F=w,y=setTimeout(f,e),A?s(F):b;if(k)return clearTimeout(y),y=setTimeout(f,e),s(w)}return y===void 0&&(y=setTimeout(f,e)),b}var d,g,b,y,w,_=0,A=!1,k=!1,I=!0;if(typeof i!="function")throw new TypeError("Expected a function");if(e=Nl(e)||0,ob(o)){A=!!o.leading;var j=(k="maxWait"in o)?kE(Nl(o.maxWait)||0,e):j;I="trailing"in o?!!o.trailing:I}return p.cancel=function(){y!==void 0&&clearTimeout(y),_=0,d=w=g=y=void 0},p.flush=function(){return y===void 0?b:h(Fb.Date.now())},p},Fc=function(i){function e(s,l){return X(this,e),m(n(s=o.call(this,Rn(s,l))),"originalError",void 0),m(n(s),"code",void 0),m(n(s),"serverCode",void 0),typeof l=="number"?s.code=l:typeof l=="string"?s.name=l:l!==void 0&&(l.originalError&&(s.originalError=l.originalError),l.code!==void 0&&(s.code=l.code),l.serverCode!==void 0&&(s.serverCode=l.serverCode)),s}ja(e,i);var o=ka(e);return e}(xf(Error)),Ma=function(i){function e(s,l){return X(this,e),m(n(s=o.call(this,Rn(s,l))),"name","RtmInternalError"),m(n(s),"code",void 0),s.code=l,s}ja(e,i);var o=ka(e);return e}(xf(Error)),ni=function(){return function(i){function e(s){X(this,e);var l=Object.keys(s);return o.call(this,s[l[0]],l[0])}ja(e,i);var o=ka(e);return e}(Ma)},Ha=ni(),gb=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmTimeoutError"),s}ja(e,i);var o=ka(e);return e}(Fc),H=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmInvalidArgumentError"),s}ja(e,i);var o=ka(e);return e}(Fc),L=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmInvalidStatusError"),s}ja(e,i);var o=ka(e);return e}(Fc),Ol=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmInterruptedError"),s}ja(e,i);var o=ka(e);return e}(Fc),lb=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmLimitExceededError"),s}ja(e,i);var o=ka(e);return e}(Fc),nE=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmInvokeTooOftenError"),s}ja(e,i);var o=ka(e);return e}(Fc),da=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmUnavailableError"),m(n(s),"serverCode",void 0),m(n(s),"statusCode",void 0),s}ja(e,i);var o=ka(e);return e}(Fc),of=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmUnauthenticatedError"),m(n(s),"serverCode",void 0),s}ja(e,i);var o=ka(e);return e}(Fc),bd=function(i){function e(){X(this,e);for(var s=arguments.length,l=Array(s),f=0;f<s;f++)l[f]=arguments[f];return m(n(s=o.call.apply(o,[this].concat(l))),"name","RtmUnknownError"),s}ja(e,i);var o=ka(e);return e}(Fc),Xa=function(i){return i instanceof gb||i instanceof sb},ta=function(i){return i instanceof Fc},he=function(i,e,o){return['Executing "%s.%s" timed out after %ds',i,e,o/1e3]},Qn=new Map,oE=function(){var i=new Date;return"".concat(i.toISOString().split("T")[1].replace(/\..+/,""),".").concat(i.getMilliseconds())},Pf=Object.keys,eh=Object.entries.bind(Object),Zg=function(i){return typeof i=="string"?i.endsWith(".")?i:"".concat(i,"."):i},Vn=function(i){for(var e="",o=(i=new Uint8Array(i)).byteLength,s=-1;++s<o;)e+=String.fromCharCode(i[s]);return e=btoa(e),"data:;base64,".concat(e)},pE=R(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});M({target:"Date",proto:!0,forced:pE},{toJSON:function(i){i=Va(this);var e=tc(i);return typeof e!="number"||isFinite(e)?i.toISOString():null}}),M({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Vv=Object.prototype.hasOwnProperty,Ks=function(i,e,o){return JSON.stringify(ao(i),e,o)};Ks.ensureProperties=ao;var qE=function(i,e){e=e||{};var o=V(i);if(o==="string"&&0<i.length)return Wv(i);if(o==="number"&&isFinite(i))return e.long?i=864e5<=(e=Math.abs(i))?gh(i,e,864e5,"day"):36e5<=e?gh(i,e,36e5,"hour"):6e4<=e?gh(i,e,6e4,"minute"):1e3<=e?gh(i,e,1e3,"second"):i+" ms":i=864e5<=(e=Math.abs(i))?Math.round(i/864e5)+"d":36e5<=e?Math.round(i/36e5)+"h":6e4<=e?Math.round(i/6e4)+"m":1e3<=e?Math.round(i/1e3)+"s":i+"ms",i;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))},rE=function(i){function e(l){function f(){for(var d=arguments.length,g=Array(d),b=0;b<d;b++)g[b]=arguments[b];if(f.enabled){d=Number(new Date),f.diff=d-(h||d),f.prev=h,h=f.curr=d,g[0]=e.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(w,_){return w==="%%"?"%":(y++,typeof(_=e.formatters[_])=="function"&&(w=_.call(f,g[y]),g.splice(y,1),y--),w)}),e.formatArgs.call(f,g),(f.log||e.log).apply(f,g)}}var h,p=null;return f.namespace=l,f.useColors=e.useColors(),f.color=e.selectColor(l),f.extend=o,f.destroy=e.destroy,Object.defineProperty(f,"enabled",{enumerable:!0,configurable:!1,get:function(){return p===null?e.enabled(l):p},set:function(d){p=d}}),typeof e.init=="function"&&e.init(f),f}function o(l,f){return(l=e(this.namespace+(f===void 0?":":f)+l)).log=this.log,l}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(l){return l instanceof Error?l.stack||l.message:l},e.disable=function(){var l=[].concat(G(e.names.map(s)),G(e.skips.map(s).map(function(f){return"-"+f}))).join(",");return e.enable(""),l},e.enable=function(l){e.save(l),e.names=[],e.skips=[];var f,h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&((l=h[f].replace(/\*/g,".*?"))[0]==="-"?e.skips.push(new RegExp("^"+l.substr(1)+"$")):e.names.push(new RegExp("^"+l+"$")))},e.enabled=function(l){if(l[l.length-1]==="*")return!0;var f,h=0;for(f=e.skips.length;h<f;h++)if(e.skips[h].test(l))return!1;for(h=0,f=e.names.length;h<f;h++)if(e.names[h].test(l))return!0;return!1},e.humanize=qE,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(i).forEach(function(l){e[l]=i[l]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(l){for(var f=0,h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return e.colors[Math.abs(f)%e.colors.length]},e.enable(e.load()),e},Ls=cb(function(i,e){e.formatArgs=function(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),this.useColors){var l="color: "+this.color;s.splice(1,0,l,"color: inherit");var f=0,h=0;s[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(f++,p==="%c"&&(h=f))}),s.splice(h,0,l)}},e.save=function(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}},e.load=function(){try{var s=e.storage.getItem("debug")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s={}.DEBUG),s},e.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};t:{try{var o=localStorage;break t}catch{}o=void 0}e.storage=o,e.destroy=function(){var s=!1;return function(){s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),e.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),e.log=console.debug||console.log||function(){},i.exports=rE(e),i.exports.formatters.j=function(s){try{return JSON.stringify(s)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),Ms=Ls("RTM:DEBUG"),pf;Ms.enabled=!1,function(i){i[i.Uploading=0]="Uploading",i[i.Free=1]="Free"}(pf||(pf={}));var sE=function(){function i(e){X(this,i),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),m(this,"rtmConfig",void 0),this.processId=e.processId,this.sdkVersion=e.sdkVersion,this.rtmConfig=e.rtmConfig,this.uploadRequest=e.uploadRequest,this.uploadState=pf.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ia(i,[{key:"upload",value:function(e){this.LogCache.push(e),this.uploadState===pf.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(e){var o=this;this.uploadState=pf.Uploading,setTimeout(J(x.mark(function s(){var l,f,h;return x.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return l={sdk_version:o.sdkVersion,process_id:o.processId,payload:JSON.stringify(e)},p.prev=1,p.next=4,o.uploadRequest(l,(f=o.rtmConfig.enableCloudProxy)!==null&&f!==void 0&&f);case 4:if(!Ti){p.next=6;break}throw Error("RTM is busy");case 6:p.next=13;break;case 8:return p.prev=8,p.t0=p.catch(1),h=2>o.uploadResendCount++?2e3:1e4,setTimeout(function(){return o.postLog(o.LogsToPost)},h),p.abrupt("return");case 13:if(Ms('The logs uploaded for "process-'.concat(zg,'"')),o.LogCache.length!==0){p.next=17;break}return o.uploadState=pf.Free,p.abrupt("return");case 17:o.uploadResendCount=0,o.LogsToPost=40>o.LogCache.length?o.LogCache.splice(0,o.LogCache.length):o.LogCache.splice(0,40),o.postLog(o.LogsToPost);case 20:case"end":return p.stop()}},s,null,[[1,8]])})),ie.getParameter("LOG_UPLOAD_INTERVAL"))}}]),i}(),Ns=function(i,e,o,s,l,f,h,p){var d=0;for(h=!!h&&pd(h,p,3);d<s;){if(d in o){if(p=h?h(o[d],d,e):o[d],0<f&&qd(p))l=Ns(i,e,p,va(p.length),l,f-1)-1;else{if(9007199254740991<=l)throw TypeError("Exceed the acceptable array length");i[l]=p}l++}d++}return l},tE=Ns;M({target:"Array",proto:!0},{flat:function(){var i=arguments.length?arguments[0]:void 0,e=Va(this),o=va(e.length),s=th(e,0);return s.length=tE(s,e,e,o,0,i===void 0?1:fc(i)),s}}),M({target:"Object",stat:!0},{values:function(i){return XD(i)}});var uE=["CODE"],Gb,Bd,D;(function(i){i.CHINA="CN",i.ASIA="AS",i.NORTH_AMERICA="NA",i.EUROPE="EU",i.JAPAN="JP",i.INDIA="IN",i.OCEANIA="OC",i.SOUTH_AMERICA="SA",i.AFRICA="AF",i.OVERSEA="OVERSEA",i.GLOBAL="GLOBAL"})(D||(D={}));var vE={CN:D.CHINA,NA:D.NORTH_AMERICA,EU:D.EUROPE,AS:D.ASIA,JP:D.JAPAN,IN:D.INDIA,GLOB:D.GLOBAL,AF:D.AFRICA,OC:D.OVERSEA,OVS:D.OVERSEA,SA:D.SOUTH_AMERICA},hh=Zn((Gb={},m(Gb,D.ASIA,{CODE:D.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.NORTH_AMERICA,{CODE:D.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.EUROPE,{CODE:D.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.JAPAN,{CODE:D.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.INDIA,{CODE:D.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.OVERSEA,{CODE:D.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),m(Gb,D.GLOBAL,{CODE:D.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.OCEANIA,{CODE:D.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.SOUTH_AMERICA,{CODE:D.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.AFRICA,{CODE:D.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Gb,D.CHINA,{CODE:D.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Gb)),Qf=(Bd={},m(Bd,D.ASIA,[D.CHINA,D.JAPAN,D.INDIA]),m(Bd,D.EUROPE,[]),m(Bd,D.NORTH_AMERICA,[]),m(Bd,D.SOUTH_AMERICA,[]),m(Bd,D.OCEANIA,[]),m(Bd,D.AFRICA,[]),Bd),Os=[D.OVERSEA,D.GLOBAL,D.CHINA,D.NORTH_AMERICA,D.EUROPE,D.ASIA,D.JAPAN,D.INDIA,D.OCEANIA,D.SOUTH_AMERICA,D.AFRICA],bo=function(i){return Object.values(Qf).flat().includes(i)},Yv=function(i){var e;return(e=eh(Qf).find(function(o){return(o=ua(o,2))[0],o[1].includes(i)}))===null||e===void 0?void 0:e[0]},wE=function(i){return i.sort(function(e,o){return Os.indexOf(e)-Os.indexOf(o)})},Ke=function(i){var e=new Set;if((i=wE(i).slice(0,3).map(function(o){var s=hh[o];if(s===void 0)throw new Ma("invalid area key");return o=s.CODE,s=yf(s,uE),e.add(o),s})).length===0)throw new Ma("areas cannot be empty");return wa({CODES:e},i.reduce(function(o,s){for(var l=0,f=eh(o);l<f.length;l++){var h=ua(f[l],2),p=h[0];h=h[1],o[p]=Array.from(new Set([].concat(G(s[p]),G(h))))}return o}))},P,Ps=function(){var i=J(x.mark(function e(o,s){var l,f,h,p,d,g=arguments;return x.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(2<(f=2<g.length&&g[2]!==void 0?g[2]:0))){b.next=3;break}return b.abrupt("return");case 3:return h={withCredentials:!0,body:o,timeout:2e4},p=0<f?(P==null?void 0:P.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(P==null?void 0:P.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",d=s?"https://".concat((l=P==null?void 0:P.PROXY_NGINX[0])!==null&&l!==void 0?l:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(p,"&p=443&d=upload/v1"):"https://".concat(p,"/upload/v1"),b.next=8,He(d,h).catch(function(y){return Ps(o,s,f+1)});case 8:case"end":return b.stop()}},e)}));return function(e,o){return i.apply(this,arguments)}}(),Qs=new sE({processId:"process-".concat(zg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.5-0-g9cf39592"),uploadRequest:Ps,rtmConfig:{}}),Pl="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Rs="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Ss="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),xE="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),Le=function(i){if(typeof i=="string")return pa(i);if(Array.isArray(i)&&i.every(function(f){return typeof f=="string"}))return i.map(function(f){return pa(f)});if(!Km(i)){for(var e={},o=0;o<Ss.length;o++){var s=Ss[o];s in i&&(e[s]=i[s])}if(0<Object.keys(e).length)return e;if(5>Object.keys(i).length){for(o=0,i=Object.entries(i);o<i.length;o++){var l=ua(i[o],2);s=l[0],l=l[1],Pl.includes(s)?e[s]="[Hidden Info]":e[pa(s)]=typeof l=="string"?pa(l):"[Sensitive Info]"}return e}return"[Sensitive Info]"}return i},Ts=function(i){return V(i)==="object"?Hd(i)?Yn(te(i,5),Pl,Rs):i.constructor&&i.constructor.name:i},Us=function(i,e){return i instanceof Error?i.message:typeof i!="string"?JSON.stringify(Yn(te(i,5),Pl,Rs)):(e=e.map(function(o){return o instanceof Error?o.message:V(o)==="object"?Ks(Array.isArray(o)?o.map(Ts):Ts(o)):o}),Sn.apply(void 0,[i.replace(/%[%Oo]/g,function(o){return o==="%%"?"%":o==="%o"||o==="%O"?"%s":o})].concat(G(e))))},yE=1,Vs=function(i,e,o){var s=Ls(i);return s.enabled=!0,s.log=o,s.useColors=!1,function(l){for(var f=arguments.length,h=Array(1<f?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];if(e.enableLogUpload){f=Zg(l);var d=Us(f,h);Qs.upload({log_item_id:"".concat(yE++),log_level:i,payload_str:"[".concat(oE(),"] ").concat(i," - ").concat(256<d.length?d.slice(0,256):d)})}switch(f=function(g){var b=d||Us(Zg(l),h),y=lc.LOG_HANDLER;typeof y=="function"&&y({level:g,message:b}),s(b)},i){case"RTM:INFO":e.logFilter.info&&f("log");break;case"RTM:WARN":e.logFilter.warn&&f("warning");break;case"RTM:ERROR":e.logFilter.error&&f("error");break;case"RTM:TRACK":e.logFilter.track&&f("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":e.logFilter.debug&&f("debug");break;case"RTM:DEBUG":e.logFilter.debug&&f("debug")}}},Ql,Ws=function(i){return function(e){var o=Ql===1||i===void 0?"":"Ins#".concat(i," ");return"".concat(o).concat(e)}},Rl=function(i,e,o){var s=Ws(Ql);return Vs("RTM:".concat(e),o,function(l){return i(s(l))})},wb=function(){return function(i){function e(s,l){var f=2<arguments.length&&arguments[2]!==void 0&&arguments[2];X(this,e);var h=o.call(this);if(m(n(h),"logError",void 0),m(n(h),"invokeTracker",void 0),m(n(h),"resultTracker",void 0),m(n(h),"errorTracker",void 0),m(n(h),"eventTracker",void 0),m(n(h),"info",void 0),m(n(h),"warn",void 0),m(n(h),"log",void 0),m(n(h),"genLogger",void 0),m(n(h),"loggerId",void 0),m(n(h),"logger",void 0),m(n(h),"name",void 0),h.logger=s,h.name=l,h.loggerId=s.loggerId,h.info=s.info,h.warn=s.warn,h.logError=s.logError,h.genLogger=s.genLogger,h.log=s.genLogger("RTM:DEBUG","<".concat(l,"> ")),h.invokeTracker=s.genTracker("Invoke"),h.eventTracker=s.genTracker("Event"),h.resultTracker=s.genTracker("Result"),h.errorTracker=s.genTracker("Error"),f){var p=h.emit.bind(n(h));h.emit=function(){for(var d=arguments.length,g=Array(d),b=0;b<d;b++)g[b]=arguments[b];d=g[0],b=g.slice(1);var y=xE.includes(d);h.eventTracker.apply(h,["%s: ".concat(0<b.length?"%s emitted with args: ".concat(b.map(function(){return"%o"})):"%s emitted"),l,d].concat(G(y?b.map(Le):b)));try{p.apply(void 0,g)}catch(w){h.logError("Caught in the callback function of the event %s",d,w)}}}return h}ja(e,i);var o=ka(e);return e}(ia)},zE=function(i){return Rl(console.log.bind(console),"INFO",i)},AE=function(i){return Rl(console.warn.bind(console),"WARN",i)},BE=function(i){return Rl(console.error.bind(console),"ERROR",i)},Xs=function(i,e){return function(o){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"",l=Ws(i),f=console.debug.bind(console),h=Vs(o,e,function(p){return f(l(p))});return function(p){for(var d=arguments.length,g=Array(1<d?d-1:0),b=1;b<d;b++)g[b-1]=arguments[b];return h.apply(void 0,[s+p].concat(g))}}},CE=function(i,e){return function(o){return Xs(i,e)("RTM:TRACK","[".concat(o,"] "))}},rj=t.URI,$v=mi,DE=yf(RD,["Wrapper"]),co=ml(DE,"URI"),Ys=function(i,e){var o=-1,s=i.length,l=s-1;for(e=e===void 0?s:e;++o<e;){var f=i[s=rs(o,l)];i[s]=i[o],i[o]=f}return i.length=e,i},EE=function(i){return Ys(Bi(i))},FE=function(i){return Ys(tj(i))},qf=function(i){return(Za(i)?EE:FE)(i)},rf={0:9591,1:9593},je=function(i){var e=Pd(null);return"https://".concat(e?null:i,"/api/v1")},GE=eb.apply(void 0,G(qf(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(je)))),HE=eb.apply(void 0,G(qf(["ap-web-1.agora.io","ap-web-2.agora.io"].map(je)))),IE=eb.apply(void 0,G(qf(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(je)))),JE=eb.apply(void 0,G(qf(["ap-web-3.agora.io","ap-web-4.agora.io"].map(je)))),Zs=ni(),Sl=function(i){function e(s,l,f,h,p,d){X(this,e);var g=o.call(this,p,fj("Socket-",p.loggerId));if(m(n(g),"isActiveClose",!1),m(n(g),"loggedIn",!1),m(n(g),"useNewDomain",void 0),m(n(g),"receivedPacket",new Ua),m(n(g),"open$",void 0),m(n(g),"input$",new Ua),m(n(g),"userJoin$",new Ua),m(n(g),"attemptsSinceLastError",0),m(n(g),"message$",new Ua),m(n(g),"socket$",void 0),m(n(g),"toClose",new Ua),m(n(g),"toReconnect",new Ua),m(n(g),"sendLogger",void 0),m(n(g),"receiveLogger",void 0),m(n(g),"ip",void 0),m(n(g),"env",void 0),m(n(g),"ticket",void 0),m(n(g),"context",void 0),m(n(g),"getDomain",function(){return eo(g.ip,g.useNewDomain)}),m(n(g),"socketReconnector",function(w){var _=function(A){return g.attemptsSinceLastError+=1,g.warn("The %s of Env %d reconnecting %s",g.name,g.env,A.message),Kc(3e3)};return w.pipe(Ja(function(A){return g.log("socket connection closed"),g.loggedIn=!1,2<=g.attemptsSinceLastError?(g.warn("socket connection failure"),g.emit("connectionFailure"),g.close(),Z(A)):g.isActiveClose?yb:(g.emit("reconnect"),g.useNewDomain=!g.useNewDomain,Z(A))}),Ce(function(A){return A.pipe(Lc(_))}))}),g.ip=s,g.env=l,g.ticket=f,g.context=h,g.useNewDomain=d??.5<=Math.random(),g.sendLogger=g.genLogger("RTM:MSG:SEND"),g.receiveLogger=g.genLogger("RTM:MSG:RECV"),l!==0&&l!==1)throw new Zs({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});var b=rf[l];g.log("Opening websocket address %s for the Env %d",g.ip,g.env);var y=cc(g.input$,g.userJoin$.pipe(Lv(2)),g.message$).pipe(ea(function(w){return mi.encode(w).finish()}));return s=cc(Mv("",{protocols:[],makeWebSocket:function(){if(g.context.config.enableCloudProxy||g.context.socketUseProxy){if(g.context.cloudProxyServers.length===0)throw g.logError("No cloud proxy server to connect"),new da;var w=Pd(null)?JSON.parse(null.replace(/-/g,".")):g.context.cloudProxyServers;w=Je(w="wss://".concat(eo(fo(w),!1),"/"),"sid",g.context.sid),w=Je(w,"remote_port",b.toString()),w=Je(w,"remote_ip",g.ip),w=Je(w,"token",g.context.key),w=new WebSocket(w)}else w=new WebSocket("wss://".concat(g.getDomain(),":").concat(b));return w.binaryType="arraybuffer",w}}),g.toReconnect),g.socket$=Da(s,zl.pipe(kb(7e3),Ja(function(w){return Xa(w)&&g.warn("socket open timed out"),Z(w)}))).pipe(ea(function(w){if(w instanceof Error)throw g.warn("Env_%d: Force reconnect the socket",g.env),w;return w(y).pipe(ea(function(_){return mi.decode(new Uint8Array(_))}))}),g.socketReconnector),g.open$=g.socket$.pipe(ba(function(w){g.log("Websocket opened",g.name),w.subscribe(function(_){var A=_.data;_=rj[_.uri].slice(0,-3),A=co[_].decode(A);var k=DC({},ml(A,"toJSON"),function(K,_t){return _t instanceof U?Pn(_t):_t}),I=!1;if((A instanceof zs||A instanceof ys)&&A.instance.lessThanOrEqual(4294967295)&&(I=!0),A instanceof As||A instanceof Bs){var j=A.instance,F=A.sequence;(A.dialogue.lessThanOrEqual(4294967295)||j.lessThanOrEqual(4294967295)||F.lessThan(1))&&(I=!0)}I?g.warn("Env_%d: Illegal %s, abandoned %o",g.env,_,k):(_!=="Pong"&&g.receiveLogger("Env_%d: %s %o",g.env,_,k),g.receivedPacket.next([_,A]))},function(){})}),If(void 0),rb(g.toClose),De()),g}ja(e,i);var o=ka(e);return Ia(e,[{key:"address",get:function(){return"".concat(this.ip,":").concat(rf[this.env])}},{key:"sendPacket",value:function(s,l){if(s!=="Ping"){var f=Bc(l,function(h){return h instanceof U?Pn(h):h});this.sendLogger("Env_%d: %s %o",this.env,s,f)}l=Zv(s,l),s==="UserJoin"?this.userJoin$.next(l):s==="Message"?this.message$.next(l):this.input$.next(l)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(s){return this.receivedPacket.pipe(zb(function(l){return ua(l,1)[0]===s}),ea(function(l){return ua(l,2)[1]}))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Zs({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),e}(wb());M({target:"String",proto:!0,forced:Ds},{padStart:function(i){return TD(this,i,1<arguments.length?arguments[1]:void 0)}});var KE=function(i){var e=Pf(hh);i=Tv(i);for(var o=0;o<e.length;o++){var s=hh[e[o]];if(s!=null&&s.AP_DOMAINS.includes(i)||s!=null&&s.AP_BACKUP_DOMAINS.includes(i)||s!=null&&s.PROXY_AP.includes(i))return[s.CODE]}return[D.CHINA,D.GLOBAL]},LE={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},$s={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},ME=[100,101,102],oi=/web-(\d)/,at=function(i){function e(s,l){var f=2<arguments.length&&arguments[2]!==void 0&&arguments[2];X(this,e);var h=o.call(this,l,"AccessPoint");return m(n(h),"handleUniLbsError",function(p,d){var g=p;if(4<p.toString().length){var b=p.toString().padStart(8,"0"),y=parseInt(b.slice(0,4),10);if(b=parseInt(b.slice(4,8),10),y===201)g=b;else if(y===101&&!ME.includes(b))return Z(Error("service is currently unavailable"))}if(y=g.toString(),!Object.keys($s).includes(y))return(p=new da(["Login is rejected by the server. The response code is %d",p],Bg)).serverCode=g,Z(p);switch(y=$s[y],g=LE[y],y){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(d=new of(g,ds)).serverCode=p,Z(d);case"INVALID_USER_ID":return(d=new of(g,hi)).serverCode=p,Z(d);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(d=new of(g,ii)).serverCode=p,Z(d);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(d=new of(g,es)).serverCode=p,Z(d);case"CANNOT_MEET_AREA_DEMAND":return(d=KE(d)).forEach(function(w){return h.failedAreas.add(w)}),h.failedAreas.size===(P===void 0?2:P.CODES.size)?((d=new H(g,Bg)).serverCode=p,Z(d)):Z(Error("ap ".concat(d.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(d=new da(g,Bg)).serverCode=p,Z(d);default:return Z(Nn("ApResErrType",y))}}),m(n(h),"getApEdgeInfo$",void 0),m(n(h),"getApEdgeInfoEndFirst$",void 0),m(n(h),"apFinish$",new Ua),m(n(h),"retryCount",0),m(n(h),"failedAreas",new Set),m(n(h),"usedUrl",[]),m(n(h),"newDomainUsed",!1),m(n(h),"backupNewDomainUsed",!1),m(n(h),"genUrl",function(){return P===void 0?Ri.apply(void 0,G(qf([GE,HE]))).pipe(Si(function(p){return eb.apply(void 0,G(p))})):eb.apply(void 0,G(P.AP_DOMAINS.slice(0,3).map(je)))}),m(n(h),"genBackupUrl",function(){return P===void 0?Ri.apply(void 0,G(qf([IE,JE]))).pipe(Si(function(p){return eb.apply(void 0,G(p))})):eb.apply(void 0,G(P.AP_BACKUP_DOMAINS.slice(0,3).map(je)))}),m(n(h),"getApUrl$",function(p){var d,g;return h.genUrl().pipe(zb(function(b){return(!h.newDomainUsed||!b.includes("sd-rtn.com"))&&(b.includes("sd-rtn.com")&&(h.newDomainUsed=!0),!Kl(h.usedUrl,function(y){var w;return y===((w=b.match(oi))===null||w===void 0?void 0:w[1])}))}),ba(function(b){var y;P===void 0&&typeof(b=(y=b.match(oi))===null||y===void 0?void 0:y[1])=="string"&&h.usedUrl.push(b)}),Pa(p?Math.max(lc.RECONNECTING_AP_NUM,(d=P==null?void 0:P.CODES.size)!==null&&d!==void 0?d:0):(g=P==null?void 0:P.CODES.size)!==null&&g!==void 0?g:2),Md(function(){return e.runOutOfUrlSymbol}),Ja(function(b,y){return h.newDomainUsed=!1,b===e.runOutOfUrlSymbol?(h.usedUrl=[],y):Z(b)}))}),m(n(h),"getBackupApUrl$",function(p){var d,g;return h.genBackupUrl().pipe(zb(function(b){return(!h.backupNewDomainUsed||!b.includes("sd-rtn.com"))&&(b.includes("sd-rtn.com")&&(h.backupNewDomainUsed=!0),!Kl(h.usedUrl,function(y){var w;return y===((w=b.match(oi))===null||w===void 0?void 0:w[1])}))}),ba(function(b){var y;P===void 0&&typeof(b=(y=b.match(oi))===null||y===void 0?void 0:y[1])=="string"&&h.usedUrl.push(b)}),Pa(p?Math.max(lc.RECONNECTING_AP_NUM,(d=P==null?void 0:P.CODES.size)!==null&&d!==void 0?d:0):(g=P==null?void 0:P.CODES.size)!==null&&g!==void 0?g:2),Md(function(){return e.runOutOfUrlSymbol}),Ja(function(b,y){return h.backupNewDomainUsed=!1,b===e.runOutOfUrlSymbol?(h.usedUrl=[],y):Z(b)}))}),m(n(h),"getProxyApUrl$",function(p){var d,g;return eb.apply(void 0,G(((P==null?void 0:P.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map(je))).pipe(Pa(p?Math.max(lc.RECONNECTING_AP_NUM,(d=P==null?void 0:P.CODES.size)!==null&&d!==void 0?d:0):(g=P==null?void 0:P.CODES.size)!==null&&g!==void 0?g:2))}),m(n(h),"context",void 0),m(n(h),"fetchCloudProxy",function(p,d){var g=fj("AP-",h.loggerId);h.log("The AccessPoint requests %s(%s)",p,g);var b=new AbortController;return h.apFinish$.pipe(Pa(1)).subscribe(function(){return b.abort()}),hd(J(x.mark(function y(){var w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return w=Xg(0,Number.MAX_SAFE_INTEGER),h.log("%s request opid: %d",g,w),_.abrupt("return",He(p,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:h.context.sid,opid:w,appid:h.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:d??h.context.key,cname:h.context.uid,uid:0,detail:wa({},P===void 0?{11:[D.CHINA,D.GLOBAL].join()}:{11:Array.from(P.CODES).map(function(A){return A===D.OVERSEA?"".concat(D.ASIA,",").concat(D.EUROPE,",").concat(D.AFRICA,",").concat(D.NORTH_AMERICA,",").concat(D.SOUTH_AMERICA,",").concat(D.OCEANIA):A}).join(",")})}}]},signal:b.signal}));case 3:case"end":return _.stop()}},y)}))).pipe(Ja(function(y){return y.name!=="AbortError"&&(h.logError(y),h.warn("The AP server %s request failure",p,y)),yb}),fb(function(){var y=J(x.mark(function w(_){var A,k,I,j,F,K,_t,_a,_i,_o,_c,Nf,B,_r,_n,_s,q,$,_e;return x.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:if(A=_.responseText,k=JSON.parse(A),h.log("The %s response is %o",g,k),((I=k.response_body)===void 0||I.length===0||I.some(function(ga){var _f;return((_f=ga.buffer)===null||_f===void 0?void 0:_f.code)===void 0||ga.uri!==23}))&&Z(new da("cloud proxy response_body not valid",Bg)),(j=I.filter(function(ga){return ga.buffer.code!==0})).length===0){ca.next=14;break}if((F=j.find(function(ga){return ga.buffer.flag===128}))===void 0){ca.next=12;break}return ca.abrupt("return",h.handleUniLbsError(F.buffer.code,p));case 12:return h.logError("cloud proxy error response"),ca.abrupt("return",h.handleUniLbsError(j[0].buffer.code,p));case 14:for(K=[],_t=0;_t<I.length;_t++)if(((_o=I[_t])==null||(_a=_o.buffer)===null||_a===void 0?void 0:_a.flag)===262144)(_c=_o.buffer)===null||_c===void 0||(Nf=_c.edges_services)===null||Nf===void 0||(B=Nf.forEach)===null||B===void 0||B.call(Nf,function(ga){Ln(ga=ga.ip)&&h.context.cloudProxyServers.indexOf(ga)===-1&&(h.log("got cloud proxy server: %s",ga),h.context.cloudProxyServers.push(ga))});else if((_o==null||(_i=_o.buffer)===null||_i===void 0?void 0:_i.flag)===128){for(q=function(ga,_f){var _u=_f[ga];K.some(function(ah){return ah.ip===_u.ip})||K.push({ip:_u.ip,ticket:_o.buffer.cert})},$=0,_e=_o.buffer.edges_services;$<_e.length;$++)q($,_e);h.context.rtmArea=(_r=(_n=_o.buffer)===null||_n===void 0||(_s=_n.detail)===null||_s===void 0?void 0:_s[9])!==null&&_r!==void 0?_r:""}return ca.abrupt("return",eb.apply(void 0,G(K).concat([yg])));case 19:case"end":return ca.stop()}},w)}));return function(w){return y.apply(this,arguments)}}()),Ja(function(y){return ta(y)?Z(y):yb}),Qg(),zb(function(y){return y!==void 0&&typeof y.ip=="string"&&typeof y.ticket=="string"&&Ln(y.ip)}))}),m(n(h),"fetchAp",function(p,d){var g=fj("AP-",h.loggerId);h.log("The AccessPoint requests %s(%s)",p,g);var b=new AbortController;return h.apFinish$.pipe(Pa(1)).subscribe(function(){return b.abort()}),hd(J(x.mark(function y(){var w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return w=Xg(0,Number.MAX_SAFE_INTEGER),h.log("%s request opid: %d",g,w),_.abrupt("return",He(p,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:w,key:d||h.context.key,cname:h.context.uid,detail:wa({},P===void 0?{11:[D.CHINA,D.GLOBAL].join()}:{11:Array.from(P.CODES).map(function(A){return A===D.OVERSEA?"".concat(D.ASIA,",").concat(D.EUROPE,",").concat(D.AFRICA,",").concat(D.NORTH_AMERICA,",").concat(D.SOUTH_AMERICA,",").concat(D.OCEANIA):A}).join(",")}),uid:0,sid:h.context.sid},signal:b.signal}));case 3:case"end":return _.stop()}},y)}))).pipe(Ja(function(y){return y.name!=="AbortError"&&(h.logError(y),h.warn("The AP server %s request failure",p,y)),yb}),fb(function(){var y=J(x.mark(function w(_){var A,k,I,j,F,K,_t,_a;return x.wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(A=_.responseText,k=JSON.parse(A),h.log("The %s response is %o",g,k),j=(I=k).code,F=I.addresses,K=I.detail,j===0){_i.next=6;break}return _i.abrupt("return",h.handleUniLbsError(j,p));case 6:if(_t=F,Pd(null)&&(_a=JSON.parse(null.replace(/-/g,".")),_t=_a.map(function(_o){return{ip:_o,ticket:_t[0].ticket}})),_t.length!==0){_i.next=11;break}return _i.abrupt("return",Z(Error("No available edge address to connect")));case 11:return h.context.rtmArea=K==null?void 0:K[9],_i.abrupt("return",eb.apply(void 0,G(_t).concat([yg])));case 13:case"end":return _i.stop()}},w)}));return function(w){return y.apply(this,arguments)}}()),Qg(),Ja(function(y){return ta(y)?Z(y):yb}),zb(function(y){return y!==void 0&&typeof y.ip=="string"&&typeof y.ticket=="string"}))}),h.context=s,h.getApEdgeInfoEndFirst$=function(){var p=0<arguments.length&&arguments[0]!==void 0&&arguments[0];return Kc(0,p||f?lc.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(1),ba(function(){h.retryCount+=1}),fb(function(){return h.context.config.enableCloudProxy||h.context.socketUseProxy?h.getProxyApUrl$(p||f):(4<=h.retryCount&&(h.retryCount=0),3>=h.retryCount?h.getApUrl$(p||f):h.getBackupApUrl$(p||f))}),fb(function(d){return h.context.config.enableCloudProxy||h.context.socketUseProxy?h.fetchCloudProxy(d):h.fetchAp(d)}),Ja(function(d){return d instanceof sb&&h.warn("AP request timeout"),Z(d)}),rn(function(d){return d.ip}),rb(h.apFinish$))},h.getApEdgeInfo$=function(p){return Kc(0,p||f?lc.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(8),ba(function(){h.retryCount+=1}),fb(function(){return h.context.config.enableCloudProxy||h.context.socketUseProxy?h.getProxyApUrl$(p||f):3>=h.retryCount?h.getApUrl$(p||f):h.getBackupApUrl$(p||f)}),fb(function(d){return(h.context.config.enableCloudProxy||h.context.socketUseProxy?h.fetchCloudProxy(d):h.fetchAp(d)).pipe()}),Ja(function(d){return d instanceof sb&&h.warn("AP request timeout"),Z(d)}),rn(function(d){return d.ip}),rb(h.apFinish$))},h}ja(e,i);var o=ka(e);return Ia(e,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),e}(wb());m(at,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var bt=ni(),ct=function(i){function e(s,l,f){X(this,e);var h=o.call(this,l,"Connection");m(n(h),"apClient",void 0),m(n(h),"lastOpenSockets",[new Ee(1),new Ee(1)]),m(n(h),"curOpenSockets",[void 0,void 0]),m(n(h),"ipIterator",0),m(n(h),"loginSocketOpenFailureCount",0),m(n(h),"firstEnv",.5<=Math.random()?1:0),m(n(h),"firstSocketOpener",void 0),m(n(h),"secondSocketOpener",void 0),m(n(h),"firstOpenKeeperSubject",new Ua),m(n(h),"secondOpenKeeperSubject",new Ua),m(n(h),"blacklistedIP",{}),m(n(h),"edgeInfoReplayed",void 0),m(n(h),"firstEnvOpenSocket",void 0),m(n(h),"firstOpenKeeperSub",void 0),m(n(h),"secondOpenKeeperSub",void 0),m(n(h),"context",void 0),m(n(h),"logger",void 0),h.context=s,h.logger=l,h.apClient=new at(h.context,l),h.apClient.apFinish$.subscribe(function(){h.log("Ap client fetch finished")});var p,d=[];return h.edgeInfoReplayed=h.apClient.getApEdgeInfo$(f).pipe(Ce(function(g){return g.pipe(ba(function(b){if(ta(b))throw b}),jd(f?ie.getParameter("RECONNECTING_AP_INTERVAL"):900),rb(Kc(2e4)))}),zb(function(g){var b;return!Kl(d,g)&&1>=((b=h.blacklistedIP[g.ip])!==null&&b!==void 0?b:0)}),Md(function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),ba(function(g){d.push(g),h.log("An edge info got %o",g)}),ba({error:function(g){h.emit("connectionInitFailure",g)}}),Tg(function(){h.apClient.clearUp()}),vn()),h.firstEnvOpenSocket=h.edgeInfoReplayed.pipe(fb(function(g){if(g===void 0)return Z(Error("Invalid edge info"));var b=new Sl(g.ip,h.firstEnv,g.ticket,h.context,l,p);if(h.firstEnv=h.firstEnv===1?0:1,b.once("connectionFailure",function(){return h.onSocketConnectionFailure(b)}),!f&&lc.ENABLE_EDGE_AUTO_FALLBACK&&!h.context.config.enableCloudProxy){var y,w=Date.now();b.on("reconnect",function(){var _;h.loginSocketOpenFailureCount+=1,(_=y)!==null&&_!==void 0||(y=Date.now()-w),500>y&&1<h.loginSocketOpenFailureCount&&(h.context.socketUseProxy=!0)})}return p=!b.useNewDomain,b.open$.pipe(If(b))}),ba(function(g){h.log("The websocket of ENV_%d opened to %s:%d",g.env,g.ip,rf[g.env]),h.curOpenSockets[g.env]=g,h.lastOpenSockets[g.env].next(g),h.firstEnv=g.env,h.openSecondSocket(g.env,g.ip,g.useNewDomain)}),Pa(1),De()),h.firstSocketOpener=h.firstEnvOpenSocket.pipe(fb(function(g){return g.open$.pipe(ba(function(){h.log("The websocket of first ENV_%d re-opened to %s:%d",g.env,g.ip,rf[g.env]),h.curOpenSockets[g.env]=g,h.lastOpenSockets[g.env].next(g)}))})),s=h.firstOpenKeeperSubject.pipe(Lc(ed)),h.firstOpenKeeperSub=s.subscribe({error:h.logError}),h}ja(e,i);var o=ka(e);return Ia(e,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(s,l){if(![0,1].includes(s))throw new Ha({INVALID_ENV:"The env argument is not 0 or 1"});var f=s===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var h=this.curOpenSockets[s];this.curOpenSockets[s]=void 0,h&&(h.isActiveClose=!0,setTimeout(function(){h.close()},l)),f!==void 0&&setTimeout(function(){f==null||f.unsubscribe()},l)}},{key:"waitClosing",value:function(s){var l=this;return s.isActiveClose=!0,s.open$.pipe(nv(),Ja(function(f){return f.message===qs.normalClosureMessage?yb:Z(f)}),kb(5e3),Ja(function(f){return f instanceof sb?(l.warn("Force closing the ENV_%d connection",s.env),yb):Z(f)}))}},{key:"onSocketConnectionFailure",value:function(s){var l=[0,1].filter(function(f){return f!==s.env})[0];(l=this.curOpenSockets[l])&&l.loggedIn?this.reopenSocketWithApRequest(s.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(s,l,f){var h=this,p=s===1?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(un(function(d,g){return[].concat(G(d),[g])},[]),ea(function(d){return os(d,function(g){return On(l,g.ip)}).slice(-1)[0]}),Pa(1),fb(function(d){if(d===void 0)return Z(Error("Invalid edge info"));var g=new Sl(d.ip,p,d.ticket,h.context,h.logger,f);return g.on("connectionFailure",function(){return h.onSocketConnectionFailure(g)}),g.open$.pipe(ba(function(){h.lastOpenSockets[p].next(g),h.curOpenSockets[p]=g}))}),De()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Lc(ed)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(s){var l=this,f=[0,1].filter(function(d){return d!==s})[0];if((f=this.curOpenSockets[f])!==void 0){var h,p=f.ip;f=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Md(function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})}),Ce(function(d){return d.pipe(ba(function(g){if(g.code===ii)l.emit("tokenExpired"),l.apClient.apFinish$.next(void 0);else if(ta(g))throw g}),jd(ie.getParameter("RECONNECTING_AP_INTERVAL")),rb(Kc(15e3)))}),ba(function(d){l.log("An edge info got %o",d)}),Tg(function(){l.apClient.clearUp()})).pipe(un(function(d,g){return[].concat(G(d),[g])},[]),ea(function(d){return(d=os(d,function(g){return On(p,g.ip)})).length-1>=l.ipIterator?d.slice(-l.ipIterator++-1)[0]:(l.ipIterator=0,d.slice(-1)[0])}),Md(),fb(function(d){if(d===void 0)return Z(Error("Invalid edge info"));var g=new Sl(d.ip,s,d.ticket,l.context,l.logger,h);return g.on("connectionFailure",function(){return l.onSocketConnectionFailure(g)}),h=!g.useNewDomain,g.open$.pipe(If(g))}),ba(function(d){l.log("The websocket of ENV_%d re-opened to %s:%d using ap",d.env,d.ip,rf[d.env]),l.curOpenSockets[s]=d,l.lastOpenSockets[s].next(d)}),fb(function(d){return d.open$.pipe(ba(function(){l.log("The websocket of ENV_%d re-opened to %s:%d",d.env,d.ip,rf[d.env]),l.curOpenSockets[s]=d,l.lastOpenSockets[s].next(d)}))}),De()),s===this.firstEnv?this.firstOpenKeeperSubject.next(f):this.secondOpenKeeperSubject.next(f)}}}]),e}(wb()),cd=nc.Writer,oa=nc.util,Gc=nc.roots.default||(nc.roots.default={}),NE=Gc.Session=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.appId="",i.prototype.ver="",i.prototype.buildno=0,i.prototype.installId="",i.prototype.os=0,i.prototype.did="",i.prototype.index=null,i.prototype.token="",i.prototype.version=0,i.prototype.subVersion=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.appId!=null&&Object.hasOwnProperty.call(e,"appId")&&o.uint32(42).string(e.appId),e.ver!=null&&Object.hasOwnProperty.call(e,"ver")&&o.uint32(50).string(e.ver),e.buildno!=null&&Object.hasOwnProperty.call(e,"buildno")&&o.uint32(56).int32(e.buildno),e.installId!=null&&Object.hasOwnProperty.call(e,"installId")&&o.uint32(66).string(e.installId),e.os!=null&&Object.hasOwnProperty.call(e,"os")&&o.uint32(128).int32(e.os),e.did!=null&&Object.hasOwnProperty.call(e,"did")&&o.uint32(138).string(e.did),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&Gc.Session.CommonIndex.encode(e.index,o.uint32(162).fork()).ldelim(),e.token!=null&&Object.hasOwnProperty.call(e,"token")&&o.uint32(170).string(e.token),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&o.uint32(176).int32(e.version),e.subVersion!=null&&Object.hasOwnProperty.call(e,"subVersion")&&o.uint32(184).int32(e.subVersion),o},i.CommonIndex=function(){function e(o){if(o)for(var s=Object.keys(o),l=0;l<s.length;++l)o[s[l]]!=null&&(this[s[l]]=o[s[l]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(o,s){return s||(s=cd.create()),o.index1!=null&&Object.hasOwnProperty.call(o,"index1")&&s.uint32(10).string(o.index1),o.index2!=null&&Object.hasOwnProperty.call(o,"index2")&&s.uint32(18).string(o.index2),o.index3!=null&&Object.hasOwnProperty.call(o,"index3")&&s.uint32(26).string(o.index3),s},e}(),i}(),OE=Gc.Link=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.ec=0,i.prototype.sc=0,i.prototype.destServerIp="",i.prototype.ackedServerIp="",i.prototype.responseTime=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.ec!=null&&Object.hasOwnProperty.call(e,"ec")&&o.uint32(40).int32(e.ec),e.sc!=null&&Object.hasOwnProperty.call(e,"sc")&&o.uint32(48).int32(e.sc),e.destServerIp!=null&&Object.hasOwnProperty.call(e,"destServerIp")&&o.uint32(58).string(e.destServerIp),e.ackedServerIp!=null&&Object.hasOwnProperty.call(e,"ackedServerIp")&&o.uint32(66).string(e.ackedServerIp),e.responseTime!=null&&Object.hasOwnProperty.call(e,"responseTime")&&o.uint32(72).int32(e.responseTime),o},i}(),PE=Gc.Logout=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),o},i}(),QE=Gc.KickedOff=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.linkId=0,i.prototype.code=0,i.prototype.server="",i.prototype.serverCode=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.linkId!=null&&Object.hasOwnProperty.call(e,"linkId")&&o.uint32(48).int32(e.linkId),e.code!=null&&Object.hasOwnProperty.call(e,"code")&&o.uint32(56).int32(e.code),e.server!=null&&Object.hasOwnProperty.call(e,"server")&&o.uint32(66).string(e.server),e.serverCode!=null&&Object.hasOwnProperty.call(e,"serverCode")&&o.uint32(72).int32(e.serverCode),o},i}(),RE=Gc.ChnJoin=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.cname="",i.prototype.errCode=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.cname!=null&&Object.hasOwnProperty.call(e,"cname")&&o.uint32(50).string(e.cname),e.errCode!=null&&Object.hasOwnProperty.call(e,"errCode")&&o.uint32(56).int32(e.errCode),o},i}(),SE=Gc.ChnJoinRes=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.cname="",i.prototype.errCode=0,i.prototype.serverErrCode=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.cname!=null&&Object.hasOwnProperty.call(e,"cname")&&o.uint32(50).string(e.cname),e.errCode!=null&&Object.hasOwnProperty.call(e,"errCode")&&o.uint32(56).int32(e.errCode),e.serverErrCode!=null&&Object.hasOwnProperty.call(e,"serverErrCode")&&o.uint32(64).int32(e.serverErrCode),o},i}(),TE=Gc.ChnLeave=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.cname="",i.prototype.errCode=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.cname!=null&&Object.hasOwnProperty.call(e,"cname")&&o.uint32(50).string(e.cname),e.errCode!=null&&Object.hasOwnProperty.call(e,"errCode")&&o.uint32(56).int32(e.errCode),o},i}(),UE=Gc.ConnectionStateChange=function(){function i(e){if(e)for(var o=Object.keys(e),s=0;s<o.length;++s)e[o[s]]!=null&&(this[o[s]]=e[o[s]])}return i.prototype.sid="",i.prototype.userId="",i.prototype.lts=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.elapse=oa.Long?oa.Long.fromBits(0,0,!1):0,i.prototype.oldState=0,i.prototype.newState=0,i.prototype.reason=0,i.prototype.reconnId=0,i.encode=function(e,o){return o||(o=cd.create()),e.sid!=null&&Object.hasOwnProperty.call(e,"sid")&&o.uint32(10).string(e.sid),e.userId!=null&&Object.hasOwnProperty.call(e,"userId")&&o.uint32(18).string(e.userId),e.lts!=null&&Object.hasOwnProperty.call(e,"lts")&&o.uint32(24).int64(e.lts),e.elapse!=null&&Object.hasOwnProperty.call(e,"elapse")&&o.uint32(32).int64(e.elapse),e.oldState!=null&&Object.hasOwnProperty.call(e,"oldState")&&o.uint32(40).int32(e.oldState),e.newState!=null&&Object.hasOwnProperty.call(e,"newState")&&o.uint32(48).int32(e.newState),e.reason!=null&&Object.hasOwnProperty.call(e,"reason")&&o.uint32(56).int32(e.reason),e.reconnId!=null&&Object.hasOwnProperty.call(e,"reconnId")&&o.uint32(64).int32(e.reconnId),o},i}(),aw=Object.freeze({__proto__:null,Session:NE,Link:OE,Logout:PE,KickedOff:QE,ChnJoin:RE,ChnJoinRes:SE,ChnLeave:TE,ConnectionStateChange:UE,default:Gc}),bw=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),VE=function(i){function e(s,l,f){return X(this,e),m(n(f=o.call(this,f,"Context")),"_token",void 0),m(n(f),"config",void 0),m(n(f),"_uid",void 0),m(n(f),"_sid",void 0),m(n(f),"_area","CN"),m(n(f),"_socketUseProxy",!1),m(n(f),"appId",void 0),m(n(f),"enableCloudProxy",!1),m(n(f),"cloudProxyServers",[]),f.appId=s,f.config=l,f}ja(e,i);var o=ka(e);return Ia(e,[{key:"socketUseProxy",get:function(){return this._socketUseProxy&&lc.ENABLE_EDGE_AUTO_FALLBACK},set:function(s){this.log("socketUseProxy is set to %s",s),this._socketUseProxy=s}},{key:"token",set:function(s){this._token=typeof s=="string"&&s?s:void 0}},{key:"uid",get:function(){if(typeof this._uid=="string"&&this._uid)return this._uid;throw new Ma("Cannot get illegal uid")},set:function(s){if(this.log("The user ID is set to %s",pa(s)),!Aa(s))throw new Ma;this._uid=s}},{key:"key",get:function(){if(typeof this._token=="string"&&this._token)return this._token;if(typeof this.appId=="string"&&this.appId)return this.appId;throw new Ma("Cannot get illegal key")}},{key:"sid",get:function(){if(typeof this._sid=="string"&&this._sid)return this._sid;throw new Ma("Cannot get illegal sid")},set:function(s){if(this.log("sid is set to %s",s),typeof s!="string"||!s)throw new Ma;this._sid=s}},{key:"rtmArea",get:function(){if(typeof this._area=="string"&&this._area)return this._area;throw new Ma("Cannot get illegal area")},set:function(s){this.log("area is set to %s",s),typeof s=="string"&&s?this._area=s:this.warn("set area failed")}}]),e}(wb()),WE=!!Nc&&R(function(){Nc.prototype.finally.call({then:function(){}},function(){})});if(M({target:"Promise",proto:!0,real:!0,forced:WE},{finally:function(i){var e=od(this,Rb("Promise")),o=typeof i=="function";return this.then(o?function(s){return bk(e,i()).then(function(){return s})}:i,o?function(s){return bk(e,i()).then(function(){throw s})}:i)}}),typeof Nc=="function"){var dt=Rb("Promise").prototype.finally;Nc.prototype.finally!==dt&&Ea(Nc.prototype,"finally",dt,{unsafe:!0})}var XE=function(){var i=J(x.mark(function e(o){return x.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=Uint8Array,s.next=3,crypto.subtle.digest("SHA-256",o);case 3:return s.t1=s.sent,s.abrupt("return",new s.t0(s.t1));case 5:case"end":return s.stop()}},e)}));return function(e){return i.apply(this,arguments)}}(),et=function(i){return Array.from(i).map(function(e){return e.toString(16).padStart(2,"0")}).join("")},YE=function(i){if(typeof i!="string")throw new TypeError("Expected input to be a string");if(i.length%2!=0)throw new RangeError("Expected string to be an even number of characters");for(var e=new Uint8Array(i.length/2),o=0;o<i.length;o+=2)e[o/2]=parseInt(i.substring(o,o+2),16);return e},ft=function(i){return btoa(String.fromCharCode.apply(String,G(i))).replace(/={1,2}$/,"")},gt=function(){var i=J(x.mark(function e(o){var s;return x.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,crypto.subtle.digest("SHA-1",o);case 3:s=l.sent,l.next=9;break;case 6:l.prev=6,l.t0=l.catch(0),s=sha1.arrayBuffer(o);case 9:return l.abrupt("return",ft(new Uint8Array(s)));case 10:case"end":return l.stop()}},e,null,[[0,6]])}));return function(e){return i.apply(this,arguments)}}(),ht=function(i,e,o,s){s[e]=!0,o.has(i)?o.get(i).add(e):o.set(i,new Set([e]))},ZE=function(i){switch(i){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},it=function(i){function e(s,l,f,h){X(this,e);var p=o.call(this,f,"ChunkDownloadManager");if(m(n(p),"abortController",new AbortController),m(n(p),"downloadedSize",0),m(n(p),"successCount",0),m(n(p),"timer",void 0),m(n(p),"chunks",[]),m(n(p),"retUnit",void 0),m(n(p),"singleThread",!1),m(n(p),"initialized",!1),m(n(p),"ee",void 0),m(n(p),"chunkCount",void 0),m(n(p),"aborted",!1),m(n(p),"serverToIndices",new Map),m(n(p),"backupToIndices",new Map),m(n(p),"indexToBackupServers",[]),m(n(p),"busyBackupServers",new Map),m(n(p),"downloadingChunks",new Set),m(n(p),"metaInfo",void 0),m(n(p),"transHandler",void 0),p.metaInfo=s,p.transHandler=l,p.ee=h===void 0?new ia:h,f=s.size,s=s.unit,f===0)throw new Ma("size cannot be 0");return l.cancelSignal!==void 0&&l.cancelSignal.addEventListener("abort",function(){p.abortController.abort()},{once:!0}),p.abortController.signal.addEventListener("abort",function(){p.aborted=!0},{once:!0}),p.chunkCount=Math.ceil(f/(32768*s)),p}ja(e,i);var o=ka(e);return Ia(e,[{key:"setInfoByResponse",value:function(s){var l=this,f=s.serverList,h=s.backupList;if(s=s.unit,f.length<this.chunkCount&&h.length<this.chunkCount)throw new Ma("servers is not enough");this.updateProgress(0),this.initialized=!0;var p=Array(this.chunkCount).fill(!1);if(f.forEach(function(d,g){return d.forEach(function(b){return ht(b,g,l.serverToIndices,p)})}),h.forEach(function(d,g){return d.forEach(function(b){return ht(b,g,l.backupToIndices,p)})}),p.some(function(){return!1}))throw new da("Not enough servers to download",Eg);this.indexToBackupServers=h.map(function(d){return new Set(d)}),this.retUnit=s}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):this.serverToIndices.size===1&&Array.from(this.serverToIndices.keys())[0]===0?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",Eg))}},{key:"updateProgress",value:function(s){var l=this,f=this.downloadedSize+s;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new bd("Invalid download size",Eg))):(this.downloadedSize=f,this.timer!==void 0&&s!==0&&(clearTimeout(this.timer),this.timer=void 0),this.timer===void 0&&this.successCount!==this.chunkCount&&(this.timer=setTimeout(function(){l.ee.emit("timedOut"),l.abortController.abort()},12e4)),this.initialized&&s===0||this.transHandler.onOperationProgress===void 0||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var s=0,l=0,f=this.chunks;l<f.length;l++)s+=f[l].byteLength;if(s!==this.metaInfo.size)throw new Ma("invalid chunks total size");s=new Uint8Array(s),f=l=0;for(var h=this.chunks;f<h.length;f++){var p=h[f];s.set(new Uint8Array(p),l),l+=p.byteLength}return l=Array.from(s.subarray(0,4)).map(function(d){return d.toString(16)}).join("").toUpperCase(),Uv(s.buffer,ZE(l))}},{key:"getDownloadUrl",value:function(s){var l=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat($g(s).split(".").join("-"),".edge.").concat(Pd(null)?null:l,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var s=J(x.mark(function l(f){var h,p=this,d=arguments;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return h=1<d.length&&d[1]!==void 0&&d[1],g.next=3,Promise.all(Array.from(f.entries()).map(function(b){return b=ua(b,2),p.postDownloadRequest(b[0],Array.from(b[1]),h).catch(function(y){y.statusCode===404?(p.ee.emit("notExist"),p.abortController.abort()):y.name!=="AbortError"&&(Xa(y)?p.singleThread?(p.abortController.abort(),p.ee.emit("timedOut")):(p.warn("%d download timed out after %d, retrying use single thread",y.index,p.singleThread?6e4:3e4),p.abortController.abort(),p.singleThread=!0,p.ee.emit("multiTimeOut")):(p.ee.emit("error",y),p.abortController.abort()))})}));case 3:case"end":return g.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var s=J(x.mark(function l(f,h,p){var d,g,b,y,w,_,A,k,I,j=this;return x.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(I=function(){return(I=J(x.mark(function K(_t){var _a,_i,_o,_c,Nf,B,_r,_n,_s;return x.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(q.prev=0,_t!==void 0||f!==0){q.next=5;break}throw new Ma("Invalid serverIp");case 5:_a=_t===void 0?A.getDownloadUrl(f):_t;case 6:return A.downloadingChunks.add(d),q.next=9,_(_a);case 9:return _i=q.sent,_o=_i.responseData,A.downloadingChunks.delete(d),q.abrupt("return",_o);case 15:if(q.prev=15,q.t0=q.catch(0),A.downloadingChunks.delete(d),h.unshift(d),A.metaInfo.useNewDomain=!1,q.t0.name!=="AbortError"){q.next=22;break}throw q.t0;case 22:if(!Xa(q.t0)){q.next=25;break}throw q.t0.index=d,q.t0;case 25:if(_c=y,y+=1,!(2>_c)){q.next=30;break}return q.t0 instanceof Ma||A.warn("%o, %d download failed, retrying",q.t0,d),q.abrupt("return",k());case 30:if(q.t0.statusCode!==504){q.next=34;break}throw(Nf=new gb("download server timed out",{originalError:q.t0,serverCode:504})).index=d,Nf;case 34:if(!p||_c!==2||w[0]===0){q.next=45;break}return q.t0 instanceof Ma||A.warn("%d download failed, using backup: %d, %o",d,w[0],q.t0),q.next=38,A.busyBackupServers.get(w[0]);case 38:return B=k(A.getDownloadUrl(w[0])),A.busyBackupServers.set(w[0],B),q.next=42,B;case 42:return _r=q.sent,A.busyBackupServers.delete(w[0]),q.abrupt("return",_r);case 45:if(!(p&&2<_c&&w[1]!==void 0&&w[1]!==0)){q.next=56;break}return A.warn("%d download failed, using backup 1: %d",d,w[1]),q.next=49,A.busyBackupServers.get(w[1]);case 49:return _n=k(A.getDownloadUrl(w[1])),A.busyBackupServers.set(w[1],_n),q.next=53,_n;case 53:return _s=q.sent,A.busyBackupServers.delete(w[1]),q.abrupt("return",_s);case 56:throw q.t0.index=d,q.t0;case 58:case"end":return q.stop()}},K,null,[[0,15]])}))).apply(this,arguments)},k=function(K){return I.apply(this,arguments)},!this.aborted){F.next=4;break}throw new Ma("download already aborted");case 4:if((d=h.shift())!==void 0){F.next=8;break}return this.log("%s download finished",f),F.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){F.next=10;break}return F.abrupt("return");case 10:if(!this.downloadingChunks.has(d)){F.next=13;break}return this.log("%s already downloading, return",d),F.abrupt("return");case 13:if(this.chunks[d]===void 0){F.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",d),F.next=18,this.postDownloadRequest(f,h,p);case 18:return F.abrupt("return");case 19:return g=new FormData,b={hash:cw(this.metaInfo.hashHexStr),unit:this.retUnit===void 0?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:d},g.append("parameter",JSON.stringify(b)),y=0,w=Array.from(this.indexToBackupServers[d]),_=function(K){return He(K,{body:g,signal:j.abortController.signal,timeout:j.singleThread?12e4:3e4},{useBinaryResponse:!0})},A=this,F.next=28,k().then(function(K){return j.chunks[d]!==void 0?j.log("chunk %d download duplicated",d):(j.chunks[d]=K,j.log("chunk %d downloaded",d),j.successCount+=1,j.updateProgress(j.chunks[d].byteLength)),j.successCount===j.chunkCount&&(j.log("chunks all download"),j.ee.emit("finished")),j.singleThread?(j.downloadChunks(),Promise.resolve()):j.postDownloadRequest(f,h,p)});case 28:case"end":return F.stop()}},l,this)}));return function(l,f,h){return s.apply(this,arguments)}}()}]),e}(wb()),jt=function(i){function e(s,l,f,h){X(this,e);var p=o.call(this,f,"ChunkUploadManager");if(m(n(p),"chunkCount",0),m(n(p),"chunks",[]),m(n(p),"uploadedChunks",[]),m(n(p),"totalFailures",0),m(n(p),"timer",void 0),m(n(p),"initState","uninitialized"),m(n(p),"ee",void 0),m(n(p),"unit",0),m(n(p),"uploadedSize",0),m(n(p),"singleThread",!1),m(n(p),"abortController",new AbortController),m(n(p),"servers",[]),m(n(p),"aborted",!1),m(n(p),"metaInfo",void 0),m(n(p),"transHandler",void 0),p.metaInfo=s,p.transHandler=l,p.ee=h===void 0?new ia:h,s.file.length===0)throw new H("file not found or is empty",Of);return l.cancelSignal!==void 0&&l.cancelSignal.addEventListener("abort",function(){p.abortController.abort()},{once:!0}),p.abortController.signal.addEventListener("abort",function(){p.aborted=!0},{once:!0}),p}ja(e,i);var o=ka(e);return Ia(e,[{key:"initChunks",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y=this;return x.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.initState!=="initialized"&&this.initState!=="initializing"){w.next=2;break}throw new Ma("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=f,h=this.sliceFile(f,this.metaInfo.file),this.chunkCount=h.length,p=[],d=function(_,A){var k=(_=ua(A[_],2))[0],I=_[1];_=gt(I).then(function(j){y.chunks[k]={payload:I,sha1:j,uploadedTo:void 0,index:k,processed:!1}}),p.push(_)},g=0,b=Array.from(h.entries());g<b.length;g++)d(g,b);return w.next=11,Promise.all(p);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return w.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var s=this;if(!this.aborted){for(var l=this.chunks.filter(function(p){return!p.processed}),f=function(p){var d=l[p],g=s.servers.filter(function(y){return!y.isUploading}).sort(function(y,w){return y.successCount-w.successCount}).sort(function(y,w){return y.failureCount-w.failureCount})[0];if(g===void 0||1<g.failureCount)return s.log("Upload server not available, waiting"),s.ee.emit("serverUsedUp"),gj(1e3).then(function(){s.totalFailures>2*s.chunkCount&&s.ee.emit("error"),s.totalFailures+=1,g!==void 0&&(g.failureCount=0),s.uploadToServers()}).catch(function(){}),"break";d.processed=!0,g.isUploading=!0,s.log("uploading chunk %d to server %s",d.index,$g(g.ip));var b=s.getUploadUrl(g.ip);return J(x.mark(function y(){var w;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,s.postChunk(d.payload,b,d.index);case 3:w=s.chunks.findIndex(function(A){return A===d}),d.uploadedTo=g.ip,s.chunks.splice(w,1),s.uploadedChunks.push(d),g.successCount+=1,g.isUploading=!1,s.updateProgress(d.payload.byteLength),s.log("upload chunk %d successfully",d.index),_.next=31;break;case 13:if(_.prev=13,_.t0=_.catch(0),g.isUploading=!1,d.processed=!1,_.t0.statusCode!==504&&!Xa(_.t0)){_.next=27;break}if(s.singleThread){_.next=24;break}return s.warn("%d upload timed out after %d, retrying use single thread",d.index,s.singleThread?12e4:3e4),s.abortController.abort(),s.singleThread=!0,s.ee.emit("multiTimeOut"),_.abrupt("return");case 24:return s.ee.emit("timedOut"),s.abortController.abort(),_.abrupt("return");case 27:return s.metaInfo.useNewDomain=!1,g.failureCount+=1,_.next=31,gj(1e3);case 31:s.uploadedChunks.length===s.chunkCount?(s.log("chunks uploaded"),s.ee.emit("finished")):(s.singleThread||s.chunks.filter(function(A){return!A.processed}).length===1)&&s.uploadToServers();case 32:case"end":return _.stop()}},y,null,[[0,13]])}))(),s.singleThread?"break":void 0},h=0;h<l.length&&f(h)!=="break";h++);l.length===0&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var s=!0,l=[],f=G(this.uploadedChunks).sort(function(d,g){return d.index-g.index}),h=0;for(f=Array.from(f.values());h<f.length;h++){var p=f[h].uploadedTo;if(p===void 0){s=!1;break}l.push(p)}if(!s)throw new Ma("some chunks not uploaded, cannot get upload server ips");return l}},{key:"addServers",value:function(s){var l=this;s.forEach(function(f){var h=l.servers.findIndex(function(p){return p.ip===f});h!==-1?l.servers[h].failureCount=0:(l.log("server %s added",$g(f)),l.servers.push({successCount:0,isUploading:!1,ip:f,failureCount:0}))})}},{key:"updateProgress",value:function(s){var l=this,f=s!==void 0?this.uploadedSize+s:this.metaInfo.file.length;f>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new bd("Invalid upload size",Dg))):(this.uploadedSize=f,this.timer!==void 0&&s!==0&&(clearTimeout(this.timer),this.timer=void 0),this.timer===void 0&&s!==void 0&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout(function(){l.ee.emit("timedOut"),l.abortController.abort()},12e4)),this.initState==="initialized"&&s===0||this.transHandler.onOperationProgress===void 0||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(s,l){var f=0,h=[],p=l.length;for(s*=32768;f<p;)h.push(l.slice(f,f+s)),f+=s;return this.log("chunks split into %d",h.length),h}},{key:"postChunk",value:function(){var s=J(x.mark(function l(f,h,p){var d,g,b,y,w,_,A,k;return x.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!this.aborted){I.next=2;break}throw new Ma("upload already aborted");case 2:if(this.unit!==void 0){I.next=4;break}throw new Ma("unit is undefined");case 4:return d=this.metaInfo,g=d.ticket,b=d.instance,y=d.loginOpt,w=d.hashStr,I.t0=p,I.t1=w,I.next=9,gt(f);case 9:return I.t2=I.sent,I.t3=this.unit,I.t4=g,I.t5=b,I.t6=y,_={index:I.t0,hash:I.t1,sha1:I.t2,unit:I.t3,ticket:I.t4,instance:I.t5,loginOpt:I.t6},(A=new FormData).append("parameter",JSON.stringify(_)),A.append("payload",new Blob([f])),I.next=20,He(h,{headers:{Accept:"application/json"},body:A,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(k=I.sent,k.status===201){I.next=24;break}throw new da("uploading chunk ".concat(p," failed"));case 24:case"end":return I.stop()}},l,this)}));return function(l,f,h){return s.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(s){var l=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat($g(s).split(".").join("-"),".edge.").concat(Pd(null)?null:l,":9601/api/v1/chuck/upload")}}]),e}(wb()),kt=function(i){function e(s){X(this,e);var l=o.call(this,s,"MediaTaskManager");return m(n(l),"isProcessing",!1),m(n(l),"authInfo",void 0),m(n(l),"taskFinishers",{}),m(n(l),"mediaTasks",new Map),m(n(l),"ongoingTask",void 0),l.on("connectionStateChanged",function(f){if(f===S.ConnectionState.ABORTED||f===S.ConnectionState.DISCONNECTED){l.ongoingTask!==void 0&&l.cancelTask(l.ongoingTask),f=0;for(var h=Array.from(l.mediaTasks.entries());f<h.length;f++){var p=ua(h[f],2)[1];l.cancelTask(p)}l.mediaTasks.clear(),l.taskFinishers={}}else f===S.ConnectionState.RECONNECTING?l.ongoingTask!==void 0&&l.ongoingTask.manager.abortController.abort():f===S.ConnectionState.CONNECTED&&l.ongoingTask!==void 0&&l.ongoingTask.manager.ee.emit("reconnected")}),l}ja(e,i);var o=ka(e);return Ia(e,[{key:"setAuthInfo",value:function(s){this.authInfo=s}},{key:"waitMediaTask",value:function(s){var l=this;return new Promise(function(f,h){l.taskFinishers[s]={resolve:f,reject:h},l.isProcessing||l.processMediaTask()}).finally(function(){l.ongoingTask!==void 0&&l.ongoingTask.manager.timer!==void 0&&clearTimeout(l.ongoingTask.manager.timer),delete l.taskFinishers[s],l.mediaTasks.size!==0?l.processMediaTask():l.isProcessing=!1})}},{key:"addUploadTask",value:function(s,l,f,h){var p=s.file;if(s=s.hash,this.authInfo===void 0)throw new Ma("session not found");if(this.mediaTasks.size>=e.MAX_PENDING_TASK_COUNT-1)throw new lb("Upload media failed, exceed max pending jobs",tC);return h=new jt({hashStr:ft(s),file:p,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},h,this.logger),p=de(),this.mediaTasks.set(p,{type:"UPLOAD",manager:h,hash:s,setter:f,fetcher:l,taskId:p}),p}},{key:"addDownloadTask",value:function(s,l,f){var h=s.hashHexStr,p=s.size,d=s.unit;if(s=s.zone,this.authInfo===void 0)throw new Ma("session not found");if(this.mediaTasks.size>=e.MAX_PENDING_TASK_COUNT-1)throw new lb("Download media failed, exceed max pending jobs",xC);return f=new it({hashHexStr:h,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:p,zone:s,unit:d},f,this.logger),h=de(),this.mediaTasks.set(h,{type:"DOWNLOAD",manager:f,fetcher:l,taskId:h}),h}},{key:"doDownloadTaskImpl",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A,k=this,I=arguments;return x.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return p=2<I.length&&I[2]!==void 0&&I[2],g=d=f.manager,p&&(d=new it(g.metaInfo,g.transHandler,this.logger,g.ee)),b=f.fetcher,j.next=7,b();case 7:if(y=j.sent,w=y.serverList,_=y.backupList,A=y.unit,!p||A===g.retUnit){j.next=13;break}throw new da("download unit is different, reject to continue",Eg);case 13:p&&(f.manager=d,d.downloadedSize=g.downloadedSize,d.successCount=g.successCount,d.timer=g.timer,d.chunks=g.chunks,d.initialized=g.initialized,d.singleThread=g.singleThread,d.updateProgress(0)),d.ee.once("reconnected",function(){d.ee.removeAllListeners(),k.doDownloadTaskImpl(f,h,!0).catch(function(F){h.reject(F)})}),d.ee.once("multiTimeOut",function(){d.ee.removeAllListeners(),k.doDownloadTaskImpl(f,h,!0).catch(function(F){h.reject(F)})}),d.ee.once("error",function(F){d.ee.removeAllListeners(),h.reject(new da(["download file file, index %d",F.index],{code:Eg,originalError:F}))}),d.ee.once("notExist",function(){d.abortController.abort(),d.ee.removeAllListeners(),h.reject(new da("download file not found",wC))}),d.ee.once("timedOut",function(){d.ee.removeAllListeners(),d.abortController.abort(),h.reject(new gb("download timed out",vC))}),d.transHandler.cancelSignal!==void 0&&d.transHandler.cancelSignal.addEventListener("abort",function(){h.reject(new Ol("Downloading canceled",ms))},{once:!0}),d.ee.once("finished",function(){h.resolve({type:"DOWNLOAD",payload:d.getPayload()})}),d.setInfoByResponse({serverList:w,backupList:_,unit:A}),d.downloadChunks();case 23:case"end":return j.stop()}},l,this)}));return function(l,f){return s.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(s,l){var f=this,h=2<arguments.length&&arguments[2]!==void 0&&arguments[2],p=s.taskId;return h||(this.mediaTasks.delete(p),this.ongoingTask=s),new Promise(function(d,g){f.doDownloadTaskImpl(s,l,h).then(d).catch(g)})}},{key:"doUploadTaskImpl",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A,k,I=this,j=arguments;return x.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return p=2<j.length&&j[2]!==void 0&&j[2],g=d=f.manager,p&&(d=new jt(g.metaInfo,g.transHandler,this.logger,g.ee)),b=f.fetcher,y=new Ua,_=new Promise(function(K,_t){var _a=b(),_i=_a.ret,_o=_a.err,_c=_a.timeout;_a.fin.pipe(rb(y)).subscribe({next:function(Nf){h.resolve({type:"UPLOAD",retUnit:Nf.unit,zone:Nf.zone})},complete:function(){K({hasExist:!0}),y.next(),y.complete()}}),_i.pipe(rb(y),fb(function(){var Nf=J(x.mark(function B(_r){var _n,_s;return x.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(_n=_r.servers,_s=_r.unit,p&&g.unit!==_s?h.reject(new da("upload unit is different, reject to continue",Dg)):p&&(f.manager=d,d.chunkCount=g.chunkCount,d.chunks=g.chunks,d.totalFailures=g.totalFailures,d.uploadedChunks=g.uploadedChunks,d.timer=g.timer,d.initState=g.initState,d.unit=g.unit,d.uploadedSize=g.uploadedSize,d.singleThread=g.singleThread,d.updateProgress(0)),d.addServers(_n),d.initState!=="uninitialized"){q.next=7;break}return w=d.initChunks(_s),q.next=7,w;case 7:case"end":return q.stop()}},B)}));return function(B){return Nf.apply(this,arguments)}}())).subscribe({complete:function(){return K({hasExist:!1})},error:_t}),_a=function(Nf){d.initState!=="uninitialized"&&w?K(w.then(function(){return{hasExist:!1}})):_t(Nf)},_o.pipe(rb(y)).subscribe({error:_a}),_c.pipe(rb(y)).subscribe({error:_a})}),F.next=9,_;case 9:if(A=F.sent,!A.hasExist){F.next=15;break}return d.updateProgress(),this.log("file already exists, skipping upload"),F.abrupt("return");case 15:y.next(),y.complete(),this.log("chunks initialization promise resolved"),k=jb(d.ee,"serverUsedUp").pipe(Av(function(){return d.chunkCount!==d.uploadedChunks.length}),Dv(5e3,void 0,{leading:!1}),sn(function(){return b().ret})).subscribe(function(K){d.addServers(K.servers)}),d.ee.once("reconnected",function(){d.ee.removeAllListeners(),I.doUploadTask(f,h,!0).catch(function(K){h.reject(K)})}),d.ee.once("multiTimeOut",function(){d.ee.removeAllListeners(),I.doUploadTask(f,h,!0).catch(function(K){h.reject(K)})}),d.ee.once("timedOut",function(){k.unsubscribe(),d.ee.removeAllListeners(),d.abortController.abort(),h.reject(new gb("upload timed out",ji))}),d.ee.once("error",function(K){k.unsubscribe(),d.ee.removeAllListeners(),d.abortController.abort(),h.reject(K||new da("upload error",Dg))}),d.transHandler.cancelSignal!==void 0&&d.transHandler.cancelSignal.addEventListener("abort",function(){h.reject(new Ol("Uploading canceled",ls))},{once:!0}),d.ee.once("finished",J(x.mark(function K(){var _t,_a,_i;return x.wrap(function(_o){for(;;)switch(_o.prev=_o.next){case 0:return k.unsubscribe(),_o.next=3,f.setter(d.unit,d.getUploadServerIPs());case 3:_t=_o.sent,_a=_t.zone,_i=_t.unit,d.ee.removeAllListeners(),h.resolve({type:"UPLOAD",retUnit:_i,zone:_a});case 8:case"end":return _o.stop()}},K)}))),d.uploadToServers();case 26:case"end":return F.stop()}},l,this)}));return function(l,f){return s.apply(this,arguments)}}()},{key:"doUploadTask",value:function(s,l){var f=this,h=2<arguments.length&&arguments[2]!==void 0&&arguments[2],p=s.taskId;return h||(this.mediaTasks.delete(p),this.ongoingTask=s),new Promise(function(d,g){f.doUploadTaskImpl(s,l,h).then(d).catch(g)})}},{key:"processMediaTask",value:function(){var s=J(x.mark(function l(){var f,h,p;return x.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.mediaTasks.size!==0){d.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,f=this.mediaTasks.keys().next().value,(h=this.taskFinishers[f])!==void 0){d.next=7;break}throw Error("top task not found");case 7:if((p=this.mediaTasks.get(f))!==void 0){d.next=10;break}throw new Ma("task invalid");case 10:if(p.type!=="UPLOAD"){d.next=15;break}return d.next=13,this.doUploadTask(p,h).catch(function(g){p.manager.ee.removeAllListeners(),h.reject(g)});case 13:d.next=18;break;case 15:if(p.type!=="DOWNLOAD"){d.next=18;break}return d.next=18,this.doDownloadTask(p,h).catch(function(g){p.manager.ee.removeAllListeners(),h.reject(g)});case 18:case"end":return d.stop()}},l,this)}));return function(){return s.apply(this,arguments)}}()},{key:"cancelTask",value:function(s){var l=s.type==="DOWNLOAD"?ms:ls;s.manager.ee.removeAllListeners(),s.manager.abortController.abort(),this.taskFinishers[s.taskId]!==void 0&&this.taskFinishers[s.taskId].reject(new Ol("User logged out or kicked off, media task canceled",l))}}]),e}(wb());m(kt,"MAX_PENDING_TASK_COUNT",9),Up("of",function(){for(var i=0,e=arguments.length,o=new(cf(this))(e);e>i;)o[i]=arguments[i++];return o},nk);var lt=1/0,$E=Math.max,ew=function(i,e,o){var s=Object(i);if(!Nd(i)){var l=jf(e);i=Jd(i),e=function(f){return l(s[f],f,s)}}return-1<(e=function(f,h,p){var d=f==null?0:f.length;if(!d)return-1;if(p==null)p=0;else{var g=(p=p?(p=Nl(p))===lt||p===-lt?17976931348623157e292*(0>p?-1:1):p==p?p:0:p===0?p:0)%1;p=p==p?g?p-g:p:0}return 0>p&&(p=$E(d+p,0)),ar(f,jf(h),p)}(i,e,o))?s[l?i[e]:e]:void 0},dw=function(i,e){return i&&i.length?bl(i,void 0,typeof e=="function"?e:void 0):[]},mt=function(){function i(){X(this,i),m(this,"size",0),m(this,"fields",new Map)}return Ia(i,[{key:"define",value:function(e,o,s){if(this.size+=s,64<this.size)throw new RangeError("the struct over 64 bits is not supported");jh(o={val:0,isNumber:o==="number",isBoolean:o==="boolean",oneof:o==="number"||o==="boolean"?void 0:o,len:s}),this.fields.set(e,o)}},{key:"set",value:function(e,o){if(!(e=this.fields.get(e)))throw Error("field not found");var s=e.oneof;if(!U.isLong(o)&&typeof o!="number")if(typeof o=="boolean")o=o?1:0;else{if(s===void 0)throw Error("invalid field type");if((o=s[o])===void 0)throw Error("field type not found")}jh(e,o),e.val=o}},{key:"toNumber",value:function(){for(var e=0,o=0,s=0,l=Array.from(this.fields);s<l.length;s++){var f=ua(l[s],2)[1],h=f.len;(f=f.val)!==void 0&&(e+=U.fromValue(f).shiftLeft(o).toNumber(),o+=h)}return e}},{key:"toLong",value:function(){for(var e=U.fromNumber(0,!0),o=0,s=0,l=Array.from(this.fields);s<l.length;s++){var f=ua(l[s],2)[1],h=f.len;(f=f.val)!==void 0&&(e=U.fromValue(f).shiftLeft(o).add(e),o+=h)}return e}},{key:"assert",value:function(e,o){function s(h){if(!U.isLong(h)&&typeof h!="number")if(typeof h=="boolean")h=h?1:0;else{if(f===void 0)throw Error("invalid field type");if((h=f[h])===void 0)throw Error("field type not found")}return jh(l,h),ih(h,l.val)}var l=this.fields.get(e);if(!l)throw Error("field not found");var f=l.oneof;if(!Array.isArray(o))return s(o);if(o.length===1)return s(o[0]);if(o.every(function(h){return typeof h=="string"})&&f!==void 0)return o.some(function(h){return s(h)});throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=U.fromValue(e);for(var o=0,s=0,l=Array.from(this.fields);s<l.length;s++){var f=ua(l[s],2)[1],h=f.len,p=U.fromNumber(Math.pow(2,h)-1,!0).shiftLeft(o);jh(f,p=e.and(p).shiftRightUnsigned(o)),f.val=p,o+=h}}},{key:"typeOf",value:function(e){if((e=this.fields.get(e))!==void 0){var o=e.oneof;if(e=e.val,o!==void 0){var s=0;for(o=Object.entries(o);s<o.length;s++){var l=ua(o[s],2),f=l[0];if(ih(e,l[1]))return f}}}throw new TypeError("can only get type of oneof type")}}]),i}(),nt=function(i){function e(s){X(this,e);var l=o.call(this);return l.define("Rejoin","boolean",1),l.define("Unused","number",31),l.define("Platform","number",8),l.define("Version","number",12),l.define("Subversion","number",12),l.set("Platform",7),l.set("Version",4),l.set("Subversion",15),l.set("Rejoin",s),l}ja(e,i);var o=ka(e);return e}(mt),aF=wa(wa(wa(wa({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),ot={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},bF=wa(wa({},aF),ot),cF={Uncompressed:0,Zlib:1},ke=function(i){function e(s){X(this,e);var l=o.call(this);if(l.define("MessageType",bF,8),l.define("BroadcastJumps","number",2),l.define("ToCache","boolean",1),l.define("FromCache","boolean",1),l.define("CompressionMethod",cF,2),l.define("IterationNumber","number",4),l.define("BufferedMessage","boolean",1),l.define("ToArchive","boolean",1),l.define("FromArchive","boolean",1),typeof s=="number"||U.isLong(s))l.from(s);else if(s!==void 0){var f=0;for(s=eh(s);f<s.length;f++){var h=ua(s[f],2);l.set(h[0],h[1])}}return l}ja(e,i);var o=ka(e);return Ia(e,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(s){var l=this;return s!==void 0?this.assert("MessageType",s):Pf(ot).some(function(f){return l.assert("MessageType",f)})}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),e}(mt),dF=function(i){function e(s){return X(this,e),m(n(s=o.call(this,s,"ChatManager")),"dialogueLru",new Nz(void 0,{maxlen:1e4,ttl:1e4})),s}ja(e,i);var o=ka(e);return Ia(e,[{key:"getChatInfo",value:function(s){var l=this.dialogueLru.get(s);if(this.dialogueLru.prune(),l){var f=l.dialogue,h={dialogue:f,sequence:l=l.sequence.add(1)};return this.dialogueLru.set(s,{dialogue:f,sequence:l}),h}return f={dialogue:Yg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(s,f),f}}]),e}(wb()),v={};V(module)=="object"&&(module.exports=v),v.parse=function(i,e){var o,s=v.bin.readUshort,l=v.bin.readUint,f={};for(o=(i=new Uint8Array(i)).length-4;l(i,o)!=101010256;)o--;var h=s(i,o=o+4+4);s(i,o+=2),l(i,o+=2),o=l(i,o+=4);for(var p=0;p<h;p++){l(i,o),o+=4,o+=4,o+=4,l(i,o+=4);var d=l(i,o+=4),g=l(i,o+=4),b=s(i,o+=4),y=s(i,o+2),w=s(i,o+4);o+=6;var _=l(i,o+=8);o+=4,o+=b+y+w,v._readLocal(i,_,f,d,g,e)}return f},v._readLocal=function(i,e,o,s,l,f){var h=v.bin.readUshort,p=v.bin.readUint;p(i,e),h(i,e+=4),h(i,e+=2);var d=h(i,e+=2);p(i,e+=2),p(i,e+=4),p=h(i,e=e+4+8);var g=h(i,e+=2);if(e+=2,h=v.bin.readUTF8(i,e,p),e=e+p+g,f)o[h]={size:l,csize:s};else if(i=new Uint8Array(i.buffer,e),d==0)o[h]=new Uint8Array(i.buffer.slice(e,e+s));else{if(d!=8)throw"unknown compression method: "+d;e=new Uint8Array(l),v.inflateRaw(i,e),o[h]=e}},v.inflateRaw=function(i,e){return v.F.inflate(i,e)},v.inflate=function(i,e){return i[0],i[1],v.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-2),e)},v.deflate=function(i,e){e==null&&(e={level:6});var o=0,s=new Uint8Array(50+Math.floor(1.1*i.length));return s[o]=120,s[o+1]=156,o=v.F.deflateRaw(i,s,o+2,e.level),i=v.adler(i,0,i.length),s[o+0]=i>>>24&255,s[o+1]=i>>>16&255,s[o+2]=i>>>8&255,s[o+3]=i>>>0&255,new Uint8Array(s.buffer,0,o+4)},v.deflateRaw=function(i,e){e==null&&(e={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),s=v.F.deflateRaw(i,o,s,e.level);return new Uint8Array(o.buffer,0,s)},v.encode=function(i,e){e==null&&(e=!1);var o,s=0,l=v.bin.writeUint,f=v.bin.writeUshort,h={};for(o in i){var p=!v._noNeed(o)&&!e,d=i[o],g=v.crc.crc(d,0,d.length);h[o]={cpr:p,usize:d.length,crc:g,file:p?v.deflateRaw(d):d}}for(o in h)s+=h[o].file.length+30+46+2*v.bin.sizeUTF8(o);for(o in i=new Uint8Array(s+22),e=0,d=[],h)g=h[o],d.push(e),e=v._writeHeader(i,e,o,g,0);for(o in s=0,p=e,h)g=h[o],d.push(e),e=v._writeHeader(i,e,o,g,1,d[s++]);return h=e-p,l(i,e,101010256),f(i,e=e+4+4,s),f(i,e+=2,s),l(i,e+=2,h),l(i,e+4,p),i.buffer},v._noNeed=function(i){return i=i.split(".").pop().toLowerCase(),"png,jpg,jpeg,zip".indexOf(i)!=-1},v._writeHeader=function(i,e,o,s,l,f){var h=v.bin.writeUint,p=v.bin.writeUshort,d=s.file;return h(i,e,l==0?67324752:33639248),e+=4,l==1&&(e+=2),p(i,e,20),p(i,e+=2,0),p(i,e+=2,s.cpr?8:0),h(i,e+=2,0),h(i,e+=4,s.crc),h(i,e+=4,d.length),h(i,e+=4,s.usize),p(i,e+=4,v.bin.sizeUTF8(o)),p(i,e+=2,0),e+=2,l==1&&(h(i,e=e+2+2+6,f),e+=4),e+=o=v.bin.writeUTF8(i,e,o),l==0&&(i.set(d,e),e+=d.length),e},v.crc={table:function(){for(var i=new Uint32Array(256),e=0;256>e;e++){for(var o=e,s=0;8>s;s++)o=1&o?3988292384^o>>>1:o>>>1;i[e]=o}return i}(),update:function(i,e,o,s){for(var l=0;l<s;l++)i=v.crc.table[255&(i^e[o+l])]^i>>>8;return i},crc:function(i,e,o){return 4294967295^v.crc.update(4294967295,i,e,o)}},v.adler=function(i,e,o){var s=1,l=0,f=e;for(e+=o;f<e;){for(o=Math.min(f+5552,e);f<o;)l+=s+=i[f++];s%=65521,l%=65521}return l<<16|s},v.bin={readUshort:function(i,e){return i[e]|i[e+1]<<8},writeUshort:function(i,e,o){i[e]=255&o,i[e+1]=o>>8&255},readUint:function(i,e){return 16777216*i[e+3]+(i[e+2]<<16|i[e+1]<<8|i[e])},writeUint:function(i,e,o){i[e]=255&o,i[e+1]=o>>8&255,i[e+2]=o>>16&255,i[e+3]=o>>24&255},readASCII:function(i,e,o){for(var s="",l=0;l<o;l++)s+=String.fromCharCode(i[e+l]);return s},writeASCII:function(i,e,o){for(var s=0;s<o.length;s++)i[e+s]=o.charCodeAt(s)},pad:function(i){return 2>i.length?"0"+i:i},readUTF8:function(i,e,o){for(var s,l="",f=0;f<o;f++)l+="%"+v.bin.pad(i[e+f].toString(16));try{s=decodeURIComponent(l)}catch{return v.bin.readASCII(i,e,o)}return s},writeUTF8:function(i,e,o){for(var s=o.length,l=0,f=0;f<s;f++){var h=o.charCodeAt(f);if(!(4294967168&h))i[e+l]=h,l++;else if(!(4294965248&h))i[e+l]=192|h>>6,i[e+l+1]=128|h>>0&63,l+=2;else if(!(4294901760&h))i[e+l]=224|h>>12,i[e+l+1]=128|h>>6&63,i[e+l+2]=128|h>>0&63,l+=3;else{if(4292870144&h)throw"e";i[e+l]=240|h>>18,i[e+l+1]=128|h>>12&63,i[e+l+2]=128|h>>6&63,i[e+l+3]=128|h>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var e=i.length,o=0,s=0;s<e;s++){var l=i.charCodeAt(s);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},v.F={},v.F.deflateRaw=function(i,e,o,s){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],f=v.F.U,h=v.F._goodIndex;v.F._hash;var p=v.F._putsE,d=0;o<<=3;var g=0,b=i.length;if(s==0){for(;d<b;){var y=Math.min(65535,b-d);p(e,o,d+y==b?1:0),o=v.F._copyExact(i,d,y,e,o+8),d+=y}return o>>>3}p=f.lits,s=f.strt;var w=f.prev,_=0,A=0,k=0,I=0,j=0;for(2<b&&(s[j=v.F._hash(i,0)]=0),d=0;d<b;d++){if(y=j,d+1<b-2){j=v.F._hash(i,d+1);var F=d+1&32767;w[F]=s[j],s[j]=F}if(g<=d){if((14e3<_||26697<A)&&100<b-d&&(g<d&&(p[_]=d-g,_+=2,g=d),o=v.F._writeBlock(d==b-1||g==b?1:0,p,_,I,i,k,d-k,e,o),_=A=I=0,k=d),F=0,d<b-2&&(F=v.F._bestMatch(i,d,w,y,Math.min(l[2],b-d),l[3])),F!=0){y=F>>>16,F&=65535;var K=h(y,f.of0);f.lhst[257+K]++;var _t=h(F,f.df0);f.dhst[_t]++,I+=f.exb[K]+f.dxb[_t],p[_]=y<<23|d-g,p[_+1]=F<<16|K<<8|_t,_+=2,g=d+y}else f.lhst[i[d]]++;A++}}for(k==d&&i.length!=0||(g<d&&(p[_]=d-g,_+=2),o=v.F._writeBlock(1,p,_,I,i,k,d-k,e,o));7&o;)o++;return o>>>3},v.F._bestMatch=function(i,e,o,s,l,f){var h=32767&e,p=o[h],d=h-p+32768&32767;if(p==h||s!=v.F._hash(i,e-d))return 0;for(var g=s=0,b=Math.min(32767,e);d<=b&&--f!=0&&p!=h;){if((s==0||i[e+s]==i[e+s-d])&&(h=v.F._howLong(i,e,d))>s){if(g=d,(s=h)>=l)break;d+2<h&&(h=d+2);for(var y=0,w=0;w<h-2;w++){var _=e-d+w+32768&32767,A=_-o[_]+32768&32767;A>y&&(y=A,p=_)}}d+=(h=p)-(p=o[h])+32768&32767}return s<<16|g},v.F._howLong=function(i,e,o){if(i[e]!=i[e-o]||i[e+1]!=i[e+1-o]||i[e+2]!=i[e+2-o])return 0;var s=e,l=Math.min(i.length,e+258);for(e+=3;e<l&&i[e]==i[e-o];)e++;return e-s},v.F._hash=function(i,e){return(i[e]<<8|i[e+1])+(i[e+2]<<4)&65535},v.saved=0,v.F._writeBlock=function(i,e,o,s,l,f,h,p,d){var g=v.F.U,b=v.F._putsF,y=v.F._putsE;g.lhst[256]++;var w=v.F.getTrees(),_=w[0],A=w[1],k=w[2],I=w[3],j=w[4],F=w[5],K=w[6];w=w[7];var _t=32+(d+3&7?8-(d+3&7):0)+(h<<3),_a=s+v.F.contSize(g.fltree,g.lhst)+v.F.contSize(g.fdtree,g.dhst);s=s+v.F.contSize(g.ltree,g.lhst)+v.F.contSize(g.dtree,g.dhst),s+=14+3*F+v.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var _i=0;286>_i;_i++)g.lhst[_i]=0;for(_i=0;30>_i;_i++)g.dhst[_i]=0;for(_i=0;19>_i;_i++)g.ihst[_i]=0;if(_t=_t<_a&&_t<s?0:_a<s?1:2,b(p,d,i),b(p,d+1,_t),d+=3,_t==0){for(;7&d;)d++;d=v.F._copyExact(l,f,h,p,d)}else{if(_t==1)var _o=g.fltree,_c=g.fdtree;if(_t==2){for(v.F.makeCodes(g.ltree,_),v.F.revCodes(g.ltree,_),v.F.makeCodes(g.dtree,A),v.F.revCodes(g.dtree,A),v.F.makeCodes(g.itree,k),v.F.revCodes(g.itree,k),_o=g.ltree,_c=g.dtree,y(p,d,I-257),y(p,d+=5,j-1),y(p,d+=5,F-4),d+=4,i=0;i<F;i++)y(p,d+3*i,g.itree[1+(g.ordr[i]<<1)]);d=v.F._codeTiny(K,g.itree,p,d+3*F),d=v.F._codeTiny(w,g.itree,p,d)}for(F=0;F<o;F+=2){for(K=(i=e[F])>>>23,i=f+(8388607&i);f<i;)d=v.F._writeLit(l[f++],_o,p,d);K!=0&&(i=(_=e[F+1])>>16,h=_>>8&255,_&=255,y(p,d=v.F._writeLit(257+h,_o,p,d),K-g.of0[h]),d+=g.exb[h],b(p,d=v.F._writeLit(_,_c,p,d),i-g.df0[_]),d+=g.dxb[_],f+=K)}d=v.F._writeLit(256,_o,p,d)}return d},v.F._copyExact=function(i,e,o,s,l){var f=l>>>3;return s[f]=o,s[f+1]=o>>>8,s[f+2]=255-s[f],s[f+3]=255-s[f+1],f+=4,s.set(new Uint8Array(i.buffer,e,o),f),l+(o+4<<3)},v.F.getTrees=function(){for(var i=v.F.U,e=v.F._hufTree(i.lhst,i.ltree,15),o=v.F._hufTree(i.dhst,i.dtree,15),s=[],l=v.F._lenCodes(i.ltree,s),f=[],h=v.F._lenCodes(i.dtree,f),p=0;p<s.length;p+=2)i.ihst[s[p]]++;for(p=0;p<f.length;p+=2)i.ihst[f[p]]++;p=v.F._hufTree(i.ihst,i.itree,7);for(var d=19;4<d&&i.itree[1+(i.ordr[d-1]<<1)]==0;)d--;return[e,o,p,l,h,d,s,f]},v.F.getSecond=function(i){for(var e=[],o=0;o<i.length;o+=2)e.push(i[o+1]);return e},v.F.nonZero=function(i){for(var e="",o=0;o<i.length;o+=2)i[o+1]!=0&&(e+=(o>>1)+",");return e},v.F.contSize=function(i,e){for(var o=0,s=0;s<e.length;s++)o+=e[s]*i[1+(s<<1)];return o},v.F._codeTiny=function(i,e,o,s){for(var l=0;l<i.length;l+=2){var f=i[l],h=i[l+1];s=v.F._writeLit(f,e,o,s);var p=f==16?2:f==17?3:7;15<f&&(v.F._putsE(o,s,h,p),s+=p)}return s},v.F._lenCodes=function(i,e){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var s=0;s<o;s+=2){var l=i[s+1],f=s+3<o?i[s+3]:-1,h=s+5<o?i[s+5]:-1,p=s==0?-1:i[s-1];if(l==0&&f==l&&h==l){for(f=s+5;f+2<o&&i[f+2]==l;)f+=2;11>(l=Math.min(f+1-s>>>1,138))?e.push(17,l-3):e.push(18,l-11),s+=2*l-2}else if(l==p&&f==l&&h==l){for(f=s+5;f+2<o&&i[f+2]==l;)f+=2;l=Math.min(f+1-s>>>1,6),e.push(16,l-3),s+=2*l-2}else e.push(l,0)}return o>>>1},v.F._hufTree=function(i,e,o){var s=[],l=i.length,f=e.length,h=0;for(h=0;h<f;h+=2)e[h]=0,e[h+1]=0;for(h=0;h<l;h++)i[h]!=0&&s.push({lit:h,f:i[h]});if(i=s.length,l=s.slice(0),i==0)return 0;if(i==1)return e[1+((o=s[0].lit)<<1)]=1,e[1+((o==0?1:0)<<1)]=1;s.sort(function(b,y){return b.f-y.f}),h=s[0],f=s[1];var p=0,d=1,g=2;for(s[0]={lit:-1,f:h.f+f.f,l:h,r:f,d:0};d!=i-1;)h=p!=d&&(g==i||s[p].f<s[g].f)?s[p++]:s[g++],f=p!=d&&(g==i||s[p].f<s[g].f)?s[p++]:s[g++],s[d++]={lit:-1,f:h.f+f.f,l:h,r:f};for((s=v.F.setDepth(s[d-1],0))>o&&(v.F.restrictDepth(l,o,s),s=o),h=0;h<i;h++)e[1+(l[h].lit<<1)]=l[h].d;return s},v.F.setDepth=function(i,e){return i.lit!=-1?i.d=e:Math.max(v.F.setDepth(i.l,e+1),v.F.setDepth(i.r,e+1))},v.F.restrictDepth=function(i,e,o){var s=0,l=1<<o-e,f=0;for(i.sort(function(p,d){return d.d==p.d?p.f-d.f:d.d-p.d}),s=0;s<i.length&&i[s].d>e;s++){var h=i[s].d;i[s].d=e,f+=l-(1<<o-h)}for(f>>>=o-e;0<f;)(h=i[s].d)<e?(i[s].d++,f-=1<<e-h-1):s++;for(;0<=s;s--)i[s].d==e&&0>f&&(i[s].d--,f++);f!=0&&console.log("debt left")},v.F._goodIndex=function(i,e){var o=0;return e[16|o]<=i&&(o|=16),e[8|o]<=i&&(o|=8),e[4|o]<=i&&(o|=4),e[2|o]<=i&&(o|=2),e[1|o]<=i&&(o|=1),o},v.F._writeLit=function(i,e,o,s){return v.F._putsF(o,s,e[i<<1]),s+e[1+(i<<1)]},v.F.inflate=function(i,e){var o=Uint8Array;if(i[0]==3&&i[1]==0)return e||new o(0);var s=v.F,l=s._bitsF,f=s._bitsE,h=s._decodeTiny,p=s.makeCodes,d=s.codes2map,g=s._get17,b=s.U,y=e==null;y&&(e=new o(i.length>>>2<<3));for(var w,_,A,k,I=0,j=0,F=_=0,K=0;I==0;)if(I=l(i,K,1),w=l(i,K+1,2),K+=3,w==0)7&K&&(K+=8-(7&K)),w=i[(K=4+(K>>>3))-4]|i[K-3]<<8,y&&(e=v.F._check(e,F+w)),e.set(new o(i.buffer,i.byteOffset+K,w),F),K=K+w<<3,F+=w;else{if(y&&(e=v.F._check(e,F+131072)),w==1&&(A=b.flmap,k=b.fdmap,j=511,_=31),w==2){for(_=f(i,K,5)+257,w=f(i,K+5,5)+1,A=f(i,K+10,4)+4,K+=14,k=0;38>k;k+=2)b.itree[k]=0,b.itree[k+1]=0;for(j=1,k=0;k<A;k++){var _t=f(i,K+3*k,3);b.itree[1+(b.ordr[k]<<1)]=_t,_t>j&&(j=_t)}K+=3*A,p(b.itree,j),d(b.itree,j,b.imap),A=b.lmap,k=b.dmap,K=h(b.imap,(1<<j)-1,_+w,i,K,b.ttree),j=(1<<(_t=s._copyOut(b.ttree,0,_,b.ltree)))-1,_=(1<<(w=s._copyOut(b.ttree,_,w,b.dtree)))-1,p(b.ltree,_t),d(b.ltree,_t,A),p(b.dtree,w),d(b.dtree,w,k)}for(;;)if(K+=15&(w=A[g(i,K)&j]),(_t=w>>>4)>>>8==0)e[F++]=_t;else{if(_t==256)break;w=F+_t-254,264<_t&&(w=F+((_t=b.ldef[_t-257])>>>3)+f(i,K,7&_t),K+=7&_t),K+=15&(_t=k[g(i,K)&_]);var _a=((_t=b.ddef[_t>>>4])>>>4)+l(i,K,15&_t);for(K+=15&_t,y&&(e=v.F._check(e,F+131072));F<w;)e[F]=e[F++-_a],e[F]=e[F++-_a],e[F]=e[F++-_a],e[F]=e[F++-_a];F=w}}return e.length==F?e:e.slice(0,F)},v.F._check=function(i,e){var o=i.length;return e<=o?i:((e=new Uint8Array(Math.max(o<<1,e))).set(i,0),e)},v.F._decodeTiny=function(i,e,o,s,l,f){for(var h=v.F._bitsE,p=v.F._get17,d=0;d<o;){var g=i[p(s,l)&e];l+=15&g;var b=g>>>4;if(15>=b)f[d]=b,d++;else{var y=g=0;for(b==16?(y=3+h(s,l,2),l+=2,g=f[d-1]):b==17?(y=3+h(s,l,3),l+=3):b==18&&(y=11+h(s,l,7),l+=7),b=d+y;d<b;)f[d]=g,d++}}return l},v.F._copyOut=function(i,e,o,s){for(var l=0,f=0,h=s.length>>>1;f<o;){var p=i[f+e];s[f<<1]=0,s[1+(f<<1)]=p,p>l&&(l=p),f++}for(;f<h;)s[f<<1]=0,s[1+(f<<1)]=0,f++;return l},v.F.makeCodes=function(i,e){var o,s,l=v.F.U,f=i.length,h=l.bl_count;for(o=0;o<=e;o++)h[o]=0;for(o=1;o<f;o+=2)h[i[o]]++;for(l=l.next_code,o=0,h[0]=0,s=1;s<=e;s++)o=o+h[s-1]<<1,l[s]=o;for(e=0;e<f;e+=2)(h=i[e+1])!=0&&(i[e]=l[h],l[h]++)},v.F.codes2map=function(i,e,o){for(var s=i.length,l=v.F.U.rev15,f=0;f<s;f+=2)if(i[f+1]!=0){var h=i[f+1],p=f>>1<<4|h,d=e-h;for(d=(h=i[f]<<d)+(1<<d);h!=d;)o[l[h]>>>15-e]=p,h++}},v.F.revCodes=function(i,e){for(var o=v.F.U.rev15,s=15-e,l=0;l<i.length;l+=2)i[l]=o[i[l]<<e-i[l+1]]>>>s},v.F._putsE=function(i,e,o){o<<=7&e,i[e>>>=3]|=o,i[e+1]|=o>>>8},v.F._putsF=function(i,e,o){o<<=7&e,i[e>>>=3]|=o,i[e+1]|=o>>>8,i[e+2]|=o>>>16},v.F._bitsE=function(i,e,o){return(i[e>>>3]|i[1+(e>>>3)]<<8)>>>(7&e)&(1<<o)-1},v.F._bitsF=function(i,e,o){return(i[e>>>3]|i[1+(e>>>3)]<<8|i[2+(e>>>3)]<<16)>>>(7&e)&(1<<o)-1},v.F._get17=function(i,e){return(i[e>>>3]|i[1+(e>>>3)]<<8|i[2+(e>>>3)]<<16)>>>(7&e)},v.F._get25=function(i,e){return(i[e>>>3]|i[1+(e>>>3)]<<8|i[2+(e>>>3)]<<16|i[3+(e>>>3)]<<24)>>>(7&e)},v.F.U=function(){var i=Uint16Array,e=Uint32Array;return{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new i(65536),prev:new i(32768)}}(),function(){function i(l,f,h){for(;f--!=0;)l.push(0,h)}for(var e=v.F.U,o=0;32768>o;o++){var s=o;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,e.rev15[o]=(s>>>16|s<<16)>>>17}for(o=0;32>o;o++)e.ldef[o]=e.of0[o]<<3|e.exb[o],e.ddef[o]=e.df0[o]<<4|e.dxb[o];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),v.F.makeCodes(e.fltree,9),v.F.codes2map(e.fltree,9,e.flmap),v.F.revCodes(e.fltree,9),i(e.fdtree,32,5),v.F.makeCodes(e.fdtree,5),v.F.codes2map(e.fdtree,5,e.fdmap),v.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();var eF=Array.isArray||function(i){return i&&typeof i.length=="number"},fF=Object.defineProperty({isArray:eF},"__esModule",{value:!0}),gF=Object.defineProperty({isObject:function(i){return i!==null&&V(i)==="object"}},"__esModule",{value:!0}),hF=Object.defineProperty({isFunction:function(i){return typeof i=="function"}},"__esModule",{value:!0}),iF=function(){function i(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(o,s){return s+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return i.prototype=Object.create(Error.prototype),i}(),kh=Object.defineProperty({UnsubscriptionError:iF},"__esModule",{value:!0}),jF=function(){function i(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return i.prototype.unsubscribe=function(){if(!this.closed){var e=this._parentOrParents,o=this._ctorUnsubscribe,s=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,e instanceof i)e.remove(this);else if(e!==null)for(var f=0;f<e.length;++f)e[f].remove(this);if(hF.isFunction(s)){o&&(this._unsubscribe=void 0);try{s.call(this)}catch(p){var h=p instanceof kh.UnsubscriptionError?go(p.errors):[p]}}if(fF.isArray(l)){for(f=-1,e=l.length;++f<e;)if(o=l[f],gF.isObject(o))try{o.unsubscribe()}catch(p){h=h||[],p instanceof kh.UnsubscriptionError?h=h.concat(go(p.errors)):h.push(p)}}if(h)throw new kh.UnsubscriptionError(h)}},i.prototype.add=function(e){var o=e;if(!e)return i.EMPTY;switch(V(e)){case"function":o=new i(e);case"object":if(o===this||o.closed||typeof o.unsubscribe!="function")return o;if(this.closed)return o.unsubscribe(),o;o instanceof i||(e=o,(o=new i)._subscriptions=[e]);break;default:throw Error("unrecognized teardown "+e+" added to Subscription.")}if((e=o._parentOrParents)===null)o._parentOrParents=this;else if(e instanceof i){if(e===this)return o;o._parentOrParents=[e,this]}else{if(e.indexOf(this)!==-1)return o;e.push(this)}return(e=this._subscriptions)===null?this._subscriptions=[o]:e.push(o),o},i.prototype.remove=function(e){var o=this._subscriptions;o&&(e=o.indexOf(e))!==-1&&o.splice(e,1)},i.EMPTY=function(e){return e.closed=!0,e}(new i),i}(),kF=Object.defineProperty({Subscription:jF},"__esModule",{value:!0}),lF=Ka&&Ka.__extends||function(){var i=function(e,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])})(e,o)};return function(e,o){function s(){this.constructor=e}i(e,o),e.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),mF=function(i){function e(o,s){return i.call(this)||this}return lF(e,i),e.prototype.schedule=function(o,s){return this},e}(kF.Subscription),nF=Object.defineProperty({Action:mF},"__esModule",{value:!0}),oF=Ka&&Ka.__extends||function(){var i=function(e,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])})(e,o)};return function(e,o){function s(){this.constructor=e}i(e,o),e.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),pt=function(i){function e(o,s){var l=i.call(this,o,s)||this;return l.scheduler=o,l.work=s,l.pending=!1,l}return oF(e,i),e.prototype.schedule=function(o,s){if(s===void 0&&(s=0),this.closed)return this;this.state=o,o=this.id;var l=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(l,o,s)),this.pending=!0,this.delay=s,this.id=this.id||this.requestAsyncId(l,this.id,s),this},e.prototype.requestAsyncId=function(o,s,l){return l===void 0&&(l=0),setInterval(o.flush.bind(o,this),l)},e.prototype.recycleAsyncId=function(o,s,l){if(l===void 0&&(l=0),l!==null&&this.delay===l&&this.pending===!1)return s;clearInterval(s)},e.prototype.execute=function(o,s){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(o=this._execute(o,s))?o:void(this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},e.prototype._execute=function(o,s){s=!1;var l=void 0;try{this.work(o)}catch(f){s=!0,l=!!f&&f||Error(f)}if(s)return this.unsubscribe(),l},e.prototype._unsubscribe=function(){var o=this.id,s=this.scheduler,l=s.actions,f=l.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,f!==-1&&l.splice(f,1),o!=null&&(this.id=this.recycleAsyncId(s,o,null)),this.delay=null},e}(nF.Action),pF=function(){function i(e,o){o===void 0&&(o=i.now),this.SchedulerAction=e,this.now=o}return i.prototype.schedule=function(e,o,s){return o===void 0&&(o=0),new this.SchedulerAction(this,e).schedule(s,o)},i.now=function(){return Date.now()},i}(),qt=Object.defineProperty({Scheduler:pF},"__esModule",{value:!0}),qF=Ka&&Ka.__extends||function(){var i=function(e,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)l.hasOwnProperty(f)&&(s[f]=l[f])})(e,o)};return function(e,o){function s(){this.constructor=e}i(e,o),e.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),rt=function(i){function e(o,s){s===void 0&&(s=qt.Scheduler.now);var l=i.call(this,o,function(){return e.delegate&&e.delegate!==l?e.delegate.now():s()})||this;return l.actions=[],l.active=!1,l.scheduled=void 0,l}return qF(e,i),e.prototype.schedule=function(o,s,l){return s===void 0&&(s=0),e.delegate&&e.delegate!==this?e.delegate.schedule(o,s,l):i.prototype.schedule.call(this,o,s,l)},e.prototype.flush=function(o){var s=this.actions;if(this.active)s.push(o);else{var l;this.active=!0;do if(l=o.execute(o.state,o.delay))break;while(o=s.shift());if(this.active=!1,l){for(;o=s.shift();)o.unsubscribe();throw l}}},e}(qt.Scheduler),rF=qa("iterator"),Tl=!R(function(){var i=new URL("b?a=1&b=2&c=3","http://a"),e=i.searchParams,o="";return i.pathname="c%20d",e.forEach(function(s,l){e.delete("b"),o+=l+s}),!e.sort||i.href!=="http://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[rF]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://ÑÐµÑÑ").host!=="xn--e1aybc"||new URL("http://a#Ð±").hash!=="#%D0%B1"||o!=="a1c3"||new URL("http://x",void 0).host!=="x"}),sF=/[^\0-\u007E]/,tF=/[.\u3002\uFF0E\uFF61]/g,sf=Math.floor,Ul=String.fromCharCode,st=function(i){return i+22+75*(26>i)},uF=function(i){for(var e=[],o=[],s=0,l=i.length;s<l;){var f=i.charCodeAt(s++);if(55296<=f&&56319>=f&&s<l){var h=i.charCodeAt(s++);(64512&h)==56320?o.push(((1023&f)<<10)+(1023&h)+65536):(o.push(f),s--)}else o.push(f)}o=(i=o).length,s=128;var p=0,d=72;for(l=0;l<i.length;l++){var g=i[l];128>g&&e.push(Ul(g))}for((h=f=e.length)&&e.push("-");h<o;){var b=2147483647;for(l=0;l<i.length;l++)(g=i[l])>=s&&g<b&&(b=g);var y=h+1;if(b-s>sf((2147483647-p)/y))throw RangeError("Overflow: input needs wider integers to process");for(p+=(b-s)*y,s=b,l=0;l<i.length;l++){if((g=i[l])<s&&2147483647<++p)throw RangeError("Overflow: input needs wider integers to process");if(g==s){var w=p;for(g=36;!(w<(b=g<=d?1:g>=d+26?26:g-d));g+=36){w-=b;var _=36-b;e.push(Ul(st(b+w%_))),w=sf(w/_)}for(e.push(Ul(st(w))),d=y,g=0,p=h==f?sf(p/700):p>>1,p+=sf(p/d);455<p;g+=36)p=sf(p/35);d=sf(g+36*p/(p+38)),p=0,++h}}++p,++s}return e.join("")},tt=function(i){var e=Zf(i);if(typeof e!="function")throw TypeError(String(i)+" is not iterable");return sa(e.call(i))},ut=Rb("fetch"),Vl=Rb("Headers"),vF=qa("iterator"),vt=La.set,Hb=La.getterFor("URLSearchParams"),wF=La.getterFor("URLSearchParamsIterator"),xF=/\+/g,wt=Array(4),yF=function(i){return wt[i-1]||(wt[i-1]=RegExp("((?:%[\\da-f]{2}){"+i+"})","gi"))},zF=function(i){try{return decodeURIComponent(i)}catch{return i}},xt=function(i){i=i.replace(xF," ");var e=4;try{return decodeURIComponent(i)}catch{for(;e;)i=i.replace(yF(e--),zF);return i}},yt=/[!'()~]|%20/g,AF={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},zt=function(i){return AF[i]},At=function(i,e){if(e){e=e.split("&");for(var o,s=0;s<e.length;)(o=e[s++]).length&&(o=o.split("="),i.push({key:xt(o.shift()),value:xt(o.join("="))}))}},BF=function(i){this.entries.length=0,At(this.entries,i)},tf=function(i,e){if(i<e)throw TypeError("Not enough arguments")},Wl=Zo(function(i,e){vt(this,{type:"URLSearchParamsIterator",iterator:tt(Hb(i).entries),kind:e})},"Iterator",function(){var i=wF(this),e=i.kind,o=(i=i.iterator.next()).value;return i.done||(i.value=e==="keys"?o.key:e==="values"?o.value:[o.key,o.value]),i}),Fg=function(){hc(this,Fg,"URLSearchParams");var i,e,o,s=0<arguments.length?arguments[0]:void 0,l=[];if(vt(this,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:BF}),s!==void 0)if(ha(s)){var f=Zf(s);if(typeof f=="function")for(s=f.call(s),f=s.next;!(i=f.call(s)).done;){var h=(i=tt(sa(i.value))).next;if((e=h.call(i)).done||(o=h.call(i)).done||!h.call(i).done)throw TypeError("Expected sequence with length 2");l.push({key:e.value+"",value:o.value+""})}else for(i in s)Q(s,i)&&l.push({key:i,value:s[i]+""})}else At(l,typeof s=="string"?s.charAt(0)==="?"?s.slice(1):s:s+"")},pi=Fg.prototype;Xe(pi,{append:function(i,e){tf(arguments.length,2);var o=Hb(this);o.entries.push({key:i+"",value:e+""}),o.updateURL()},delete:function(i){tf(arguments.length,1);for(var e=Hb(this),o=e.entries,s=i+"",l=0;l<o.length;)o[l].key===s?o.splice(l,1):l++;e.updateURL()},get:function(i){tf(arguments.length,1);for(var e=Hb(this).entries,o=i+"",s=0;s<e.length;s++)if(e[s].key===o)return e[s].value;return null},getAll:function(i){tf(arguments.length,1);for(var e=Hb(this).entries,o=i+"",s=[],l=0;l<e.length;l++)e[l].key===o&&s.push(e[l].value);return s},has:function(i){tf(arguments.length,1);for(var e=Hb(this).entries,o=i+"",s=0;s<e.length;)if(e[s++].key===o)return!0;return!1},set:function(i,e){tf(arguments.length,1);for(var o,s=Hb(this),l=s.entries,f=!1,h=i+"",p=e+"",d=0;d<l.length;d++)(o=l[d]).key===h&&(f?l.splice(d--,1):(f=!0,o.value=p));f||l.push({key:h,value:p}),s.updateURL()},sort:function(){var i,e,o=Hb(this),s=o.entries,l=s.slice();for(e=s.length=0;e<l.length;e++){var f=l[e];for(i=0;i<e;i++)if(s[i].key>f.key){s.splice(i,0,f);break}i===e&&s.push(f)}o.updateURL()},forEach:function(i){for(var e,o=Hb(this).entries,s=pd(i,1<arguments.length?arguments[1]:void 0,3),l=0;l<o.length;)s((e=o[l++]).value,e.key,this)},keys:function(){return new Wl(this,"keys")},values:function(){return new Wl(this,"values")},entries:function(){return new Wl(this,"entries")}},{enumerable:!0}),Ea(pi,vF,pi.entries),Ea(pi,"toString",function(){for(var i,e=Hb(this).entries,o=[],s=0;s<e.length;)i=e[s++],o.push(encodeURIComponent(i.key).replace(yt,zt)+"="+encodeURIComponent(i.value).replace(yt,zt));return o.join("&")},{enumerable:!0}),gc(Fg,"URLSearchParams"),M({global:!0,forced:!Tl},{URLSearchParams:Fg}),Tl||typeof ut!="function"||typeof Vl!="function"||M({global:!0,enumerable:!0,forced:!0},{fetch:function(i){var e=[i];if(1<arguments.length){var o=arguments[1];if(ha(o)){var s=o.body;if(We(s)==="URLSearchParams"){var l=o.headers?new Vl(o.headers):new Vl;l.has("content-type")||l.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),o=Sb(o,{body:sc(0,String(s)),headers:sc(0,l)})}}e.push(o)}return ut.apply(this,e)}});var Gg=C.URL,CF=Fg,DF=La.set,Na=La.getterFor("URL"),EF=Math.floor,Bt=Math.pow,Ct=/[A-Za-z]/,FF=/[\d+-.A-Za-z]/,Xl=/\d/,GF=/^(0x|0X)/,HF=/^[0-7]+$/,IF=/^\d+$/,Dt=/^[\dA-Fa-f]+$/,JF=/[\0\t\n\r #%/:?@[\\]]/,KF=/[\0\t\n\r #/:?@[\\]]/,LF=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,MF=/[\t\n\r]/g,Yl=function(i,e){var o;if(e.charAt(0)=="["){if(e.charAt(e.length-1)!="]")return"Invalid host";var s=NF(e.slice(1,-1));if(!s)return"Invalid host"}else if(bb(i)){for(s=[],e=e.toLowerCase().replace(tF,".").split("."),o=0;o<e.length;o++){var l=e[o];s.push(sF.test(l)?"xn--"+uF(l):l)}if(e=s.join("."),JF.test(e)||(s=OF(e))===null)return"Invalid host"}else{if(KF.test(e))return"Invalid host";for(s="",e=Td(e),o=0;o<e.length;o++)s+=Cd(e[o],qi)}i.host=s},OF=function(i){var e,o=i.split(".");o.length&&o[o.length-1]==""&&o.pop();var s=o.length;if(4<s)return i;var l=[];for(e=0;e<s;e++){var f=o[e];if(f=="")return i;var h=10;if(1<f.length&&f.charAt(0)=="0"&&(h=GF.test(f)?16:8,f=f.slice(h==8?1:2)),f==="")f=0;else{if(!(h==10?IF:h==8?HF:Dt).test(f))return i;f=parseInt(f,h)}l.push(f)}for(e=0;e<s;e++)if(f=l[e],e==s-1){if(f>=Bt(256,5-s))return null}else if(255<f)return null;for(i=l.pop(),e=0;e<l.length;e++)i+=l[e]*Bt(256,3-e);return i},NF=function(i){var e,o,s=[0,0,0,0,0,0,0,0],l=0,f=null,h=0,p=function(){return i.charAt(h)};if(p()==":"){if(i.charAt(1)!=":")return;h+=2,f=++l}for(;p();){if(l==8)return;if(p()==":"){if(f!==null)return;h++,f=++l}else{for(e=o=0;4>o&&Dt.test(p());)e=16*e+parseInt(p(),16),h++,o++;if(p()=="."){if(o==0||(h-=o,6<l))return;for(e=0;p();){if(o=null,0<e){if(!(p()=="."&&4>e))return;h++}if(!Xl.test(p()))return;for(;Xl.test(p());){var d=parseInt(p(),10);if(o===null)o=d;else{if(o==0)return;o=10*o+d}if(255<o)return;h++}s[l]=256*s[l]+o,++e!=2&&e!=4||l++}if(e!=4)return;break}if(p()==":"){if(h++,!p())return}else if(p())return;s[l++]=e}}if(f!==null)for(p=l-f,l=7;l!=0&&0<p;)e=s[l],s[l--]=s[f+p-1],s[f+--p]=e;else if(l!=8)return;return s},Hg=function(i){var e,o;if(typeof i=="number"){var s=[];for(e=0;4>e;e++)s.unshift(i%256),i=EF(i/256);return s.join(".")}if(typeof i=="object"){s="",e=null;for(var l=1,f=null,h=0,p=0;8>p;p++)i[p]!==0?(h>l&&(e=f,l=h),f=null,h=0):(f===null&&(f=p),++h);for(h>l&&(e=f),l=e,e=0;8>e;e++)o&&i[e]===0||(o&&(o=!1),l===e?(s+=e?":":"::",o=!0):(s+=i[e].toString(16),7>e&&(s+=":")));return"["+s+"]"}return i},qi={},Et=ng({},qi,{" ":1,'"':1,"<":1,">":1,"`":1}),Ft=ng({},Et,{"#":1,"?":1,"{":1,"}":1}),Zl=ng({},Ft,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Cd=function(i,e){var o=Kw(i,0);return 32<o&&127>o&&!Q(e,i)?i:encodeURIComponent(i)},ri={ftp:21,file:null,http:80,https:443,ws:80,wss:443},bb=function(i){return Q(ri,i.scheme)},$l=function(i){return!i.host||i.cannotBeABaseURL||i.scheme=="file"},Ig=function(i,e){var o;return i.length==2&&Ct.test(i.charAt(0))&&((o=i.charAt(1))==":"||!e&&o=="|")},Gt=function(i){var e;return 1<i.length&&Ig(i.slice(0,2))&&(i.length==2||(e=i.charAt(2))==="/"||e==="\\"||e==="?"||e==="#")},Ht=function(i){var e=i.path,o=e.length;!o||i.scheme=="file"&&o==1&&Ig(e[0],!0)||e.pop()},am={},It={},bm={},Jt={},Kt={},cm={},Lt={},Mt={},si={},ti={},dm={},em={},fm={},gm={},Nt={},hm={},Jg={},Hc={},Ot={},le={},dd={},Ic=function(i,e,o,s){var l=o||am,f=0,h="",p=!1,d=!1,g=!1;for(o||(i.scheme="",i.username="",i.password="",i.host=null,i.port=null,i.path=[],i.query=null,i.fragment=null,i.cannotBeABaseURL=!1,e=e.replace(LF,"")),e=e.replace(MF,""),e=Td(e);f<=e.length;){var b=e[f];switch(l){case am:if(!b||!Ct.test(b)){if(o)return"Invalid scheme";l=bm;continue}h+=b.toLowerCase(),l=It;break;case It:if(b&&(FF.test(b)||b=="+"||b=="-"||b=="."))h+=b.toLowerCase();else{if(b!=":"){if(o)return"Invalid scheme";h="",l=bm,f=0;continue}if(o&&(bb(i)!=Q(ri,h)||h=="file"&&(i.username!=""||i.password!=""||i.port!==null)||i.scheme=="file"&&!i.host))return;if(i.scheme=h,o)return void(bb(i)&&ri[i.scheme]==i.port&&(i.port=null));h="",i.scheme=="file"?l=gm:bb(i)&&s&&s.scheme==i.scheme?l=Jt:bb(i)?l=Mt:e[f+1]=="/"?(l=Kt,f++):(i.cannotBeABaseURL=!0,i.path.push(""),l=Ot)}break;case bm:if(!s||s.cannotBeABaseURL&&b!="#")return"Invalid scheme";if(s.cannotBeABaseURL&&b=="#"){i.scheme=s.scheme,i.path=s.path.slice(),i.query=s.query,i.fragment="",i.cannotBeABaseURL=!0,l=dd;break}l=s.scheme=="file"?gm:cm;continue;case Jt:if(b!="/"||e[f+1]!="/"){l=cm;continue}l=si,f++;break;case Kt:if(b=="/"){l=ti;break}l=Hc;continue;case cm:if(i.scheme=s.scheme,b==null)i.username=s.username,i.password=s.password,i.host=s.host,i.port=s.port,i.path=s.path.slice(),i.query=s.query;else if(b=="/"||b=="\\"&&bb(i))l=Lt;else if(b=="?")i.username=s.username,i.password=s.password,i.host=s.host,i.port=s.port,i.path=s.path.slice(),i.query="",l=le;else{if(b!="#"){i.username=s.username,i.password=s.password,i.host=s.host,i.port=s.port,i.path=s.path.slice(),i.path.pop(),l=Hc;continue}i.username=s.username,i.password=s.password,i.host=s.host,i.port=s.port,i.path=s.path.slice(),i.query=s.query,i.fragment="",l=dd}break;case Lt:if(!bb(i)||b!="/"&&b!="\\"){if(b!="/"){i.username=s.username,i.password=s.password,i.host=s.host,i.port=s.port,l=Hc;continue}l=ti}else l=si;break;case Mt:if(l=si,b!="/"||h.charAt(f+1)!="/")continue;f++;break;case si:if(b!="/"&&b!="\\"){l=ti;continue}break;case ti:if(b=="@"){for(p&&(h="%40"+h),p=!0,h=Td(h),b=0;b<h.length;b++){var y=h[b];y!=":"||g?(y=Cd(y,Zl),g?i.password+=y:i.username+=y):g=!0}h=""}else if(b==null||b=="/"||b=="?"||b=="#"||b=="\\"&&bb(i)){if(p&&h=="")return"Invalid authority";f-=Td(h).length+1,h="",l=dm}else h+=b;break;case dm:case em:if(o&&i.scheme=="file"){l=hm;continue}if(b!=":"||d){if(b==null||b=="/"||b=="?"||b=="#"||b=="\\"&&bb(i)){if(bb(i)&&h=="")return"Invalid host";if(o&&h==""&&(i.username!=""||i.password!=""||i.port!==null))return;if(l=Yl(i,h))return l;if(h="",l=Jg,o)return;continue}b=="["?d=!0:b=="]"&&(d=!1),h+=b}else{if(h=="")return"Invalid host";if(l=Yl(i,h))return l;if(h="",l=fm,o==em)return}break;case fm:if(!Xl.test(b)){if(b==null||b=="/"||b=="?"||b=="#"||b=="\\"&&bb(i)||o){if(h!=""){if(65535<(l=parseInt(h,10)))return"Invalid port";i.port=bb(i)&&l===ri[i.scheme]?null:l,h=""}if(o)return;l=Jg;continue}return"Invalid port"}h+=b;break;case gm:if(i.scheme="file",b=="/"||b=="\\")l=Nt;else{if(!s||s.scheme!="file"){l=Hc;continue}if(b==null)i.host=s.host,i.path=s.path.slice(),i.query=s.query;else if(b=="?")i.host=s.host,i.path=s.path.slice(),i.query="",l=le;else{if(b!="#"){Gt(e.slice(f).join(""))||(i.host=s.host,i.path=s.path.slice(),Ht(i)),l=Hc;continue}i.host=s.host,i.path=s.path.slice(),i.query=s.query,i.fragment="",l=dd}}break;case Nt:if(b=="/"||b=="\\"){l=hm;break}s&&s.scheme=="file"&&!Gt(e.slice(f).join(""))&&(Ig(s.path[0],!0)?i.path.push(s.path[0]):i.host=s.host),l=Hc;continue;case hm:if(b==null||b=="/"||b=="\\"||b=="?"||b=="#"){if(!o&&Ig(h))l=Hc;else{if(h==""){if(i.host="",o)return}else{if(l=Yl(i,h))return l;if(i.host=="localhost"&&(i.host=""),o)return;h=""}l=Jg}continue}h+=b;break;case Jg:if(bb(i)){if(l=Hc,b!="/"&&b!="\\")continue}else if(o||b!="?")if(o||b!="#"){if(b!=null&&(l=Hc,b!="/"))continue}else i.fragment="",l=dd;else i.query="",l=le;break;case Hc:if(b==null||b=="/"||b=="\\"&&bb(i)||!o&&(b=="?"||b=="#")){if((y=(y=h).toLowerCase())===".."||y==="%2e."||y===".%2e"||y==="%2e%2e"?(Ht(i),b=="/"||b=="\\"&&bb(i)||i.path.push("")):h==="."||h.toLowerCase()==="%2e"?b=="/"||b=="\\"&&bb(i)||i.path.push(""):(i.scheme=="file"&&!i.path.length&&Ig(h)&&(i.host&&(i.host=""),h=h.charAt(0)+":"),i.path.push(h)),h="",i.scheme=="file"&&(b==null||b=="?"||b=="#"))for(;1<i.path.length&&i.path[0]==="";)i.path.shift();b=="?"?(i.query="",l=le):b=="#"&&(i.fragment="",l=dd)}else h+=Cd(b,Ft);break;case Ot:b=="?"?(i.query="",l=le):b=="#"?(i.fragment="",l=dd):b!=null&&(i.path[0]+=Cd(b,qi));break;case le:o||b!="#"?b!=null&&(b=="'"&&bb(i)?i.query+="%27":i.query=b=="#"?i.query+"%23":i.query+Cd(b,qi)):(i.fragment="",l=dd);break;case dd:b!=null&&(i.fragment+=Cd(b,Et))}f++}},Dd=function(i){var e=hc(this,Dd,"URL"),o=1<arguments.length?arguments[1]:void 0,s=String(i),l=DF(e,{type:"URL"});if(o!==void 0){if(o instanceof Dd)var f=Na(o);else if(o=Ic(f={},String(o)))throw TypeError(o)}if(o=Ic(l,s,null,f))throw TypeError(o);var h=l.searchParams=new CF;(s=Hb(h)).updateSearchParams(l.query),s.updateURL=function(){l.query=String(h)||null},fa||(e.href=ui.call(e),e.origin=Pt.call(e),e.protocol=Qt.call(e),e.username=Rt.call(e),e.password=St.call(e),e.host=Tt.call(e),e.hostname=Ut.call(e),e.port=Vt.call(e),e.pathname=Wt.call(e),e.search=Xt.call(e),e.searchParams=Yt.call(e),e.hash=Zt.call(e))},im=Dd.prototype,ui=function(){var i=Na(this),e=i.scheme,o=i.username,s=i.password,l=i.host,f=i.port,h=i.path,p=i.query,d=i.fragment,g=e+":";return l!==null?(g+="//",i.username==""&&i.password==""||(g+=o+(s?":"+s:"")+"@"),g+=Hg(l),f!==null&&(g+=":"+f)):e=="file"&&(g+="//"),g+=i.cannotBeABaseURL?h[0]:h.length?"/"+h.join("/"):"",p!==null&&(g+="?"+p),d!==null&&(g+="#"+d),g},Pt=function(){var i=Na(this),e=i.scheme,o=i.port;if(e=="blob")try{return new Dd(e.path[0]).origin}catch{return"null"}return e!="file"&&bb(i)?e+"://"+Hg(i.host)+(o!==null?":"+o:""):"null"},Qt=function(){return Na(this).scheme+":"},Rt=function(){return Na(this).username},St=function(){return Na(this).password},Tt=function(){var i=Na(this),e=i.host;return i=i.port,e===null?"":i===null?Hg(e):Hg(e)+":"+i},Ut=function(){var i=Na(this).host;return i===null?"":Hg(i)},Vt=function(){var i=Na(this).port;return i===null?"":String(i)},Wt=function(){var i=Na(this),e=i.path;return i.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Xt=function(){var i=Na(this).query;return i?"?"+i:""},Yt=function(){return Na(this).searchParams},Zt=function(){var i=Na(this).fragment;return i?"#"+i:""},$b=function(i,e){return{get:i,set:e,configurable:!0,enumerable:!0}};if(fa&&Wo(im,{href:$b(ui,function(i){var e=Na(this);if(i=Ic(e,String(i)))throw TypeError(i);Hb(e.searchParams).updateSearchParams(e.query)}),origin:$b(Pt),protocol:$b(Qt,function(i){var e=Na(this);Ic(e,String(i)+":",am)}),username:$b(Rt,function(i){var e=Na(this);if(i=Td(String(i)),!$l(e)){e.username="";for(var o=0;o<i.length;o++)e.username+=Cd(i[o],Zl)}}),password:$b(St,function(i){var e=Na(this);if(i=Td(String(i)),!$l(e)){e.password="";for(var o=0;o<i.length;o++)e.password+=Cd(i[o],Zl)}}),host:$b(Tt,function(i){var e=Na(this);e.cannotBeABaseURL||Ic(e,String(i),dm)}),hostname:$b(Ut,function(i){var e=Na(this);e.cannotBeABaseURL||Ic(e,String(i),em)}),port:$b(Vt,function(i){var e=Na(this);$l(e)||((i=String(i))==""?e.port=null:Ic(e,i,fm))}),pathname:$b(Wt,function(i){var e=Na(this);e.cannotBeABaseURL||(e.path=[],Ic(e,i+"",Jg))}),search:$b(Xt,function(i){var e=Na(this);(i=String(i))==""?e.query=null:(i.charAt(0)=="?"&&(i=i.slice(1)),e.query="",Ic(e,i,le)),Hb(e.searchParams).updateSearchParams(e.query)}),searchParams:$b(Yt),hash:$b(Zt,function(i){var e=Na(this);(i=String(i))==""?e.fragment=null:(i.charAt(0)=="#"&&(i=i.slice(1)),e.fragment="",Ic(e,i,dd))})}),Ea(im,"toJSON",function(){return ui.call(this)},{enumerable:!0}),Ea(im,"toString",function(){return ui.call(this)},{enumerable:!0}),Gg){var $t=Gg.createObjectURL,au=Gg.revokeObjectURL;$t&&Ea(Dd,"createObjectURL",function(i){return $t.apply(Gg,arguments)}),au&&Ea(Dd,"revokeObjectURL",function(i){return au.apply(Gg,arguments)})}gc(Dd,"URL"),M({global:!0,forced:!Tl,sham:!fa},{URL:Dd});var PF=new Blob(["var fakeIdToId = {};onmessage = function (event) {	var data = event.data,		name = data.name,		fakeId = data.fakeId,		time;	if(data.hasOwnProperty('time')) {		time = data.time;	}	switch (name) {		case 'setInterval':			fakeIdToId[fakeId] = setInterval(function () {				postMessage({fakeId: fakeId});			}, time);			break;		case 'clearInterval':			if (fakeIdToId.hasOwnProperty (fakeId)) {				clearInterval(fakeIdToId[fakeId]);				delete fakeIdToId[fakeId];			}			break;	}}"]),QF=window.URL.createObjectURL(PF),Me={},Rf=0,uj=new Worker(QF);uj.onmessage=function(i){if(i=i.data.fakeId,Me.hasOwnProperty(i)){var e=Me[i];i=e.callback,e=e.parameters,i.apply(window,e)}};var RF=function(i){function e(){return X(this,e),o.apply(this,arguments)}ja(e,i);var o=ka(e);return Ia(e,[{key:"requestAsyncId",value:function(s,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return fw(s.flush.bind(s,this),f)}},{key:"recycleAsyncId",value:function(s,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(f!==null&&this.delay===f&&this.pending===!1)return l;Me.hasOwnProperty(l)&&(delete Me[l],uj.postMessage({name:"clearInterval",fakeId:l}))}}]),e}(pt),SF=new rt(RF),TF=["backups","servers"],UF=["backups","servers"],VF=["group"],jm=v.inflate,bu=v.deflate,cu=function(i){function e(s,l,f,h){X(this,e);var p=o.call(this,h,"Session");return m(n(p),"chatManager",void 0),m(n(p),"usedChannelIds",[]),m(n(p),"msgDedupLru",new Ac(void 0,{maxlen:200})),m(n(p),"startTime",Date.now()),m(n(p),"seq",U.fromNumber(1,!0)),m(n(p),"userJoinOptions",new nt(!1)),m(n(p),"seqSentStatuses",[!1,!1]),m(n(p),"dialogueSequenceLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"loggedOut",!1),m(n(p),"messageSentTimes",[]),m(n(p),"curLoginSockets",[void 0,void 0]),m(n(p),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(p),"lastLoginSockets",[new Ee(1),new Ee(1)]),m(n(p),"dialPendingMsgSubjectMap",new Map),m(n(p),"context",void 0),m(n(p),"connection",void 0),m(n(p),"instanceId",void 0),m(n(p),"lastPingTime",void 0),m(n(p),"registerSocketsFailureListener",function(){p.connection.once("socketsFailure",function(){p.log("socketsFailure, creating a new connection"),hd(function(){return p.connection.removeAllListeners(),p.connection=new ct(p.context,p.logger,!0),p.loginHandler(15e3,!0)}).pipe(Ce(function(d){return d.pipe(jd(ie.getParameter("RECONNECTING_AP_INTERVAL")))}),rb(p.connection.apClient.apFinish$)).subscribe(function(){p.log("new connection connected")})}),p.connection.listenerCount("tokenExpired")===0&&p.connection.on("tokenExpired",function(){p.emit("tokenExpired")})}),p.context=s,p.connection=l,p.instanceId=f,p.chatManager=new dF(h),p.lastPingTime=[0,0],p.setMaxListeners(512),p.log("The instanceId is %s",p.instanceId.toString()),p}ja(e,i);var o=ka(e);return Ia(e,[{key:"fetchFileUploadIndexGet",value:function(s){var l=s.hash,f=s.size;if((s=this.getLoginSockets()).length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return s.forEach(function(p){p.sendPacket("FileUploadIndexGet",{seq:h,hash:l,size:f})}),{ret:Da.apply(void 0,G(s.map(function(p){return p.fromReceived("FileUploadIndexRet").pipe(aa(function(d){return h.eq(d.seq)}))}))),fin:Da.apply(void 0,G(s.map(function(p){return p.fromReceived("FileUploadIndexFin").pipe(aa(function(d){return h.eq(d.seq)}))}))),err:cc.apply(void 0,G(s.map(function(p){return p.fromReceived("FileUploadIndexErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw new da(["The media message upload failure, code %d",d.code],Dg)}))}))),timeout:e.genTimeoutError(ji)}}},{key:"requestFileUploadIndexSet",value:function(s){var l=s.hash,f=s.unit,h=s.servers;if((s=this.getLoginSockets()).length===0)throw new L("Client is not logged in");var p=this.incGetSeq();return s.forEach(function(d){d.sendPacket("FileUploadIndexSet",{seq:p,servers:h,hash:l,unit:f})}),Da.apply(void 0,[e.genTimeoutError(ji)].concat(G(s.map(function(d){return d.fromReceived("FileUploadIndexErr").pipe(aa(function(g){return p.eq(g.seq)}),ea(function(g){throw new da(["FileUploadIndexSet failure, code %d",g.code],Dg)}))})),G(s.map(function(d){return d.fromReceived("FileUploadIndexFin").pipe(aa(function(g){return p.eq(g.seq)}))}))))}},{key:"requestFileDownloadIndexGet",value:function(s){var l=s.size,f=s.zone,h=s.unit,p=s.hash,d=this.getLoginSockets();if(d.length===0)throw new L("Client is not logged in");var g=this.incGetSeq();return d.forEach(function(b){b.sendPacket("FileDownloadIndexGet",{seq:g,size:l,zone:f,unit:h,hash:p})}),s=Da.apply(void 0,G(d.map(function(b){return b.fromReceived("FileDownloadIndexRet").pipe(aa(function(y){return g.eq(y.seq)}))}))).pipe(ea(function(b){var y=b.backups,w=b.servers;return b=yf(b,TF),wa({backupList:y.map(function(_){return[_]}),serverList:w.map(function(_){return[_]})},b)}),jd(500)),d=mn(d.map(function(b){return b.fromReceived("FileDownloadIndexRet").pipe(aa(function(y){return g.eq(y.seq)}))})),Da(s,d.pipe(ea(function(b){return b.reduce(function(y,w){var _=y.backupList,A=y.serverList;y=w.backups;var k=w.servers;return w=yf(w,UF),wa({backupList:y.map(function(I,j){return[I].concat(G(_!==void 0&&Array.isArray(_[j])?_[j]:[]))}),serverList:k.map(function(I,j){return[I].concat(G(_!==void 0&&Array.isArray(A[j])?A[j]:[]))})},w)},{})})),e.genTimeoutError(ji))}},{key:"loginHandler",value:function(){var s=this,l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:12e3,f=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(this.loggedOut&&f)throw new L("Already logged out, request ignored");f&&this.registerSocketsFailureListener(),this.connection.initConnection();var h=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),p=Date.now();return h.forEach(function(d,g){var b=s.loginSocketSubs[g].login;b!==void 0&&b.unsubscribe(),s.loginSocketSubs[g].login=d.pipe(ba(function(y){var w;s.curLoginSockets[g]=y;var _=Date.now();hb("Link",{ackedServerIp:y.address,destServerIp:y.ip,ec:0,sc:0,elapse:ib(s.startTime),lts:U.fromNumber(_),responseTime:_-p,sid:ab(s.instanceId),userId:s.context.uid},(w=s.context.config.enableCloudProxy)!==null&&w!==void 0&&w),s.emit("userJoined",y.env),f&&s.connection.apClient.apFinish$.next(void 0)})).subscribe(s.lastLoginSockets[g])}),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),cc.apply(void 0,G(h).concat([jb(this.connection,"connectionInitFailure").pipe(ba(function(d){throw ta(d)||Xa(d)?d:new da("Login failure",{code:cs,originalError:d})}))])).pipe(Pa(1),kb(l),Ja(function(d){return d instanceof sb&&s.warn("Client login timeout"),d&&d.code===ii&&(s.connection.emit("tokenExpired"),s.connection.apClient.apFinish$.next(void 0)),s.clearSockets(0,f),Z(d)}),ba(function(){f||s.registerSocketsFailureListener()}),Tg(function(){f||s.connection.apClient.apFinish$.next(void 0)}))}},{key:"logoutHandler",value:function(){var s=J(x.mark(function l(){var f,h,p,d=this;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),f=this.getLoginSockets(),h=f.map(function(b){return b.sendPacket("UserQuit",{}),d.connection.waitClosing(b)}),this.clearSockets(5e3),p=f.map(function(b){return b.env}),[0,1].filter(function(b){return!p.includes(b)}).forEach(function(b){d.connection.closeSocket(b,0)}),g.abrupt("return",cc.apply(void 0,G(h)).toPromise());case 9:case"end":return g.stop()}},l,this)}));return function(){return s.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var s=J(x.mark(function l(f){var h,p,d,g=this;return x.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(this.getLoginSockets().length!==0){b.next=2;break}throw new L("Client is not logged in. Cannot join the channel",Zr);case 2:return h=jb(this,"channelLeft").pipe(zb(function(y){return f===y}),Pa(1)),p=this.incGetSeq(),(d=this.lastLoginSockets.map(function(y){return y.pipe(Lc(function(w,_){_!==0&&g.incSeqIfNeeded(w.env);var A=_===0?p:g.seq;return w.sendPacket("GroupEnter",{account:f,seq:A}),w.fromReceived("GroupReply").pipe(aa(function(k){return A.eq(k.seq)}),ba(function(k){if((k=k.code)!==0)throw new da(["Channel join failure. The response code is %d",k],Vr)}))}),rb(h),De())})).forEach(function(y,w){var _=function(){return g.loginSocketSubs[w].channels.delete(f)};g.loginSocketSubs[w].channels.set(f,y.subscribe({error:_,complete:_}))}),b.next=8,cc.apply(void 0,G(d)).pipe(Pa(1),kb(1e4),Ja(function(y){return y instanceof sb&&g.warn("Channel join timeout"),Z(y)})).toPromise();case 8:case"end":return b.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(s){this.getLoginSockets().forEach(function(l){l.sendPacket("GroupLeave",{account:s})})}},{key:"requestChannelMemberList",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in. Cannot get the channel members",ZB);var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("GroupAllUsersList",{group:s,pageNumber:0,pageSize:200,seq:f})}),Da.apply(void 0,[e.genTimeoutError(Tr)].concat(G(l.map(function(h){return h.fromReceived("GroupAllUsersResult").pipe(aa(function(p){var d=p.seq;return p.group===s&&f.eq(d)}))}))))}},{key:"requestPeersOnlineStatus",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("UserStatusList",{users:s,seq:f})}),Da.apply(void 0,[e.genTimeoutError(kC)].concat(G(l.map(function(h){return h.fromReceived("UserStatusResult").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestSetLocalUserAttributes",value:function(s,l){var f=this,h=this.getLoginSockets();if(h.length===0)throw new L("Client is not logged in");var p=this.incGetSeq();return h.forEach(function(d,g){l!==void 0&&g!==l||d.sendPacket("UserAttributeSet",{account:f.context.uid,attributeInfos:Object.entries(s).map(function(b){return{key:(b=ua(b,2))[0],value:b[1]}}),seq:p})}),Da.apply(void 0,G(h.map(function(d){return d.fromReceived("UserAttributeErr").pipe(aa(function(g){return p.eq(g.seq)}),ea(function(g){throw new da(["The user attributes set failure, code %d",g.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(h.map(function(d){return d.fromReceived("UserAttributeRsp").pipe(aa(function(g){return p.eq(g.seq)}))}))))}},{key:"requestSetChannelAttributes",value:function(s,l,f){var h=this.getLoginSockets();if(h.length===0)throw new L("Client is not logged in");var p=this.incGetSeq();return h.forEach(function(d){d.sendPacket("GroupAttributeSet",{broadcast:f,group:s,attributeInfos:Object.entries(l).map(function(g){return{key:(g=ua(g,2))[0],value:g[1]}}),seq:p})}),Da.apply(void 0,G(h.map(function(d){return d.fromReceived("GroupAttributeErr").pipe(aa(function(g){return p.eq(g.seq)}),ea(function(g){throw new da(["The group attributes set failure, code %d",g.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(h.map(function(d){return d.fromReceived("GroupAttributeRsp").pipe(aa(function(g){return p.eq(g.seq)}))}))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(s){var l=this,f=this.getLoginSockets();if(f.length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return f.forEach(function(p){p.sendPacket("UserAttributeMod",{account:l.context.uid,attributeInfos:Object.entries(s).map(function(d){return{key:(d=ua(d,2))[0],value:d[1]}}),seq:h})}),Da.apply(void 0,G(f.map(function(p){return p.fromReceived("UserAttributeErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw new da(["The user attributes add or update failure, code %d",d.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(f.map(function(p){return p.fromReceived("UserAttributeRsp").pipe(aa(function(d){return h.eq(d.seq)}))}))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(s,l,f){var h=this.getLoginSockets();if(h.length===0)throw new L("Client is not logged in");var p=this.incGetSeq();return h.forEach(function(d){d.sendPacket("GroupAttributeMod",{broadcast:f,group:s,attributeInfos:Object.entries(l).map(function(g){return{key:(g=ua(g,2))[0],value:g[1]}}),seq:p})}),Da.apply(void 0,G(h.map(function(d){return d.fromReceived("GroupAttributeErr").pipe(aa(function(g){return p.eq(g.seq)}),ea(function(g){throw new da(["The group attributes add or update failure, code %d",g.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(h.map(function(d){return d.fromReceived("GroupAttributeRsp").pipe(aa(function(g){return p.eq(g.seq)}))}))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(s){var l=this,f=this.getLoginSockets();if(f.length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return f.forEach(function(p){p.sendPacket("UserAttributeDel",{account:l.context.uid,attributes:s,seq:h})}),Da.apply(void 0,G(f.map(function(p){return p.fromReceived("UserAttributeErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw new da(["The user attributes delete failure, code %d",d.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(f.map(function(p){return p.fromReceived("UserAttributeRsp").pipe(aa(function(d){return h.eq(d.seq)}))}))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(s,l,f){var h=this.getLoginSockets();if(h.length===0)throw new L("Client is not logged in");var p=this.incGetSeq();return h.forEach(function(d){d.sendPacket("GroupAttributeDel",{group:s,broadcast:f,attributes:l,seq:p})}),Da.apply(void 0,G(h.map(function(d){return d.fromReceived("GroupAttributeErr").pipe(aa(function(g){return p.eq(g.seq)}),ea(function(g){throw new da(["The channel attributes delete failure, code %d",g.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(h.map(function(d){return d.fromReceived("GroupAttributeRsp").pipe(aa(function(g){return p.eq(g.seq)}))}))))}},{key:"requestClearLocalUserAttributes",value:function(){var s=this,l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("UserAttributeSet",{account:s.context.uid,seq:f,attributeInfos:[]})}),Da.apply(void 0,G(l.map(function(h){return h.fromReceived("UserAttributeErr").pipe(aa(function(p){return f.eq(p.seq)}),ea(function(p){throw new da(["The user attributes clear failure, code %d",p.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(l.map(function(h){return h.fromReceived("UserAttributeRsp").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestClearChannelAttributes",value:function(s,l){var f=this.getLoginSockets();if(f.length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return f.forEach(function(p){p.sendPacket("GroupAttributeSet",{group:s,seq:h,attributeInfos:[],broadcast:l})}),Da.apply(void 0,G(f.map(function(p){return p.fromReceived("GroupAttributeErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw new da(["The channel attributes clear failure, code %d",d.code],Xb)}))})).concat([e.genTimeoutError(Yb)],G(f.map(function(p){return p.fromReceived("GroupAttributeRsp").pipe(aa(function(d){return h.eq(d.seq)}))}))))}},{key:"requestGetUserAttributesByKeys",value:function(s,l){var f=this.getLoginSockets();if(f.length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return f.forEach(function(p){p.sendPacket("UserAttributeGet",{account:s,seq:h,attributes:l})}),Da.apply(void 0,[e.genTimeoutError(Yb)].concat(G(f.map(function(p){return p.fromReceived("UserAttributeErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw(d=d.code)===10008?new da("The user requested is not online",Pr):new bd(["User attribute operation unknown error code: %d",d],Xb)}))})),G(f.map(function(p){return p.fromReceived("UserAttributeRet").pipe(aa(function(d){return h.eq(d.seq)}))}))))}},{key:"requestGetChannelAttributesByKeys",value:function(s,l){var f=this.getLoginSockets();if(f.length===0)throw new L("Client is not logged in");var h=this.incGetSeq();return f.forEach(function(p){p.sendPacket("GroupAttributeGet",{group:s,seq:h,attributes:l})}),Da.apply(void 0,[e.genTimeoutError(Yb)].concat(G(f.map(function(p){return p.fromReceived("GroupAttributeErr").pipe(aa(function(d){return h.eq(d.seq)}),ea(function(d){throw new da(["The channel attributes get failure, code %d",d.code],Xb)}))})),G(f.map(function(p){return p.fromReceived("GroupAttributeRet").pipe(aa(function(d){return h.eq(d.seq)}))}))))}},{key:"requestGetUserAttributeKeys",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("UserAttributeKeysGet",{account:s,seq:f})}),Da.apply(void 0,[e.genTimeoutError(Yb)].concat(G(l.map(function(h){return h.fromReceived("UserAttributeErr").pipe(aa(function(p){return f.eq(p.seq)}),ea(function(p){throw(p=p.code)===10008?new da("The user requested is not online",Pr):new bd(["User attribute operation unknown error code: %d",p],Xb)}))})),G(l.map(function(h){return h.fromReceived("UserAttributeKeysRet").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestGetChannelAttributesKeys",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("GroupAttributeKeysGet",{group:s,seq:f})}),Da.apply(void 0,[e.genTimeoutError(Yb)].concat(G(l.map(function(h){return h.fromReceived("GroupAttributeErr").pipe(aa(function(p){return f.eq(p.seq)}),ea(function(p){throw new bd(["Channel attribute operation unknown error code: %d",p.code],Xb)}))})),G(l.map(function(h){return h.fromReceived("GroupAttributeKeysRet").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestGetChannelMemberCount",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("GroupStatusList",{groups:s,seq:f})}),Da.apply(void 0,[e.genTimeoutError(Tr)].concat(G(l.map(function(h){return h.fromReceived("GroupStatusResult").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestSubscribePeersOnlineStatus",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();return l.forEach(function(h){h.sendPacket("SubscribeUserStatus",{seq:f,users:s})}),Da.apply(void 0,[e.genTimeoutError(rC)].concat(G(l.map(function(h){return h.fromReceived("SubscribeResponse").pipe(aa(function(p){return f.eq(p.seq)}))}))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(s){var l=this.getLoginSockets();if(l.length===0)throw new L("Client is not logged in");var f=this.incGetSeq();l.forEach(function(h){h.sendPacket("UnsubscribeUserStatus",{seq:f,users:s})})}},{key:"sendInvitationMessage",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A,k,I,j,F=this;return x.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(h=f.peerId,p=f.callId,d=f.extra,g=f.isAcceptAck,b=f.channelId,y=f.type,w={callId:p},g===void 0){K.next=6;break}if(y==="CallAccept"){K.next=5;break}throw Error("invalid invitation type");case 5:w.type=g?"ack":"request";case 6:return w.channel=b,(y==="CallInvite"||y==="CallCancel"||y==="CallReject"||y==="CallAccept"&&g===!1)&&d!==void 0&&(w.extra=d),_=Yg(),this.log("The sent invitation body is %o",w),A=function(_t){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:_,instance:F.instanceId,dst:h,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:_t,MessageType:y}).toLong(),payload:new TextEncoder().encode(JSON.stringify(w)),src:F.context.uid}},K.next=14,Ob(this.sendMessageToRetry(A,!0)).pipe(kb(1e4),Ja(function(_t){return _t instanceof sb&&F.warn("Send invitation timeout"),Z(_t)})).toPromise();case 14:return k=K.sent,I=k.code,j=k.retryTimes,K.abrupt("return",{hasPeerReceived:I===0,hasReSent:j!==0});case 18:case"end":return K.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var s=J(x.mark(function l(f,h,p,d,g,b){var y,w,_,A,k,I,j,F,K,_t,_a,_i,_o,_c,Nf,B,_r,_n,_s,q,$,_e,ca,ga,_f,_u,ah,_l,ch,_p=this;return x.wrap(function(bh){for(;;)switch(bh.prev=bh.next){case 0:if(w=h.width,_=w===void 0?0:w,A=h.height,k=A===void 0?0:A,I=h.fileName,j=I===void 0?"":I,F=h.description,K=F===void 0?"":F,_t=h.thumbnail,_a=_t===void 0?new Blob:_t,_i=h.thumbnailHeight,_o=_i===void 0?0:_i,_c=h.thumbnailWidth,Nf=_c===void 0?0:_c,B=h.size,_r=B===void 0?0:B,_n=h.mediaId,_s=g.enableOfflineMessaging,q=g.enableHistoricalMessaging,Aa(p)){bh.next=4;break}throw new H("The send message arguments are not valid",d?Gl:Ag);case 4:if(!(32768<new Blob([j,_a,K]).size)){bh.next=6;break}throw new H("The size of message overflowed ",d?Ie:fi);case 6:return $=this.chatManager.getChatInfo(p),_e=$.dialogue,ca=$.sequence,ga=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(ga,"-").concat(_e,"#").concat(ca,'"'),d?" peer":" channel",pa(p)),m(y={},"media_description",K),m(y,"media_width",_),m(y,"media_height",k),m(y,"media_thumbnailwidth",Nf),m(y,"media_thumbnailheight",_o),m(y,"media_size",_r),m(y,"media_id",_n),m(y,"media_filename",j),_f=Bc(y,function(_h){return new TextEncoder().encode(_h.toString())}),bh.t0=Uint8Array,bh.next=14,pj(_a);case 14:return bh.t1=bh.sent,_f.media_thumbnail=new bh.t0(bh.t1),_u=d&&f==="IMAGE"?"PeerImageMessage":d&&f==="FILE"?"PeerFileMessage":d||f!=="IMAGE"?"ChannelFileMessage":"ChannelImageMessage",ah=function(_h){return{MiscMap:_f,sequence:ca,dialogue:_e,instance:ga,dst:p,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:_h,CompressionMethod:"Uncompressed",MessageType:_u,ToCache:_s,ToArchive:q}).toLong(),payload:new Uint8Array,src:_p.context.uid}},bh.next=20,Ob(this.sendMessageToRetry(ah,!0)).pipe(kb(b===void 0?1e4:b),Ja(function(_h){return _h instanceof sb&&_p.warn("Send message timeout"),Z(_h)})).toPromise();case 20:if(_l=bh.sent,(ch=_l.code)!==2){bh.next=24;break}throw new da("The peer does not support this type of message",jC);case 24:return bh.abrupt("return",{hasPeerReceived:ch===0});case 25:case"end":return bh.stop()}},l,this)}));return function(l,f,h,p,d,g){return s.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var s=J(x.mark(function l(f,h,p,d,g,b){var y,w,_,A,k,I,j,F,K,_t,_a=this;return x.wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(y=g.enableOfflineMessaging,w=g.enableHistoricalMessaging,Aa(p)&&f instanceof Uint8Array&&typeof h=="string"){_i.next=3;break}throw new H("The send message arguments are not valid",d?Gl:Ag);case 3:if(!(32768<f.byteLength+new Blob([h]).size)){_i.next=5;break}throw new lb("The message size is over the 32KB limit",d?Ie:fi);case 5:return _=!ie.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=f.byteLength,A=this.chatManager.getChatInfo(p),k=A.dialogue,I=A.sequence,j=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(j,"-").concat(k,"#").concat(I,'"'),_?" compressed":"",d?"peer":"channel",pa(p)),F=function(_o){return{MiscMap:{description:new TextEncoder().encode(h)},sequence:I,dialogue:k,instance:j,dst:p,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:_o,CompressionMethod:_?"Zlib":"Uncompressed",MessageType:d?"PeerRawMessage":"ChannelRawMessage",ToCache:y,ToArchive:w}).toLong(),payload:_?bu(f):f,src:_a.context.uid}},_i.next=12,Ob(this.sendMessageToRetry(F,!0)).pipe(kb(b===void 0?1e4:b),Ja(function(_o){return _o instanceof sb&&_a.warn("Send message timeout"),Z(_o)})).toPromise();case 12:return K=_i.sent,_t=K.code,_i.abrupt("return",{hasPeerReceived:_t===0});case 15:case"end":return _i.stop()}},l,this)}));return function(l,f,h,p,d,g){return s.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var s=J(x.mark(function l(f,h,p,d,g){var b,y,w,_,A,k,I,j,F,K,_t,_a=this;return x.wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(b=d.enableOfflineMessaging,y=d.enableHistoricalMessaging,Aa(h)){_i.next=3;break}throw new H("The send message arguments are not valid",p?Gl:Ag);case 3:if(!(32768<new Blob([f]).size)){_i.next=5;break}throw new lb("The message size is over the 32KB limit",p?Ie:fi);case 5:return w=!ie.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([f]).size,_=this.chatManager.getChatInfo(h),A=_.dialogue,k=_.sequence,I=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(I,"-").concat(A,"#").concat(k,'"'),w?" compressed":"",p?"peer":"channel",pa(h)),j=new TextEncoder().encode(f),F=function(_o){return{MiscMap:{},sequence:k,dialogue:A,instance:I,dst:h,ms:U.fromNumber(Date.now(),!0),options:new ke({IterationNumber:_o,CompressionMethod:w?"Zlib":"Uncompressed",MessageType:p?"PeerTextMessage":"ChannelTextMessage",ToCache:b,ToArchive:y}).toLong(),payload:w?bu(j):j,src:_a.context.uid}},_i.next=13,Ob(this.sendMessageToRetry(F,!0)).pipe(kb(g===void 0?1e4:g),Ja(function(_o){return _o instanceof sb&&_a.warn("Send message timeout"),Z(_o)})).toPromise();case 13:return K=_i.sent,_t=K.code,_i.abrupt("return",{hasPeerReceived:_t===0});case 16:case"end":return _i.stop()}},l,this)}));return function(l,f,h,p,d){return s.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(s,l){Object.entries(this.loginSocketSubs[s]).forEach(function(f){var h=(f=ua(f,2))[1];f[0]==="channels"&&l||(Array.isArray(h)||h instanceof Map?h.forEach(function(p){return p.unsubscribe()}):h&&h.unsubscribe())}),this.loginSocketSubs[s]={channels:l?this.loginSocketSubs[s].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A,k,I=this,j=arguments;return x.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(p=2<j.length&&j[2]!==void 0?j[2]:0,this.log("Attempt to send the message ".concat(h?" with retrying, %o":"without retrying"),{retryTimes:p}),(d=this.getLoginSockets()).length!==0){F.next=5;break}throw Error("no logged-in sockets");case 5:return g=f(p),d.forEach(function(K){K.sendPacket("Message",g)}),b=g.dialogue,y=g.sequence,w=g.instance,_=d.map(function(K){return K.fromReceived("Ack").pipe(zb(function(_t){return b.eq(_t.dialogue)&&y.eq(_t.sequence)&&w.eq(_t.instance)}))}),F.prev=9,F.next=12,cc.apply(void 0,G(_)).pipe(kb(6e3),Ja(function(K){return Xa(K)&&I.warn("Message send timeout, retry times %d",p),Z(K)}),Pa(1)).toPromise();case 12:return A=F.sent,k=A.code,this.log("The message has been acked, %o",{code:k}),F.abrupt("return",{code:k,retryTimes:p});case 18:if(F.prev=18,F.t0=F.catch(9),!(F.t0 instanceof sb&&h)){F.next=22;break}return F.abrupt("return",this.sendMessageToRetry(f,!1,p+1));case 22:throw F.t0;case 23:case"end":return F.stop()}},l,this,[[9,18]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var s=this;this.lastLoginSockets.map(function(l){return l.pipe(Lc(function(f){return Kc(0,2500,pe()?void 0:SF).pipe(ba(function(){s.sendPing(f)}))}))}).forEach(function(l,f){var h=s.loginSocketSubs[f].keepAlive;h!==void 0&&h.unsubscribe(),s.loginSocketSubs[f].keepAlive=l.subscribe({error:function(){}})})}},{key:"initKeepAliveReconnector",value:function(){var s=this;this.lastLoginSockets.map(function(l){return l.pipe(Lc(function(f){var h,p=!1,d=f.userJoin$.pipe(ba(function(){p=!0})),g=f.input$.pipe(ba(function(b){rj[b.uri].slice(0,-3)!=="Ping"&&(p=!1)}));return cc(Kc(6e3,1e4).pipe(Jv(f.receivedPacket),ba(function(b){b=ua(b,2),b=ua(b[1],2)[1],h!==b||p||f.forceReconnect(),h=b})),d,g)}))}).forEach(function(l,f){var h=s.loginSocketSubs[f].keepAliveReconnector;h!==void 0&&h.unsubscribe(),s.loginSocketSubs[f].keepAliveReconnector=l.subscribe({error:function(){}})})}},{key:"initLoginReceiver",value:function(){var s=this;this.lastLoginSockets.map(function(l){return l.pipe(Lc(function(f){return cc(jb(f,"reconnect").pipe(ba(s.onSocketReconnect(f))),f.fromReceived("Message").pipe(ba(s.onMessage(f))),f.fromReceived("GroupEnterNotice").pipe(ba(s.onGroupEnterNotice())),f.fromReceived("GroupLeaveNotice").pipe(ba(s.onGroupLeaveNotice())),f.fromReceived("GroupCountNotice").pipe(ba(s.onGroupCountNotice())),f.fromReceived("GroupAttributeAlt").pipe(ba(s.onGroupAttributeAlt())),f.fromReceived("UserJoinNotice").pipe(ba(s.onUserNotice(S.PeerOnlineState.ONLINE))),f.fromReceived("UserQuitNotice").pipe(ba(s.onUserNotice(S.PeerOnlineState.OFFLINE))),f.fromReceived("UserWaitNotice").pipe(ba(s.onUserNotice(S.PeerOnlineState.UNREACHABLE))),f.fromReceived("Pong").pipe(ba(s.onPong())),f.fromReceived("UserDrop").pipe(ba(s.onUserDrop(f)))).pipe(If(void 0))}))}).forEach(function(l,f){s.loginSocketSubs[f].receivers.push(l.subscribe({error:function(){}}))})}},{key:"requestSocketLogin",value:function(s,l,f){var h=this;return ln(hd(function(){h.userJoinOptions=new nt(l),s.sendPacket("UserJoin",{account:h.context.uid,instance:h.instanceId,opt:h.userJoinOptions.toLong(),seq:f,ticket:s.ticket})}),s.fromReceived("UserResp").pipe(aa(function(p){return f.eq(p.seq)}),ba(function(p){if((p=p.code)!==0)throw h.clearSockets(),h.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",p],Bg);s.attemptsSinceLastError=0,s.loggedIn=!0,h.log("ENV_%d logged in",s.env)}),If(s),kb(6e3))).pipe(zb(function(p){return p!==void 0}),Ja(function(p){return p instanceof sb&&h.warn("Login response timeout, rejoin: %s",l),h.clearSockets(),p.name="loginRespTimeout",h.emit("banEdgeIP",s.ip),Z(p)}))}},{key:"getSocketLoginObservables",value:function(s,l){var f=this;return s.map(function(h){return h.pipe(Lc(function(p,d){return f.incSeqIfNeeded(p.env),f.requestSocketLogin(p,d!==0,d===0?l:f.seq)}),De())})}},{key:"incSeqIfNeeded",value:function(s){if(![0,1].includes(s))throw new Ha({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[s]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[s]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var s=this.curLoginSockets,l=-1,f=s==null?0:s.length,h=0,p=[];++l<f;){var d=s[l];d&&(p[h++]=d)}return p}},{key:"emitMessage",value:function(s,l){var f=s.options,h=s.payload,p=s.src,d=s.dst,g=s.instance,b=s.dialogue,y=s.sequence,w=s.ms,_=s.MiscMap;this.dialogueSequenceLru.set(b.toString(),y),g="".concat(g,"-").concat(b,"#").concat(y),this.msgDedupLru.has(g)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",l,g):(this.msgDedupLru.set(g,void 0),l=new ke(f),this.lastLoginSockets.forEach(function(){var A=J(x.mark(function k(I){var j;return x.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,I.pipe(Pa(1)).toPromise();case 2:j=F.sent,e.sendMessageAck(s,j);case 4:case"end":return F.stop()}},k)}));return function(k){return A.apply(this,arguments)}}()),f=l.isZlibCompressed(),l.isInvitation()?(d=ra(f?jm($n(h,Uint8Array.of(0,0,0,0))):h),d=JSON.parse(d),this.log("The received invitation body is %o",d),this.emit("invitationMessage",{body:d,type:l.getInvitationType(),peerId:p,serverReceivedTs:w.toNumber()})):l.isTextMessage()?(_=l.isPeerTextMessage(),h=ra(f?jm($n(h,Uint8Array.of(0,0,0,0))):h),this.info("Received a %s %s text message from %s to %s, %s",f?" compressed":"",_?"peer":"channel",pa(p),pa(d),g),_?(p={text:h,peerId:p,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:l.isFromCache()}},this.emit("peerTextMessage",p)):this.emit("channelTextMessage",{channelId:d,memberId:p,text:h,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:!1}})):l.isRawMessage()?(b=l.isRawPeerMessage(),_=(_=_.description)===void 0?"":ra(_),h=f?jm(h):h,this.info("Received a %s %s raw message from %s to %s, %s",f?" compressed":"",b?"peer":"channel",pa(p),pa(d),g),b?(p={desc:_,raw:h,peerId:p,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:l.isFromCache()}},this.emit("peerRawMessage",p)):this.emit("channelRawMessage",{desc:_,raw:h,channelId:d,memberId:p,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:!1}})):(l.isImageMessage()||l.isFileMessage())&&(h=l.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",h?"peer":"channel",pa(p),pa(d),g),h?this.emit("peerMediaMessage",{messageType:l.isImageMessage()?"IMAGE":"FILE",details:_,peerId:p,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:l.isFromCache()}}):this.emit("channelMediaMessage",{messageType:l.isImageMessage()?"IMAGE":"FILE",details:_,memberId:p,channelId:d,properties:{serverReceivedTs:w.toNumber(),isOfflineMessage:l.isFromCache()}})))}},{key:"onSocketReconnect",value:function(s){var l=this;return function(){var f=[0,1].filter(function(h){return h!==s.env})[0];(f=l.connection.curOpenSockets[f])&&!f.loggedIn&&l.emit("connectionLost")}}},{key:"onUserDrop",value:function(s){var l=this;return function(f){var h;f=f.code,hb("KickedOff",{code:0,elapse:ib(l.startTime),linkId:parseInt(s.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:s.address,serverCode:f,sid:ab(l.instanceId),userId:l.context.uid},(h=l.context.config.enableCloudProxy)!==null&&h!==void 0&&h),f===10006||f===10001?l.warn("Login too often and kicked off, reconnect and login"):f===10009?(l.warn("The instance ID conflicts, reconnecting"),l.instanceId=Yg(),l.context.sid=ab(l.instanceId),l.emit("instanceChanged",l.instanceId)):[11,14,15,16].includes(f)&&(l.emit("userDrop",f),l.clearSockets())}}},{key:"clearSockets",value:function(){var s=this,l=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,f=1<arguments.length&&arguments[1]!==void 0&&arguments[1];[0,1].forEach(function(h){s.cleanLoginSubs(h,f),s.connection.closeSocket(h,l)})}},{key:"onMessage",value:function(s){var l=this;return function(f){var h=f.dialogue,p=f.instance,d=f.sequence,g=f.options;if(f.src===l.context.uid)l.log("The message is from the local account, ignored");else{var b=h.toString(),y=l.dialPendingMsgSubjectMap.get(b);if(h="".concat(p,"-").concat(h,"#").concat(d),y)y.next(f),l.log("Env_%d: The dialogue has pending messages, next: %s",s.env,h);else{var w=l.dialogueSequenceLru.get(b);if(y=!w&&d.eq(1),p=w!==void 0&&d.sub(w).eq(1),y||p)l.emitMessage(f,s.env);else{if(w){if(d.lte(w))return;l.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",s.env,h)}else l.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",s.env,h);d=new Ua,l.dialPendingMsgSubjectMap.set(b,d);var _=d.pipe(Ku(vl),Ug(function(A,k){return[].concat(G(A),[k])},[]),ea(function(A){return G(A).sort(function(k,I){return k=k.sequence,I=I.sequence,k.eq(I)?0:k.gt(I)?1:-1})}),vn(1));g=!(g=new ke(g)).isFromCache()&&!g.isBufferedMessage(),_.pipe(rb(Kc(g?750:1500)),aa(function(A){if(2>A.length)return!1;for(var k=w===void 0?U.fromNumber(1,!0):w.add(1),I=0;I<A.length;k=k.add(1),I++)if(!A[I].sequence.eq(k))return!1;return!0}),Tg(function(){l.dialPendingMsgSubjectMap.delete(b)})).subscribe(function(A){A.forEach(function(k){l.emitMessage(k,s.env),l.log("Env_%d: The message queue has fully ordered, emitting: %s",s.env,"".concat(k.instance,"-").concat(k.dialogue,"#").concat(k.sequence))})},function(A){A instanceof Sg&&_.pipe(Pa(1)).subscribe(function(k){return k.forEach(function(I){l.log("Env_%d: The message pending queue expired, emitting: %s",s.env,"".concat(I.instance,"-").concat(I.dialogue,"#").concat(I.sequence)),l.emitMessage(I,s.env)})})}),d.next(f)}}}}}},{key:"onPong",value:function(){var s=this;return function(){document.hidden&&s.getLoginSockets().forEach(function(l){s.sendPing(l)})}}},{key:"onGroupEnterNotice",value:function(){var s=this;return function(l){s.emit("memberNotice",{channelId:l.group,seq:l.seq,instance:l.instance,memberId:l.user,type:"MemberJoined",size:l.size})}}},{key:"onGroupLeaveNotice",value:function(){var s=this;return function(l){s.emit("memberNotice",{channelId:l.group,seq:l.seq,instance:l.instance,memberId:l.user,type:"MemberLeft",size:l.size})}}},{key:"onGroupCountNotice",value:function(){var s=this;return function(l){s.emit("memberNotice",{channelId:l.group,seq:l.seq,instance:l.instance,type:"MemberCountUpdated",size:l.size})}}},{key:"onGroupAttributeAlt",value:function(){var s=this;return function(l){var f=l.group;l=yf(l,VF),s.emit("channelAttributesUpdated",wa({channelId:f},l))}}},{key:"onUserNotice",value:function(s){var l=this;return function(f){l.emit("peerOnlineStatusChanged",{peerId:f.user,instance:f.instance,seq:f.seq,state:s})}}},{key:"sendPing",value:function(s){2500>=Date.now()-this.lastPingTime[s.env]||(this.incSeqIfNeeded(s.env),s.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:this.seq}),this.lastPingTime[s.env]=Date.now())}}],[{key:"sendMessageAck",value:function(s,l){var f=new ke(s.options);(f.isInvitation()||f.isPeerMessage())&&l.sendPacket("Ack",{code:0,dialogue:s.dialogue,instance:s.instance,sequence:s.sequence})}}]),e}(wb());m(cu,"genTimeoutError",function(i,e){return eb(void 0).pipe(jd(e===void 0?1e4:e),ea(function(){throw new gb(["Request timed out after %ds",e===void 0?1e4:e],i)}))});var du,km,lm=0,mm=0;de.v1=function(i,e,o){o=e&&o||0;var s=e||[],l=(i=i||{}).node||du,f=i.clockseq!==void 0?i.clockseq:km;if(l==null||f==null){var h=Nr();l==null&&(l=du=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),f==null&&(f=km=16383&(h[6]<<8|h[7]))}h=i.msecs!==void 0?i.msecs:new Date().getTime();var p=i.nsecs!==void 0?i.nsecs:mm+1,d=h-lm+(p-mm)/1e4;if(0>d&&i.clockseq===void 0&&(f=f+1&16383),(0>d||h>lm)&&i.nsecs===void 0&&(p=0),1e4<=p)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(lm=h,mm=p,km=f,i=(1e4*(268435455&(h+=122192928e5))+p)%4294967296,s[o++]=i>>>24&255,s[o++]=i>>>16&255,s[o++]=i>>>8&255,s[o++]=255&i,i=h/4294967296*1e4&268435455,s[o++]=i>>>8&255,s[o++]=255&i,s[o++]=i>>>24&15|16,s[o++]=i>>>16&255,s[o++]=f>>>8|128,s[o++]=255&f,f=0;6>f;++f)s[o+f]=l[f];return e||Or(s)},de.v4=de;var nm=ni(),Ed,uf=S.LocalInvitationFailureReason,Ca=S.LocalInvitationState,WF=(Ed=function(i){function e(s,l,f){X(this,e);var h=o.call(this,f,"RtmLocalInvitation",!0);return m(n(h),"state",Ca.IDLE),m(n(h),"localInvitationEnd$",Da(jb(n(h),"LocalInvitationAccepted"),jb(n(h),"LocalInvitationRefused"),jb(n(h),"LocalInvitationFailure"),jb(n(h),"LocalInvitationCanceled")).pipe(Pa(1))),m(n(h),"callId",de.v4()),m(n(h),"_content",""),m(n(h),"_channelId",""),m(n(h),"_response",""),m(n(h),"calleeId",void 0),m(n(h),"logger",void 0),m(n(h),"getSession",void 0),h.calleeId=s,h.getSession=l,h.logger=f,h}ja(e,i);var o=ka(e);return Ia(e,[{key:"channelId",get:function(){return this._channelId},set:function(s){this.state!==Ca.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=s)}},{key:"content",get:function(){return this._content},set:function(s){this.log("set content for %s",this.callId),this._content=s}},{key:"response",get:function(){return this._response},set:function(s){throw new H('Cannot set the "response" of the LocalInvitation instance.',Ec)}},{key:"send",value:function(){var s,l=this;if(this.state===Ca.SENT_TO_REMOTE||this.state===Ca.RECEIVED_BY_REMOTE)throw new L("The local invitation send failure. The call invitation has already been sent.",cC);if(this.isLocalInvitationEnd())throw new L("The local invitation send failure. The call invitation has ended.",gi);if(0<this._channelId.length&&!Aa(this._channelId))throw new H("Illegal invitation channel ID",Ec);if(!Aa(this.calleeId))throw new H("Illegal invitation callee user ID",Ec);if(8192<fh(this._content))throw new H('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Ec);this.state=Ca.SENT_TO_REMOTE,hd(J(x.mark(function f(){var h,p,d;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,l.getSession().sendInvitationMessage({peerId:l.calleeId,callId:l.callId,extra:l._content,type:"CallInvite",channelId:l._channelId});case 2:if(h=g.sent,p=h.hasPeerReceived,d=h.hasReSent,!l.isLocalInvitationEnd()){g.next=7;break}throw new gb("send invitation timeout");case 7:if(l.log("The local invitation has sent to the callee"),p||d){g.next=11;break}throw s=new nm({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(p){g.next=14;break}throw s=new nm({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return g.stop()}},f)}))).pipe(Ce(function(f){return f.pipe(ba(function(h){if(!(h instanceof nm))throw h}),jd(2e3))}),kb(3e4),Ja(function(f){return Xa(f)&&l.warn("local invitation ack timed out"),Z(f)}),rb(this.localInvitationEnd$)).subscribe({next:function(){l.state===Ca.RECEIVED_BY_REMOTE?l.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):l.state!==Ca.SENT_TO_REMOTE?l.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(l.info("The peer received the local invitation %s.",l.callId),l.state=Ca.RECEIVED_BY_REMOTE,l.emit("LocalInvitationReceivedByPeer"),l.localInvitationEnd$.pipe(kb(6e4),Ja(function(f){return Xa(f)&&l.warn("local invitation expired"),Z(f)})).subscribe({error:function(){l.state=Ca.FAILURE,l.emit("LocalInvitationFailure",uf.INVITATION_EXPIRE)}}))},error:function(f){l.isLocalInvitationEnd()?l.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(l.state=Ca.FAILURE,Xa(f)&&s?s.code==="PEER_NOT_ONLINE"?l.emit("LocalInvitationFailure",uf.PEER_OFFLINE):s.code==="RESENT_AND_OFFLINE"&&l.emit("LocalInvitationFailure",uf.PEER_NO_RESPONSE):Xa(f)?l.emit("LocalInvitationFailure",uf.PEER_NO_RESPONSE):f.name==="RtmInvalidStatusError"?l.emit("LocalInvitationFailure",uf.NOT_LOGGEDIN):l.emit("LocalInvitationFailure",uf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new L("The local invitation cancel failure",gi);if(this.state===Ca.IDLE)throw new L("The local invitation has not been sent",bC);if(8192<fh(this._content))throw new H('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Ec);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ca.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(s){if(this.isLocalInvitationEnd()&&this.state!==Ca.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ca.IDLE)throw new L("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ca.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ca.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ca.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ca.ACCEPTED_BY_REMOTE,this._response=s,this.emit("LocalInvitationAccepted",s))}}},{key:"onRefuseReceived",value:function(s){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ca.IDLE)throw new L("the local have not sent the invitation, how can remote refuse it?");this.state===Ca.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ca.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=s,this.state=Ca.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",s)}}},{key:"isLocalInvitationEnd",value:function(){return[Ca.CANCELED,Ca.FAILURE,Ca.ACCEPTED_BY_REMOTE,Ca.REFUSED_BY_REMOTE].includes(this.state)}}]),e}(wb()),la(Ed.prototype,"send",[Qb],Object.getOwnPropertyDescriptor(Ed.prototype,"send"),Ed.prototype),la(Ed.prototype,"cancel",[Qb],Object.getOwnPropertyDescriptor(Ed.prototype,"cancel"),Ed.prototype),Ed),vi=S.RemoteInvitationFailureReason,nb=S.RemoteInvitationState,XF=function(i){function e(s){var l=s.invitationChannel,f=s.extraContent,h=s.callId,p=s.callerId,d=s.logger;s=s.getSession,X(this,e);var g=o.call(this,d,"RtmRemoteInvitation",!0);return m(n(g),"state",nb.INVITATION_RECEIVED),m(n(g),"remoteInvitationEnd$",Da(jb(n(g),"RemoteInvitationCanceled"),jb(n(g),"RemoteInvitationRefused"),jb(n(g),"RemoteInvitationAccepted"),jb(n(g),"RemoteInvitationFailure")).pipe(Pa(1))),m(n(g),"callerId",void 0),m(n(g),"callId",void 0),m(n(g),"_getSession",void 0),m(n(g),"logger",void 0),m(n(g),"_content",void 0),m(n(g),"_channelId",void 0),m(n(g),"_response",""),g._channelId=l,g._content=f,g.callId=h,g.callerId=p,g._getSession=s,g.logger=d,g.remoteInvitationEnd$.pipe(kb(6e4),Ja(function(b){return Xa(b)&&g.warn("Remote invitation expired"),Z(b)})).subscribe({error:function(){g.state=nb.FAILURE,g.emit("RemoteInvitationFailure",vi.INVITATION_EXPIRE)}}),g}ja(e,i);var o=ka(e);return Ia(e,[{key:"channelId",get:function(){return this._channelId},set:function(s){throw new H('Cannot set the "response" of the RemoteInvitation instance.',Ec)}},{key:"content",get:function(){return this._content},set:function(s){throw new H('Cannot set the "content" of the RemoteInvitation instance.',Ec)}},{key:"response",get:function(){return this._response},set:function(s){this._response=s}},{key:"accept",value:function(){var s,l=this;if(this.isRemoteInvitationEnd())throw new L("The local invitation has ended. Cannot accept.",gi);if(this.state===nb.ACCEPT_SENT_TO_LOCAL)throw new L("The remote invitation is accepting. Cannot do the operation.",Ur);if(8192<fh(this._response))throw new H('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Ec);this.state=nb.ACCEPT_SENT_TO_LOCAL,cc(pn(1e3).pipe(fb(function(){return hd(J(x.mark(function f(){return x.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",l._getSession().sendInvitationMessage({peerId:l.callerId,callId:l.callId,extra:l.response,type:"CallAccept",isAcceptAck:!1,channelId:l.channelId}));case 1:case"end":return h.stop()}},f)})))}),zb(function(f){return s=f.hasPeerReceived}),Pa(1)),jb(this,"RemoteInvitationAccepted")).pipe(kb(5e3),rb(this.remoteInvitationEnd$)).subscribe({error:function(f){if(l.logError(f),l.state=nb.FAILURE,Xa(f))switch(s){case void 0:case!0:return void l.emit("RemoteInvitationFailure",vi.ACCEPT_FAILURE);case!1:return void l.emit("RemoteInvitationFailure",vi.PEER_OFFLINE)}l.emit("RemoteInvitationFailure",vi.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===nb.ACCEPT_SENT_TO_LOCAL)throw new L("The remote invitation is accepting. Cannot do the operation.",Ur);if(this.isRemoteInvitationEnd())throw new L("The invitation is end. Cannot refuse",gi);if(8192<fh(this._response))throw new H('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Ec);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=nb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(s){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===nb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=s,this.state=nb.CANCELED,this.emit("RemoteInvitationCanceled",s))}},{key:"onAcceptAckReceived",value:function(){this.state!==nb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=nb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[nb.ACCEPTED,nb.REFUSED,nb.CANCELED,nb.FAILURE].includes(this.state)}}]),e}(wb()),YF=function(i){function e(s,l){X(this,e);var f=o.call(this,l,"InvitationManager");return m(n(f),"getSession",void 0),m(n(f),"invitationDispatcher",new ia.EventEmitter),m(n(f),"outgoingLocalInvitations",new Map),m(n(f),"receivedRemoteInvitations",new Ac(void 0,{maxlen:1e4})),m(n(f),"logger",void 0),f.getSession=ho(s),f.logger=l,f.invitationDispatcher.on("remoteInvitationToManager",function(h){var p=h.callId,d=h.extra,g=h.callerId;h=h.channelId,f.receivedRemoteInvitations.has(p)||((d=new XF({callerId:g,callId:p,getSession:f.getSession,logger:l,extraContent:d,invitationChannel:h})).remoteInvitationEnd$.subscribe(function(){f.receivedRemoteInvitations.delete(p)}),f.receivedRemoteInvitations.set(p,d),f.emit("remoteInvitationInstance",d))}),f.invitationDispatcher.on("acceptAckToRemoteInvitation",function(h){(h=f.receivedRemoteInvitations.get(h.callId))&&h.onAcceptAckReceived()}),f.invitationDispatcher.on("cancelToRemoteInvitation",function(h){var p=h.extra;(h=f.receivedRemoteInvitations.get(h.callId))&&h.onCancelReceived(p)}),f.invitationDispatcher.on("acceptToLocalInvitation",function(h){var p=h.extra;(h=f.outgoingLocalInvitations.get(h.callId))&&h.onAcceptReceived(p)}),f.invitationDispatcher.on("refuseToLocalInvitation",function(h){var p=h.extra;(h=f.outgoingLocalInvitations.get(h.callId))&&h.onRefuseReceived(p)}),f}ja(e,i);var o=ka(e);return Ia(e,[{key:"invitationMessageHandler",value:function(s){var l=s.body,f=l.callId,h=l.extra;h=h===void 0?"":h;var p=l.type,d=(l=l.channel)===void 0?"":l,g=s.type;switch(l=s.peerId,s=s.serverReceivedTs,g){case"CallAccept":p==="ack"?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:f}):p==="request"&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:f,extra:h});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:f,callerId:l,extra:h,channelId:d});break;case"CallCancel":if(f==="0"){f="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(d,"_").concat(h),this.getSession().emit("peerTextMessage",{peerId:l,properties:{serverReceivedTs:s,isOfflineMessage:!1},text:f});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:f,extra:h});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:f,extra:h});break;default:throw Nn("invitationType",g)}}},{key:"genLocalInvitation",value:function(s){var l=this,f=new WF(s,this.getSession,this.logger);return f.localInvitationEnd$.subscribe(function(){l.outgoingLocalInvitations.delete(f.callId)}),this.outgoingLocalInvitations.set(f.callId,f),f}}]),e}(wb()),ZF=function(i,e,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError("Expected a function");return ob(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),mE(i,e,{leading:s,maxWait:e,trailing:l})},xb,vf;(function(i){i[i.JOINED=0]="JOINED",i[i.LEFT=1]="LEFT"})(vf||(vf={}));var om=S.ConnectionState,$F=(xb=function(i){function e(s,l,f,h){X(this,e);var p=o.call(this,h,"RtmChannel",!0);return m(n(p),"onMemberCountUpdated",ZF(function(d){d!==p.memberCount&&(p.memberCount=d,p.emit("MemberCountUpdated",d))},1e3)),m(n(p),"getSession",void 0),m(n(p),"memberCount",0),m(n(p),"joinState","LEFT"),m(n(p),"joinPromise",void 0),m(n(p),"memberJoinedLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"memberLeftLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"memberJoinStateLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"attributesSeqLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"channelId",void 0),m(n(p),"client",void 0),m(n(p),"onChannelMemberCountUpdated",function(d,g){p.channelId===d&&p.onMemberCountUpdated(g)}),m(n(p),"onLogout",function(){try{p.clearChannel(p.getSession())}catch{}}),m(n(p),"onAttributesUpdated",function(d){var g=d.channelId,b=d.attributeMaps,y=d.seq;d=d.instance.toString();var w=p.attributesSeqLru.get(d);if((!w||y.greaterThan(w))&&(p.attributesSeqLru.set(d,y),g===p.channelId)){for(g={},y=0;y<b.length;y++){var _=b[y];d=_.key,w=_.ms;var A=_.value;if(_=_.origin,typeof d!="string"||!U.isLong(w)||typeof A!="string"||!Aa(_))break;g[d]={value:A,lastUpdateUserId:_,lastUpdateTs:w.toNumber()}}p.emit("AttributesUpdated",g)}}),m(n(p),"onChannelTextMessage",function(d){var g=d.memberId,b=d.text,y=d.properties;d.channelId===p.channelId&&p.emit("ChannelMessage",{text:b,messageType:S.MessageType.TEXT},g,y)}),m(n(p),"onChannelMediaMessage",function(d){var g=d.memberId,b=d.properties,y=d.details,w=d.messageType;d.channelId===p.channelId&&(w==="FILE"?p.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(ra(y.media_size),10),description:ra(y.media_description),fileName:ra(y.media_filename),mediaId:ra(y.media_id),thumbnail:new Blob([y.media_thumbnail])},g,b):w==="IMAGE"&&p.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(ra(y.media_size),10),description:ra(y.media_description),fileName:ra(y.media_filename),mediaId:ra(y.media_id),thumbnail:new Blob([y.media_thumbnail]),height:parseInt(ra(y.media_height),10),width:parseInt(ra(y.media_width),10),thumbnailHeight:parseInt(ra(y.media_thumbnailheight),10),thumbnailWidth:parseInt(ra(y.media_thumbnailwidth),10)},g,b))}),m(n(p),"onChannelRawMessage",function(d){var g=d.desc,b=d.raw,y=d.memberId,w=d.properties;d.channelId===p.channelId&&p.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:b,description:g},y,w)}),m(n(p),"onMemberNotice",function(d){var g=d.memberId,b=d.type,y=d.size;if(d.channelId===p.channelId){var w=d.instance.toString();d=d.seq.toString();var _={MemberLeft:p.memberLeftLru,MemberJoined:p.memberJoinedLru,MemberCountUpdated:void 0}[b];if(_){if(_.has(w+d))return void p.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",b,d,pa(p.channelId),pa(g||""));if(_.set(w+d,void 0),typeof g!="string")return;if(g!==p.getSession().context.uid&&((w=p.memberJoinStateLru.get(g))===vf.JOINED&&b==="MemberJoined"||w===vf.LEFT&&b==="MemberLeft"))return void p.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",b,d,pa(p.channelId),pa(g||""));p.memberJoinStateLru.set(g,b==="MemberJoined"?vf.JOINED:vf.LEFT)}p.info("Channel %s - %s, memberId: %s",b,pa(p.channelId),b==="MemberCountUpdated"?"[unknown]":pa(g||"")),w=g===p.getSession().context.uid,b==="MemberLeft"&&Aa(g)||b==="MemberJoined"&&Aa(g)?(w||p.emit(b,g),p.onMemberCountUpdated(y)):b==="MemberCountUpdated"&&typeof y=="number"&&p.onMemberCountUpdated(y)}}),p.getSession=ho(l),p.channelId=s,p.client=f,p.info("A channel created, id %s",pa(s)),p}ja(e,i);var o=ka(e);return Ia(e,[{key:"join",value:function(){var s=J(x.mark(function l(){var f,h,p,d,g,b,y,w=this;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:_.prev=0,f=this.getSession(),_.next=7;break;case 4:throw _.prev=4,_.t0=_.catch(0),new L("The client is not logged in. Cannot do the operation",Zr);case 7:if(_.prev=7,Aa(this.channelId)){_.next=10;break}throw new H(["The %s in the arguments is invalid","channelId"],dC);case 10:if(this.joinState==="LEFT"){_.next=13;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:f.context.uid,elapse:ib(f.startTime),errCode:Yr,sid:ab(f.instanceId)},(d=this.client.context.config.enableCloudProxy)!==null&&d!==void 0&&d),new L("The channel has joined. Cannot rejoin",Yr);case 13:if(!f.usedChannelIds.includes(this.channelId)){_.next=16;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:f.context.uid,elapse:ib(f.startTime),errCode:$r,sid:ab(f.instanceId)},(g=this.client.context.config.enableCloudProxy)!==null&&g!==void 0&&g),new L("A channel of the same channel ID has already joined. Cannot rejoin",$r);case 16:if(!(20<=f.usedChannelIds.length)){_.next=19;break}throw hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:f.context.uid,elapse:ib(f.startTime),errCode:Xr,sid:ab(f.instanceId)},(b=this.client.context.config.enableCloudProxy)!==null&&b!==void 0&&b),new lb("The joined channels has exceeded the limit of 20",Xr);case 19:return hb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:f.context.uid,elapse:ib(f.startTime),errCode:0,sid:ab(f.instanceId)},(h=this.client.context.config.enableCloudProxy)!==null&&h!==void 0&&h),this.log("Joining the channel %s",pa(this.channelId)),this.joinState="JOINING",f.usedChannelIds.push(this.channelId),this.joinPromise=f.requestChannelJoin(this.channelId).then(function(){w.joinState="JOINED"}),_.next=26,this.joinPromise;case 26:hb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(f.startTime),errCode:0,sid:ab(f.instanceId),serverErrCode:0,userId:f.context.uid},(p=this.client.context.config.enableCloudProxy)!==null&&p!==void 0&&p),this.info("The channel %s joined successfully",pa(this.channelId)),f.on("channelTextMessage",this.onChannelTextMessage),f.on("channelRawMessage",this.onChannelRawMessage),f.on("channelMediaMessage",this.onChannelMediaMessage),f.on("memberNotice",this.onMemberNotice),f.on("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.on("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.once("LOGOUT",this.onLogout),_.next=47;break;case 37:if(_.prev=37,_.t1=_.catch(7),this.joinState==="JOINING"&&(this.joinState="LEFT"),this.logError(_.t1),!ta(_.t1)){_.next=43;break}throw _.t1;case 43:if(!Xa(_.t1)){_.next=46;break}throw hb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(f.startTime),errCode:Wr,sid:ab(f.instanceId),serverErrCode:0,userId:f.context.uid},(y=this.client.context.config.enableCloudProxy)!==null&&y!==void 0&&y),new gb(["Join channel %s timed out",pa(this.channelId)],Wr);case 46:throw new bd(["The channel %s join failure",pa(this.channelId)],{code:Vr,originalError:_.t1});case 47:case"end":return _.stop()}},l,this,[[0,4],[7,37]])}));return function(){return s.apply(this,arguments)}}()},{key:"leave",value:function(){var s=J(x.mark(function l(){var f,h,p,d;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:g.prev=0,h=this.getSession(),g.next=7;break;case 4:throw g.prev=4,g.t0=g.catch(0),new L("The client is not logged in. Cannot do the operation",fC);case 7:if(this.joinState!=="LEFT"){g.next=9;break}throw new L("The channel does not join. Cannot do the operation",eC);case 9:return g.prev=9,h.requestChannelLeave(this.channelId),g.next=13,this.clearChannel(h);case 13:g.next=24;break;case 15:if(g.prev=15,g.t1=g.catch(9),this.logError(g.t1),!ta(g.t1)){g.next=22;break}throw g.t1.code===void 0&&(g.t1.code=bs),hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(h.startTime),errCode:bs,sid:ab(h.instanceId),userId:h.context.uid},(d=this.client.context.config.enableCloudProxy)!==null&&d!==void 0&&d),g.t1;case 22:throw hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(h.startTime),errCode:as,sid:ab(h.instanceId),userId:h.context.uid},(p=this.client.context.config.enableCloudProxy)!==null&&p!==void 0&&p),new bd("The channel leave failure",{code:as,originalError:g.t1});case 24:hb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:ib(h.startTime),errCode:0,sid:ab(h.instanceId),userId:h.context.uid},(f=this.client.context.config.enableCloudProxy)!==null&&f!==void 0&&f);case 25:case"end":return g.stop()}},l,this,[[0,4],[9,15]])}));return function(){return s.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b=this,y=arguments;return x.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(h=1<y.length&&y[1]!==void 0?y[1]:{},p=h.enableHistoricalMessaging,d=p!==void 0&&p,Wn(f,fi),this.joinState==="JOINED"){w.next=4;break}throw new L("The channel does not join. Cannot do the operation",UB);case 4:if(this.client.connectionState!==om.RECONNECTING){w.next=9;break}return g=Date.now(),w.next=8,new Promise(function(_,A){var k=function(){var j=J(x.mark(function F(){var K;return x.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return K=Date.now()-g,_t.prev=1,_t.next=4,dh({message:f,peerId:b.channelId,toPeer:!1,session:b.getSession(),errorCodes:{NOT_LOGGED_IN:El,TOO_OFTEN:Qr},diff:K,logger:b.logger,options:{enableHistoricalMessaging:d,enableOfflineMessaging:!1}});case 4:_(),_t.next=12;break;case 7:_t.prev=7,_t.t0=_t.catch(1),Xa(_t.t0)&&A(new gb(he(b.name,"sendMessageToPeer",1e4),Dl)),ta(_t.t0)&&A(_t.t0),A(new da("Channel message send failure",{code:Ag,originalError:_t.t0}));case 12:return _t.prev=12,clearTimeout(I),_t.finish(12);case 15:case"end":return _t.stop()}},F,null,[[1,7,12,15]])}));return function(){return j.apply(this,arguments)}}();b.client.internalEmitter.once("RECONNECTED",k);var I=setTimeout(function(){b.client.internalEmitter.off("RECONNECTED",k),A(new gb(he(b.name,"sendMessageToPeer",1e4),Dl))},9e3)});case 8:return w.abrupt("return");case 9:if(this.client.connectionState===om.CONNECTED){w.next=11;break}throw new L("The client is not logged in. Cannot do the operation",El);case 11:return w.prev=11,w.next=14,dh({message:f,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:El,TOO_OFTEN:Qr},diff:0,logger:this.logger,options:{enableHistoricalMessaging:d,enableOfflineMessaging:!1}});case 14:w.next=24;break;case 16:if(w.prev=16,w.t0=w.catch(11),!Xa(w.t0)){w.next=20;break}throw new gb(he(this.name,"sendMessage",1e4),Dl);case 20:if(!ta(w.t0)){w.next=23;break}throw this.logError(w.t0),w.t0;case 23:throw new bd("The channel message send failure",Ag);case 24:case"end":return w.stop()}},l,this,[[11,16]])}));return function(l){return s.apply(this,arguments)}}()},{key:"getMembers",value:function(){var s=J(x.mark(function l(){var f,h;return x.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(p.prev=0,this.client.connectionState===om.CONNECTED){p.next=3;break}throw new L("The client is not logged in. Cannot do the operation",aC);case 3:if(this.joinState==="JOINED"){p.next=5;break}throw new L("The channel does not join. Cannot do the operation",$B);case 5:return f=this.getSession().requestChannelMemberList(this.channelId),p.next=8,f.pipe(ea(function(d){return d.memberInfos.map(function(g){return g.account})})).toPromise();case 8:return h=p.sent,this.info("Channel %s - get members success, %o",pa(this.channelId),h.map(pa)),p.abrupt("return",h);case 13:if(p.prev=13,p.t0=p.catch(0),!ta(p.t0)){p.next=18;break}throw this.logError(p.t0),p.t0;case 18:throw new bd("The channel members get failure",YB);case 19:case"end":return p.stop()}},l,this,[[0,13]])}));return function(){return s.apply(this,arguments)}}()},{key:"clearChannel",value:function(){var s=J(x.mark(function l(f){var h=this;return x.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(f.emit("channelLeft",this.channelId),this.joinState!=="JOINING"){p.next=4;break}return p.next=4,this.joinPromise;case 4:this.joinState="LEFT",this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,f.removeListener("channelTextMessage",this.onChannelTextMessage),f.removeListener("channelRawMessage",this.onChannelRawMessage),f.removeListener("channelMediaMessage",this.onChannelMediaMessage),f.removeListener("memberNotice",this.onMemberNotice),f.removeListener("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.removeListener("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.removeListener("LOGOUT",this.onLogout),f.usedChannelIds=f.usedChannelIds.filter(function(d){return d!==h.channelId});case 18:case"end":return p.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()}]),e}(wb()),la(xb.prototype,"join",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"join"),xb.prototype),la(xb.prototype,"leave",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"leave"),xb.prototype),la(xb.prototype,"sendMessage",[Qb],Object.getOwnPropertyDescriptor(xb.prototype,"sendMessage"),xb.prototype),la(xb.prototype,"getMembers",[Ra],Object.getOwnPropertyDescriptor(xb.prototype,"getMembers"),xb.prototype),xb),E,Ib=S.ConnectionChangeReason,T=S.ConnectionState,eu={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},aG={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},bG=(E=function(i){function e(s,l,f,h){X(this,e);var p=o.call(this,l,"RtmClient",!0);return m(n(p),"connectionState",T.DISCONNECTED),m(n(p),"internalEmitter",new ia),m(n(p),"context",void 0),m(n(p),"attributes",{}),m(n(p),"loginPromise",void 0),m(n(p),"attributeDrafts",new Set),m(n(p),"session",void 0),m(n(p),"lastLoginTime",void 0),m(n(p),"reconnId",0),m(n(p),"channelAttributesCacheLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"invitationManager",void 0),m(n(p),"subscribedPeerStatusCache",{}),m(n(p),"pendingPeerStatusSubCount",0),m(n(p),"peerStatusSeqLru",new Ac(void 0,{maxlen:1e4})),m(n(p),"peerUnreachableTimers",{}),m(n(p),"mediaTaskManager",void 0),m(n(p),"setParameters",void 0),m(n(p),"updateConfig",void 0),m(n(p),"blacklistedIP",{}),m(n(p),"userDropHandler",function(d){if(p.connectionState!==T.ABORTED)switch(d){case 11:p.logError("Kicked off by remote session"),p.onConnectionStateChanged(T.ABORTED,Ib.REMOTE_LOGIN);break;case 14:case 15:case 16:p.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[d])),p.onConnectionStateChanged(T.ABORTED,Ib.BANNED_BY_SERVER);break;default:p.logError("User kicked off for unknown code: ".concat(d)),p.onConnectionStateChanged(T.ABORTED,Ib.INTERRUPTED)}}),p.context=new VE(s,f,l),p.mediaTaskManager=new kt(l),p.context.config=f,p.internalEmitter.setMaxListeners(512),p.setParameters=h.bind(n(p)),p.updateConfig=h.bind(n(p)),p.invitationManager=new YF(function(){return p.session},l),p.invitationManager.on("remoteInvitationInstance",function(d){p.emit("RemoteInvitationReceived",d)}),p.setMaxListeners(512),p.internalEmitter.setMaxListeners(512),p}ja(e,i);var o=ka(e);return Ia(e,[{key:"renewToken",value:function(){var s=J(x.mark(function l(f){var h,p,d,g=this;return x.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(typeof f=="string"&&f.length!==0){b.next=2;break}throw new H("Invalid argument",nC);case 2:if(this.connectionState!==T.ABORTED){b.next=5;break}return b.next=5,new Promise(function(){});case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){b.next=7;break}throw new L("The client is not logged in",qC);case 7:if(this.session!==void 0){b.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return b.prev=9,h=this.context.token,this.context.token=f,b.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Md(function(){return Error("No available edge address to connect")}),Ce(function(y){return y.pipe(ba(function(w){if(ta(w))throw w}),jd(2500),Pa(4))}),Pa(1),kb(2e4),Ja(function(y){return Xa(y)&&g.warn("renewToken timed out"),Z(y)})).toPromise();case 14:p=b.sent,d=p.ticket,b.next=27;break;case 18:if(b.prev=18,b.t0=b.catch(9),this.context.token=h,b.t0.code!==ds&&b.t0.code!==es){b.next=23;break}throw new of("Invalid token",pC);case 23:if(b.t0.code!==ii){b.next=25;break}throw new of("The token expired",oC);case 25:if(!Xa(b.t0)){b.next=27;break}throw new gb("Renew token timed out",mC);case 27:this.session.curLoginSockets.filter(function(y){return y!==void 0}).forEach(function(y){return y.ticket=d});case 28:case"end":return b.stop()}},l,this,[[9,18]])}));return function(l){return s.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var s=J(x.mark(function l(f){var h,p,d=this;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.connectionState===T.CONNECTED){g.next=2;break}throw new L("The client is not logged in",lC);case 2:if(this.session!==void 0){g.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(f)||f.length===0||f.some(function(b){return!Aa(b)})||256<f.length)){g.next=6;break}throw new H("invalid arguments",is);case 6:return g.next=8,this.session.requestPeersOnlineStatus(f).toPromise();case 8:return h=g.sent,p=Bc(pl(h.userInfos,"account"),function(b){return!!b.ts}),Object.keys(p).forEach(function(b){if(b in d.subscribedPeerStatusCache&&d.subscribedPeerStatusCache[b]!==S.PeerOnlineState.UNREACHABLE){var y=p[b]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;d.emit("PeersOnlineStatusChanged",m({},b,y)),d.subscribedPeerStatusCache[b]=y}}),g.abrupt("return",p);case 12:case"end":return g.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.connectionState===T.CONNECTED){k.next=2;break}throw new L("The client is not logged in",XB);case 2:if(this.session!==void 0){k.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(f)&&f.every(function(I){return typeof I=="string"})&&f.length!==0){k.next=6;break}throw new H("Invalid arguments: channelIds",Sr);case 6:if(!(32<f.length)){k.next=8;break}throw new H("getChannelMemberCount exceed limit of 32 channelIds",WB);case 8:h=0;case 9:if(!(h<f.length)){k.next=16;break}if(Aa(p=f[h])){k.next=13;break}throw new H(["getChannelMemberCount channel id %s is invalid",p],Sr);case 13:h++,k.next=9;break;case 16:return k.next=18,this.session.requestGetChannelMemberCount(f).toPromise();case 18:for(d=k.sent,g=d.groupInfos,b={},y=0;y<g.length;y++)w=g[y],_=w.group,A=w.memberCount,Aa(_)&&typeof A=="number"&&(this.internalEmitter.emit("channelMemberCountUpdated",_,A),b[_]=A);return k.abrupt("return",b);case 23:case"end":return k.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var s=J(x.mark(function l(f){var h,p;return x.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(Mf({attributes:f,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){d.next=3;break}throw new L("The client is not logged in",Zb);case 3:if(this.session!==void 0){d.next=5;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return h=this.session.requestSetLocalUserAttributes(f).toPromise(),p={attribute:f,promise:h},this.attributeDrafts.add(p),d.prev=8,d.next=11,h;case 11:this.attributes=f,d.next=19;break;case 14:if(d.prev=14,d.t0=d.catch(8),!ta(d.t0)){d.next=18;break}throw d.t0;case 18:throw new H("arguments is not valid",Oa);case 19:return d.prev=19,this.attributeDrafts.delete(p),d.finish(19);case 22:case"end":return d.stop()}},l,this,[[8,14,19,22]])}));return function(l){return s.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w=arguments;return x.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(p=2<w.length&&w[2]!==void 0?w[2]:{},d=p.enableNotificationToChannelMembers,g=d!==void 0&&d,Mf({attributes:h,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){_.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(this.session!==void 0){_.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return b=this.session.requestSetChannelAttributes(f,h,g).toPromise(),_.prev=7,_.next=10,b;case 10:y=Bc(h,function(A){return new Blob([A]).size}),this.channelAttributesCacheLru.set(f,y),_.next=19;break;case 14:if(_.prev=14,_.t0=_.catch(7),!ta(_.t0)){_.next=18;break}throw _.t0;case 18:throw new H("arguments is not valid",Oa);case 19:case"end":return _.stop()}},l,this,[[7,14]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var s=J(x.mark(function l(f){var h,p,d;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(h=wa(wa({},this.attributes),f),Mf({attributes:f,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),Mf({attributes:h,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){g.next=5;break}throw new L("The client is not logged in",Zb);case 5:if(this.session!==void 0){g.next=7;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return p=this.session.requestAddOrUpdateLocalUserAttributes(f).toPromise(),d={attribute:h,promise:p},this.attributeDrafts.add(d),g.prev=10,g.next=13,p;case 13:this.attributes=h,g.next=21;break;case 16:if(g.prev=16,g.t0=g.catch(10),!ta(g.t0)){g.next=20;break}throw g.t0;case 20:throw new H("arguments is not valid",is);case 21:return g.prev=21,this.attributeDrafts.delete(d),g.finish(21);case 24:case"end":return g.stop()}},l,this,[[10,16,21,24]])}));return function(l){return s.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A=arguments;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=2<A.length&&A[2]!==void 0?A[2]:{},d=p.enableNotificationToChannelMembers,g=d!==void 0&&d,b=this.channelAttributesCacheLru.get(f,{}),y=Bc(h,function(I){return new Blob([I]).size}),w=wa(wa({},b),y),Mf({attributes:h,attrSizeMap:w,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){k.next=7;break}throw new L("The client is not logged in",Zb);case 7:if(this.session!==void 0){k.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return _=this.session.requestAddOrUpdateChannelAttributes(f,h,g).toPromise(),k.prev=10,k.next=13,_;case 13:this.channelAttributesCacheLru.set(f,w),k.next=21;break;case 16:if(k.prev=16,k.t0=k.catch(10),!ta(k.t0)){k.next=20;break}throw k.t0;case 20:throw new H("arguments is not valid",Oa);case 21:case"end":return k.stop()}},l,this,[[10,16]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var s=J(x.mark(function l(f){var h,p,d,g;return x.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(Array.isArray(f)&&f.length!==0&&!f.some(function(y){return y.length===0})){b.next=2;break}throw new L("arguments is not valid",Oa);case 2:if(this.connectionState===T.CONNECTED){b.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(this.session!==void 0){b.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return h=this.session.requestDeleteLocalUserAttributesByKeys(f).toPromise(),p={attribute:ml(this.attributes,f),promise:h},this.attributeDrafts.add(p),b.prev=9,b.next=12,h;case 12:for(d=0;d<f.length;d++)g=f[d],delete this.attributes[g];b.next=20;break;case 15:if(b.prev=15,b.t0=b.catch(9),!ta(b.t0)){b.next=19;break}throw b.t0;case 19:throw new H("arguments is not valid",Oa);case 20:return b.prev=20,this.attributeDrafts.delete(p),b.finish(20);case 23:case"end":return b.stop()}},l,this,[[9,15,20,23]])}));return function(l){return s.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A=arguments;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=2<A.length&&A[2]!==void 0?A[2]:{},d=p.enableNotificationToChannelMembers,g=d!==void 0&&d,Array.isArray(h)&&h.length!==0&&Aa(f)&&!h.some(function(I){return I.length===0||512<I.length})){k.next=3;break}throw new L("arguments is not valid",Oa);case 3:if(this.connectionState===T.CONNECTED){k.next=5;break}throw new L("The client is not logged in",Zb);case 5:if(this.session!==void 0){k.next=7;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return b=this.session.requestDeleteChannelAttributesByKeys(f,h,g).toPromise(),k.prev=8,k.next=11,b;case 11:if(y=this.channelAttributesCacheLru.get(f))for(w=0;w<h.length;w++)_=h[w],delete y[_];k.next=20;break;case 15:if(k.prev=15,k.t0=k.catch(8),!ta(k.t0)){k.next=19;break}throw k.t0;case 19:throw new H("arguments is not valid",Oa);case 20:case"end":return k.stop()}},l,this,[[8,15]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var s=J(x.mark(function l(){var f,h;return x.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.connectionState===T.CONNECTED){p.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(this.session!==void 0){p.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return f=this.session.requestClearLocalUserAttributes().toPromise(),h={attribute:{},promise:f},this.attributeDrafts.add(h),p.prev=7,p.next=10,f;case 10:this.attributes={},p.next=18;break;case 13:if(p.prev=13,p.t0=p.catch(7),!ta(p.t0)){p.next=17;break}throw p.t0;case 17:throw new H("arguments is not valid",Oa);case 18:return p.prev=18,this.attributeDrafts.delete(h),p.finish(18);case 21:case"end":return p.stop()}},l,this,[[7,13,18,21]])}));return function(){return s.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b=arguments;return x.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(h=1<b.length&&b[1]!==void 0?b[1]:{},p=h.enableNotificationToChannelMembers,d=p!==void 0&&p,this.connectionState===T.CONNECTED){y.next=3;break}throw new L("The client is not logged in",Zb);case 3:if(this.session!==void 0){y.next=5;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return g=this.session.requestClearChannelAttributes(f,d).toPromise(),y.prev=6,y.next=9,g;case 9:this.channelAttributesCacheLru.delete(f),y.next=17;break;case 12:if(y.prev=12,y.t0=y.catch(6),!ta(y.t0)){y.next=16;break}throw y.t0;case 16:throw new H("arguments is not valid",Oa);case 17:case"end":return y.stop()}},l,this,[[6,12]])}));return function(l){return s.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var s=J(x.mark(function l(f){var h,p,d;return x.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(Aa(f)){g.next=2;break}throw new H("Not a valid user ID",Oa);case 2:if(this.connectionState===T.CONNECTED){g.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(this.session!==void 0){g.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return g.prev=6,g.next=9,this.session.requestGetUserAttributeKeys(f).toPromise();case 9:return h=g.sent,p=h.keys,g.next=13,this.session.requestGetUserAttributesByKeys(f,p.slice(0,512)).toPromise();case 13:d=g.sent,g.next=21;break;case 16:if(g.prev=16,g.t0=g.catch(6),!ta(g.t0)){g.next=20;break}throw g.t0;case 20:throw new H("arguments is not valid",Oa);case 21:return g.abrupt("return",br(d.attributeInfos.map(function(b){return[b.key,b.value]})));case 22:case"end":return g.stop()}},l,this,[[6,16]])}));return function(l){return s.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A,k,I;return x.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(Aa(f)){j.next=2;break}throw new H("Not a valid channel ID",Oa);case 2:if(this.connectionState===T.CONNECTED){j.next=4;break}throw new L("The client is not logged in",Zb);case 4:if(this.session!==void 0){j.next=6;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return j.prev=6,j.next=9,this.session.requestGetChannelAttributesKeys(f).toPromise();case 9:return h=j.sent,p=h.keys,j.next=13,this.session.requestGetChannelAttributesByKeys(f,p).toPromise();case 13:d=j.sent,g=d.attributeMaps,j.next=22;break;case 17:if(j.prev=17,j.t0=j.catch(6),!ta(j.t0)){j.next=21;break}throw j.t0;case 21:throw new H("arguments is not valid",Oa);case 22:b={},y=0;case 24:if(!(y<g.length)){j.next=32;break}if(w=g[y],_=w.key,A=w.ms,k=w.value,I=w.origin,typeof _=="string"&&U.isLong(A)&&typeof k=="string"&&Aa(I)){j.next=28;break}return j.abrupt("break",32);case 28:b[_]={value:k,lastUpdateUserId:I,lastUpdateTs:A.toNumber()};case 29:y++,j.next=24;break;case 32:return this.channelAttributesCacheLru.set(f,Bc(b,function(F){return new Blob([F.value]).size})),j.abrupt("return",b);case 34:case"end":return j.stop()}},l,this,[[6,17]])}));return function(l){return s.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_,A,k,I;return x.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(this.connectionState===T.CONNECTED){j.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(this.session!==void 0){j.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Mn(f,h),j.prev=5,j.next=8,this.session.requestGetChannelAttributesByKeys(f,h).toPromise();case 8:p=j.sent,d=p.attributeMaps,j.next=17;break;case 12:if(j.prev=12,j.t0=j.catch(5),!ta(j.t0)){j.next=16;break}throw j.t0;case 16:throw new H("arguments is not valid",Oa);case 17:g={},b=this.channelAttributesCacheLru.get(f,{}),y=0;case 20:if(!(y<d.length)){j.next=29;break}if(w=d[y],_=w.key,A=w.ms,k=w.value,I=w.origin,typeof _=="string"&&U.isLong(A)&&typeof k=="string"&&Aa(I)){j.next=24;break}return j.abrupt("break",29);case 24:b[_]=new Blob([k]).size,g[_]={value:k,lastUpdateUserId:I,lastUpdateTs:A.toNumber()};case 26:y++,j.next=20;break;case 29:return this.channelAttributesCacheLru.set(f,b),j.abrupt("return",g);case 31:case"end":return j.stop()}},l,this,[[5,12]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var s=J(x.mark(function l(f,h){var p;return x.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.connectionState===T.CONNECTED){d.next=2;break}throw new L("The client is not logged in",Zb);case 2:if(this.session!==void 0){d.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Mn(f,h),d.prev=5,d.next=8,this.session.requestGetUserAttributesByKeys(f,h).toPromise();case 8:p=d.sent,d.next=16;break;case 11:if(d.prev=11,d.t0=d.catch(5),!ta(d.t0)){d.next=15;break}throw d.t0;case 15:throw new H("arguments is not valid",Oa);case 16:return d.abrupt("return",br(p.attributeInfos.map(function(g){return[g.key,g.value]})));case 17:case"end":return d.stop()}},l,this,[[5,11]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"login",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b;return x.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(wn(!0),p=Yg(),d=f.token,f.token===this.context.appId&&(d=void 0),hb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:ib(this.session&&this.session.startTime),index:{index1:f.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},installId:zg,lts:U.fromNumber(Date.now()),os:7,sid:ab(p),token:d||"",userId:f.uid,ver:"1.4.5",buildno:415,subVersion:15,version:4},(h=this.context.config.enableCloudProxy)!==null&&h!==void 0&&h,!0),Hd(f)&&Aa(f.uid)){y.next=7;break}throw new H("not a valid user id",hi);case 7:if(typeof d!="string"||!d){y.next=11;break}this.context.token=d,y.next=13;break;case 11:if(typeof d=="string"||d==null){y.next=13;break}throw new H('The "token" is not a valid string.',hi);case 13:return g=Date.now(),this.context.sid=ab(p),this.loginPromise=this.loginImpl({uid:f.uid,instanceId:p}),this.info("RTM Client logging in as ".concat(pa(f.uid))),y.prev=17,y.next=20,this.loginPromise;case 20:y.next=28;break;case 22:throw y.prev=22,y.t0=y.catch(17),ta(y.t0)&&hb("Link",{ackedServerIp:"",destServerIp:"",ec:y.t0.code||1,sc:y.t0.serverCode,elapse:ib(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-g,sid:ab(p),userId:f.uid},(b=this.context.config.enableCloudProxy)!==null&&b!==void 0&&b),this.context.token=void 0,this.context.socketUseProxy=!1,y.t0;case 28:return y.prev=28,this.loginPromise=void 0,y.finish(28);case 31:this.context.socketUseProxy&&this.emit("FallbackProxyConnected"),wn(!1);case 33:case"end":return y.stop()}},l,this,[[17,22,28,31]])}));return function(l){return s.apply(this,arguments)}}()},{key:"logout",value:function(){var s=J(x.mark(function l(){var f;return x.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.loginPromise){h.next=3;break}return h.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){h.next=6;break}throw this.logError("Already in logout state"),new L("Logout failure. The client has already been logged out",fs);case 6:if(this.internalEmitter.emit("LOGOUT"),this.connectionState!==T.ABORTED){h.next=11;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),h.abrupt("return");case 11:if(this.session!==void 0){h.next=14;break}return this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),h.abrupt("return");case 14:return hb("Logout",{elapse:ib(this.session.startTime),lts:U.fromNumber(Date.now()),sid:ab(this.session.instanceId),userId:this.context.uid},(f=this.context.config.enableCloudProxy)!==null&&f!==void 0&&f),h.next=17,this.session.logoutHandler();case 17:this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT),this.log("Log out success");case 19:case"end":return h.stop()}},l,this)}));return function(){return s.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var s,l=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new L("Logout failure. The client has already been logged out",fs);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):this.session!==void 0&&(hb("Logout",{elapse:ib(this.session.startTime),lts:U.fromNumber(Date.now()),sid:ab(this.session.instanceId),userId:this.context.uid},(s=this.context.config.enableCloudProxy)!==null&&s!==void 0&&s),this.session.logoutHandler().then(function(){l.log("Log out success")})),this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var s=J(x.mark(function l(f,h){var p,d,g,b,y,w,_=this,A=arguments;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=2<A.length&&A[2]!==void 0?A[2]:{},d=p.enableOfflineMessaging,g=d!==void 0&&d,b=p.enableHistoricalMessaging,y=b!==void 0&&b,Wn(f,Ie),this.connectionState!==T.RECONNECTING){k.next=5;break}return w=Date.now(),k.abrupt("return",new Promise(function(I,j){var F=function(){var _t=J(x.mark(function _a(){var _i;return x.wrap(function(_o){for(;;)switch(_o.prev=_o.next){case 0:if(_.session!==void 0){_o.next=2;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return _i=Date.now()-w,_o.prev=3,_o.t0=I,_o.next=7,dh({message:f,peerId:h,toPeer:!0,session:_.session,errorCodes:{NOT_LOGGED_IN:Hl,TOO_OFTEN:hs},diff:_i,logger:_.logger,options:{enableHistoricalMessaging:y,enableOfflineMessaging:g}});case 7:_o.t1=_o.sent,(0,_o.t0)(_o.t1),_o.next=16;break;case 11:_o.prev=11,_o.t2=_o.catch(3),Xa(_o.t2)&&j(new gb(he(_.name,"sendMessageToPeer",1e4),Fl)),ta(_o.t2)&&j(_o.t2),j(new da("Peer-to-peer message send failure",{code:gs,originalError:_o.t2}));case 16:return _o.prev=16,clearTimeout(K),_o.finish(16);case 19:case"end":return _o.stop()}},_a,null,[[3,11,16,19]])}));return function(){return _t.apply(this,arguments)}}();_.internalEmitter.once("RECONNECTED",F);var K=setTimeout(function(){_.internalEmitter.off("RECONNECTED",F),j(new gb(he(_.name,"sendMessageToPeer",1e4),Fl))},9e3)}));case 5:if(this.connectionState===T.CONNECTED){k.next=7;break}throw new L("Failed to send the peer-to-peer message. The client is not logged in",Hl);case 7:if(this.session!==void 0){k.next=9;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return k.prev=9,k.next=12,dh({message:f,peerId:h,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Hl,TOO_OFTEN:hs},diff:0,logger:this.logger,options:{enableHistoricalMessaging:y,enableOfflineMessaging:g}});case 12:return k.abrupt("return",k.sent);case 15:if(k.prev=15,k.t0=k.catch(9),!Xa(k.t0)){k.next=19;break}throw new gb(he(this.name,"sendMessageToPeer",1e4),Fl);case 19:if(!ta(k.t0)){k.next=21;break}throw k.t0;case 21:throw new da("Peer-to-peer message send failure",{code:gs,originalError:k.t0});case 22:case"end":return k.stop()}},l,this,[[9,15]])}));return function(l,f){return s.apply(this,arguments)}}()},{key:"createChannel",value:function(s){var l=this;if(!Aa(s))throw new H(["The %s in the arguments is invalid",Object.keys({channelId:s})[0]],VB);return new $F(s,function(){return l.session},this,this.logger)}},{key:"createLocalInvitation",value:function(s){if(!Aa(s))throw new H(["The %s in the arguments is invalid",Object.keys({calleeId:s})[0]],Ec);return this.invitationManager.genLocalInvitation(s)}},{key:"subscribePeersOnlineStatus",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A,k,I,j,F,K=this;return x.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(this.connectionState===T.CONNECTED){_t.next=2;break}throw new L("The client is not logged in",Il);case 2:if(this.session!==void 0){_t.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(f)&&f.length!==0){_t.next=6;break}throw new H("Invalid arguments: peerIds",Cg);case 6:h=0;case 7:if(!(h<f.length)){_t.next=14;break}if(Aa(p=f[h])){_t.next=11;break}throw new H(["subscribePeersOnlineStatus peer id %s is invalid",p],Cg);case 11:h++,_t.next=7;break;case 14:if(!(512<(d=f&&f.length?bl(f):[]).length+Object.keys(this.subscribedPeerStatusCache).length+this.pendingPeerStatusSubCount)){_t.next=17;break}throw new lb("Subscribed peers overflows",ks);case 17:return this.pendingPeerStatusSubCount+=d.length,_t.next=20,this.session.requestSubscribePeersOnlineStatus(d).toPromise();case 20:g=_t.sent,b=g.errors,this.pendingPeerStatusSubCount-=d.length,y=[],w=[],_=0;case 26:if(!(_<b.length)){_t.next=34;break}if(A=b[_],k=A.code,typeof(I=A.account)=="string"){_t.next=30;break}throw new da("Returned account is invalid",js);case 30:k!==0&&y.push(I);case 31:_++,_t.next=26;break;case 34:for(j=0;j<d.length;j++)F=d[j],y.includes(F)||(w.push(F),this.subscribedPeerStatusCache[F]=void 0);if(this.session.requestPeersOnlineStatus(w).pipe(ea(function(_a){return Bc(pl(_a.userInfos,"account"),function(_i){return!!_i.ts})})).subscribe(function(_a){_a=Bc(_a,function(_i,_o){return _i=_i?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,K.subscribedPeerStatusCache[_o]=_i}),K.emit("PeersOnlineStatusChanged",_a)}),y.length===0){_t.next=38;break}throw new da("Subscription failed",js);case 38:case"end":return _t.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b;return x.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.connectionState===T.CONNECTED){y.next=2;break}throw new L("The client is not logged in",Il);case 2:if(this.session!==void 0){y.next=4;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(f)&&f.length!==0){y.next=6;break}throw new H("Invalid arguments: peerIds",Cg);case 6:h=0;case 7:if(!(h<f.length)){y.next=14;break}if(Aa(p=f[h])){y.next=11;break}throw new H(["subscribePeersOnlineStatus peer id %s is invalid",p],Cg);case 11:h++,y.next=7;break;case 14:if(!(512<f.length)){y.next=16;break}throw new lb("Unsubscribed peers overflows",ks);case 16:for(d=f&&f.length?bl(f):[],this.session.requestUnsubscribePeersOnlineStatus(d),g=0;g<d.length;g++)b=d[g],delete this.subscribedPeerStatusCache[b];case 19:case"end":return y.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var s=J(x.mark(function l(f){return x.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.connectionState===T.CONNECTED){h.next=2;break}throw new L("The client is not logged in",Il);case 2:if(f!==S.PeerSubscriptionOption.ONLINE_STATUS){h.next=4;break}return h.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new H("Subscription option not supported",Cg);case 5:case"end":return h.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"createMessage",value:function(s){return s.messageType==="IMAGE"?wa({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},s):s.messageType==="FILE"?wa({fileName:"",description:"",thumbnail:new Blob,size:0},s):s}},{key:"downloadMedia",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A,k,I,j,F,K,_t=this,_a=arguments;return x.wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(h=1<_a.length&&_a[1]!==void 0?_a[1]:{},typeof f=="string"){_i.next=3;break}throw new H("invalid mediaId format",Jl);case 3:if(_i.prev=3,p=f.split("z"),d=ua(p,3),g=d[0],b=d[1],y=d[2],w=g.slice(1,65),_=YE(w),A=parseInt(g.slice(65),10),k=parseInt(b,10),I=parseInt(y,10),!(Number.isNaN(A)||Number.isNaN(k)||Number.isNaN(I))){_i.next=12;break}throw new H("Invalid mediaId content",Jl);case 12:_i.next=19;break;case 14:if(_i.prev=14,_i.t0=_i.catch(3),!ta(_i.t0)){_i.next=18;break}throw _i.t0;case 18:throw new H("parse mediaId failure",{code:Jl,originalError:_i.t0});case 19:if(this.connectionState===T.CONNECTED){_i.next=21;break}throw new L("The client is not logged in, cannot download",yC);case 21:if(this.session!==void 0){_i.next=23;break}throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return j=this.mediaTaskManager.addDownloadTask({unit:k,zone:A,hashHexStr:w,size:I},function(){if(_t.session===void 0)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return _t.session.requestFileDownloadIndexGet({hash:_,zone:A,unit:k,size:I}).toPromise()},h),_i.next=26,this.mediaTaskManager.waitMediaTask(j);case 26:return F=_i.sent,K=F.payload,_i.abrupt("return",K);case 29:case"end":return _i.stop()}},l,this,[[3,14]])}));return function(l){return s.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A,k,I,j,F,K,_t,_a,_i,_o,_c,Nf,B,_r,_n,_s,q=this,$=arguments;return x.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(h=1<$.length&&$[1]!==void 0?$[1]:{},p=2<$.length&&$[2]!==void 0?$[2]:{},Hd(h)){_e.next=4;break}throw new H("Invalid params",Of);case 4:if(d="thumbnailWidth"in h||"thumbnailHeight"in h||"width"in h||"height"in h,g=h.messageType,b=g===void 0?d?"IMAGE":"FILE":g,y=h.description,w=y===void 0?"":y,_=h.fileName,A=_===void 0?"":_,k=h.thumbnail,typeof h.messageType=="string"&&typeof w=="string"&&typeof A=="string"&&(Tn(k)||k===void 0)&&Tn(f)){_e.next=8;break}throw new H("Invalid message params type",Of);case 8:if(!d||b!=="FILE"){_e.next=10;break}throw new H("Invalid message params, unexpected field in RtmFileMessage",Of);case 10:if(!(33554432<(I=f.size))){_e.next=13;break}throw new lb("The payload size overflow 32 MB",sC);case 13:return _e.next=15,pj(f);case 15:return j=_e.sent,_e.next=18,XE(j);case 18:if(F=_e.sent,this.connectionState===T.CONNECTED){_e.next=21;break}throw new L("The client is not logged in",uC);case 21:if(b!=="IMAGE"){_e.next=29;break}return _e.next=24,Sv(h,j);case 24:K=_e.sent,_t=K.height,_a=K.width,_i=K.thumbnailWidth,_o=K.thumbnailHeight;case 29:return _c=this.mediaTaskManager.addUploadTask({file:new Uint8Array(j),hash:F},function(){if(q.session===void 0)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return q.session.fetchFileUploadIndexGet({hash:F,size:I})},function(ca,ga){if(q.session===void 0)throw new Ha({SESSION_NOT_FOUND:"Failed to get session of the client"});return q.session.requestFileUploadIndexSet({hash:F,unit:ca,servers:ga}).toPromise()},p),_e.next=32,this.mediaTaskManager.waitMediaTask(_c);case 32:if(Nf=_e.sent,B=Nf.zone,_r=Nf.retUnit,b!=="IMAGE"){_e.next=38;break}return _n={height:_t,width:_a,fileName:A,size:I,description:w,thumbnail:k,messageType:b,thumbnailWidth:_i,thumbnailHeight:_o,mediaId:"0".concat(et(F)).concat(B,"z").concat(_r,"z").concat(I,"z").concat(_t,"z").concat(_a)},_e.abrupt("return",_n);case 38:return _s={fileName:A,size:I,description:w,mediaId:"0".concat(et(F)).concat(B,"z").concat(_r,"z").concat(I),thumbnail:k,messageType:b},_e.abrupt("return",_s);case 40:case"end":return _e.stop()}},l,this)}));return function(l){return s.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var s=J(x.mark(function l(f){var h,p,d,g,b,y,w,_,A=this;return x.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(h=f.uid,p=f.instanceId,d=f.forceLoginTime,g=d===void 0?0:d,b=p,!(this.lastLoginTime!==void 0&&500>Date.now()-this.lastLoginTime)){k.next=4;break}throw new nE(["The frequency of login exceeded the limit of %d queries per second",2],iC);case 4:if(this.connectionState===T.DISCONNECTED||g!==0){k.next=6;break}throw new L("The SDK is either logging in or has logged in the Agora RTM system",gC);case 6:k.prev=6,this.context.uid=h,k.next=13;break;case 10:throw k.prev=10,k.t0=k.catch(6),new H(["The %s in the arguments is invalid",Object.keys({uid:h})[0]],hi);case 13:return g===0&&this.onConnectionStateChanged(T.CONNECTING,Ib.LOGIN),(y=new ct(this.context,this.logger,!1)).blacklistedIP=this.blacklistedIP,this.session=w=new cu(this.context,y,b,this.logger),_=function(){A.connectionState===T.CONNECTED&&(A.onConnectionStateChanged(T.RECONNECTING,Ib.INTERRUPTED),A.session)&&A.session.once("userJoined",function(){A.onConnectionStateChanged(T.CONNECTED,Ib.LOGIN_SUCCESS)})},w.on("connectionLost",_),w.on("tokenExpired",function(){A.emit("TokenExpired")}),w.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",function(I){A.emit("MessageFromPeer",{text:I.text,messageType:S.MessageType.TEXT},I.peerId,I.properties)}),this.session.on("peerMediaMessage",function(I){var j=I.peerId,F=I.properties,K=I.messageType;I=I.details,K==="FILE"?A.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(ra(I.media_size),10),description:ra(I.media_description),fileName:ra(I.media_filename),mediaId:ra(I.media_id),thumbnail:new Blob([I.media_thumbnail])},j,F):K==="IMAGE"&&A.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(ra(I.media_size),10),description:ra(I.media_description),fileName:ra(I.media_filename),mediaId:ra(I.media_id),thumbnail:new Blob([I.media_thumbnail]),height:parseInt(ra(I.media_height),10),width:parseInt(ra(I.media_width),10),thumbnailHeight:parseInt(ra(I.media_thumbnailheight),10),thumbnailWidth:parseInt(ra(I.media_thumbnailwidth),10)},j,F)}),this.session.on("peerRawMessage",function(I){A.emit("MessageFromPeer",{rawMessage:I.raw,description:I.desc,messageType:S.MessageType.RAW},I.peerId,I.properties)}),w.on("instanceChanged",function(I){return b=I}),w.on("peerOnlineStatusChanged",function(I){var j=I.instance.toString()+I.state,F=A.peerStatusSeqLru.get(j);!F||I.seq.greaterThan(F)?(A.peerStatusSeqLru.set(j,I.seq),I.state!==A.subscribedPeerStatusCache[I.peerId]&&A.emit("PeersOnlineStatusChanged",m({},I.peerId,I.state)),A.subscribedPeerStatusCache[I.peerId]=I.state,clearTimeout(A.peerUnreachableTimers[j]),I.state===S.PeerOnlineState.UNREACHABLE&&(A.peerUnreachableTimers[j]=setTimeout(function(){A.subscribedPeerStatusCache[I.peerId]===S.PeerOnlineState.UNREACHABLE&&(A.subscribedPeerStatusCache[I.peerId]=S.PeerOnlineState.ONLINE,A.emit("PeersOnlineStatusChanged",m({},I.peerId,S.PeerOnlineState.ONLINE)))},3e4))):A.log("peerOnlineStatusChanged dedup for %s, %d",j,I.seq.toNumber())}),w.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),w.on("channelAttributesUpdated",function(I){var j=I.channelId;I=I.attributeMaps;for(var F={},K=0;K<I.length;K++){var _t=I[K],_a=_t.key,_i=_t.ms,_o=_t.value;if(_t=_t.origin,typeof _a!="string"||!U.isLong(_i)||typeof _o!="string"||!Aa(_t))break;F[_a]=new Blob([_o]).size}A.channelAttributesCacheLru.set(j,F)}),w.on("userJoined",function(I){if(Object.keys(A.attributes).length!==0){if(A.session===void 0)return;A.session.requestSetLocalUserAttributes(A.attributes,I).toPromise()}if(A.attributeDrafts.size!==0)for(var j=function(_t,_a){var _i=(_t=_a[_t]).attribute;_t.promise.then(function(){A.session!==void 0&&A.session.requestSetLocalUserAttributes(_i,I).toPromise()})},F=0,K=Array.from(A.attributeDrafts);F<K.length;F++)j(F,K);Object.keys(A.subscribedPeerStatusCache).length!==0&&w.requestSubscribePeersOnlineStatus(Object.keys(A.subscribedPeerStatusCache))}),w.on("banEdgeIP",function(I){A.banIP(I)}),this.lastLoginTime=Date.now(),k.prev=32,k.next=35,w.loginHandler().toPromise();case 35:this.mediaTaskManager.setAuthInfo({ticket:w.connection.curOpenSockets.filter(function(I){return I!==void 0})[0].ticket,instance:w.instanceId,useNewDomain:.5<=Math.random(),loginOpt:w.userJoinOptions.toLong()}),k.next=54;break;case 38:if(k.prev=38,k.t1=k.catch(32),!(k.t1.name==="loginRespTimeout"&&2>g)){k.next=47;break}return w.removeAllListeners(),k.next=44,this.loginImpl({uid:h,instanceId:p,forceLoginTime:g+1});case 44:return k.abrupt("return");case 47:if(!Xa(k.t1)){k.next=50;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGIN_TIMEOUT),new gb(he(this.name,"login",12e3),hC);case 50:if(this.onConnectionStateChanged(T.DISCONNECTED,Ib.LOGIN_FAILURE),!ta(k.t1)){k.next=53;break}throw k.t1;case 53:throw new da("Login failure",{code:cs,originalError:k.t1});case 54:this.onConnectionStateChanged(T.CONNECTED,Ib.LOGIN_SUCCESS);case 55:case"end":return k.stop()}},l,this,[[6,10],[32,38]])}));return function(l){return s.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(s,l){var f,h=this;s===T.RECONNECTING&&(this.reconnId+=1),hb("ConnectionStateChange",{elapse:ib(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:eu[s],oldState:eu[this.connectionState],reason:aG[l],sid:ab(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},(f=this.context.config.enableCloudProxy)!==null&&f!==void 0&&f),this.connectionState===T.RECONNECTING&&s===T.CONNECTED&&(Object.keys(this.subscribedPeerStatusCache).length!==0&&this.session!==void 0&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ea(function(p){return Bc(pl(p.userInfos,"account"),function(d){return!!d.ts})})).subscribe(function(p){p=Bc(p,function(d,g){return d=d?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,h.subscribedPeerStatusCache[g]=d}),h.emit("PeersOnlineStatusChanged",p)}),this.internalEmitter.emit("RECONNECTED")),this.connectionState=s,s!==T.ABORTED&&s!==T.DISCONNECTED||(this.pendingPeerStatusSubCount=this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",s),this.emit("ConnectionStateChanged",s,l)}},{key:"banIP",value:function(s){var l;this.log("ip banned",s);var f=(l=this.blacklistedIP[s])!==null&&l!==void 0?l:0;this.blacklistedIP[s]=f+1}}]),e}(wb()),la(E.prototype,"renewToken",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"renewToken"),E.prototype),la(E.prototype,"queryPeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersOnlineStatus"),E.prototype),la(E.prototype,"getChannelMemberCount",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelMemberCount"),E.prototype),la(E.prototype,"setLocalUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"setLocalUserAttributes"),E.prototype),la(E.prototype,"setChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"setChannelAttributes"),E.prototype),la(E.prototype,"addOrUpdateLocalUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateLocalUserAttributes"),E.prototype),la(E.prototype,"addOrUpdateChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateChannelAttributes"),E.prototype),la(E.prototype,"deleteLocalUserAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"deleteLocalUserAttributesByKeys"),E.prototype),la(E.prototype,"deleteChannelAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"deleteChannelAttributesByKeys"),E.prototype),la(E.prototype,"clearLocalUserAttributes",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"clearLocalUserAttributes"),E.prototype),la(E.prototype,"clearChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"clearChannelAttributes"),E.prototype),la(E.prototype,"getUserAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributes"),E.prototype),la(E.prototype,"getChannelAttributes",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributes"),E.prototype),la(E.prototype,"getChannelAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributesByKeys"),E.prototype),la(E.prototype,"getUserAttributesByKeys",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributesByKeys"),E.prototype),la(E.prototype,"login",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),la(E.prototype,"logout",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),la(E.prototype,"logoutSync",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"logoutSync"),E.prototype),la(E.prototype,"sendMessageToPeer",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"sendMessageToPeer"),E.prototype),la(E.prototype,"createChannel",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"createChannel"),E.prototype),la(E.prototype,"createLocalInvitation",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"createLocalInvitation"),E.prototype),la(E.prototype,"subscribePeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"subscribePeersOnlineStatus"),E.prototype),la(E.prototype,"unsubscribePeersOnlineStatus",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"unsubscribePeersOnlineStatus"),E.prototype),la(E.prototype,"queryPeersBySubscriptionOption",[Ra],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersBySubscriptionOption"),E.prototype),la(E.prototype,"createMessage",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"createMessage"),E.prototype),la(E.prototype,"downloadMedia",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"downloadMedia"),E.prototype),la(E.prototype,"createMediaMessageByUploading",[Qb],Object.getOwnPropertyDescriptor(E.prototype,"createMediaMessageByUploading"),E.prototype),E),pm,qm,rm,sm,fu=(pm=/Chrome\/([0-9.]+)/.exec((rm=window)===null||rm===void 0||(sm=rm.navigator)===null||sm===void 0?void 0:sm.userAgent))===null||pm===void 0||(qm=pm[1])===null||qm===void 0?void 0:qm.split(".")[0];if(fu&&88<=parseInt(fu,10)&&!pe()){var tm,me=document.createElement("video"),ne=document.createElement("canvas");me.setAttribute("style","display:none"),me.setAttribute("muted",""),me.muted=!0,me.setAttribute("autoplay",""),me.autoplay=!0,me.setAttribute("playsinline",""),ne.setAttribute("style","display:none"),ne.setAttribute("width","1"),ne.setAttribute("height","1"),(tm=ne.getContext("2d"))===null||tm===void 0||tm.fillRect(0,0,1,1),me.srcObject=ne==null?void 0:ne.captureStream()}var gu={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},hu={enableLogUpload:!1,logFilter:gu.LOG_FILTER_INFO,enableCloudProxy:!1},ie=wa(wa({createInstance:function(i){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},o=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(i))throw new H(["The %s in the arguments is invalid",Object.keys({appId:i})[0]],Rr);var s=Object.keys(e).filter(function(b){return!(b in hu)});if(s.length!==0)throw new H("Invalid RTM config: ".concat(s.join(", ")),Rr);var l=wa(wa({},hu),e);if(o!==void 0&&(!Array.isArray(o)||o.length===0))throw new H("Invalid area config");if(o!=null){if(!o.every(function(b){return b in S.LegacyAreaCode}))throw new H("Invalid area codes: ".concat(o.filter(function(b){return!(b in S)}).join(", ")));P=Ke(o.map(function(b){return vE[b]}))}o=Ql=Ka.__global_unique_id__=(Ka.__global_unique_id__||0)+1;var f=zE(l);s=AE(l);var h=BE(l),p=CE(o,l),d=Xs(o,l),g=d("RTM:DEBUG","<Entry> ");return Qs.rtmConfig=l,f("The Agora RTM Web SDK version is %s","1.4.5"),e.enableCloudProxy&&f("RTM cloud proxy enabled"),e.enableLogUpload&&f("Log upload enabled"),P&&g("Area is set to %s",Array.from(P.CODES).map(function(b){return Pf(D).find(function(y){return D[y]===b})}).join(", ")),g("Creating an RtmClient instance"),g('The Git commit ID is "'.concat("v1.4.5-0-g9cf39592",'"')),g("The App ID is %s",Xn(i,4,10,"*".repeat(6))),f("The process ID is %s",zg),g("The build is %s","v1.4.5-0-g9cf39592"),g("NODE_ENV is %s","production"),new bG(i,{genLogger:d,genTracker:p,info:f,warn:s,logError:h,loggerId:o},l,function(b){for(var y=0,w=Pf(b);y<w.length;y++){var _=w[y];try{var A=b[_];A!=null&&(b.enableCloudProxy&&f("RTM cloud proxy enabled"),b.enableLogUpload&&f("Log upload enabled"),l[_]=A)}catch{throw new H(["The %s in the arguments is invalid",_],void 0)}}})},BUILD:"v1.4.5-0-g9cf39592",VERSION:"1.4.5",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:zg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},gu),{},{setParameter:function(i,e){Object.keys(lc).includes(i)&&(lc[i]=e)},getParameter:function(i){return lc[i]},setArea:function(i){var e=i.areaCodes;if(i=i.excludedArea,!Array.isArray(e)||e.length===0||!e.every(function(o){return o in S.AreaCode}))throw new H("Invalid area config");if(i!==void 0&&i===S.AreaCode.GLOBAL)throw new H("Excluded area cannot be global");if(i===void 0)P=Ke(e.map(function(o){return D[o]}));else{if(e.includes(i))throw new H("Excluded area cannot be in areaCodes");if(!(i in D))throw new H("Invalid excludedArea:",i);P=Xv({areas:e.map(function(o){return D[o]}),excludedArea:D[i]})}}});return ie})})(agoraRtmSdk);const AgoraRTM=getDefaultExportFromCjs(agoraRtmSdkExports);export{AgoraRTM as default};
//# sourceMappingURL=agoraRTM-a8b25b10.js.map
