import{bn as b,aj as S,p as g,j as w}from"./index-cd84bcc9.js";import{D as x}from"./ChamberBox-e4d36ac9.js";import{r}from"./vendor-51460554.js";import{S as A}from"./ShowAll-226afca1.js";import"./capitalizeFirstLetter-92ef0abb.js";import"./SkeletonChamberBox-5e97f066.js";import"./consts-be860660.js";import"./useTimeIndicator-3b8ca7e8.js";import"./index-c8a663c0.js";import"./sideNavItems-22800105.js";import"./index-2d186805.js";import"./useResizeObserver-0deb9469.js";import"./storyblok-c16fb040.js";import"./index-4963229a.js";import"./Modal-5a254f40.js";import"./styles-3ceda759.js";import"./ChambersList-14c207f2.js";import"./styles-346e761c.js";import"./constants-ab41c274.js";import"./styles-d2f9f396.js";import"./styles-ec98f338.js";const M=(n,e=0)=>{const[u,i]=r.useState("hasNextPage"),[o,f]=r.useState([]),{data:m,loading:E,error:y,fetchMore:l,refetch:a}=b({variables:{limit:n?e:12,offset:0}});r.useEffect(()=>{var t;f(((t=m==null?void 0:m.recentNoums)==null?void 0:t.data)||[])},[m]);const p=r.useMemo(()=>o==null?void 0:o.filter(t=>{var s;return(t==null?void 0:t.type)!==S.Home&&(t==null?void 0:t.status)===g.Published||(t==null?void 0:t.type)===S.Home&&((s=t==null?void 0:t.uid)==null?void 0:s.userStatus)!=="PENDING"}),[o]),v=r.useCallback(async()=>{var h,d,c,N;const t=await l({variables:{limit:e,offset:(o==null?void 0:o.length)||0}}),s=((d=(h=t==null?void 0:t.data)==null?void 0:h.recentNoums)==null?void 0:d.data)||[],P=[...o,...s];f(P),(((N=(c=t.data.recentNoums)==null?void 0:c.data)==null?void 0:N.length)||0)<e&&i("end")},[l,o,e]);return r.useEffect(()=>{i(o&&(o==null?void 0:o.length)<e?"end":"hasNextPage")},[o,e]),r.useEffect(()=>{a()},[a]),{noums:p,loading:E,error:y,infiniteState:u,fetchMoreNoums:v,refetchRecentNoums:a}},D=20,Y=()=>{const{noums:n,loading:e,infiniteState:u,fetchMoreNoums:i}=M(!0,D);return w(A,{noums:n,loading:e,infiniteState:u,fetchMoreNoums:i,category:x.Spotlight,"data-test":"FavouritesShowAll-ShowAll"})};export{Y as default};
//# sourceMappingURL=RecentShowAll-4ba4356f.js.map
