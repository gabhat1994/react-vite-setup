{"version":3,"file":"ApiEntityPickerField-cfd6d0d6.js","sources":["../../src/components/ApiEntityPickerField/styles.ts","../../src/components/ApiEntityPickerField/ApiEntityPickerField.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport { TextField } from '@/components/TextField';\nimport { Stack } from '@/layout';\nimport { type InputSize } from '../TextField/types';\n\nexport const SearchField = styled(TextField)`\n  svg path {\n    fill: var(--icon-input-neutral-default);\n  }\n`;\nexport const SelectedItemHeader = styled.div<{ $inputSize?: InputSize }>`\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  padding: ${(props) => (props.$inputSize === 'small' ? '4px 12px' : '16px')};\n  min-height: 40px;\n  background: var(--bg-tablecell-neutral-pressed);\n  border-radius: 8px;\n  gap: 16px;\n`;\n\nexport const StyledColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n`;\n\nexport const SelectedItem = styled.div<{ $fullWidth?: boolean }>`\n  width: ${(props) => (props.$fullWidth ? '100%' : 'auto')};\n`;\n\nexport const SelectedRightColumn = styled(Stack).attrs(() => ({\n  gap: 8,\n  align: 'center',\n}))``;\n","import { t } from 'i18next';\nimport { useState } from 'react';\nimport {\n  Dropdown,\n  type DropdownItemType,\n  type DropdownTargetProps,\n  type DropdownValueType,\n  isValueType,\n} from '@/components/Dropdown';\nimport { Icon } from '@/components/Icon';\nimport { SearchField } from './styles';\nimport { type ApiEntityPickerFieldProps } from './types';\n\nfunction ApiEntityPickerField<Key extends string, Data extends unknown = Key>({\n  options,\n  placeholderText,\n  value,\n  onChange,\n  stickyHeaderOptions,\n  inputValue,\n  onInputChange,\n  inputSize,\n  label,\n  disabled,\n  leftIcon,\n  rightIcon,\n  fullWidth,\n  renderSelectionPreviewComponent,\n  isLoading,\n  autoFocus,\n  hideLeftIconPlace,\n  preselectedOption,\n  error,\n  helperText,\n  readOnly,\n  ...dropdownProps\n}: ApiEntityPickerFieldProps<Key, Data>) {\n  const [isFocused, setIsFocused] = useState(false);\n  const shouldShowNoResults = !options?.length;\n\n  const selectedOption =\n    (options.find(\n      (opt: DropdownItemType) => isValueType(opt) && opt.key === value,\n    ) as DropdownValueType<Data, Key> | undefined) ?? preselectedOption;\n\n  if (renderSelectionPreviewComponent && selectedOption) {\n    return renderSelectionPreviewComponent({\n      onChange,\n      selectedOption,\n      disabled,\n      fullWidth,\n      inputSize,\n    });\n  }\n\n  return (\n    <Dropdown\n      noSearchOptionsText={t('noumena.global_search.no_results')}\n      {...dropdownProps}\n      isLoading={isLoading}\n      isShowEmptyText={shouldShowNoResults}\n      stickyHeaderOptions={stickyHeaderOptions}\n      onSelectOption={onChange}\n      isOpen={isFocused}\n      options={options}\n      calRefTop={false}\n    >\n      {({ inputRef }: DropdownTargetProps<HTMLDivElement>) => (\n        <>\n          <SearchField\n            autoFocus={autoFocus}\n            onFocus={() => setIsFocused(true)}\n            onBlur={() => setTimeout(() => setIsFocused(false), 200)}\n            inputSize={inputSize}\n            placeholder={placeholderText}\n            hideLeftIconPlace={hideLeftIconPlace}\n            ref={inputRef}\n            readOnly={readOnly}\n            leftIcon={\n              leftIcon ?? (\n                <Icon\n                  name=\"search_m\"\n                  size={24}\n                  color=\"--icon-input-neutral-default\"\n                />\n              )\n            }\n            rightIcon={\n              rightIcon ||\n              (!!inputValue && (\n                <Icon\n                  onClick={() => onInputChange?.('')}\n                  name=\"clear_m\"\n                  size={24}\n                  color=\"--icon-input-neutral-default\"\n                />\n              ))\n            }\n            rightIconColor=\"var(--icon-input-brand-primary-default)\"\n            value={inputValue}\n            onChange={(e) => onInputChange?.(e.currentTarget.value)}\n            data-testid=\"global-search-input\"\n            label={label}\n            disabled={disabled}\n            error={error}\n            helperText={helperText}\n          />\n        </>\n      )}\n    </Dropdown>\n  );\n}\n\nexport default ApiEntityPickerField;\n"],"names":["SearchField","styled","TextField","SelectedItemHeader","div","props","$inputSize","StyledColumn","SelectedItem","$fullWidth","SelectedRightColumn","Stack","attrs","gap","align","ApiEntityPickerField","options","placeholderText","value","onChange","stickyHeaderOptions","inputValue","onInputChange","inputSize","label","disabled","leftIcon","rightIcon","fullWidth","renderSelectionPreviewComponent","isLoading","autoFocus","hideLeftIconPlace","preselectedOption","error","helperText","readOnly","dropdownProps","isFocused","setIsFocused","useState","shouldShowNoResults","length","selectedOption","find","opt","isValueType","key","jsx","Dropdown","t","inputRef","Fragment","setTimeout","Icon","e","currentTarget"],"mappings":"2KAKaA,MAAAA,EAAcC,EAAOC,CAAS;AAAA;AAAA;AAAA;AAAA,EAK9BC,EAAqBF,EAAOG;AAAAA;AAAAA;AAAAA;AAAAA,aAIhBC,GAAAA,EAAMC,aAAe,QAAU,WAAa;AAAA;AAAA;AAAA;AAAA;AAAA,EAOxDC,EAAeN,EAAOG;AAAAA;AAAAA;AAAAA;AAAAA,EAMtBI,EAAeP,EAAOG;AAAAA,WACvBC,GAAWA,EAAMI,WAAa,OAAS;AAAA,EAGtCC,EAAsBT,EAAOU,CAAK,EAAEC,MAAM,KAAO,CAC5DC,IAAK,EACLC,MAAO,QACT,EAAE,ICrBF,SAASC,EAAqE,CAC5EC,QAAAA,EACAC,gBAAAA,EACAC,MAAAA,EACAC,SAAAA,EACAC,oBAAAA,EACAC,WAAAA,EACAC,cAAAA,EACAC,UAAAA,EACAC,MAAAA,EACAC,SAAAA,EACAC,SAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAC,gCAAAA,EACAC,UAAAA,EACAC,UAAAA,EACAC,kBAAAA,EACAC,kBAAAA,EACAC,MAAAA,EACAC,WAAAA,EACAC,SAAAA,EACA,GAAGC,CACiC,EAAG,CACvC,KAAM,CAACC,EAAWC,CAAY,EAAIC,WAAS,EAAK,EAC1CC,EAAsB,EAACzB,GAAAA,MAAAA,EAAS0B,QAEhCC,EACH3B,EAAQ4B,KACNC,GAA0BC,EAAYD,CAAG,GAAKA,EAAIE,MAAQ7B,CAAK,GAChBe,EAEpD,OAAIJ,GAAmCc,EAC9Bd,EAAgC,CACrCV,SAAAA,EACAwB,eAAAA,EACAlB,SAAAA,EACAG,UAAAA,EACAL,UAAAA,CAAAA,CACD,EAIDyB,EAACC,GACC,oBAAqBC,EAAE,kCAAkC,EACzD,GAAIb,EACJ,UAAAP,EACA,gBAAiBW,EACjB,oBAAArB,EACA,eAAgBD,EAChB,OAAQmB,EACR,QAAAtB,EACA,UAAW,GAAM,YAAA,WAEhB,SAAC,CAAA,CAAEmC,SAAAA,CAAAA,IAEAH,EAAAI,EAAA,CAAA,SAAAJ,EAAChD,EACC,CAAA,UAAA+B,EACA,QAAS,IAAMQ,EAAa,EAAI,EAChC,OAAQ,IAAMc,WAAW,IAAMd,EAAa,EAAK,EAAG,GAAG,EACvD,UAAAhB,EACA,YAAaN,EACb,kBAAAe,EACA,IAAKmB,EACL,SAAAf,EACA,SACEV,GACEsB,EAACM,EACC,CAAA,KAAK,WACL,KAAM,GACN,MAAM,oDAIZ,UACE3B,GACC,CAAC,CAACN,GACD2B,EAACM,EACC,CAAA,QAAS,IAAMhC,GAAAA,YAAAA,EAAgB,IAC/B,KAAK,UACL,KAAM,GACN,MAAM,+BAA8B,YAAA,OAAA,EAI1C,eAAe,0CACf,MAAOD,EACP,SAAWkC,GAAMjC,GAAAA,YAAAA,EAAgBiC,EAAEC,cAActC,OACjD,cAAY,sBACZ,MAAAM,EACA,SAAAC,EACA,MAAAS,EACA,WAAAC,EAAuB,YAAA,aAAA,CAAA,EAE3B,CAEJ,CAAA,CAEJ"}