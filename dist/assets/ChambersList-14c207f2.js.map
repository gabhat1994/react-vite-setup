{"version":3,"file":"ChambersList-14c207f2.js","sources":["../../src/screens/Chamber/components/ChambersList/ChambersList.tsx"],"sourcesContent":["import { type FC, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  ElementStatusEnum,\n  ProjectChamberType,\n  SpaceStatusEnum,\n} from '@/apollo/generated/types';\nimport ChamberBox from '@/components/ChamberBox/ChamberBox';\nimport { useMarkBroadcastedNoumAsViewedMutation } from '@/apollo/graphql';\nimport {\n  ChamberBoxNameEnum,\n  DiscoveryCategoryEnum,\n} from '@/components/ChamberBox/types';\nimport { getFullName } from '@/utils/fullName';\nimport { useAuth } from '@/features/auth/contexts';\nimport OwnerDefaultImage from '@/assets/images/profile_default.png';\nimport { HandleFollowSearch } from '@/screens/Chamber/components/RightPanel/elements/NoumActions/types';\nimport { useSkeletonIsLoadingContext } from '@/components/SkeletonLoader/SkeletonLoaderProvider';\nimport { type ChambersListProps } from './types';\nimport { ChambersListContainer, ChamberItem } from './styles';\n\nconst { featured, source } = HandleFollowSearch;\n\nexport const ChambersList: FC<ChambersListProps> = ({\n  chambers,\n  fourColumnItem,\n  category,\n}) => {\n  const { user } = useAuth();\n  const { t } = useTranslation();\n  const userId = useMemo(() => user?._id ?? '', [user]);\n  const [markBroadcastedNoumAsViewed] =\n    useMarkBroadcastedNoumAsViewedMutation();\n  const handleMarkBroadcastedNoumAsViewed = useCallback(\n    async (id: string) => {\n      await markBroadcastedNoumAsViewed({\n        variables: { spaceId: id },\n        onCompleted: () => {},\n      });\n    },\n    [markBroadcastedNoumAsViewed],\n  );\n  const { isLoading } = useSkeletonIsLoadingContext();\n\n  const onClickChamber = useCallback(\n    (id: string | null | undefined) => {\n      const isFromFeaturedPage = category === DiscoveryCategoryEnum.Featured;\n      if (isFromFeaturedPage) {\n        handleMarkBroadcastedNoumAsViewed(id ?? '');\n      }\n    },\n    [category, handleMarkBroadcastedNoumAsViewed],\n  );\n\n  const getChamberUrl = (id: string | null | undefined) =>\n    id\n      ? category === DiscoveryCategoryEnum.Featured\n        ? `/noum/${id}?${source}=${featured}`\n        : `/noum/${id}`\n      : undefined;\n\n  return (\n    <ChambersListContainer data-testid=\"chambers-list\">\n      {chambers.map(\n        (chamber, index) =>\n          chamber &&\n          chamber.status !== SpaceStatusEnum.Deleted && (\n            <ChamberItem\n              key={`${chamber._id ? chamber._id + index : index}`}\n              fourColumnItem={fourColumnItem}\n              onClick={() => onClickChamber(chamber?._id)}\n              aria-disabled={isLoading}\n            >\n              <ChamberBox\n                id={chamber._id}\n                url={chamber?.profileImage ?? undefined}\n                chamberUrl={getChamberUrl(chamber?._id)}\n                ownerImageURL={\n                  chamber?.uid?.profile?.profilePicture || OwnerDefaultImage\n                }\n                isSecretNoum={chamber.projectType === ProjectChamberType.Secret}\n                title={chamber.uid?.title || ''}\n                chamberTitle={chamber.name || ''}\n                name={\n                  (chamber.category?.name?.toLowerCase() as ChamberBoxNameEnum) ||\n                  ChamberBoxNameEnum.member\n                }\n                ownedby={\n                  userId === chamber.uid?._id\n                    ? t('noumena.you')\n                    : getFullName(\n                        chamber.uid?.firstName,\n                        chamber.uid?.middleName,\n                        chamber.uid?.lastName,\n                      ) ?? undefined\n                }\n                archived={chamber.status === SpaceStatusEnum.Archived}\n                followers={chamber.followersCount || 0}\n                location={chamber.uid?.location ?? undefined}\n                hasDraftElement={\n                  userId === chamber.uid?._id &&\n                  (chamber.status === ElementStatusEnum.Draft ||\n                    chamber.elements?.some(\n                      (element) =>\n                        element?.status === ElementStatusEnum.Draft ||\n                        (element?.status === ElementStatusEnum.Published &&\n                          element.tempStatus === ElementStatusEnum.Draft),\n                    ))\n                }\n                category={category}\n                startDate={chamber?.broadcastedAt}\n                isFavouriteNoum={chamber.isFavourited || undefined}\n                projectType={chamber.projectType || undefined}\n              />\n            </ChamberItem>\n          ),\n      )}\n    </ChambersListContainer>\n  );\n};\n"],"names":["featured","source","HandleFollowSearch","ChambersList","chambers","fourColumnItem","category","user","useAuth","t","useTranslation","userId","useMemo","_id","markBroadcastedNoumAsViewed","useMarkBroadcastedNoumAsViewedMutation","handleMarkBroadcastedNoumAsViewed","useCallback","id","variables","spaceId","onCompleted","isLoading","useSkeletonIsLoadingContext","onClickChamber","DiscoveryCategoryEnum","Featured","getChamberUrl","undefined","jsx","ChambersListContainer","map","chamber","index","status","SpaceStatusEnum","Deleted","ChamberItem","ChamberBox","profileImage","uid","profile","profilePicture","OwnerDefaultImage","projectType","ProjectChamberType","Secret","title","name","toLowerCase","ChamberBoxNameEnum","member","getFullName","firstName","middleName","lastName","Archived","followersCount","location","ElementStatusEnum","Draft","elements","some","element","Published","tempStatus","broadcastedAt","isFavourited"],"mappings":"wQAqBA,KAAM,CAAEA,SAAAA,EAAUC,OAAAA,CAAO,EAAIC,EAEhBC,EAAsCA,CAAC,CAClDC,SAAAA,EACAC,eAAAA,EACAC,SAAAA,CACF,IAAM,CACE,KAAA,CAAEC,KAAAA,GAASC,EAAS,EACpB,CAAEC,EAAAA,GAAMC,EAAgB,EACxBC,EAASC,UAAQ,KAAML,GAAAA,YAAAA,EAAMM,MAAO,GAAI,CAACN,CAAI,CAAC,EAC9C,CAACO,CAA2B,EAChCC,IACIC,EAAoCC,cACxC,MAAOC,GAAe,CACpB,MAAMJ,EAA4B,CAChCK,UAAW,CAAEC,QAASF,CAAG,EACzBG,YAAaA,IAAM,CAAC,CAAA,CACrB,CAAA,EAEH,CAACP,CAA2B,CAAC,EAEzB,CAAEQ,UAAAA,GAAcC,EAA6B,EAE7CC,EAAiBP,cACpBC,GAAkC,CACNZ,IAAamB,EAAsBC,UAE5DV,EAAkCE,GAAM,EAAE,CAC5C,EAEF,CAACZ,EAAUU,CAAiC,CAAC,EAGzCW,EAAiBT,GACrBA,EACIZ,IAAamB,EAAsBC,SAChC,SAAQR,KAAMjB,KAAUD,IACxB,SAAQkB,IACXU,OAEN,OACGC,EAAAC,EAAA,CAAsB,cAAY,gBAAe,YAAA,qCAC/C1B,SAAAA,EAAS2B,IACR,CAACC,EAASC,IACRD,6BAAAA,OAAAA,GACAA,EAAQE,SAAWC,EAAgBC,SACjCP,EAACQ,EAEC,CAAA,eAAAhC,EACA,QAAS,IAAMmB,EAAeQ,GAAAA,YAAAA,EAASnB,GAAG,EAC1C,gBAAeS,EAAU,YAAA,2BAEzB,WAACgB,EACC,CAAA,GAAIN,EAAQnB,IACZ,KAAKmB,GAAAA,YAAAA,EAASO,eAAgBX,OAC9B,WAAYD,EAAcK,GAAAA,YAAAA,EAASnB,GAAG,EACtC,gBACEmB,GAAAA,EAAAA,GAAAA,YAAAA,EAASQ,MAATR,YAAAA,EAAcS,UAAdT,YAAAA,EAAuBU,iBAAkBC,EAE3C,aAAcX,EAAQY,cAAgBC,EAAmBC,OACzD,QAAOd,EAAAA,EAAQQ,MAARR,YAAAA,EAAae,QAAS,GAC7B,aAAcf,EAAQgB,MAAQ,GAC9B,OACGhB,GAAAA,EAAAA,EAAQ1B,WAAR0B,YAAAA,EAAkBgB,OAAlBhB,YAAAA,EAAwBiB,gBACzBC,EAAmBC,OAErB,QACExC,MAAWqB,EAAAA,EAAQQ,MAARR,YAAAA,EAAanB,KACpBJ,EAAE,aAAa,EACf2C,GACEpB,EAAAA,EAAQQ,MAARR,YAAAA,EAAaqB,WACbrB,EAAAA,EAAQQ,MAARR,YAAAA,EAAasB,YACbtB,EAAAA,EAAQQ,MAARR,YAAAA,EAAauB,QAAQ,GAClB3B,OAEX,SAAUI,EAAQE,SAAWC,EAAgBqB,SAC7C,UAAWxB,EAAQyB,gBAAkB,EACrC,WAAUzB,EAAAA,EAAQQ,MAARR,YAAAA,EAAa0B,WAAY9B,OACnC,gBACEjB,MAAWqB,EAAAA,EAAQQ,MAARR,YAAAA,EAAanB,OACvBmB,EAAQE,SAAWyB,EAAkBC,SACpC5B,EAAAA,EAAQ6B,WAAR7B,YAAAA,EAAkB8B,KACfC,IACCA,GAAAA,YAAAA,EAAS7B,UAAWyB,EAAkBC,QACrCG,GAAAA,YAAAA,EAAS7B,UAAWyB,EAAkBK,WACrCD,EAAQE,aAAeN,EAAkBC,SAGnD,SAAAtD,EACA,UAAW0B,GAAAA,YAAAA,EAASkC,cACpB,gBAAiBlC,EAAQmC,cAAgBvC,OACzC,YAAaI,EAAQY,aAAehB,OAAU,YAAA,yBAAA,CAAA,CAAA,EA5C1C,GAAEI,EAAQnB,IAAMmB,EAAQnB,IAAMoB,EAAQA,GA8C9C,EACD,CAEP,CAAA,CAEJ"}