import{m as fe,T as H,dJ as Te,dK as Fe,kz as Ee,kA as Ge,dC as Ie,kB as Xe,v as le,aa as pe,c as p,ab as _,j as e,S as s,y as $,B as M,kC as Ye,x as B,kD as Ce,kE as Je,kF as Ze,kG as et,I as Y,jL as Oe,A as tt,n as ge,G as Ae,J as ue,H as _e,F as at,a4 as nt,kH as rt,cZ as re,c4 as ke,M as ot,ci as st,R as We,kI as it}from"./index-cd84bcc9.js";import{C as F,aG as Le,r,am as lt,an as he,B as b,bH as dt,f as ie,ar as de,ap as ye,aq as mt,bb as ve,bE as ut,bz as ct,a9 as Be}from"./vendor-51460554.js";import{S as pt}from"./Stepper-2453d15a.js";import{M as ht,A as ft,n as gt}from"./MaskedDatePicker-ec2376be.js";import{c as Pe}from"./countries-4aa86a38.js";import{C as yt}from"./CountryPicker-2d42d72f.js";import{O as xt}from"./OtpInput-6d75f9c8.js";import{i as St}from"./email-9dc89e57.js";import{S as X,a as ee}from"./SetupPin-06f1ecff.js";import{E as bt}from"./trackingEvents-87d8ea4c.js";import{D as Tt}from"./done-439b31ee.js";import"./styles-0c3f5396.js";import"./styles-e426deab.js";import"./browser-f98ef106.js";import"./Flag-d41fef47.js";const z=F.div`
  width: 438px;
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  padding-left: ${({isMobile:t})=>t?"16px":"0px"};
  padding-right: ${({isMobile:t})=>t?"16px":"0px"};
  @media (max-width: ${fe.MOBILE_L_MAX}) {
    width: 95%;
  }
`,ne=F(H)`
  text-align: center;
`,U=F(H)`
  text-align: center;
`,Ft=F(U)``,te=F(H)`
  padding-left: ${({leftMargin:t})=>t?"12px":"0"};
`,Et=F.div`
  position: relative;
  width: 100%;
`,Ct=Le`
0% { opacity: 1; visibility: visible; z-index: 100; position: static;}
100% { opacity: 0; visibility: hidden; z-index: -1; height: 0; }

`,At=F.div`
  text-align: center;
  align-items: 'center';
  justify-content: 'center';
  width: 100%;
  opacity: 0;
  animation-name: ${Ct};
  animation-duration: 3s;
  animation-fill-mode: forwards;
`,_t=Le`
0% { opacity: 1;}
100% {opacity: 1;}
`,kt=F.div`
  width: 100%;
  opacity: 0;
  animation-name: ${_t};
  animation-duration: ${t=>t.duration}s;
  animation-delay: 3s;
  text-align: center;
  align-items: 'center';
  justify-content: 'center';
`,ae=F(U)`
  color: var(--text-body-header-neutral-default);
  font-size: var(--font-input-small-size);
  text-align: left;
`,oe=F.a`
  text-decoration: none;
`,se=F(ae)`
  color: var(--text-skillbadge-brand-primary-selected);
`,Ve={firstName:"",lastName:"",email:"",address1:"",city:"",state:"",country:"",postalCode:"",dateOfBirth:"",ssn:"",citizenship:""},vt={firstName:"",lastName:"",email:"",citizenship:"",dateOfBirth:"",ssn:"",address:null},J=r.createContext({handleNextStep:()=>null,handlePreviousStep:()=>null,setPayLoad:null,currentUser:vt,payLoad:Ve,setPasscode:null,passCode:null,setState:()=>null}),we=t=>{const u=Date.now()-new Date(t).getTime(),c=new Date(u);return Math.abs(c.getUTCFullYear()-1970)},Pt=lt({firstName:he().trim().required(b("noumena.input.not_empty")).min(2,b("noumena.signup.first_name.too_short")).max(20,b("noumena.signup.first_name.too_long")).test("Two letter name validation",b("noumena.signup.two_digit_first_name.incorrect"),t=>t&&t.length<=2?Te.test(t):!0).matches(Fe,b("noumena.signup.first_name.incorrect")).matches(Ee,b("noumena.signup.first_name.incorrect")),lastName:he().trim().required(b("noumena.input.not_empty")).min(2,b("noumena.signup.last_name.too_short")).max(20,b("noumena.signup.last_name.too_long")).test("Two letter name validation",b("noumena.signup.two_digit_last_name.incorrect"),t=>t&&t.length<=2?Te.test(t):!0).matches(Fe,b("noumena.signup.last_name.incorrect")).matches(Ee,b("noumena.signup.first_name.incorrect")),ssn:he().trim().required(b("noumena.input.not_empty")).matches(Ge,b("noumena.signup.ssn.incorrect")),dateOfBirth:dt().required(b("noumena.input.not_empty"))}).required(),wt=()=>{var O,h,D;const[t,{loading:u}]=Ie({onError:S=>{i("error","none",` ${S.message}`),ie(S,{tags:{section:"updateUserProfileSetupWallet"}})}}),[c,{loading:y}]=Xe({onError:S=>{i("error","none",`${S.message}`),ie(S,{tags:{section:"updateUserKycSetupWallet"}})}}),{handleNextStep:a,currentUser:n,setPayLoad:k}=r.useContext(J),{addToast:i}=le(),x=pe(),{t:d}=de(),{getValues:m,register:W,handleSubmit:f,control:v,setValue:E,trigger:C,formState:{errors:P,isDirty:L,isValid:T}}=ye({mode:"onChange",resolver:mt(Pt),defaultValues:{firstName:"",lastName:"",dateOfBirth:void 0,citizenship:"",ssn:""}});r.useEffect(()=>{n&&(E("firstName",n.firstName||"",{shouldValidate:!0,shouldDirty:!0}),E("lastName",n.lastName||"",{shouldValidate:!0,shouldDirty:!0}),E("citizenship",`${n.citizenship||"us"}`,{shouldValidate:!0,shouldDirty:!0}),E("ssn",n.ssn||"",{shouldDirty:!0}),E("dateOfBirth",n.dateOfBirth?new Date(n.dateOfBirth):void 0,{shouldDirty:!0}),C())},[n,E,C]);const w=async S=>{var K;const{firstName:A,lastName:N,ssn:g,dateOfBirth:Z,citizenship:q}=S,I=Ye(Z.toDateString()).split(" ")[0].split("/");if(we(`${I[2]}-${I[0]}-${I[1]}`)<18||we(`${I[2]}-${I[0]}-${I[1]}`)>125)i("error","none",d("noumena.money.setupWallet.date.error"));else{if(!k)return;k(j=>{var o;return{...j,firstName:A,lastName:N,ssn:g,dateOfBirth:`${I[2]}-${I[0]}-${I[1]}`,citizenship:(o=Pe.find(me=>me.name.toLocaleLowerCase()===q.toLocaleLowerCase()))==null?void 0:o.iso2,country:q}});const{errors:Q}=await t({variables:{input:{firstName:A,lastName:N,citizenship:(K=Pe.find(j=>j.name.toLocaleLowerCase()===q.toLocaleLowerCase()))==null?void 0:K.iso2}}}),{errors:G}=await c({variables:{input:{ssn:g,dob:`${I[2]}-${I[0]}-${I[1]}`}}});!Q&&!G&&a()}};return p(z,{isMobile:_.MOBILE===x,"data-test":"FormPersonalInformation-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormPersonalInformation-FormText",children:d("noumena.money.setupWallet.personal_information.form_text")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormPersonalInformation-FormHelperText",children:d("noumena.money.setupWallet.personal_information.form_sub_text")}),e(s,{height:64,"data-test":"FormPersonalInformation-Spacer"}),p("form",{onSubmit:f(w),style:{width:"100%",paddingBottom:"16px"},children:[e($,{"data-testid":"step-one-firstName",label:d("noumena.legal.first_name"),...W("firstName",{required:{value:!0,message:d("noumena.input.not_empty")}}),value:m("firstName"),error:!!P.firstName,helperText:(O=P.firstName)==null?void 0:O.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e($,{"data-testid":"step-one-lastName",label:d("noumena.legal.last_name"),...W("lastName",{required:{value:!0,message:d("noumena.input.not_empty")}}),value:m("lastName"),error:!!P.lastName,helperText:(h=P.lastName)==null?void 0:h.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(ve,{control:v,name:"dateOfBirth","data-testid":"step-one-dob",render:({field:{onChange:S,value:A}})=>{var N;return e(ht,{required:!0,layout:"dropdown",onChange:S,value:A,placement:"bottom-end",label:d("noumena.date_of_birth"),maxDate:new Date,error:!!P.dateOfBirth,helperText:(N=P.dateOfBirth)==null?void 0:N.message,fromYear:new Date().getFullYear()-100,"data-test":"FormPersonalInformation-MaskedDatePicker"})},"data-test":"FormPersonalInformation-Controller"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(ve,{"data-testid":"step-one-country",control:v,name:"citizenship",rules:{required:!0},render:({field:{onChange:S,value:A}})=>e(yt,{onCountryCodeChange:S,value:A,disabled:!0,"data-test":"FormPersonalInformation-CountryPicker"}),"data-test":"FormPersonalInformation-Controller"}),e(te,{font:"footnote",colorToken:"--text-input-neutral-default",leftMargin:!0,"data-test":"FormPersonalInformation-Note",children:d("noumena.money.setupWallet.personal_information.wallet_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e($,{"data-testid":"step-one-ssn",label:d("noumena.ssn_esn"),...W("ssn",{required:{value:!0,message:d("noumena.input.not_empty")}}),value:m("ssn"),error:!!P.ssn,helperText:(D=P.ssn)==null?void 0:D.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(te,{font:"footnote-bold",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:d("noumena.money.setupWallet.personal_information.encryption_heading")}),e(s,{height:1,"data-test":"FormPersonalInformation-Spacer"}),e(te,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:d("noumena.money.setupWallet.personal_information.encryption_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(te,{font:"footnote-bold",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:d("noumena.money.setupWallet.personal_information.creditScore_heading")}),e(s,{height:1,"data-test":"FormPersonalInformation-Spacer"}),e(te,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:d("noumena.money.setupWallet.personal_information.creditScore_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(M,{"data-testid":"step-one-submit-button",type:"submit",primary:!0,size:"full",disabled:!L||!T||u||y,loading:u||y,"data-test":"FormPersonalInformation-Button",children:d("noumena.continue")})]})]})},It=({selectdAddress:t})=>{var i,x,d,m,W;const{t:u}=de(),{register:c,getValues:y,setValue:a,formState:{errors:n}}=ut();r.useEffect(()=>{a("street",`${t?t.split(",")[0]:""}`,{shouldValidate:!0}),a("apartment",`${t?t.split(",")[1]:""}`),a("city",`${t?t.split(",")[2]:""}`,{shouldValidate:!0}),a("state",`${t?t.split(",")[3]:""}`,{shouldValidate:!0}),a("postalCode",`${t?t.split(",")[4]:""}`,{shouldValidate:!0})},[t,a]);const k=f=>/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(f)?!0:"Enter valid zip code";return p(B,{fullWidth:!0,vertical:!0,gap:16,"data-testid":"address-form","data-test":"AddressForm-Stack",children:[e($,{...c("street",{required:{value:!0,message:u("noumena.input.not_empty")},validate:{isNotIncludesSpecialCharacters:f=>Ce.test(f)||"Special characters are not allowed"}}),"data-testid":"step-two-street",label:u("noumena.money.setupWallet.address.street"),value:y("street"),error:!!n.street,helperText:(i=n.street)==null?void 0:i.message,"data-test":"AddressForm-TextField"}),e($,{...c("apartment",{validate:{isNotIncludesSpecialCharacters:f=>Ce.test(f)||f.length===0||"Special characters are not allowed"}}),error:!!n.apartment,"data-testid":"step-one-apartment",label:u("noumena.money.setupWallet.address.apartment_optional"),value:y("apartment"),helperText:(x=n.apartment)==null?void 0:x.message,"data-test":"AddressForm-TextField"}),e($,{...c("city",{required:{value:!0,message:u("noumena.input.not_empty")},validate:{isValidText:f=>Je.test(f)||"Invalid input"}}),"data-testid":"step-one-city",label:u("noumena.money.setupWallet.address.city"),value:y("city"),error:!!n.city,helperText:(d=n.city)==null?void 0:d.message,"data-test":"AddressForm-TextField"}),p(B,{fullWidth:!0,gap:16,"data-test":"AddressForm-Stack",children:[e($,{...c("state",{required:{value:!0,message:u("noumena.input.not_empty")},validate:{isValidAddress:f=>Ze.test(f)||"State must be a 2-letter abbreviation"}}),"data-testid":"step-one-state",label:u("noumena.money.setupWallet.address.state"),value:y("state"),error:!!n.state,helperText:(m=n.state)==null?void 0:m.message,"data-test":"AddressForm-TextField"}),e($,{...c("postalCode",{required:{value:!0,message:u("noumena.input.not_empty")},validate:{isValidPostalCode:f=>k(f)}}),"data-testid":"step-one-zip-code",label:u("noumena.money.setupWallet.address.zip_code"),value:y("postalCode"),error:!!n.postalCode,helperText:(W=n.postalCode)==null?void 0:W.message,"data-test":"AddressForm-TextField"})]})]})},Ot=()=>{const{handleNextStep:t,setPayLoad:u,payLoad:c,handlePreviousStep:y,currentUser:{address:a}}=r.useContext(J),{t:n}=de(),{addToast:k}=le(),i=pe(),[x,{loading:d}]=et({onCompleted:()=>t(),onError:h=>{k("error","none",`${h==null?void 0:h.message}`),ie(h,{tags:{section:"updateUserAddressSetupWallet"}})}}),m=r.useMemo(()=>c.postalCode?{city:c.city,state:c.state,country:c.country,postalCode:c.postalCode,street:c.street,apartment:c.apartment}:null,[c]),[W,f]=r.useState(null),[v,E]=r.useState(!!(a||m)),C=ye({mode:"onChange",defaultValues:{street:"",apartment:"",city:"",state:"",postalCode:""}}),{reset:P,formState:{isValid:L},setValue:T}=C,w=async h=>{if(!v){E(!0);return}if(!u)return;const D={address1:`${h.street} ${h.apartment}`,city:h.city,state:h.state,postalCode:h.postalCode,street:h.street,apartment:h.apartment};await x({variables:{input:{street:h.street,apartment:h.apartment,city:h.city,state:h.state,zipcode:h.postalCode}}}),u(S=>({...S,...D}))},O=r.useCallback(()=>{k("error","none",`${n("noumena.money.setupWallet.lookup.fail.text")}`),E(!0)},[E,k,n]);return r.useEffect(()=>{(a||m)&&(T("apartment",(m==null?void 0:m.apartment)||(a==null?void 0:a.apartment)||"",{shouldValidate:!0,shouldDirty:!0}),T("street",(m==null?void 0:m.street)||(a==null?void 0:a.street)||"",{shouldValidate:!0,shouldDirty:!0}),T("city",(m==null?void 0:m.city)||(a==null?void 0:a.city)||"",{shouldValidate:!0,shouldDirty:!0}),T("state",(m==null?void 0:m.state)||(a==null?void 0:a.state)||"",{shouldValidate:!0,shouldDirty:!0}),T("postalCode",(m==null?void 0:m.postalCode)||(a==null?void 0:a.postalCode)||"",{shouldValidate:!0,shouldDirty:!0}))},[a,m,T]),p(z,{"data-test":"FormAddress-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormAddress-FormText",children:n("noumena.money.setupWallet.address.form_text")}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormAddress-FormHelperText",children:n("noumena.money.setupWallet.address.form_sub_text")}),e(s,{height:64,"data-test":"FormAddress-Spacer"}),p("form",{style:{width:"100%"},onSubmit:C.handleSubmit(w),children:[v?e(ct,{...C,"data-test":"FormAddress-FormProvider",children:e(It,{selectdAddress:W||"","data-test":"FormAddress-AddressForm"})}):e(ft,{setSelectedAddress:f,setShowForm:E,onLookupFailed:O,"data-test":"FormAddress-AddressDropdown"}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),e(te,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormAddress-Note",children:n("noumena.money.setupWallet.address.note")}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px"},"data-test":"FormAddress-Stack",children:[e(M,{"data-testid":"step-two-back-button",type:"button",style:i===_.MOBILE?{width:"102px"}:void 0,size:i!==_.MOBILE?"large":void 0,onClick:()=>{v?(E(!1),P()):y()},leftIcon:e(Y,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormAddress-Icon"}),"data-test":"FormAddress-Button",children:n("noumena.back.text")}),e(M,{loading:d,"data-testid":"step-two-submit-button",type:"submit",primary:!0,size:i!==_.MOBILE?"full":void 0,style:i===_.MOBILE?{width:"226px"}:void 0,disabled:!v&&!1||!L||d,"data-test":"FormAddress-Button",children:n(v?"noumena.continue":"noumena.money.setupWallet.enter.address.buuton")})]})]})]})},Wt=()=>{var be;const{data:t}=Oe(),{handleNextStep:u,handlePreviousStep:c,setPayLoad:y,setState:a,currentUser:{email:n}}=r.useContext(J),[k,i]=r.useState(1),[x,d]=r.useState(),[m,W]=r.useState(!1),[f,v]=r.useState(""),[E,C]=r.useState(!1),[P,L]=r.useState(!1),T=90,[w,O]=r.useState(0),[h]=Ie(),{returnNewReCaptcha:D}=tt();r.useEffect(()=>{t!=null&&t.checkPassCodeExists&&W(t==null?void 0:t.checkPassCodeExists)},[t]);const{addToast:S}=le(),A=pe(),N=3,{t:g}=de(),{getValues:Z,register:q,reset:I,handleSubmit:K,setValue:Q,formState:{errors:G,isDirty:j,isValid:o}}=ye({mode:"onChange",defaultValues:{email:""}});r.useEffect(()=>{n&&Q("email",n,{shouldDirty:!0,shouldValidate:!0})},[n,Q]);const me=(l,R,V)=>{ie(l,{tags:{section:"signupEmailSetupWallet"}}),V&&S("error","none",R)},Me=()=>{C(!1),O(0)},Ne=()=>{k===1&&i(2)},De=()=>{k===2&&i(1)},Re=(l,R)=>{C(l>0||R!==N),O(l)},xe={"Invalid OTP, Please try again!":g`noumena.resend_otp_invalid_code.text`},$e=l=>l&&xe[l]?xe[l]:l||"",ze=()=>{m?a(6):u()},Se=async l=>{if(L(!0),v(l),n===l&&y){y(Qe=>({...Qe,email:l})),ze();return}const R=await D(),V=await Ae.signUpEmail(l,R,!1);V!=null&&V.errorMessage?(me(new Error(ue(V)),`${ue(V)}`,!1),V.errorStatus===102&&S("error","none",_e.BLOCKED_IP)):(Re(V.nextRequestAfterInSecond,V.remainingRequest),S("success","none",`${V.message}`),I({email:""}),Ne()),L(!1)},Ue=async({email:l})=>{v(l),Se(l)},qe=()=>{d(""),Se(f)},je=async()=>{if(x){L(!0);const l=await Ae.signUpEmailVerification(f,x,void 0,void 0,!0);!(l!=null&&l.errorMessage)&&y?(y(R=>({...R,email:f})),h({variables:{input:{email:f}}}),u()):(me(new Error(ue(l)),$e(ue(l)),!0),l.errorStatus===102&&S("error","none",_e.BLOCKED_IP),d("")),L(!1)}},He=({duration:l,handleTimedOut:R})=>l!==0&&l<=T?p(at,{children:[e(At,{"data-test":"FormEmailVerification-RenderResendOTPMessage-StyledResendSpan",children:p(H,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:[g("noumena.resend_otp_code_sent.text")," "]})}),e(kt,{duration:l,"data-test":"FormEmailVerification-RenderResendOTPMessage-StyledResendWaitSpan",children:p(H,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:[g("noumena.resend_otp_please_wait.text")," ",e(nt,{initialSeconds:l,timedOut:R,"data-test":"FormEmailVerification-RenderResendOTPMessage-Timer"})," ",g("noumena.resend_otp_before_request.text")]})})]}):e(H,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:g("noumena.resend_otp_please_wait_24h.text")}),Ke=()=>E?e(H,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-renderResendOTPInfo-TSpan",children:e(He,{handleTimedOut:Me,duration:w,"data-test":"FormEmailVerification-renderResendOTPInfo-RenderResendOTPMessage"})}):e(M,{primary:!0,textOnly:!0,size:"small",disabled:P,onClick:qe,"data-testid":"handleResendOtpID","data-test":"FormEmailVerification-renderResendOTPInfo-Button",children:e(H,{colorToken:"--text-button-brand-secondary-default","data-test":"FormEmailVerification-renderResendOTPInfo-TSpan",children:g("noumena.signup.otp.resend_code")})});return e(z,{"data-test":"FormEmailVerification-FormWrapper",children:k===1?p(z,{"data-test":"FormEmailVerification-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormText",children:g("noumena.money.setupWallet.email.form_text")}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormHelperText",children:g("noumena.money.setupWallet.email.sub_text")}),e(s,{height:64,"data-test":"FormEmailVerification-Spacer"}),p("form",{onSubmit:K(Ue),style:{width:"100%",height:"90%",display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[e($,{"data-testid":"step-three-email",label:g("noumena.email_address"),...q("email",{required:{value:!0,message:g("noumena.input.not_empty")},validate:{isValidEmail:l=>St(l)||g("noumena.signup.error.incorrect_email")}}),value:Z("email"),error:!!G.email,helperText:(be=G.email)==null?void 0:be.message,"data-test":"FormEmailVerification-TextField"}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),P?p(Et,{"data-test":"FormEmailVerification-StyledSpinner",children:[e(s,{height:40,"data-test":"FormEmailVerification-Spacer"}),e(ge,{"data-test":"FormEmailVerification-Spinner"})]}):p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px"},"data-test":"FormEmailVerification-Stack",children:[e(M,{"data-testid":"step-three-back-button-sub-state-one",type:"button",style:A===_.MOBILE?{width:"102px"}:void 0,size:A!==_.MOBILE?"large":void 0,onClick:c,leftIcon:e(Y,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormEmailVerification-Icon"}),"data-test":"FormEmailVerification-Button",children:g("noumena.back.text")}),e(M,{"data-testid":"step-three-next-button-sub-state-one",type:"submit",primary:!0,size:A!==_.MOBILE?"full":void 0,style:A===_.MOBILE?{width:"226px"}:void 0,disabled:!j||!o,"data-test":"FormEmailVerification-Button",children:g("noumena.continue")})]})]})]}):p(z,{"data-test":"FormEmailVerification-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormText",children:g("noumena.signup.error.confirm_email_text")}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormHelperText",children:`${g("noumena.signup.error.confirm_email_sub_text")} `}),e(s,{height:64,"data-test":"FormEmailVerification-Spacer"}),e(xt,{value:x,onChange:l=>d(l),"data-test":"FormEmailVerification-OtpInput"}),e(s,{height:32,"data-test":"FormEmailVerification-Spacer"}),p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px"},"data-test":"FormEmailVerification-Stack",children:[e(M,{"data-testid":"step-one-submit-button",type:"button",onClick:De,style:A===_.MOBILE?{width:"102px"}:void 0,size:A!==_.MOBILE?"large":void 0,leftIcon:e(Y,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormEmailVerification-Icon"}),"data-test":"FormEmailVerification-Button",children:g("noumena.back.text")}),e(M,{"data-testid":"step-one-submit-button",type:"submit",primary:!0,size:A!==_.MOBILE?"full":void 0,style:A===_.MOBILE?{width:"226px"}:void 0,disabled:(x==null?void 0:x.length)!==4,onClick:je,"data-test":"FormEmailVerification-Button",children:g("noumena.continue")})]}),e(s,{height:32,"data-test":"FormEmailVerification-Spacer"}),Ke()]})})},Lt=()=>{const{handlePreviousStep:t,handleNextStep:u,setPasscode:c}=r.useContext(J),y=r.useCallback(a=>{c&&c(a)},[c]);return e(z,{"data-test":"FormPinCode-FormWrapper",children:e(X,{onContinueButtonClick:u,onPassCodeConfirm:y,handleBack:t,"data-test":"FormPinCode-SetupPin",children:p(B,{align:"center",vertical:!0,justify:"center","data-test":"FormPinCode-Stack",children:[e(X.Header,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default"}),e(s,{height:16,"data-test":"FormPinCode-Spacer"}),e(X.HelperText,{}),e(s,{height:64,"data-test":"FormPinCode-Spacer"}),e(X.Otp,{}),e(s,{height:32,"data-test":"FormPinCode-Spacer"}),e(X.ShowPasswordButton,{}),e(s,{height:32,"data-test":"FormPinCode-Spacer"}),p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px"},"data-test":"FormPinCode-Stack",children:[e("div",{style:{width:"30%"},children:e(X.BackButton,{})}),e("div",{style:{width:"70%"},children:e(X.ContinueButton,{})})]})]})})})},Bt=()=>{const{handleNextStep:t,handlePreviousStep:u,passCode:c}=r.useContext(J);return e(z,{"data-test":"FormSecurityQuestion-FormWrapper",children:p(ee,{handlePreviousStep:u,passCode:c,handleNextStep:t,"data-test":"FormSecurityQuestion-SecurityQuestions",children:[e(ee.Header,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default"}),e(s,{height:16,"data-test":"FormSecurityQuestion-Spacer"}),e(ee.HelperText,{}),e(s,{height:64,"data-test":"FormSecurityQuestion-Spacer"}),e(ee.Questions,{}),e(s,{height:32,"data-test":"FormSecurityQuestion-Spacer"}),p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px",paddingBottom:"38px"},"data-test":"FormSecurityQuestion-Stack",children:[e(ee.BackButton,{}),e(ee.ContinueButton,{})]})]})})},Vt=F(B)`
  width: 279px;
`,Mt=F.div`
  position: relative;
  margin-bottom: 20px;
`,Nt=()=>{const{data:t}=Oe({variables:{}}),{handleNextStep:u,handlePreviousStep:c,setState:y,payLoad:a}=r.useContext(J),[n,k]=r.useState(!1);r.useEffect(()=>{t!=null&&t.checkPassCodeExists&&k(t==null?void 0:t.checkPassCodeExists)},[t]);const{t:i}=de(),{addToast:x}=le(),[d,m]=r.useState(!1),[W,f]=r.useState(!1),[v,{loading:E}]=rt({onCompleted:()=>{st(bt.SETUP_WALLET.MASTER_WALLET_CREATE_REQUESTED)}}),C=pe(),P=r.useCallback(()=>p(ae,{font:"body-m","data-test":"FormTermsAndAgreement-getFirstTerm-FormTerms",children:[`${i("noumena.money.setupWallet.terms.i_agree_to_the_text")} `,e(oe,{href:re.PRIVACY,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(se,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:i("noumena.money.setupWallet.terms.privacy_policy")})}),` ${i("noumena.and")} `,e(oe,{href:re.TERMS,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(se,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:i("noumena.money.setupWallet.terms.terms_services")})}),` ${i("noumena.asWellAsOurPartner")} `,e(oe,{href:re.DWOLLA_TERMS,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(se,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:i("noumena.money.setupWallet.terms.dwolla.terms_services")})}),` ${i("noumena.and")} `,e(oe,{href:re.DWOLLA_PRIVACY,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(se,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:i("noumena.money.setupWallet.terms.dwolla.privacy")})})]}),[i]),L=r.useCallback(()=>p(ae,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-getSecondTerm-FormTerms",children:[`${i("noumena.money.setupWallet.terms.i_agree_to_the_text")} `,e(oe,{href:re.CONSENT_ELECTRONIC_DISCLOSURE,target:"_blank","data-test":"FormTermsAndAgreement-getSecondTerm-FormLink",children:e(se,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getSecondTerm-FormLinkText",children:i("noumena.money.setupWallet.terms.electronic.consent")})})]}),[i]),T=r.useCallback(async()=>{const w={...a,dateOfBirth:typeof a.dateOfBirth=="number"?String(a.dateOfBirth):a.dateOfBirth};delete w.citizenship,delete w.street,delete w.apartment;try{await v({variables:{input:w}}),u()}catch(O){if(ie(O,{tags:{section:"createWalletSetupWallet"}}),O instanceof Error){if(O.message.includes("Address1")){const h=O.message.replaceAll("Address1","Street or apartment");x("error","none",h)}x("error","none",`${O.message}`)}else x("error","none"," Unable to create wallet try again")}},[v,u,a,x]);return p(z,{style:C===_.MOBILE?{paddingBottom:"16px"}:void 0,"data-test":"FormTermsAndAgreement-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormTermsAndAgreement-FormText",children:i("noumena.money.setupWallet.terms.text")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ae,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:i("noumena.money.setupWallet.terms.paragraph_one")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ae,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:i("noumena.money.setupWallet.terms.paragraph_two")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ae,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:i("noumena.money.setupWallet.terms.paragraph_three")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),p(B,{gap:10,justify:"flex-start","data-test":"FormTermsAndAgreement-Stack",children:[e(ke,{"data-testid":"check-box-one",isChecked:d,onChange:w=>m(w),icon:e(Y,{name:"tick_m",size:23.5,color:"--icon-checkbox-neutral-alt-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Checkbox"}),P()]}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),p(B,{gap:10,justify:"flex-start",fullWidth:!0,"data-test":"FormTermsAndAgreement-Stack",children:[e(ke,{"data-testid":"check-box-two",isChecked:W,onChange:w=>f(w),icon:e(Y,{name:"tick_m",size:23.5,color:"--icon-checkbox-neutral-alt-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Checkbox"}),L()]}),e(s,{height:32,"data-test":"FormTermsAndAgreement-Spacer"}),p(B,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px",paddingBottom:"24px"},"data-test":"FormTermsAndAgreement-Stack",children:[e(M,{"data-testid":"step-six-back-button",type:"button",style:C===_.MOBILE?{width:"102px"}:void 0,size:C!==_.MOBILE?"large":void 0,onClick:()=>{n?y(3):c()},leftIcon:e(Y,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Button",children:i("noumena.back.text")}),e(M,{"data-testid":"step-six-submit-button",primary:!0,size:C!==_.MOBILE?"full":void 0,style:C===_.MOBILE?{width:"226px"}:void 0,onClick:T,disabled:!d||!W,"data-test":"FormTermsAndAgreement-Button",children:i("noumena.agree_apply.text")})]}),e(ot,{isFullScreen:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:E,"data-test":"FormTermsAndAgreement-Modal",children:p(Vt,{vertical:!0,align:"center",justify:"flex-start","data-test":"FormTermsAndAgreement-ModalContent",children:[e(Mt,{"data-test":"FormTermsAndAgreement-ModalSpinner",children:e(ge,{"data-test":"FormTermsAndAgreement-Spinner"})}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormTermsAndAgreement-FormHelperText",children:i("noumena.money.setupWallet.terms.creating.account")})]})})]})},Dt=()=>{const t=Be(),u=()=>{t(We.MONEY)};return p(z,{"data-test":"Done-FormWrapper",children:[e(ne,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"Done-FormText",children:b("noumena.money.setupWallet.done.text")}),e(s,{height:64,"data-test":"Done-Spacer"}),e("img",{src:Tt,alt:"done=logo"}),e(s,{height:64,"data-test":"Done-Spacer"}),p(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"Done-FormHelperText",children:[b("noumena.money.setupWallet.done.sub_text_one"),e(Ft,{font:"body-l-bold",colorToken:"--text-body-header-neutral-default","data-test":"Done-FormHelperTextBold",children:` ${b("noumena.money.setupWallet.done.sub_text_Money.home.page")}`})]}),e(s,{height:16,"data-test":"Done-Spacer"}),e(U,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"Done-FormHelperText",children:b("noumena.money.setupWallet.done.sub_text_two")}),e(s,{height:64,"data-test":"Done-Spacer"}),e(M,{"data-testid":"done-submit-button",type:"submit",primary:!0,size:"full",onClick:u,"data-test":"Done-Button",children:b("noumena.continue")})]})},Rt=F.div`
  width: 100%;
  height: 30px;
  display: flex;
  justify-content: flex-start;
  margin-top: 40px;

  @media (max-width: ${fe.MOBILE_L_MAX}) {
    display: none;
  }
`,$t=F.img`
  margin-left: 40px;
  cursor: pointer;
`,zt=F.div`
  width: 343px;
  margin-bottom: 16px;
  pointer-events: none;
`,Ut=F.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  flex: 1;
  @media (max-width: ${fe.MOBILE_L_MAX}) {
    margin-top: 30px;
    padding-left: 16px;
    padding-bottom: 16px;
    padding-right: 16px;
    height: 93%;
  }
`;F(Y)`
  transition: transform 0.3s;
  ${({isOpen:t})=>t&&"transform: rotate(180deg)"}
`;const qt=F.div`
  background-color: var(--bg-body-neutral-alt-default);
  overflow-x: hidden;
  height: 100vh;
`;var ce=(t=>(t[t.TOTAL_STEPS=6]="TOTAL_STEPS",t))(ce||{});const jt=()=>{const[t,{loading:u}]=it(),{addToast:c}=le(),y=Be(),[a,n]=r.useState(1),[k,i]=r.useState(Ve),[x,d]=r.useState(null),[m,W]=r.useState({firstName:null,lastName:null,citizenship:null,email:null,ssn:null,dateOfBirth:null,address:null}),f=r.useCallback(()=>{a<ce.TOTAL_STEPS+1&&n(T=>T+1)},[a,n]),v=r.useCallback(()=>{a>0&&n(T=>T-1)},[a,n]),E=()=>{switch(a){case 1:return e(wt,{"data-test":"WalletSetup-getCurretStep-StepOne"});case 2:return e(Ot,{"data-test":"WalletSetup-getCurretStep-StepTwo"});case 3:return e(Wt,{"data-test":"WalletSetup-getCurretStep-StepThree"});case 4:return e(Lt,{"data-test":"WalletSetup-getCurretStep-StepFour"});case 5:return e(Bt,{"data-test":"WalletSetup-getCurretStep-StepFive"});case 6:return e(Nt,{"data-test":"WalletSetup-getCurretStep-StepSix"});default:return e(Dt,{"data-test":"WalletSetup-getCurretStep-Done"})}},C=r.useCallback(async()=>{var T,w,O,h,D,S,A,N,g,Z,q,I,K,Q,G,j;try{const{data:o}=await t();o&&W({firstName:((T=o.currentUser)==null?void 0:T.firstName)||null,lastName:((w=o.currentUser)==null?void 0:w.lastName)||null,email:((O=o.currentUser)==null?void 0:O.email)||null,citizenship:((h=o.currentUser)==null?void 0:h.citizenship)||null,ssn:(D=o.userKyc)!=null&&D.ssn&&!Number.isNaN(Number.parseInt((S=o==null?void 0:o.userKyc)==null?void 0:S.ssn,10))?(A=o==null?void 0:o.userKyc)==null?void 0:A.ssn:"",dateOfBirth:(N=o.userKyc)!=null&&N.dob&&Date.parse((g=o.userKyc)==null?void 0:g.dob)?Date.parse((Z=o.userKyc)==null?void 0:Z.dob):null,address:(q=o==null?void 0:o.userAddress)!=null&&q.zipcode?{apartment:(I=o==null?void 0:o.userAddress)==null?void 0:I.apartment,city:(K=o==null?void 0:o.userAddress)==null?void 0:K.city,state:(Q=o==null?void 0:o.userAddress)==null?void 0:Q.state,street:(G=o==null?void 0:o.userAddress)==null?void 0:G.street,postalCode:(j=o==null?void 0:o.userAddress)==null?void 0:j.zipcode}:null})}catch(o){o&&c("error","none","Unexpected Error Occured")}},[c,t]);r.useEffect(()=>{C()},[C]);const P=r.useMemo(()=>({setPayLoad:i,payLoad:k,currentUser:m,handleNextStep:f,handlePreviousStep:v,setPasscode:d,passCode:x,setState:n}),[i,k,m,f,v,d,x,n]),L=r.useCallback(()=>{y(We.MONEY)},[y]);return e(J.Provider,{value:P,children:u?e(ge,{"data-test":"WalletSetup-Spinner"}):p(qt,{"data-test":"WalletSetup-Container",children:[e(Rt,{"data-testid":"setup-wallet-flow-header","data-test":"WalletSetup-Header",children:e($t,{src:gt,onClick:L,"data-test":"WalletSetup-Logo"})}),p(Ut,{"data-test":"WalletSetup-MainContiner",children:[a<=ce.TOTAL_STEPS&&a>=0&&e(zt,{"data-test":"WalletSetup-StepperContainer",children:e(pt,{currentStep:a,completed:ce.TOTAL_STEPS,"data-test":"WalletSetup-Stepper"})}),E()]})]})})},ia=jt;export{ia as default};
//# sourceMappingURL=WalletSetup-550a4a51.js.map
