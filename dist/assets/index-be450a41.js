import{c as s,x as i,j as e,T as d,F as m,da as u,ef as b,ee as T,B as f,I as p,a2 as I}from"./index-cd84bcc9.js";import{ar as P,r as c,C as z,bE as S,bz as B,ac as E}from"./vendor-51460554.js";import{P as M}from"./PdfPreviewThumbnail-3547d9fe.js";function X({label:t,optional:a,description:o,children:r,horizontal:n=!1}){const{t:l}=P();return n?s(i,{"data-testid":"horizontal",gap:16,align:"center",fullWidth:!0,"data-test":"Stack",children:[e(i,{gap:4,vertical:!0,align:"stretch","data-test":"Stack",children:s(d,{font:"body-m-bold","data-test":"TSpan",children:[t,a&&s(m,{children:[" ",e(d,{font:"body-m",colorToken:"--text-tablecell-header-neutral-default","data-test":"TSpan",children:l("noumena.form_control.optional")})]})]})}),e(u,{grow:!0,"data-test":"StackItem",children:r})]}):s(i,{"data-testid":"vertical",gap:16,vertical:!0,align:"start",fullWidth:!0,"data-test":"Stack",children:[s(i,{gap:4,vertical:!0,fullWidth:!0,align:"stretch","data-test":"Stack",children:[s(d,{font:"body-m-bold","data-test":"TSpan",children:[t,a&&s(m,{children:[" ",e(d,{font:"body-m",colorToken:"--text-tablecell-header-neutral-default","data-test":"TSpan",children:l("noumena.form_control.optional")})]})]}),o&&e(d,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"TSpan",children:o})]}),r]})}function Y({form:t}){const[a,o]=c.useState(null),r=c.useCallback(()=>{o(new Date)},[]),{reset:n}=t;return c.useEffect(()=>{a&&n(void 0,{keepValues:!0,keepDirty:!1})},[a,n]),{lastSavedAt:a,markLocalChangesAsSaved:r}}function W({isOpen:t,base64Data:a,downloadFileName:o,onClose:r}){return e(b,{isOpen:t,type:T.PDF,url:a,downloadFileName:o,handleClose:r,"data-test":"LightBox"})}function Z({data:t,downloadFileName:a,isLoading:o}){const[r,n]=c.useState(!1);return s(m,{children:[e(M,{data:t??void 0,isLoading:o,onClick:()=>{n(!0)},"data-test":"PdfPreviewThumbnail"}),t&&e(W,{isOpen:r,base64Data:t,onClose:()=>n(!1),downloadFileName:a,"data-test":"PreviewModal"})]})}const v=c.createContext(null);function A({children:t,...a}){return e(v.Provider,{value:a,children:t})}function x(){const t=c.useContext(v);if(!t)throw new Error("useFieldArrayWizardFormContext must be called within FieldArrayWizardFormContext.");return t}function D({message:t}){return t?e(d,{font:"footnote",colorToken:"--text-input-danger-primary-default","data-test":"TSpan",children:t}):null}function L({message:t}){return e(D,{message:t,"data-test":"FormError"})}const O=z(i).attrs(()=>({shrink:0,grow:0}))`
  padding: ${({hasInputs:t})=>t?"8px 0 0":"0px"};
  width: 32px;
`;function R({index:t,hasInputs:a}){return e(O,{hasInputs:a,"data-test":"Container",children:s(d,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"TSpan",children:["#",t+1]})})}function j({index:t,children:a,displayLineNumbers:o,actionButtons:r,hasInputs:n=!1}){return s(i,{gap:16,align:n?"start":"center",fullWidth:!0,"data-test":"Stack",children:[o&&e(R,{index:t,hasInputs:n,"data-test":"LineNumber"}),e(u,{grow:!0,"data-test":"StackItem",children:a}),r?e(u,{shrink:0,padding:n?"7px 0 0":void 0,"data-test":"StackItem",children:r}):null]})}function N({children:t}){return e(m,{children:t})}function tt({children:t,actionButtons:a}){return e(u,{grow:!0,"data-test":"StackItem",children:s(i,{gap:24,align:"center","data-test":"Stack",children:[t,e(i,{gap:8,align:"center","data-test":"Stack",children:a})]})})}function _({onClick:t,children:a}){return e(f,{textOnly:!0,size:"small",leftIcon:e(p,{name:"add_m",size:24,"data-test":"Icon"}),onClick:t,"data-test":"Button",children:a})}function et({onClick:t,children:a}){return e(f,{size:"small",textOnly:!0,intent:"positive",icon:e(p,{name:"edit_m",size:24,"data-test":"Icon"}),onClick:t,"data-test":"Button",children:a})}function V({onClick:t,children:a}){return e(f,{size:"small",textOnly:!0,intent:"negative",icon:e(p,{name:"delete_m",size:24,"data-test":"Icon"}),onClick:t,"data-test":"Button",children:a})}function at({onClick:t,children:a,softDisabled:o}){return e(f,{size:"small",secondary:!0,intent:"positive",softDisabled:o,onClick:t,"data-test":"Button",children:a})}function rt({onClick:t,children:a}){return e(f,{size:"small",secondary:!0,intent:"negative",onClick:t,"data-test":"Button",children:a})}function $({index:t,children:a,displayLineNumbers:o=!1}){const{deleteItem:r,canDelete:n}=x();return e(j,{index:t,displayLineNumbers:o,actionButtons:n?e(V,{onClick:()=>r(t)}):null,hasInputs:!0,children:a})}const q=N;function G({index:t}){const{formState:{errors:a}}=S(),{name:o}=x(),r=a[o],n=r==null?void 0:r[t];if(!n)return null;const l=Object.values(n)[0];return e(L,{message:l.message})}function H({children:t}){const a=S();return e(B,{...a,"data-test":"FormProvider",children:e(i,{gap:16,vertical:!0,align:"stretch","data-test":"Stack",children:t(a)})})}function J({name:t,newItemValues:a,hasSeparators:o=!1,EditModeComponent:r,SummaryComponent:n,canAdd:l=!0,canEdit:F=!0,canDelete:y=!0,...h}){const{watch:w}=S(),C=w(t);return e(A,{name:t,canAdd:l,canEdit:F,canDelete:y,...h,"data-test":"FieldArrayWizardFormContextProvider",children:s(i,{vertical:!0,gap:16,align:"stretch","data-test":"Stack",children:[h.fields.map((g,k)=>s(E.Fragment,{children:[e(r,{values:g,index:k,name:t,fieldNamePrefix:`${t}.${k}.`,"data-test":"EditModeComponent"}),o&&e(I,{fullWidth:!0,noMargin:!0,"data-test":"Separator"})]},g.id)),e(u,{"data-test":"StackItem",children:s(i,{justify:"space-between","data-test":"Stack",children:[e(u,{"data-test":"StackItem",children:l&&e(_,{onClick:()=>h.addNewItem(a),children:"Add New Item"})}),n&&e(n,{rows:C,"data-test":"SummaryComponent"})]})})]})})}const nt={Wizard:J,EditMode:H,FormMainRow:$,FormSecondaryRow:q,FormErrorMessage:G};export{_ as A,rt as C,Z as D,et as E,X as F,nt as I,j as M,N as S,x as a,V as b,tt as c,at as d,L as e,A as f,D as g,Y as u};
//# sourceMappingURL=index-be450a41.js.map
