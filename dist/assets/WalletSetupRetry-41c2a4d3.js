import{m as me,I as U,T as z,dJ as Se,dK as Te,kz as Fe,kA as Ye,Y as oe,aa as ue,v as ce,dC as we,kB as qe,c as p,ab as E,j as e,S as s,y as R,B as w,kC as He,x as P,kD as Ae,kE as Xe,kF as Ke,kG as je,A as Ge,n as fe,G as _e,J as le,H as Ee,F as Le,a4 as Je,X as Qe,kH as Ze,cZ as ae,c4 as ke,M as et,ci as tt,R as Oe,kJ as at}from"./index-cd84bcc9.js";import{C as S,r as l,aG as Pe,am as rt,an as pe,B as h,bH as nt,ar as se,ap as he,aq as ot,bb as Ce,bE as st,bz as it,a9 as Ve}from"./vendor-51460554.js";import{S as lt}from"./Stepper-2453d15a.js";import{M as dt,A as mt,n as ut}from"./MaskedDatePicker-ec2376be.js";import{c as ve}from"./countries-4aa86a38.js";import{C as ct}from"./CountryPicker-2d42d72f.js";import{O as pt}from"./OtpInput-6d75f9c8.js";import{i as ft}from"./email-9dc89e57.js";import{u as ht,D as gt,a as yt}from"./useApplicationReview-3b8b1d50.js";import{E as bt}from"./trackingEvents-87d8ea4c.js";import{D as xt}from"./done-439b31ee.js";import"./styles-0c3f5396.js";import"./styles-e426deab.js";import"./browser-f98ef106.js";import"./Flag-d41fef47.js";const St=S.div`
  width: 100%;
  height: 30px;
  display: flex;
  justify-content: flex-start;
  margin-top: 40px;

  @media (max-width: ${me.MOBILE_L_MAX}) {
    display: none;
  }
`,Tt=S.img`
  margin-left: 40px;
  cursor: pointer;
`,Ft=S.div`
  width: 343px;
  margin-bottom: 16px;
  pointer-events: none;
`,At=S.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  flex: 1;
  @media (max-width: ${me.MOBILE_L_MAX}) {
    margin-top: 30px;
    padding-left: 16px;
    padding-bottom: 16px;
    padding-right: 16px;
    height: 93%;
  }
`;S(U)`
  transition: transform 0.3s;
  ${({isOpen:a})=>a&&"transform: rotate(180deg)"}
`;const _t=S.div`
  background-color: var(--bg-body-neutral-alt-default);
  overflow-x: hidden;
  height: 100vh;
`;var de=(a=>(a[a.TOTAL_STEPS=5]="TOTAL_STEPS",a))(de||{});const We={firstName:"",lastName:"",email:"",address1:"",city:"",state:"",country:"",postalCode:"",dateOfBirth:"",ssn:"",citizenship:""},Et={firstName:"",lastName:"",email:"",citizenship:"",dateOfBirth:"",ssn:"",address:null},te=l.createContext({handleNextStep:()=>null,handlePreviousStep:()=>null,setPayLoad:null,currentUser:Et,payLoad:We,setPasscode:null,passCode:null,setState:()=>null}),Y=S.div`
  position: relative;
  width: 438px;
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  padding-left: ${({isMobile:a})=>a?"16px":"0px"};
  padding-right: ${({isMobile:a})=>a?"16px":"0px"};
  @media (max-width: ${me.MOBILE_L_MAX}) {
    width: 100%;
  }
`,K=S(z)`
  text-align: center;
`,V=S(z)`
  text-align: center;
`,kt=S(V)``,Z=S(z)`
  padding-left: ${({leftMargin:a})=>a?"12px":"0"};
`,Ct=S.div`
  position: relative;
  width: 100%;
`,vt=Pe`
0% { opacity: 1; visibility: visible; z-index: 100; position: static;}
100% { opacity: 0; visibility: hidden; z-index: -1; height: 0; }

`,It=S.div`
  text-align: center;
  align-items: 'center';
  justify-content: 'center';
  width: 100%;
  opacity: 0;
  animation-name: ${vt};
  animation-duration: 3s;
  animation-fill-mode: forwards;
`,wt=Pe`
0% { opacity: 1;}
100% {opacity: 1;}
`,Lt=S.div`
  width: 100%;
  opacity: 0;
  animation-name: ${wt};
  animation-duration: ${a=>a.duration}s;
  animation-delay: 3s;
  text-align: center;
  align-items: 'center';
  justify-content: 'center';
`,ee=S(V)`
  color: var(--text-body-header-neutral-default);
  font-size: var(--font-input-small-size);
  text-align: left;
`,re=S.a`
  text-decoration: none;
`,ne=S(ee)`
  color: var(--text-skillbadge-brand-primary-selected);
`,ge=S.div`
  width: 100%;
  @media (max-width: ${me.MOBILE_L_MAX}) {
    position: absolute;
    bottom: 0;
  }
`,Ie=a=>{const f=Date.now()-new Date(a).getTime(),i=new Date(f);return Math.abs(i.getUTCFullYear()-1970)},Ot=rt({firstName:pe().trim().required(h("noumena.input.not_empty")).min(2,h("noumena.signup.first_name.too_short")).max(20,h("noumena.signup.first_name.too_long")).test("Two letter name validation",h("noumena.signup.two_digit_first_name.incorrect"),a=>a&&a.length<=2?Se.test(a):!0).matches(Te,h("noumena.signup.first_name.incorrect")).matches(Fe,h("noumena.signup.first_name.incorrect")),lastName:pe().trim().required(h("noumena.input.not_empty")).min(2,h("noumena.signup.last_name.too_short")).max(20,h("noumena.signup.last_name.too_long")).test("Two letter name validation",h("noumena.signup.two_digit_last_name.incorrect"),a=>a&&a.length<=2?Se.test(a):!0).matches(Te,h("noumena.signup.last_name.incorrect")).matches(Fe,h("noumena.signup.first_name.incorrect")),ssn:pe().trim().required(h("noumena.input.not_empty")).matches(Ye,h("noumena.signup.ssn.incorrect")),dateOfBirth:nt().required(h("noumena.input.not_empty"))}).required(),Pt=()=>{var n,W,O;const a=oe(),f=ue(),{addErrorToast:i}=ce(),{t:r}=se(),{handleNextStep:u,currentUser:t,setPayLoad:g}=l.useContext(te),[k,{loading:b}]=we({onError:o=>{a.logError(o,"updateUserProfileSetupWallet-wallet-retry",!0)}}),[v,{loading:_}]=qe({onError:o=>{a.logError(o,"updateUserKycSetupWallet-wallet-retry",!0)}}),{getValues:x,register:c,handleSubmit:I,control:C,formState:{errors:T,isDirty:y,isValid:L}}=he({mode:"onChange",resolver:ot(Ot),defaultValues:{firstName:t.firstName||"",lastName:t.lastName||"",dateOfBirth:t.dateOfBirth?new Date(t.dateOfBirth):void 0,citizenship:t.citizenship||"us",ssn:t.ssn||""}}),j=async o=>{var N;const{firstName:F,lastName:d,ssn:M,dateOfBirth:G,citizenship:D}=o,A=He(G.toDateString()).split(" ")[0].split("/");if(Ie(`${A[2]}-${A[0]}-${A[1]}`)<18||Ie(`${A[2]}-${A[0]}-${A[1]}`)>125)i(r("noumena.money.setupWallet.date.error"));else{if(!g)return;g($=>{var H;return{...$,firstName:F,lastName:d,ssn:M,dateOfBirth:`${A[2]}-${A[0]}-${A[1]}`,citizenship:(H=ve.find(Q=>Q.name.toLocaleLowerCase()===D.toLocaleLowerCase()))==null?void 0:H.iso2,country:D}});const{errors:q}=await k({variables:{input:{firstName:F,lastName:d,citizenship:(N=ve.find($=>$.name.toLocaleLowerCase()===D.toLocaleLowerCase()))==null?void 0:N.iso2}}}),{errors:J}=await v({variables:{input:{ssn:M,dob:`${A[2]}-${A[0]}-${A[1]}`}}});!q&&!J&&u()}};return p(Y,{isMobile:E.MOBILE===f,"data-test":"FormPersonalInformation-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormPersonalInformation-FormText",children:r("noumena.money.retryWallet.personal_information.form_text")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormPersonalInformation-FormHelperText",children:r("noumena.money.setupWallet.personal_information.form_sub_text")}),e(s,{height:32,"data-test":"FormPersonalInformation-Spacer"}),p("form",{onSubmit:I(j),style:{width:"100%",paddingBottom:"16px"},children:[e(R,{"data-testid":"step-one-firstName",label:r("noumena.legal.first_name"),...c("firstName",{required:{value:!0,message:r("noumena.input.not_empty")}}),value:x("firstName"),error:!!T.firstName,helperText:(n=T.firstName)==null?void 0:n.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(R,{"data-testid":"step-one-lastName",label:r("noumena.legal.last_name"),...c("lastName",{required:{value:!0,message:r("noumena.input.not_empty")}}),value:x("lastName"),error:!!T.lastName,helperText:(W=T.lastName)==null?void 0:W.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(Ce,{control:C,name:"dateOfBirth","data-testid":"step-one-dob",render:({field:{onChange:o,value:F}})=>{var d;return e(dt,{required:!0,layout:"dropdown",onChange:o,value:F,placement:"bottom-end",label:r("noumena.date_of_birth"),maxDate:new Date,error:!!T.dateOfBirth,helperText:(d=T.dateOfBirth)==null?void 0:d.message,fromYear:new Date().getFullYear()-100,"data-test":"FormPersonalInformation-MaskedDatePicker"})},"data-test":"FormPersonalInformation-Controller"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(Ce,{"data-testid":"step-one-country",control:C,name:"citizenship",rules:{required:!0},render:({field:{onChange:o,value:F}})=>e(ct,{onCountryCodeChange:o,value:F,disabled:!0,"data-test":"FormPersonalInformation-CountryPicker"}),"data-test":"FormPersonalInformation-Controller"}),e(Z,{font:"footnote",colorToken:"--text-input-neutral-default",leftMargin:!0,"data-test":"FormPersonalInformation-Note",children:r("noumena.money.setupWallet.personal_information.wallet_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(R,{"data-testid":"step-one-ssn",label:r("noumena.ssn_esn"),...c("ssn",{required:{value:!0,message:r("noumena.input.not_empty")}}),value:x("ssn"),error:!!T.ssn,helperText:(O=T.ssn)==null?void 0:O.message,"data-test":"FormPersonalInformation-TextField"}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(Z,{font:"footnote-bold",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:r("noumena.money.setupWallet.personal_information.encryption_heading")}),e(s,{height:1,"data-test":"FormPersonalInformation-Spacer"}),e(Z,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:r("noumena.money.setupWallet.personal_information.encryption_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(Z,{font:"footnote-bold",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:r("noumena.money.setupWallet.personal_information.creditScore_heading")}),e(s,{height:1,"data-test":"FormPersonalInformation-Spacer"}),e(Z,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormPersonalInformation-Note",children:r("noumena.money.setupWallet.personal_information.creditScore_note")}),e(s,{height:16,"data-test":"FormPersonalInformation-Spacer"}),e(w,{"data-testid":"step-one-submit-button",type:"submit",primary:!0,size:"full",disabled:!y||!L||b||_,loading:b||_,"data-test":"FormPersonalInformation-Button",children:r("noumena.next.text")})]})]})},Vt=({selectdAddress:a})=>{var k,b,v,_,x;const{t:f}=se(),{register:i,getValues:r,setValue:u,formState:{errors:t}}=st();l.useEffect(()=>{u("street",`${a?a.split(",")[0]:""}`,{shouldValidate:!0}),u("apartment",`${a?a.split(",")[1]:""}`),u("city",`${a?a.split(",")[2]:""}`,{shouldValidate:!0}),u("state",`${a?a.split(",")[3]:""}`,{shouldValidate:!0}),u("postalCode",`${a?a.split(",")[4]:""}`,{shouldValidate:!0})},[a,u]);const g=c=>/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(c)?!0:"Enter valid zip code";return p(P,{fullWidth:!0,vertical:!0,gap:16,"data-testid":"address-form","data-test":"AddressForm-Stack",children:[e(R,{...i("street",{required:{value:!0,message:f("noumena.input.not_empty")},validate:{isNotIncludesSpecialCharacters:c=>Ae.test(c)||"Special characters are not allowed"}}),"data-testid":"step-two-street",label:f("noumena.money.setupWallet.address.street"),value:r("street"),error:!!t.street,helperText:(k=t.street)==null?void 0:k.message,"data-test":"AddressForm-TextField"}),e(R,{...i("apartment",{validate:{isNotIncludesSpecialCharacters:c=>Ae.test(c)||c.length===0||"Special characters are not allowed"}}),error:!!t.apartment,"data-testid":"step-one-apartment",label:f("noumena.money.setupWallet.address.apartment_optional"),value:r("apartment"),helperText:(b=t.apartment)==null?void 0:b.message,"data-test":"AddressForm-TextField"}),e(R,{...i("city",{required:{value:!0,message:f("noumena.input.not_empty")},validate:{isValidText:c=>Xe.test(c)||"Invalid input"}}),"data-testid":"step-one-city",label:f("noumena.money.setupWallet.address.city"),value:r("city"),error:!!t.city,helperText:(v=t.city)==null?void 0:v.message,"data-test":"AddressForm-TextField"}),p(P,{fullWidth:!0,gap:16,"data-test":"AddressForm-Stack",children:[e(R,{...i("state",{required:{value:!0,message:f("noumena.input.not_empty")},validate:{isValidState:c=>Ke.test(c)||"State must be a 2-letter abbreviation"}}),"data-testid":"step-one-state",label:f("noumena.money.setupWallet.address.state"),value:r("state"),error:!!t.state,helperText:(_=t.state)==null?void 0:_.message,"data-test":"AddressForm-TextField"}),e(R,{...i("postalCode",{required:{value:!0,message:f("noumena.input.not_empty")},validate:{isValidPostalCode:c=>g(c)}}),"data-testid":"step-one-zip-code",label:f("noumena.money.setupWallet.address.zip_code"),value:r("postalCode"),error:!!t.postalCode,helperText:(x=t.postalCode)==null?void 0:x.message,"data-test":"AddressForm-TextField"})]})]})},Wt=["apartment","street","city","state","postalCode"],Mt=()=>{const{handleNextStep:a,setPayLoad:f,payLoad:i,handlePreviousStep:r,currentUser:{address:u}}=l.useContext(te),{t}=se(),{addErrorToast:g}=ce(),k=oe(),b=ue(),[v,{loading:_}]=je({onCompleted:()=>a(),onError:o=>{k.logError(o,"updateUserAddressSetupWallet-wallet-retry",!0)}}),x=l.useMemo(()=>i.postalCode?{city:i.city,state:i.state,country:i.country,postalCode:i.postalCode,street:i.street,apartment:i.apartment}:null,[i]),[c,I]=l.useState(null),[C,T]=l.useState(!!(u||x)),y=he({mode:"onChange",defaultValues:{street:"",apartment:"",city:"",state:"",postalCode:""}}),{reset:L,formState:{isValid:j},setValue:n}=y,W=async o=>{if(!C){T(!0);return}if(!f)return;const F={address1:`${o.street} ${o.apartment}`,city:o.city,state:o.state,postalCode:o.postalCode,street:o.street,apartment:o.apartment};await v({variables:{input:{street:o.street,apartment:o.apartment,city:o.city,state:o.state,zipcode:o.postalCode}}}),f(d=>({...d,...F}))},O=l.useCallback(()=>{g(`${t("noumena.money.setupWallet.lookup.fail.text")}`),T(!0)},[g,t]);return l.useEffect(()=>{const o=(F,d)=>{n(F,d,{shouldValidate:!0,shouldDirty:!0})};(u||x)&&Wt.forEach(F=>{const d=(x==null?void 0:x[F])||"",M=(u==null?void 0:u[F])||"";o(F,d||M)})},[u,x,n]),p(Y,{"data-test":"FormAddress-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormAddress-FormText",children:t("noumena.money.setupWalletRetry.address.form_text")}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormAddress-FormHelperText",children:t("noumena.money.setupWallet.address.form_sub_text")}),e(s,{height:64,"data-test":"FormAddress-Spacer"}),p("form",{style:{width:"100%"},onSubmit:y.handleSubmit(W),children:[C?e(it,{...y,"data-test":"FormAddress-FormProvider",children:e(Vt,{selectdAddress:c||"","data-test":"FormAddress-AddressForm"})}):e(mt,{setSelectedAddress:I,setShowForm:T,onLookupFailed:O,"data-test":"FormAddress-AddressDropdown"}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),e(Z,{font:"footnote",colorToken:"--text-body-neutral-disabled","data-test":"FormAddress-Note",children:t("noumena.money.setupWalletRetry.address.note")}),e(s,{height:16,"data-test":"FormAddress-Spacer"}),e(ge,{"data-test":"FormAddress-FormButtons",children:p(P,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px"},"data-test":"FormAddress-Stack",children:[e(w,{"data-testid":"step-two-back-button",type:"button",style:b===E.MOBILE?{width:"102px"}:void 0,size:b!==E.MOBILE?"large":void 0,onClick:()=>{C?(T(!1),L()):r()},leftIcon:e(U,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormAddress-Icon"}),"data-test":"FormAddress-Button",children:t("noumena.back.text")}),e(w,{loading:_,"data-testid":"step-two-submit-button",type:"submit",primary:!0,size:b!==E.MOBILE?"full":void 0,style:b===E.MOBILE?{width:"226px"}:void 0,disabled:!C&&!1||!j||_,"data-test":"FormAddress-Button",children:t(C?"noumena.next.text":"noumena.money.setupWallet.enter.address.buuton")})]})})]})]})},Bt=()=>{var xe;const{handleNextStep:a,handlePreviousStep:f,setPayLoad:i,currentUser:{email:r}}=l.useContext(te),[u,t]=l.useState(1),[g,k]=l.useState(),[b,v]=l.useState(""),[_,x]=l.useState(!1),[c,I]=l.useState(!1),C=90,[T,y]=l.useState(0),[L]=we(),{returnNewReCaptcha:j}=Ge(),{addErrorToast:n,addSuccessIconToast:W}=ce(),O=oe(),o=ue(),F=3,{t:d}=se(),{getValues:M,register:G,reset:D,handleSubmit:A,setValue:N,formState:{errors:q,isDirty:J,isValid:$}}=he({mode:"onChange",defaultValues:{email:""}});l.useEffect(()=>{r&&N("email",r,{shouldDirty:!0,shouldValidate:!0})},[r,N]);const H=()=>{x(!1),y(0)},Q=()=>{u===1&&t(2)},ie=()=>{u===2&&t(1)},Me=(m,X)=>{x(m>0||X!==F),y(m)},ye={"Invalid OTP, Please try again!":d`noumena.resend_otp_invalid_code.text`},Be=m=>m&&ye[m]?ye[m]:m||"",be=async m=>{if(I(!0),v(m),r===m&&i){i(Ue=>({...Ue,email:m})),a();return}const X=await j(),B=await _e.signUpEmail(m,X,!1);B!=null&&B.errorMessage?(O.logError(new Error(le(B)),le(B)||"Unexpected error occurred"),B.errorStatus===102&&n(Ee.BLOCKED_IP)):(Me(B.nextRequestAfterInSecond,B.remainingRequest),W(B.message),D({email:""}),Q()),I(!1)},Re=async({email:m})=>{v(m),be(m)},De=()=>{k(""),be(b)},Ne=async()=>{if(g){I(!0);const m=await _e.signUpEmailVerification(b,g,void 0,void 0,!0);!(m!=null&&m.errorMessage)&&i?(i(X=>({...X,email:b})),L({variables:{input:{email:b}}}),a()):(O.logError(new Error(le(m)),Be(le(m)),!0),m.errorStatus===102&&n(Ee.BLOCKED_IP),k("")),I(!1)}},$e=({duration:m,handleTimedOut:X})=>m!==0&&m<=C?p(Le,{children:[e(It,{"data-test":"FormEmailVerification-RenderResendOTPMessage-StyledResendSpan",children:p(z,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:[d("noumena.resend_otp_code_sent.text")," "]})}),e(Lt,{duration:m,"data-test":"FormEmailVerification-RenderResendOTPMessage-StyledResendWaitSpan",children:p(z,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:[d("noumena.resend_otp_please_wait.text")," ",e(Je,{initialSeconds:m,timedOut:X,"data-test":"FormEmailVerification-RenderResendOTPMessage-Timer"})," ",d("noumena.resend_otp_before_request.text")]})})]}):e(z,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-RenderResendOTPMessage-TSpan",children:d("noumena.resend_otp_please_wait_24h.text")}),ze=()=>_?e(z,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"FormEmailVerification-renderResendOTPInfo-TSpan",children:e($e,{handleTimedOut:H,duration:T,"data-test":"FormEmailVerification-renderResendOTPInfo-RenderResendOTPMessage"})}):e(w,{primary:!0,textOnly:!0,size:"small",disabled:c,onClick:De,"data-testid":"handleResendOtpID","data-test":"FormEmailVerification-renderResendOTPInfo-Button",children:e(z,{colorToken:"--text-button-brand-secondary-default","data-test":"FormEmailVerification-renderResendOTPInfo-TSpan",children:d("noumena.signup.otp.resend_code")})});return e(Y,{"data-test":"FormEmailVerification-FormWrapper",children:u===1?p(Y,{"data-test":"FormEmailVerification-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormText",children:d("noumena.money.setupWallet.confirm.email.form_text")}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormHelperText",children:d("noumena.money.setupWallet.email.sub_text")}),e(s,{height:64,"data-test":"FormEmailVerification-Spacer"}),p("form",{onSubmit:A(Re),style:{width:"100%",height:"90%",display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[e(R,{"data-testid":"step-three-email",label:d("noumena.email_address"),...G("email",{required:{value:!0,message:d("noumena.input.not_empty")},validate:{isValidEmail:m=>ft(m)||d("noumena.signup.error.incorrect_email")}}),value:M("email"),error:!!q.email,helperText:(xe=q.email)==null?void 0:xe.message,"data-test":"FormEmailVerification-TextField"}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),c?p(Ct,{"data-test":"FormEmailVerification-StyledSpinner",children:[e(s,{height:40,"data-test":"FormEmailVerification-Spacer"}),e(fe,{"data-test":"FormEmailVerification-Spinner"})]}):p(P,{fullWidth:!0,gap:16,"data-test":"FormEmailVerification-Stack",children:[e(w,{"data-testid":"step-three-back-button-sub-state-one",type:"button",style:{width:"120px"},onClick:f,leftIcon:e(U,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormEmailVerification-Icon"}),"data-test":"FormEmailVerification-Button",children:d("noumena.back.text")}),e(w,{"data-testid":"step-three-next-button-sub-state-one",type:"submit",primary:!0,size:o!==E.MOBILE?"full":void 0,style:o===E.MOBILE?{width:"226px"}:void 0,disabled:!J||!$,"data-test":"FormEmailVerification-Button",children:d("noumena.continue")})]})]})]}):p(Y,{"data-test":"FormEmailVerification-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormText",children:d("noumena.signup.error.confirm_email_text")}),e(s,{height:16,"data-test":"FormEmailVerification-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormEmailVerification-FormHelperText",children:`${d("noumena.signup.error.confirm_email_sub_text")} `}),e(s,{height:64,"data-test":"FormEmailVerification-Spacer"}),e(pt,{value:g,onChange:m=>k(m),"data-test":"FormEmailVerification-OtpInput"}),e(s,{height:32,"data-test":"FormEmailVerification-Spacer"}),e(ge,{"data-test":"FormEmailVerification-FormButtons",children:p(P,{fullWidth:!0,"data-test":"FormEmailVerification-Stack",children:[e(w,{"data-testid":"step-one-submit-button",type:"button",onClick:ie,style:o===E.MOBILE?{width:"102px"}:void 0,size:o!==E.MOBILE?"large":void 0,leftIcon:e(U,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormEmailVerification-Icon"}),"data-test":"FormEmailVerification-Button",children:d("noumena.back.text")}),e(w,{"data-testid":"step-one-submit-button",type:"submit",primary:!0,size:o!==E.MOBILE?"full":void 0,style:o===E.MOBILE?{width:"226px"}:void 0,disabled:(g==null?void 0:g.length)!==4,onClick:Ne,"data-test":"FormEmailVerification-Button",children:d("noumena.continue")})]})}),e(s,{height:32,"data-test":"FormEmailVerification-Spacer"}),ze()]})})},Rt=10,Dt=()=>{const a=Qe(),{handleNextStep:f,handlePreviousStep:i}=l.useContext(te),{documentOptions:r,modal:u,file:t,button:g}=ht({onSuccessfulUpload:f});return p(Y,{"data-test":"VerifyYourIdentity-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"VerifyYourIdentity-FormText",children:h("noumena.money.retryWallet.verify_your_identity.form_text")}),e(s,{height:16,"data-test":"VerifyYourIdentity-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"VerifyYourIdentity-FormHelperText",children:h("noumena.money.retryWallet.verify_your_identity.form_sub_text")}),e(s,{height:64,"data-test":"VerifyYourIdentity-Spacer"}),e(gt,{documentOptions:r,onSelect:u.handleOpen,isMobile:a.isMobile,variant:t.frontSide?"success":"primary","data-test":"VerifyYourIdentity-DwollaDocumentDropDown"}),e(s,{height:64,"data-test":"VerifyYourIdentity-Spacer"}),e(ge,{"data-test":"VerifyYourIdentity-FormButtons",children:p(P,{fullWidth:!0,gap:16,"data-test":"VerifyYourIdentity-Stack",children:[e(w,{onClick:i,leftIcon:e(U,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"VerifyYourIdentity-Icon"}),"data-test":"VerifyYourIdentity-Button",children:h("noumena.back.text")}),e(w,{primary:!0,loading:t.updatingIsInProgress,disabled:t.updatingIsInProgress||!t.frontSide,onClick:t.handleContinue,style:{width:"90%"},"data-test":"VerifyYourIdentity-Button",children:h("noumena.next.text")})]})}),u.isOpen&&e(yt,{open:u.isOpen,onClose:u.handleClose,contextData:u.contextData,disable:g.disable,onConfirmAndSave:t.confirmAndSave,isMobile:a.isMobile,isTablet:a.isTablet,isSingleSideUpload:t.isSingleSideUpload,isXLSize:t.isSingleSideUpload,onFrontSideUpload:t.updateFront,onBackSideUpload:t.updateBack,uploadedFrontSideFile:t.frontSide,uploadedBackSideFile:t.backSide,clearFrontSideFile:t.updateFront,clearBackSideFile:t.updateBack,maxUploadSize:Rt,"data-test":"VerifyYourIdentity-DwollaDocumentModal"})]})},Nt=S(P)`
  width: 279px;
`,$t=S.div`
  position: relative;
  margin-bottom: 20px;
`,zt=()=>{const{handleNextStep:a,handlePreviousStep:f,payLoad:i}=l.useContext(te),{t:r}=se(),{addErrorToast:u}=ce(),t=oe(),[g,k]=l.useState(!1),[b,v]=l.useState(!1),[_,{loading:x}]=Ze({onCompleted:()=>{tt(bt.SETUP_WALLET.MASTER_WALLET_CREATE_REQUESTED),a()},onError:y=>{t.logError(y,"retry-wallet");let L=y.message;L.includes("Address1")&&(L=L.replaceAll("Address1","Street or apartment")),u(L)}}),c=ue(),I=l.useCallback(()=>p(ee,{font:"body-m","data-test":"FormTermsAndAgreement-getFirstTerm-FormTerms",children:[`${r("noumena.money.setupWallet.terms.i_agree_to_the_text")} `,e(re,{href:ae.PRIVACY,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(ne,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:r("noumena.money.setupWallet.terms.privacy_policy")})}),` ${r("noumena.and")} `,e(re,{href:ae.TERMS,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(ne,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:r("noumena.money.setupWallet.terms.terms_services")})}),` ${r("noumena.asWellAsOurPartner")} `,e(re,{href:ae.DWOLLA_TERMS,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(ne,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:r("noumena.money.setupWallet.terms.dwolla.terms_services")})}),` ${r("noumena.and")} `,e(re,{href:ae.DWOLLA_PRIVACY,target:"_blank","data-test":"FormTermsAndAgreement-getFirstTerm-FormLink",children:e(ne,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getFirstTerm-FormLinkText",children:r("noumena.money.setupWallet.terms.dwolla.privacy")})})]}),[r]),C=l.useCallback(()=>p(ee,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-getSecondTerm-FormTerms",children:[`${r("noumena.money.setupWallet.terms.i_agree_to_the_text")} `,e(re,{href:ae.CONSENT_ELECTRONIC_DISCLOSURE,target:"_blank","data-test":"FormTermsAndAgreement-getSecondTerm-FormLink",children:e(ne,{font:"body-m-bold",colorToken:"--text-skillbadge-brand-primary-selected","data-test":"FormTermsAndAgreement-getSecondTerm-FormLinkText",children:r("noumena.money.setupWallet.terms.electronic.consent")})})]}),[r]),T=l.useCallback(async()=>{const y={...i,dateOfBirth:typeof i.dateOfBirth=="number"?String(i.dateOfBirth):i.dateOfBirth};delete y.citizenship,delete y.street,delete y.apartment,await _({variables:{input:y}})},[_,i]);return p(Y,{style:c===E.MOBILE?{paddingBottom:"16px"}:void 0,"data-test":"FormTermsAndAgreement-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"FormTermsAndAgreement-FormText",children:r("noumena.money.setupWallet.terms.text")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ee,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:r("noumena.money.setupWallet.terms.paragraph_one")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ee,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:r("noumena.money.setupWallet.terms.paragraph_two")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),e(ee,{font:"body-m",colorToken:"--text-body-header-neutral-default","data-test":"FormTermsAndAgreement-FormTerms",children:r("noumena.money.setupWallet.terms.paragraph_three")}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),p(P,{gap:10,justify:"flex-start","data-test":"FormTermsAndAgreement-Stack",children:[e(ke,{"data-testid":"check-box-one",isChecked:g,onChange:y=>k(y),icon:e(U,{name:"tick_m",size:23.5,color:"--icon-checkbox-neutral-alt-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Checkbox"}),I()]}),e(s,{height:16,"data-test":"FormTermsAndAgreement-Spacer"}),p(P,{gap:10,justify:"flex-start",fullWidth:!0,"data-test":"FormTermsAndAgreement-Stack",children:[e(ke,{"data-testid":"check-box-two",isChecked:b,onChange:y=>v(y),icon:e(U,{name:"tick_m",size:23.5,color:"--icon-checkbox-neutral-alt-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Checkbox"}),C()]}),e(s,{height:32,"data-test":"FormTermsAndAgreement-Spacer"}),p(P,{fullWidth:!0,style:{justifyContent:"space-between",gap:"16px",paddingBottom:"24px"},"data-test":"FormTermsAndAgreement-Stack",children:[e(w,{"data-testid":"step-six-back-button",type:"button",style:c===E.MOBILE?{width:"102px"}:void 0,size:c!==E.MOBILE?"large":void 0,onClick:f,leftIcon:e(U,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"FormTermsAndAgreement-Icon"}),"data-test":"FormTermsAndAgreement-Button",children:r("noumena.back.text")}),e(w,{"data-testid":"step-six-submit-button",primary:!0,size:c!==E.MOBILE?"full":void 0,style:c===E.MOBILE?{width:"226px"}:void 0,onClick:T,disabled:!g||!b,"data-test":"FormTermsAndAgreement-Button",children:r("noumena.agree_apply.text")})]}),e(et,{isFullScreen:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:x,"data-test":"FormTermsAndAgreement-Modal",children:p(Nt,{vertical:!0,align:"center",justify:"flex-start","data-test":"FormTermsAndAgreement-ModalContent",children:[e($t,{"data-test":"FormTermsAndAgreement-ModalSpinner",children:e(fe,{"data-test":"FormTermsAndAgreement-Spinner"})}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"FormTermsAndAgreement-FormHelperText",children:r("noumena.money.setupWallet.terms.creating.account")})]})})]})},Ut=()=>{const a=Ve(),f=()=>{a(Oe.MONEY)};return p(Y,{"data-test":"Done-FormWrapper",children:[e(K,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default",textAlign:"center","data-test":"Done-FormText",children:h("noumena.money.setupWallet.retry.done.text")}),e(s,{height:64,"data-test":"Done-Spacer"}),e("img",{src:xt,alt:"done=logo"}),e(s,{height:64,"data-test":"Done-Spacer"}),p(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"Done-FormHelperText",children:[h("noumena.money.setupWallet.done.sub_text_one"),e(kt,{font:"body-l-bold",colorToken:"--text-body-header-neutral-default","data-test":"Done-FormHelperTextBold",children:` ${h("noumena.money.setupWallet.done.sub_text_Money.home.page")}`})]}),e(s,{height:16,"data-test":"Done-Spacer"}),e(V,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"Done-FormHelperText",children:h("noumena.money.setupWallet.done.sub_text_two")}),e(s,{height:64,"data-test":"Done-Spacer"}),e(w,{"data-testid":"done-submit-button",type:"submit",primary:!0,size:"full",onClick:f,"data-test":"Done-Button",children:h("noumena.application_review_completed_btn")})]})},Yt=()=>{const[a,f]=l.useState(!0),{logError:i}=oe(),{loading:r}=at({onCompleted:n=>{var W,O,o,F,d,M,G,D,A,N,q,J,$,H,Q,ie;c({firstName:((W=n.currentUser)==null?void 0:W.firstName)||null,lastName:((O=n.currentUser)==null?void 0:O.lastName)||null,email:((o=n.currentUser)==null?void 0:o.email)||null,citizenship:((F=n.currentUser)==null?void 0:F.citizenship)||null,ssn:(d=n.userKyc)!=null&&d.ssn&&!Number.isNaN(Number.parseInt((M=n==null?void 0:n.userKyc)==null?void 0:M.ssn,10))?(G=n==null?void 0:n.userKyc)==null?void 0:G.ssn:"",dateOfBirth:(D=n.userKyc)!=null&&D.dob&&Date.parse((A=n.userKyc)==null?void 0:A.dob)?Date.parse((N=n.userKyc)==null?void 0:N.dob):null,address:(q=n==null?void 0:n.userAddress)!=null&&q.zipcode?{apartment:(J=n==null?void 0:n.userAddress)==null?void 0:J.apartment,city:($=n==null?void 0:n.userAddress)==null?void 0:$.city,state:(H=n==null?void 0:n.userAddress)==null?void 0:H.state,street:(Q=n==null?void 0:n.userAddress)==null?void 0:Q.street,postalCode:(ie=n==null?void 0:n.userAddress)==null?void 0:ie.zipcode}:null}),f(!1)},onError:n=>i(n,"setup-wallet-retry",!0)}),u=Ve(),[t,g]=l.useState(1),[k,b]=l.useState(We),[v,_]=l.useState(null),[x,c]=l.useState({firstName:null,lastName:null,citizenship:null,email:null,ssn:null,dateOfBirth:null,address:null}),I=l.useCallback(()=>{t<de.TOTAL_STEPS+1&&g(n=>n+1)},[t]),C=l.useCallback(()=>{t>0&&g(n=>n-1)},[t]),T=()=>{switch(t){case 1:return e(Pt,{"data-test":"WalletSetupRetry-getCurretStep-StepOne"});case 2:return e(Mt,{"data-test":"WalletSetupRetry-getCurretStep-StepTwo"});case 3:return e(Bt,{"data-test":"WalletSetupRetry-getCurretStep-StepThree"});case 4:return e(Dt,{"data-test":"WalletSetupRetry-getCurretStep-StepFour"});case 5:return e(zt,{"data-test":"WalletSetupRetry-getCurretStep-StepFive"});default:return e(Ut,{"data-test":"WalletSetupRetry-getCurretStep-Done"})}},y=l.useMemo(()=>({setPayLoad:b,payLoad:k,currentUser:x,handleNextStep:I,handlePreviousStep:C,setPasscode:_,passCode:v,setState:g}),[b,k,x,I,C,_,v]),L=l.useCallback(()=>{u(Oe.MONEY)},[u]);return e(Le,{children:a||r?e(fe,{"data-test":"WalletSetupRetry-Spinner"}):e(te.Provider,{value:y,children:p(_t,{"data-test":"WalletSetupRetry-Container",children:[e(St,{"data-testid":"setup-wallet-flow-header","data-test":"WalletSetupRetry-Header",children:e(Tt,{src:ut,onClick:L,"data-test":"WalletSetupRetry-Logo"})}),p(At,{"data-test":"WalletSetupRetry-MainContainer",children:[t<=de.TOTAL_STEPS&&t>=0&&e(Ft,{"data-test":"WalletSetupRetry-StepperContainer",children:e(lt,{currentStep:t,completed:de.TOTAL_STEPS,"data-test":"WalletSetupRetry-Stepper"})}),T()]})]})})})},sa=Yt;export{sa as default};
//# sourceMappingURL=WalletSetupRetry-41c2a4d3.js.map
