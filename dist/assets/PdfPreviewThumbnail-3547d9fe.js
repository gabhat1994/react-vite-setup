import{j as e,ko as O,p as $,at as z,aC as N,c as f,T as b,au as A,n as x,I as C,F as _,x as k,B as P}from"./index-cd84bcc9.js";import{C as g,r as S,bE as R,cG as W,at as E,au as L,aI as B,aJ as D,aK as G}from"./vendor-51460554.js";import{A as H,S as V,a as J,b as K,c as Q}from"./ApiEntityPickerField-cfd6d0d6.js";import{p as F}from"./Modal-5a254f40.js";import{T as q}from"./index-1f4ed9fc.js";import{a as U,b as X}from"./styles-46bbc451.js";import{u as Y}from"./index-4963229a.js";function Z({children:a}){return e(U,{children:e(X,{children:a})})}function ee({...a}){return e(H,{...a,"data-test":"ApiEntityPickerField"})}const te=g.div`
  padding-right: 16px;
`,ae={SpinnerContainer:te};function ve({onChange:a,preselectedItem:s,...r}){var p,y;const[u,o]=S.useState(),{data:t,loading:d,fetchMore:h}=O({variables:{limit:10,offset:0,filter:{status:$.Published,search:u},sort:{column:"name",operator:z.Asc}},fetchPolicy:"cache-and-network"}),i=[...((p=t==null?void 0:t.getOwnProjectChambers)==null?void 0:p.data)??[],s].find(n=>(n==null?void 0:n._id)===r.value),m=F[i==null?void 0:i.projectType],v=S.useMemo(()=>{var n;return N((n=t==null?void 0:t.getOwnProjectChambers)==null?void 0:n.data).map(l=>({type:"value",value:l._id??"",key:l._id??"",label:f(b,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"options-TSpan",children:[l.name??""," ⋅"," ",e(b,{font:"body-m",colorToken:"--text-tablecell-header-neutral-default","data-test":"options-TSpan",children:F[l==null?void 0:l.projectType]})]}),icon:e(A,{url:l.profileImage,size:"M","data-test":"options-Avatar"})}))},[(y=t==null?void 0:t.getOwnProjectChambers)==null?void 0:y.data]),I=i?`${i.name} ${m?`⋅ ${m}`:""} `:"";return e(ee,{...r,onInputChange:o,options:v,hideIcons:!1,isLoading:d,readOnly:!!r.value,value:r.value||void 0,maxContainerHeight:"350px",onChange:n=>a(n==null?void 0:n.value),inputValue:I,leftIcon:i?e(A,{url:i.profileImage,size:"M","data-test":"Avatar"}):void 0,onFetchMore:()=>{var n,l;return h({variables:{offset:((l=(n=t==null?void 0:t.getOwnProjectChambers)==null?void 0:n.data)==null?void 0:l.length)??0}})},rightIcon:d?e(ae.SpinnerContainer,{children:e(x,{zIndex:50,"data-test":"Spinner"})}):r.value&&!r.disabled?e(C,{onClick:()=>{a(void 0),o("")},name:"close_s",size:24,color:"--icon-input-neutral-default","data-test":"Icon"}):e(_,{}),"data-test":"ApiEntityPickerFieldWithRemoteSearch"})}function be({selectedOption:a,fullWidth:s,selectedRightSideOption:r,disabled:u,inputSize:o,softDisabled:t,softDisabledReason:d,bold:h=!0,clearButtonDisabled:i,onClear:m,onChange:v}){if(!a)return null;const I=!u||t,p=t?"--icon-input-neutral-disabled":"--icon-input-neutral-default";return e(V,{$fullWidth:s,"data-test":"SelectedItem",children:f(J,{$inputSize:o,"data-test":"SelectedItemHeader",children:[a.icon,f(K,{"data-test":"StyledColumn",children:[e(b,{font:h?"body-l-bold":"body-l",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"TSpan",children:a.label}),e(b,{colorToken:"--text-tablecell-body-neutral-default","data-test":"TSpan",children:a.description})]}),f(Q,{"data-test":"SelectedRightColumn",children:[r,I&&(d?e(q,{icon:o==="small"?"close_s":"close_m",iconSize:24,iconColor:p,top:30,left:20,onClick:()=>{},"data-test":"Tooltip",children:e(Z,{"data-test":"TooltipMessage",children:d})}):i?null:e(C,{name:o==="small"?"close_s":"close_m",size:24,onClick:()=>{v(void 0),m==null||m()},color:p,"data-test":"Icon"}))]})]})})}function oe(a,s){switch(s.mode){case"create":return{mode:"create",editedIndex:null};case"preview":return{mode:"preview",editedIndex:null};case"edit":return{mode:"edit",editedIndex:s.editedIndex};default:return a}}function Ie({name:a,initialMode:s="preview"}){const[{mode:r,editedIndex:u},o]=S.useReducer(oe,{mode:s,editedIndex:null}),{control:t}=R(),{fields:d,append:h,update:i,remove:m,insert:v}=W({name:a,control:t});return{mode:r,editedIndex:u,fields:d,control:t,showNewItemForm:()=>{o({mode:"create"})},hideNewItemForm:()=>{o({mode:"preview"})},addNewItem:c=>{h(c),o({mode:"preview"})},deleteItem:c=>{m(c),o({mode:"preview"})},cancelItemEditing:()=>{o({mode:"preview"})},saveItem:(c,T)=>{i(c,T),o({mode:"preview"})},editItem:c=>{o({mode:"edit",editedIndex:c})},insertItemAt:(c,T)=>{v(c,T)}}}const ne=g(k).attrs(()=>({}))`
  position: relative;
`,j=g(k).attrs(()=>({justify:"center",align:"center"}))`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: ${E(L("--bg-overlay-neutral-light"),.2)};
`,re=g(j)``,M=g(j)`
  display: none;
  cursor: pointer;
`,ie=g(k)`
  background-color: var(--bg-card-neutral-alt-default);

  &:hover ${M} {
    display: flex;
  }
`,w={PdfPreviewWrapper:ie,Content:ne,Overlay:j,ClickOverlay:M,LoadingOverlay:re};B.GlobalWorkerOptions.workerSrc=`${window.location.origin}/pdf.worker.js`;function we({children:a,isLoading:s,data:r,fitBy:u="width",onClick:o,...t}){const d=S.useRef(null),{width:h,height:i}=Y(d);return e(w.PdfPreviewWrapper,{ref:d,align:"center",justify:"center",...t,children:r?a??f(w.Content,{children:[e(D,{file:r,loading:s?e(x,{"data-test":"Spinner"}):void 0,"data-test":"Document",children:e(G,{width:u==="width"?h:void 0,height:u==="height"?i:void 0,pageNumber:1,"data-test":"Page"})}),s?e(w.LoadingOverlay,{children:f(P,{tertiary:!0,disabled:!0,"data-test":"Button",children:[" ",e(x,{"data-test":"Spinner"})]})}):e(w.ClickOverlay,{onClick:o,children:e(P,{tertiary:!0,onClick:o,icon:e(C,{name:"zoom_m",size:24,"data-test":"Icon"}),"data-test":"Button"})})]}):e(b,{font:"body-l-bold",colorToken:"--text-card-neutral-disabled","data-test":"TSpan",children:"No PDF Available"})})}export{ee as A,we as P,Z as T,ve as a,be as b,Ie as u};
//# sourceMappingURL=PdfPreviewThumbnail-3547d9fe.js.map
