import{c as l,F as z,j as t,T as s,a4 as K,D as F,B as b,x as Q,u as V,f as H,ci as U,R as m,S as o,cV as J,I as X,s as Y,qh as Z}from"./index-cd84bcc9.js";import{ar as R,C as q,a9 as tt,r,ay as v}from"./vendor-51460554.js";import{O as A}from"./OtpInput-6d75f9c8.js";import{E as $}from"./trackingEvents-87d8ea4c.js";import{u as et}from"./countDownTimer-549e0bbe.js";import{Q as at}from"./QuickSignUpScreenLayout-e2476265.js";import{O as nt}from"./OnboardingScreenLayout-687de002.js";import{A as E,S as ot}from"./styles-dc2530dc.js";import{d as st,e as it}from"./styles-ba20ba6a.js";import{b as B}from"./styles-5298610f.js";import"./styles-a68f1539.js";import"./index-a3ee8d79.js";import"./storyblok-c16fb040.js";const dt=90,rt=({duration:d,handleTimedOut:i})=>{const{t:a}=R();return d!==0&&d<=dt?l(z,{children:[t(st,{children:l(s,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"RenderResendOTPMessage-TSpan",children:[a("noumena.resend_otp_code_sent.text")," "]})}),t(it,{duration:d,children:l(s,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"RenderResendOTPMessage-TSpan",children:[a("noumena.resend_otp_please_wait.text")," ",t(K,{initialSeconds:d,timedOut:i,"data-test":"RenderResendOTPMessage-Timer"})," ",a("noumena.resend_otp_before_request.text")]})})]}):t(s,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"RenderResendOTPMessage-TSpan",children:a("noumena.resend_otp_please_wait_24h.text")})},D=({handleResendOtp:d})=>{const{t:i}=R(),{nextRequestAfter:a,isResendOTPDisabled:O,timedOut:e}=F();return O?t(s,{font:"body-m",colorToken:"--text-body-neutral-default","data-test":"ResendOTPInfo-TSpan",children:t(rt,{handleTimedOut:e,duration:a,"data-test":"ResendOTPInfo-RenderResendOTPMessage"})}):t(b,{primary:!0,textOnly:!0,size:"small",onClick:d,"data-testid":"handleResendOtpID",style:{borderRadius:0},"data-test":"ResendOTPInfo-Button",children:t(s,{colorToken:"--text-button-brand-secondary-default","data-test":"ResendOTPInfo-TSpan",children:i("noumena.register.otp.resend_code")})})},W=q.div`
  min-height: 80vh;
  width: 343px;
`,S=q(Q)`
  width: 100%;
`,lt=parseInt(Y.TABLET,10)||768,kt=()=>{const{width:d}=V(),{t:i}=R(),{loading:a}=H(),{loading:O,userInfo:e,submitOtp:_,signUpEmail:G,signUpUser:I,remainingRequests:M,nextRequestAfter:j,isSigningUpFromNextApp:c,backUrl:f,quickSignUpNoumId:w}=F(),[L]=et(j),h=tt(),k=r.useRef(new AbortController),[n,g]=r.useState(),[p,P]=r.useState(!1),x=r.useMemo(()=>d<lt,[d]),T=r.useCallback(async()=>{if(k.current=new AbortController,!n||n.length!==4||p||a)return;P(!0),await _(n,k.current.signal)?await I():g(""),P(!1)},[n,p,a,_,I]),y=r.useCallback(()=>{U($.ONBOARDING.OTP.BACK),h(c?`${m.QUICK_SIGN_UP}?quickNoumID=${w}&backurl=${f}`:m.SIGN_UP,{replace:!0})},[f,c,h,w]);r.useEffect(()=>{window.onpopstate=u=>{u.preventDefault(),window.location.pathname.includes(m.SIGN_UP_OTP)&&y()}},[y]);const C=()=>{k.current.abort(),g(""),U($.ONBOARDING.OTP.RESEND),G((e==null?void 0:e.email)||"")};r.useEffect(()=>{!e&&!c&&h(m.SIGN_UP)},[e,h,c]),r.useEffect(()=>{!e&&c&&h(`${m.QUICK_SIGN_UP}?quickNoumID=${w}&backurl=${f}`)},[e,h,c,w,f]);const N=p||a||M===Z&&L!==0;return c?t(at,{onBackClick:y,"data-test":"ShowOtp-QuickSignUpScreenLayout",children:t(E,{"data-testid":"SIGN_UP_OTP",className:"App","data-test":"ShowOtp-AppStyled",children:l(B,{vertical:!0,"data-testid":"otpContainer","data-test":"ShowOtp-Screen",children:[t(o,{height:16,"data-test":"ShowOtp-Spacer"}),l(W,{"data-test":"ShowOtp-OtpStyled",children:[t(s,{colorToken:"--text-body-header-neutral-default",font:"heading-m-bold",$fill:!0,style:{whiteSpace:x?void 0:"nowrap"},"data-test":"ShowOtp-TSpan",children:i("noumena.register.otp.verify_email")}),t(o,{height:16,"data-test":"ShowOtp-Spacer"}),t("div",{children:t(s,{font:"body-l",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"ShowOtp-TSpan",children:t(v,{i18nKey:"noumena.register.otp.check_your_email",components:{Text:t(s,{font:"body-l",$fill:!0,colorToken:"--text-body-neutral-highlighted","data-test":"ShowOtp-TSpan"})},values:{email:(e==null?void 0:e.email)||""},"data-test":"ShowOtp-Trans"})})}),t(o,{height:32,"data-test":"ShowOtp-Spacer"}),t(A,{value:n,onChange:u=>g(u),onEnter:T,"data-test":"ShowOtp-OtpInput"}),t(o,{height:32,"data-test":"ShowOtp-Spacer"}),t(S,{"data-test":"ShowOtp-FullWidthStack",children:t(b,{id:"verify-email-signup-next-btn",primary:!0,size:"full",onClick:T,disabled:p||a||!n||(n==null?void 0:n.trim().length)<4,"data-testid":"submitOtp",loading:p||O||a,"data-test":"ShowOtp-Button",children:i("noumena.next.text")})}),t(o,{height:35,"data-test":"ShowOtp-Spacer"}),t(S,{align:"center",justify:"center","data-test":"ShowOtp-FullWidthStack",children:t(D,{handleResendOtp:C,"data-test":"ShowOtp-ResendOTPInfo"})}),t(o,{height:x?24:32,"data-test":"ShowOtp-Spacer"}),t(S,{align:"center",justify:"center","data-test":"ShowOtp-FullWidthStack",children:t(s,{font:"body-s",$fill:!0,colorToken:"--text-body-neutral-disabled",textAlign:"center","data-test":"ShowOtp-TSpan",children:i("noumena.register.otp.thanks")})})]})]})})}):t(nt,{"data-test":"ShowOtp-OnboardingScreenLayout",children:l(E,{"data-testid":"SIGN_UP_OTP",className:"App","data-test":"ShowOtp-AppStyled",children:[t(ot,{"data-test":"ShowOtp-StyledStep",children:t(J,{primary:!0,size:"medium","data-test":"ShowOtp-Chips",children:i("noumena.sign_up.stepper",{currentStep:1,allSteps:2})})}),l(B,{vertical:!0,"data-testid":"otpContainer","data-test":"ShowOtp-Screen",children:[t(o,{height:16,"data-test":"ShowOtp-Spacer"}),l(W,{"data-test":"ShowOtp-OtpStyled",children:[t(s,{colorToken:"--text-body-header-neutral-default",font:"heading-m-bold",$fill:!0,"data-test":"ShowOtp-TSpan",children:i("noumena.register.otp.verify_email")}),t(o,{height:16,"data-test":"ShowOtp-Spacer"}),t("div",{children:t(s,{font:"body-l",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"ShowOtp-TSpan",children:t(v,{i18nKey:"noumena.register.otp.check_your_email",components:{Text:t(s,{font:"body-l",$fill:!0,colorToken:"--text-body-neutral-highlighted","data-test":"ShowOtp-TSpan"})},values:{email:(e==null?void 0:e.email)||""},"data-test":"ShowOtp-Trans"})})}),t(o,{height:32,"data-test":"ShowOtp-Spacer"}),t(A,{value:n,onChange:u=>g(u),onEnter:T,"data-test":"ShowOtp-OtpInput"}),t(o,{height:32,"data-test":"ShowOtp-Spacer"}),l(S,{"data-test":"ShowOtp-FullWidthStack",children:[t(b,{leftIcon:t(X,{color:N?"--icon-button-neutral-disabled":"--icon-button-neutral-default",name:"arrow_left_m",size:16,"data-test":"ShowOtp-Icon"}),style:{minWidth:"100px"},onClick:y,disabled:N,"data-test":"ShowOtp-Button",children:i("noumena.back.text")}),t(o,{width:16,"data-test":"ShowOtp-Spacer"}),t(b,{id:"verify-email-signup-next-btn",primary:!0,size:"full",onClick:T,disabled:p||a||!n||(n==null?void 0:n.trim().length)<4,"data-testid":"submitOtp",loading:p||O||a,"data-test":"ShowOtp-Button",children:i("noumena.next.text")})]}),t(o,{height:35,"data-test":"ShowOtp-Spacer"}),t(S,{align:"center",justify:"center","data-test":"ShowOtp-FullWidthStack",children:t(D,{handleResendOtp:C,"data-test":"ShowOtp-ResendOTPInfo"})}),t(o,{height:x?24:32,"data-test":"ShowOtp-Spacer"}),t(S,{align:"center",justify:"center","data-test":"ShowOtp-FullWidthStack",children:t(s,{font:"body-s",$fill:!0,colorToken:"--text-body-neutral-disabled",textAlign:"center","data-test":"ShowOtp-TSpan",children:i("noumena.register.otp.thanks")})})]})]})]})})};export{kt as default};
//# sourceMappingURL=index-72ff7ace.js.map
