import{T as m,j as t,X as b,c as o,x as l,am as P,B as h,I as p,g as q,bj as G,f as U,au as L,b7 as X,v as O,M as V,t as Y,h as J,i as K,a2 as Q,k as Z,bk as ee,F as T,bl as B,aC as te,R as ae,ae as ne,m as w,bd as oe,y as re,b3 as se,q as ie,n as le}from"./index-cd84bcc9.js";import{C as v,ay as ce,ar as H,r as f,aa as de,b2 as ue,N as z,bJ as x,bK as me,bL as I,bM as ge}from"./vendor-51460554.js";import{A as W}from"./index-35efb18f.js";import{F as he}from"./index-af3e0302.js";import{u as pe}from"./navigation-419d637e.js";import{M as ve,u as fe,a as Me}from"./MemberStatusTag-69ed5aaa.js";import{R as N}from"./Radiobox-c1e62033.js";import{E}from"./EllipsisMenu-8495dca0.js";import"./styles-26e8a352.js";import"./Pagination-43542d57.js";import"./Accordion-ea03839b.js";import"./index-4963229a.js";import"./useResizeObserver-0deb9469.js";import"./Modal-5a254f40.js";import"./ChamberActionModal-ce3fca40.js";import"./styles-1a9b9e59.js";import"./LinkNoumOption-dc9c410c.js";import"./consts-be860660.js";import"./SelectField-54706174.js";import"./forms-18e3c53a.js";import"./styles-d2f9f396.js";const Se=v(m).attrs({font:"body-m-bold",colorToken:"--text-card-header-neutral-highlighted"})``,ye={BodyHighlighted:Se};function be({i18nKey:e,values:a}){return t(ce,{i18nKey:e,values:a,components:{b:t(ye.BodyHighlighted,{})},"data-test":"Trans"})}function De({item:e}){switch(e.type){case"post-added":return{key:"noumena.noum_member_details.activity_logs.post_added",values:{user:e.user}};case"event-hosted":return{key:"noumena.noum_member_details.activity_logs.event_hosted",values:{user:e.user,eventName:e.eventName}};case"event-created":return{key:"noumena.noum_member_details.activity_logs.event_created",values:{user:e.user,eventName:e.eventName}};case"member-invited":return{key:"noumena.noum_member_details.activity_logs.member_invited",values:{sourceUser:e.sourceUser,targetUser:e.targetUser}};case"manager-invited":return{key:"noumena.noum_member_details.activity_logs.manager_invited",values:{sourceUser:e.sourceUser,targetUser:e.targetUser}};case"manager-invite-accepted":return{key:"noumena.noum_member_details.activity_logs.manager_invite_accepted",values:{user:e.user}};case"message-sent":return{key:"noumena.noum_member_details.activity_logs.message_sent",values:{sourceUser:e.sourceUser,targetUser:e.targetUser}};case"transaction":return{key:"noumena.noum_member_details.activity_logs.transaction",values:{user:e.user,amount:e.amount,invoiceNumber:e.invoiceNumber}};default:return null}}const ke=[{label:"All Types",key:"all",type:"value",value:"all"},{label:"Posts Posted",key:"posts",type:"value",value:"posts"},{label:"Messages Sent",key:"messages",type:"value",value:"messages"},{label:"Member Invited",key:"invited",type:"value",value:"invited"},{label:"Transactions",key:"transactions",type:"value",value:"transactions"},{label:"Event Hosted",key:"events",type:"value",value:"events"}],F={getTranslationByType:De,filterDropdownOptions:ke},Ce=({item:e})=>{if(!e)return null;const a=F.getTranslationByType({item:e});return t(W.Item,{iconName:"check_xs",description:a!=null&&a.key?t(be,{i18nKey:a.key,values:a.values,"data-test":"ActivityLogsItem-TranslatedBody"}):null,timestamp:e.createdAt})},_e=({activityLogs:e})=>{const{t:a}=H(),{isMobile:n}=b();return e.length?o(l,{vertical:!0,gap:16,fullWidth:!0,"data-test":"ActivityLogs-Stack",children:[o(l,{fullWidth:!0,justify:"space-between",align:"center","data-test":"ActivityLogs-Stack",children:[t(m,{font:"heading-xs-bold","data-test":"ActivityLogs-TSpan",children:a("noumena.noum_member_details.activity_logs.heading")}),t(P,{hideIcons:!0,containerWidth:"280px",onSelectOption:()=>null,options:F.filterDropdownOptions,renderContainerFromBottom:n,"data-test":"ActivityLogs-Dropdown",children:({targetRef:r,toggle:s})=>t(h,{ref:r,size:"small",tertiary:!0,rightIcon:t(p,{name:"chevron_down_m",size:16,color:"--icon-input-neutral-default","data-test":"ActivityLogs-Icon"}),onClick:s,"data-test":"ActivityLogs-Button",children:"All Types"})})]}),t(l,{gap:16,vertical:!0,fullWidth:!0,"data-test":"ActivityLogs-Stack",children:t(W.List,{children:e.map(r=>t(Ce,{item:r,"data-test":"ActivityLogs-ActivityLogsItem"},r.id))})})]}):t(l,{fullWidth:!0,justify:"center","data-test":"ActivityLogs-Stack",children:t(m,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"ActivityLogs-TSpan",children:a('noumena.noum_member_details.activity_logs.not_found"')})})},$=f.createContext({member:void 0,loading:!1,noum:void 0}),we=({children:e})=>{const{id:a="",memberId:n=""}=de(),{space:r,loading:s}=q(a),{data:i,loading:c}=G({variables:{memberId:n}}),u=f.useMemo(()=>({member:i==null?void 0:i.noumMember,loading:s||c,noum:r}),[i==null?void 0:i.noumMember,s,c,r]);return t($.Provider,{value:u,children:e})},C=()=>{const e=f.useContext($);if(!e)throw new Error("useNoumManagerDetailsProvider must be rendered within NoumManagerDetailsContext.Provider.");return e},Te=({rightContent:e,user:a,member:n,onGoBack:r})=>{var c;const{user:s}=U(),{isMobile:i}=b();return!a||!n?null:o(l,{align:"center",justify:"space-between","data-test":"ManagerDetailsBaseHeader-Stack",children:[o(l,{align:"center",gap:8,"data-test":"ManagerDetailsBaseHeader-Stack",children:[o(l,{align:"center","data-test":"ManagerDetailsBaseHeader-Stack",children:[t(h,{neutral:!0,icon:t(p,{color:"--icon-button-neutral-default",name:"arrow_left_m",size:24,"data-test":"ManagerDetailsBaseHeader-Icon"}),onClick:r,"data-test":"ManagerDetailsBaseHeader-Button"}),!i&&t(L,{size:"M",src:((c=a.profile)==null?void 0:c.profilePicture)??"","data-test":"ManagerDetailsBaseHeader-Avatar"})]}),o(l,{vertical:i,align:i?"start":"center",gap:i?4:8,"data-test":"ManagerDetailsBaseHeader-Stack",children:[o(m,{font:"heading-xs",colorToken:"--text-card-neutral-highlighted","data-test":"ManagerDetailsBaseHeader-TSpan",children:[X.renderFullName(a),(s==null?void 0:s._id)===a._id?t(m,{colorToken:"--text-card-neutral-default","data-test":"ManagerDetailsBaseHeader-TSpan",children:" (You)"}):null]}),t(ve,{member:n,"data-test":"ManagerDetailsBaseHeader-MemberRoleTag"})]})]}),t(l,{align:"center",gap:16,"data-test":"ManagerDetailsBaseHeader-Stack",children:e})]})},Be=({onClick:e})=>t(h,{leftIcon:t(p,{name:"close_m",size:16,"data-test":"ResignButton-Icon"}),secondary:!0,intent:"negative",size:"small",onClick:e,"data-test":"ResignButton-Button",children:"Resign from the Manager Role"}),xe=({onClick:e})=>t(h,{leftIcon:t(p,{name:"edit_m",size:16,"data-test":"EditRoleButton-Icon"}),tertiary:!0,size:"small",onClick:e,"data-test":"EditRoleButton-Button",children:"Edit Role"}),Ie=({onClick:e})=>t(h,{leftIcon:t(p,{name:"close_m",size:16,"data-test":"DisconnectButton-Icon"}),secondary:!0,intent:"negative",size:"small",onClick:e,"data-test":"DisconnectButton-Button",children:"Disconnect"}),Ne=({onClick:e})=>t(h,{leftIcon:t(p,{name:"close_m",size:16,"data-test":"CancelInviteButton-Icon"}),secondary:!0,intent:"negative",size:"small",onClick:e,"data-test":"CancelInviteButton-Button",children:"Cancel Invite"}),D={BaseHeader:Te,ResignButton:Be,EditRoleButton:xe,DisconnectButton:Ie,CancelInviteButton:Ne};function Ae({isOpen:e,onClose:a,onConfirm:n}){const[r,s]=f.useState(),{addErrorToast:i}=O(),{isMobile:c}=b(),u=()=>{if(!r){i("Select one of the options.");return}n(r==="disconnect")};return o(V,{open:e,size:Y.L,isFullScreen:c,onClose:a,testId:"resign-flow-modal",disableBackdropClick:!0,"data-test":"Modal",children:[t(J,{topPadding:0,"data-test":"ModalHeader",children:"Resign from the Manager Role"}),o(K,{gap:32,"data-test":"ModalBody",children:[t(m,{font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"TSpan",children:"Once you decide to resign, you will no longer have access to the management tools and features associated with the Manager role."}),o(l,{gap:20,vertical:!0,fullWidth:!0,padding:"0 0 16px 0","data-test":"Stack",children:[o(l,{gap:16,"data-test":"Stack",children:[t(N,{isChecked:r==="stay-connected",onChange:()=>s("stay-connected"),"data-test":"Radiobox"}),t(m,{font:"body-l",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"TSpan",children:"Resign and stay connected as a guest"})]}),t(Q,{fullWidth:!0,noMargin:!0,"data-test":"Separator"}),o(l,{gap:16,"data-test":"Stack",children:[t(N,{isChecked:r==="disconnect",onChange:()=>s("disconnect"),"data-test":"Radiobox"}),t(m,{font:"body-l",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"TSpan",children:"Resign and disconnect from Noum"})]})]})]}),o(Z,{isFullScreen:c,gap:16,flexDirection:c?"column":"row","data-test":"ModalFooter",children:[t(h,{tertiary:!0,size:"full",onClick:a,"data-testid":"confirm-button","data-test":"Button",children:"Cancel"}),t(h,{intent:"negative",size:"full",softDisabled:!r,onClick:u,"data-test":"Button",children:"Resign"})]})]})}function Re({noumId:e,onResign:a}){const[n,r]=f.useState(!1),{addSuccessIconToast:s,addErrorToast:i}=O(),{t:c}=H(),[u]=ee();return{openModal:()=>r(!0),closeModal:()=>r(!1),resignFromManagerModal:t(Ae,{isOpen:n,onClose:()=>r(!1),onConfirm:async S=>{if(e)try{await u({variables:{input:{disconnectFromNoum:S,noumIDs:[e]}}}),s(c(S?"You have resigned from the Manger role and disconnected from the Noum.":"You have resigned from the Manager role.")),a==null||a()}catch(_){_ instanceof Error&&i(_.message)}},"data-test":"resignFromManagerModal-ResignFlow"})}}const Pe=({onGoBack:e})=>{var d;const{noum:a,member:n}=C(),{isMobile:r}=b(),{user:s}=U(),{openModal:i,resignFromManagerModal:c}=Re({noumId:(a==null?void 0:a._id)??"",onResign:()=>null}),u=((d=n==null?void 0:n.user)==null?void 0:d._id)===(s==null?void 0:s._id),M=u?t(E,{containerWidth:"125px",neutral:!0,onClick:()=>{},menuOptions:[{key:"resign",label:"Resign from the Manager Role",type:"value",value:"resign",intent:"danger",onClick:i}],iconColorToken:"--button-card-neutral-default","data-test":"ManagerHeader-RightContentMobile-EllipsisMenu"}):null;return o(T,{children:[t(D.BaseHeader,{user:a==null?void 0:a.uid,member:n,onGoBack:e,rightContent:r?M:u?t(D.ResignButton,{onClick:i}):null}),c]})},Ue=({onGoBack:e})=>{const{noum:a,member:n}=C(),{isMobile:r}=b(),{openModal:s,disconnectModalElement:i,editRoleModalElement:c}=fe({noumId:(a==null?void 0:a._id)??"",onDisconnect:()=>null,onEditRoles:()=>null}),u=(n==null?void 0:n.status)===B.Connected,M=(n==null?void 0:n.status)===B.Invited,d=()=>{n&&s("disconnect",[n])},S=()=>{n&&s("edit-role",[n])},_=t(E,{containerWidth:"125px",neutral:!0,onClick:()=>{},menuOptions:te([{key:"edit-role",label:"Edit Role",type:"value",value:"edit-role",onClick:S},u?{key:"disconnect",label:"Disconnect",type:"value",value:"disconnect",intent:"danger",onClick:d}:void 0,M?{key:"cancel-invite",label:"Cancel Invite",type:"value",value:"cancel-invite",intent:"danger",onClick:()=>null}:void 0]),iconColorToken:"--button-card-neutral-default","data-test":"NoumOwnerHeader-RightContentMobile-EllipsisMenu"});return o(T,{children:[t(D.BaseHeader,{user:a==null?void 0:a.uid,member:n,onGoBack:e,rightContent:r?_:o(T,{children:[u?t(D.DisconnectButton,{onClick:d}):M?t(D.CancelInviteButton,{onClick:()=>null}):null,t(D.EditRoleButton,{onClick:S})]})}),i,c]})},Le=()=>{var c,u;const{goBackToOrigin:e}=pe(),{noum:a,member:n}=C(),r=(a==null?void 0:a._id)??"",s=()=>{e({fallbackUrl:ue(ae.NOUM,{id:r})})};return((c=a==null?void 0:a.uid)==null?void 0:c._id)===((u=n==null?void 0:n.user)==null?void 0:u._id)?t(Ue,{onGoBack:s,"data-test":"DetailsHeader-NoumOwnerHeader"}):t(Pe,{onGoBack:s,"data-test":"DetailsHeader-ManagerHeader"})},j=v(ne)`
  padding: 24px;
  width: 100%;
  overflow: visible;
`,Oe=v.div`
  display: grid;
  grid-template-columns: auto auto auto auto;
  width: 100%;
  grid-gap: 8px;

  @media (max-width: ${w.TABLET_MAX}) {
    grid-template-columns: auto auto;
  }

  @media (max-width: ${w.MOBILE_L_MAX}) {
    grid-template-columns: auto;
    grid-gap: 24px;
  }
`,He=v(l).attrs({vertical:!0,fullWidth:!0,gap:8})``,ze=v(l).attrs({align:"center",fullWidth:!0,gap:8})``,We=v(m).attrs({font:"body-m",colorToken:"--text-card-neutral-default"})``,g={ColumnSection:He,Row:ze,RowTitle:We,ColumnsWrapper:Oe},Ee=()=>{const{noum:e,member:a}=C();return!e||!a?null:t(j,{"data-test":"ManagerDetailsSection-CardStyled",children:o(l,{vertical:!0,gap:16,"data-test":"ManagerDetailsSection-Stack",children:[t(m,{font:"heading-xs-bold","data-test":"ManagerDetailsSection-TSpan",children:"Manager Details"}),o(g.ColumnsWrapper,{children:[o(g.ColumnSection,{children:[t(g.RowTitle,{children:"Noum:"}),o(g.Row,{children:[t(L,{url:e.profileImage,size:oe.M,"data-test":"ManagerDetailsSection-Avatar"}),t(m,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"ManagerDetailsSection-TSpan",children:e.name})]})]}),o(g.ColumnSection,{children:[t(g.RowTitle,{children:"Noum Wallet:"}),t(g.Row,{children:t(m,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"ManagerDetailsSection-TSpan",children:"Daily Limit: $500.00 / 1.000,00"})})]}),o(g.ColumnSection,{children:[t(g.RowTitle,{children:"Status:"}),t(g.Row,{children:t(Me,{member:a,"data-test":"ManagerDetailsSection-MemberStatusTag"})})]}),o(g.ColumnSection,{children:[t(g.RowTitle,{children:"Connected:"}),t(g.Row,{children:t(m,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"ManagerDetailsSection-TSpan",children:a.connectedAt?z(new Date(a.connectedAt),"MM/dd/yyyy, hh:mm a"):"-"})})]})]})]})})},Fe=[{label:"Weekly",key:"weekly",type:"value",value:"weekly"},{label:"Monthly",key:"monthly",type:"value",value:"monthly"},{label:"Quarterly",key:"quarterly",type:"value",value:"quarterly"},{label:"Custom",key:"custom",type:"value",value:"custom"}],A=e=>e?z(e,"MMM d"):"",$e=e=>e?`${A(e.from)} - ${A(e.to)}`:"",je=(e,a)=>{if(!(e!=null&&e.from)||!e.to)return null;switch(a){case"monthly":return{from:x(e.from,1),to:e.from};case"weekly":return{from:me(e.from,1),to:e.from};case"quarterly":return{from:x(e.from,3),to:e.from};default:return null}},qe=(e,a)=>{if(!(e!=null&&e.from)||!e.to)return null;switch(a){case"monthly":return{from:e.to,to:I(e.to,1)};case"weekly":return{from:e.to,to:ge(e.to,1)};case"quarterly":return{from:e.to,to:I(e.to,3)};default:return null}},y={dropdownOptions:Fe,formatDateRange:$e,getNextDate:qe,getPrevDate:je},Ge=()=>{const{isMobile:e}=b(),[a,n]=f.useState("weekly"),[r,s]=f.useState(()=>y.getPrevDate({from:new Date,to:new Date},a)),i=f.useMemo(()=>y.dropdownOptions.find(d=>d.value===a),[a]),c=d=>{s(d==="custom"?null:y.getPrevDate({from:new Date,to:new Date},d)),n(d)},u=()=>{s(y.getPrevDate(r,a))},M=()=>{s(y.getNextDate(r,a))};return o(l,{gap:16,vertical:e,fullWidth:e,"data-test":"MembersStatsDate-Stack",children:[t(l,{fullWidth:e,"data-test":"MembersStatsDate-Stack",children:t(P,{hideIcons:!0,containerWidth:"280px",onSelectOption:d=>c(d.value),options:y.dropdownOptions,renderContainerFromBottom:e,"data-test":"MembersStatsDate-Dropdown",children:({targetRef:d,toggle:S})=>t(h,{ref:d,size:e?"full_small":"small",tertiary:!0,rightIcon:t(p,{name:"chevron_down_m",size:16,color:"--icon-input-neutral-default","data-test":"MembersStatsDate-Icon"}),onClick:S,"data-test":"MembersStatsDate-Button",children:i==null?void 0:i.label})})}),t(l,{fullWidth:e,"data-test":"MembersStatsDate-Stack",children:a!=="custom"?o(l,{gap:8,fullWidth:e,"data-test":"MembersStatsDate-Stack",children:[t(h,{size:"small",icon:t(p,{name:"chevron_left_m",size:16,color:"--icon-button-neutral-default","data-test":"MembersStatsDate-Icon"}),onClick:u,"data-test":"MembersStatsDate-Button"}),t(re,{value:y.formatDateRange(r),inputSize:"small",readOnly:!0,"data-test":"MembersStatsDate-TextField"}),t(h,{size:"small",icon:t(p,{name:"chevron_right_m",size:16,color:"--icon-button-neutral-default","data-test":"MembersStatsDate-Icon"}),onClick:M,"data-test":"MembersStatsDate-Button"})]}):t(se,{minWidth:"240px",minPopperWidth:"320px",size:"small",placement:"bottom-end",fullSize:e,label:"",placeholder:"Select Date",onChangeRange:d=>s(d),rangeValue:r??void 0,mode:"range","data-test":"MembersStatsDate-DatePicker"})})]})},Xe=v(l).attrs({vertical:!0,gap:8})`
  border-radius: 16px;
  border: 1px solid var(--border-card-neutral-default);
  background: var(--bg-card-neutral-alt-default);
  padding: 24px;
`,Ve=v(m).attrs({font:"heading-xs-bold",colorToken:"--text-card-neutral-highlighted"})``,R={Container:Xe,ValueText:Ve},k=({label:e,value:a})=>o(R.Container,{children:[t(ie,{tertiary:!0,size:"small","data-test":"StatsCard-Tag",children:e}),t(R.ValueText,{children:a})]}),Ye=v.div`
  display: grid;
  grid-template-columns: auto auto auto auto auto;
  width: 100%;
  grid-gap: 16px;

  @media (max-width: ${w.TABLET_MAX}) {
    grid-template-columns: auto auto auto;
  }

  @media (max-width: ${w.MOBILE_L_MAX}) {
    grid-template-columns: auto auto;
  }
`,Je={StatsGrid:Ye},Ke=()=>{const{isMobile:e}=b();return o(l,{fullWidth:!0,vertical:!0,gap:16,"data-test":"UserPerformanceSection-Stack",children:[o(l,{justify:"space-between",fullWidth:!0,gap:16,vertical:e,"data-test":"UserPerformanceSection-Stack",children:[t(m,{font:"heading-xs-bold","data-test":"UserPerformanceSection-TSpan",children:"Manager Performance"}),t(Ge,{"data-test":"UserPerformanceSection-MembersStatsDate"})]}),o(Je.StatsGrid,{children:[t(k,{label:"Posts Posted",value:"1234","data-test":"UserPerformanceSection-StatsCard"}),t(k,{label:"Messages Sent",value:"1234","data-test":"UserPerformanceSection-StatsCard"}),t(k,{label:"Members Invited",value:"1234","data-test":"UserPerformanceSection-StatsCard"}),t(k,{label:"Transactions",value:"1234","data-test":"UserPerformanceSection-StatsCard"}),t(k,{label:"Events Hosted",value:"1234","data-test":"UserPerformanceSection-StatsCard"})]})]})},Qe=[{id:"1",createdAt:new Date().toISOString(),sourceUser:"John Doe",targetUser:"Richard Roe",type:"message-sent"},{id:"2",createdAt:new Date().toISOString(),user:"Alex Doe",eventName:"Event Name",type:"event-hosted"},{id:"3",createdAt:new Date().toISOString(),user:"Michelle Doe",type:"post-added"},{id:"4",createdAt:new Date().toISOString(),user:"Alex Doe",eventName:"Event Name",type:"event-created"},{id:"5",createdAt:new Date().toISOString(),user:"Michelle Doe",type:"manager-invite-accepted"},{id:"6",createdAt:new Date().toISOString(),sourceUser:"Michelle Doe",targetUser:"Richard Roe",type:"manager-invited"},{id:"7",createdAt:new Date().toISOString(),user:"Michelle Doe",amount:"$500.00",invoiceNumber:"455123",type:"transaction"},{id:"8",createdAt:new Date().toISOString(),sourceUser:"Michelle Doe",targetUser:"Richard Roe",type:"member-invited"}],Ze=()=>{const{loading:e,noum:a,member:n}=C();return e&&(!a||!n)?t(le,{"data-test":"NoumManagerDetailsScreen-Spinner"}):t(he,{responsiveMain:!0,navBarContent:t(Le,{"data-test":"NoumManagerDetailsScreen-DetailsHeader"}),"data-test":"NoumManagerDetailsScreen-FullScreenLayout",children:o(l,{vertical:!0,gap:16,fullWidth:!0,"data-test":"NoumManagerDetailsScreen-Stack",children:[!1,t(Ee,{"data-test":"NoumManagerDetailsScreen-ManagerDetailsSection"}),t(j,{"data-test":"NoumManagerDetailsScreen-CardStyled",children:o(l,{fullWidth:!0,vertical:!0,gap:32,"data-test":"NoumManagerDetailsScreen-Stack",children:[t(Ke,{"data-test":"NoumManagerDetailsScreen-UserPerformanceSection"}),t(_e,{activityLogs:Qe,"data-test":"NoumManagerDetailsScreen-ActivityLogs"})]})})]})})},bt=()=>t(we,{"data-test":"NoumManagerDetailsProvider",children:t(Ze,{"data-test":"NoumManagerDetailsScreen"})});export{bt as default};
//# sourceMappingURL=NoumManagerDetails-983e3cd4.js.map
