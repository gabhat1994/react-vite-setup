import{gx as Yn,gy as zr,gz as Hr,gA as Dr,v as st,gB as Vr,bJ as Jo,bK as Jn,bO as Ur,j as t,gC as Qr,x as R,am as je,gD as Zn,c as m,gE as jr,T as E,I as L,gF as qr,gG as Xr,gH as Gr,gI as Yr,gJ as Jr,gK as Zr,e2 as pa,M as Ne,t as Ve,h as Qe,k as xt,B as X,u as Re,e as qe,i as Ue,S as K,y as Oe,b1 as Da,e1 as Kr,w as le,F as j,f as ye,gL as Zo,bs as _t,aH as ge,gb as el,ga as tl,bz as vn,aj as We,ax as Ba,gc as Wa,aR as Ca,p as al,R as kn,eu as mt,X as ot,s as me,c_ as Va,eh as Ko,g5 as En,gM as nl,ei as Rn,ae as ve,gN as et,bx as ol,dJ as Kn,dK as eo,gO as il,gP as rl,gQ as ei,gR as ll,bY as Ot,n as it,dL as sl,aa as Wt,r as ti,gS as ai,gT as ni,ab as gt,ci as ba,gU as dl,gV as cl,gW as to,a5 as qt,au as Yt,q as ft,aK as oi,cL as ii,gX as ul,cI as zn,aW as ri,bE as Ua,ao as ml,c4 as li,ge as pl,by as ao,bj as hl,gY as fl,az as nn,m as $t,bC as no,bB as ht,bt as A,eP as gl,cH as si,dH as di,gZ as ci,af as Ct,bP as Ae,dQ as wt,dY as ui,dX as mi,cK as bl,b2 as ue,bw as Qa,g_ as ja,g$ as xl,h0 as Cl,a4 as yl,h1 as qa,h2 as wl,dl as Sl,h3 as vl,h4 as pi,ay as aa,fi as hi,h5 as kl,di as fi,h6 as gi,fj as on,h7 as El,ds as _l,h8 as Ie,h9 as oo,ha as Ml,hb as bi,hc as $e,hd as io,he as ro,dj as Tl,ck as xi,dE as Ci,bA as Il,hf as at,hg as Mt,hh as Tt,fG as Nl,fH as Pl,hi as Rt,hj as Xt,aC as Ke,hk as vt,hl as ea,ff as lo,b7 as De,hm as Hn,hn as Al,ap as yi,ho as wi,hp as Ll,hq as Bl,fp as Fl,e8 as Ol,hr as Wl,hs as $l,fX as Si,aQ as ta,ht as vi,hu as Fa,hv as Rl,hw as zl,hx as Hl,hy as Dl,hz as so,hA as Vl,hB as ki,dP as Ul,hC as Ql,hD as jl,hE as ql,a2 as Xl,b3 as Gl,hF as Yl,hG as Jl,et as Zl,hH as Kl,hI as es,hJ as ts,hK as as,hL as ns,hM as Ce,at as _n,hN as os,d as Xa,fu as ya,aZ as Ei,hO as $a,hP as is,o as Mn,hQ as co,c8 as na,cV as Ra,hR as rs,hS as uo,c9 as ls,hT as ss,hU as Tn,hV as ds,hW as cs,hX as us,hY as ms,hZ as ps,h_ as hs,h$ as fs,i0 as mo,Y as gs,i1 as ha,Q as rn,V as ln,ev as St,i2 as bs,i3 as xs,aJ as Cs,aF as ys}from"./index-cd84bcc9.js";import{r,l as Ye,f as lt,B as C,ar as G,ap as oa,aq as ia,bb as Ft,a9 as wa,aT as Qt,a6 as de,C as u,am as Dn,an as Lt,N as Sa,ay as xa,al as bt,aQ as ws,ax as Ss,aB as vs,at as ks,au as Es,aN as _s,aa as Vn,ba as Ms,bH as Ts,X as _i,aI as Is,aJ as Ns,aK as Ps,bE as As}from"./vendor-51460554.js";import{b as Ls,c as Bs,d as Fs,e as Os,f as Ws,g as Mi,h as Ti,i as $s,j as Rs,k as zs,l as Hs,S as Ds,m as Vs,n as Us,A as Qs,o as js,u as qs,p as Xs,q as Pt,r as Gs,s as po,t as ho,v as Ys,w as Js,x as Zs,y as Ks,z as ed,B as td,D as ad,F as nd,G as od,H as id,I as fo,J as rd,K as ld,L as sd,O as dd}from"./index-401975c0.js";import{S as yt,r as Ii}from"./SkeletonChamberBox-5e97f066.js";import{a as cd,P as Ni,u as ud}from"./Modal-5a254f40.js";import"./styles-0c3f5396.js";import{e as md,M as pd,f as hd,g as fd,h as Pi,R as gd,i as bd,j as xd,E as Xe,k as Cd,S as yd,I as wd,l as Sd,m as vd,n as kd,B as Ed,o as _d,A as Md,V as Td,p as Ai,q as Id,r as Nd,C as Pd,s as Li,t as Bi,v as Ad,N as Ld,w as Bd,x as Ga}from"./ChamberCompleteness-c76bd15d.js";import{P as Fd,a as Od,U as Wd,L as $d,T as Rd,A as zd,C as Hd,S as Dd}from"./styles-9b108e05.js";import{R as Fi}from"./index-e04cac67.js";import{a as Oi,g as Wi}from"./getColorByNoumType-1fec2f43.js";import{u as Un,T as $i,C as Vd,D as Ud}from"./TokenModal-504d4668.js";import"./helper-53a5becb.js";import{R as In}from"./RichTextEditorView-3d7dc014.js";import{L as Qd,H as jd,M as qd,a as Xd,u as Gd,c as Yd}from"./HandleUnlinkNoum-c385ad89.js";import"./styles-d2f9f396.js";import"./styles-1a9b9e59.js";import"./index-ea5d695b.js";import{C as Jd,M as Zd}from"./MemberStatusTag-69ed5aaa.js";import"./SelectField-54706174.js";import"./styles-26e8a352.js";import{P as Qn}from"./Pagination-43542d57.js";import{A as Kd}from"./Accordion-ea03839b.js";import"./MultiselectField-a1e665cb.js";import{E as Ri}from"./EllipsisMenu-8495dca0.js";import{B as ec}from"./styles-58edde60.js";import{R as Nn}from"./Radiobox-c1e62033.js";import{E as sn}from"./trackingEvents-87d8ea4c.js";import{u as tc}from"./useGenerateTokenForCQ-2d299743.js";import{U as zi}from"./UploadMedia-5fe81e87.js";import{u as ac}from"./useScrollIntoElement-809d6327.js";import{u as nc}from"./useResizeObserver-0deb9469.js";import{C as Pn,a as oc,b as ic,c as rc,B as lc,N as Ya,d as sc,A as dc,e as cc,T as uc,f as mc,M as pc,g as hc,h as fc,i as gc,j as bc,k as xc,l as Cc,m as yc,n as wc,o as Sc}from"./NewHomeConversationUserSelector-1a2609b0.js";import{M as vc}from"./MessageInput-4cf1b973.js";import{D as kc,f as Ec,u as _c}from"./helper-75d0b640.js";import{m as Hi}from"./main-wallet-6d7dbd11.js";import{T as fa,a as Di}from"./index-594821a1.js";import{u as va,E as go,C as Mc,P as dn,a as Tc,b as Ic}from"./PostItem-d75f4356.js";import{O as bo,V as Nc,a as Pc,A as Ac,C as Lc}from"./CreateSection-88a250eb.js";import{C as Bc,A as Fc,N as Oc,a as Wc}from"./styles-6b43a970.js";import{g as Vi,a as $c,m as Ui,p as Rc}from"./url-8d85408e.js";import{C as zc,u as Hc,i as Dc}from"./lib-45016883.js";import{b as Qi,s as Vc}from"./utils-da9c4d96.js";import{B as Uc,D as Gt}from"./index-022aaf3d.js";import{D as Qc,a as Ja}from"./DocumentTypeTag-ae42a623.js";import{u as jc}from"./contractPermissions-cf3fd14b.js";import{u as qc}from"./statementOfWorkPermissions-68d8aac2.js";import{u as Xc}from"./navigation-419d637e.js";import{D as Za}from"./statementOfWork-e03c986f.js";import{C as za}from"./contactDetails-4902172b.js";import{A as Ka}from"./payloadParser-f4cc4e4f.js";import{f as en}from"./getTimeStampForDisplaying-22d5ca9d.js";import{C as Gc}from"./contract-47e31a61.js";const Yc=e=>{const[a,n]=r.useState(!1),[o,i]=r.useState(),s=r.useCallback(d=>{n(()=>!!Yn.getParticipatedLiveEvents(d)),i(()=>Yn.getEventInNext60Minutes(d))},[]),[l]=zr({refetchWritePolicy:"overwrite",fetchPolicy:"cache-and-network",variables:{chamberId:e},onCompleted:({attending:d,hosted:c})=>{s([...(d==null?void 0:d.data)||[],...(c==null?void 0:c.data)||[]])}});return Hr({fetchPolicy:"cache-only",skip:!e,variables:{chamberId:e,limit:3,offset:0,sortOrder:Dr.Asc},onCompleted({getEvents:d}){var c;(c=d==null?void 0:d.data)!=null&&c.length?s(d==null?void 0:d.data):l()}}),{isAnotherEventLive:a,eventScheduledIn60Mins:o}};function Jc(){const{addToast:e}=st(),[a,{loading:n}]=Vr(),o=r.useCallback(async(i,s)=>{let l;try{await a({variables:{input:i},update:(d,{data:c})=>{if(!c||!c.createNoumLayoutSection)return;const h={id:s,editorV2Enabled:!0,status:Jo.Unpublished},p=d.readQuery({query:Jn,variables:h});if(!p)return;const{getSpaceById:g}=p;if(!g)return;const b=Ye.cloneDeep(g);b!=null&&b.layout&&(b.layout.status=Ur.Unsaved,b.layout.sections.reduce((f,x)=>{if(x.position>=c.createNoumLayoutSection.position){const w=x;w.position+=1}return f.push(x),f},[]),b.layout.sections.splice(c.createNoumLayoutSection.position-1,0,c.createNoumLayoutSection),d.writeQuery({query:Jn,variables:h,data:{getSpaceById:b}}))}}),l=!0}catch(d){let c="Unknown";d instanceof Error&&(c=d.message),e("error","none",c),lt(new Error(c),{tags:{section:"addElementMutation"}}),l=!1}return l},[a,e]);return{loading:n,addSectionsHelper:o}}function Zc({children:e,columnWidth:a,isNoumEditor2:n,isEditing:o}){const i=r.useMemo(()=>({columnWidth:a,isNoumEditor2:n,isEditing:o}),[a,o,n]);return t(Qr.Provider,{value:i,children:e})}const ji=({activeFilter:e,onChange:a})=>t(R,{padding:"0 16px",fullWidth:!0,vertical:!0,"data-test":"EventFilterDropDown-Stack",children:t(je,{closeOnSelect:!0,hideIcons:!0,placement:"bottom",options:Zn,isAnimation:!1,onSelectOption:({value:n})=>{a(n)},observerMinHeight:"0",usePortal:!1,containerWidth:"100%","data-test":"EventFilterDropDown-Dropdown",children:({targetProps:n,targetRef:o,toggle:i})=>m(jr,{...n,ref:o,onClick:i,justify:"space-between",fullWidth:!0,align:"center",padding:"8px","data-test":"EventFilterDropDown-EventFilterDropdownButton",children:[t(E,{font:"input-m","data-test":"EventFilterDropDown-TSpan",children:Zn.filter(s=>s.key===e)[0].label}),t(L,{size:15,name:"chevron_down_m",color:"--icon-button-neutral-default","data-test":"EventFilterDropDown-Icon"})]})})}),Kc=()=>{const{addToast:e}=st(),[a,n]=r.useState(""),[o,i]=r.useState(""),{data:s,loading:l}=qr(),[d,{loading:c}]=Xr({}),[h,{loading:p}]=Gr({}),[g,{loading:b}]=Yr({}),[f,{loading:x}]=Jr({}),[w,{loading:S}]=Zr({}),{fetchMoreReferences:y,infiniteState:k,refetchReferences:v,references:T,loading:F}=md(a,[pa.Accepted,pa.Pending],!0,10),P=l||c||p||b||x||S,_=r.useMemo(()=>s!=null&&s.getNoumReferenceCapacity.length?s==null?void 0:s.getNoumReferenceCapacity.map(I=>({key:I,value:I,type:"value",label:Ye.capitalize(I.replaceAll("_","-"))})):[],[s]),M=r.useCallback(async I=>{var N;const B=await h({variables:{experienceId:a,reference:I}});(N=B==null?void 0:B.data)!=null&&N.addManualReferenceForNoum?e("success","none",C("noumena.chamber_edit.add_reference.add_a_reference.success_message")):e("error","none","Something went wrong")},[h,e,a]),W=r.useCallback(async I=>{var N;const B=await d({variables:{experienceId:a,reference:I}});(N=B==null?void 0:B.data)!=null&&N.askForNoumReference?e("success","none",C("noumena.chamber_edit.add_reference.ask_for_a_reference.success_message")):e("error","none","Something went wrong")},[e,d,a]),O=r.useCallback(async I=>{try{await M(I),v()}catch{e("error","none","Something went wrong")}},[e,v,M]),U=r.useCallback(async I=>{try{await W(I),v()}catch{e("error","none","Something went wrong")}},[W,v,e]),Q=r.useCallback(I=>async B=>{var N;try{((N=(await g({variables:{referenceId:B,status:I}})).data)==null?void 0:N.updateNoumReferenceStatus.status)===I&&v().then(()=>{e("success","none",`successfully ${I===pa.Accepted?"approved":"rejected"} reference`)})}catch{e("error","none",C("noumena.chamber_edit.add_reference.empty_title"))}},[g,v,e]),V=Q(pa.Accepted),$=Q(pa.Rejected),q=r.useCallback(async I=>{var B;try{(B=(await f({variables:{referenceId:I}})).data)!=null&&B.discardNoumReference&&v().then(()=>{e("success","none",C("noumena.chamber_edit.delete_reference.success"))})}catch{e("error","none",C("noumena.chamber_edit.add_reference.empty_title"))}},[f,v,e]),z=r.useCallback(async(I,B)=>{var N;try{(N=(await w({variables:{referenceId:I,payload:B}})).data)!=null&&N.updateNoumReference&&v().then(()=>{e("success","none",C("noumena.chamber_edit.edit_reference.success_message"))})}catch{e("error","none",C("noumena.chamber_edit.add_reference.empty_title"))}},[e,v,w]);return{loading:P,fetching:F,onSubmitManualReference:O,onSubmitAskForReference:U,capacityOptions:_,experienceId:a,setExperienceId:n,referenceId:o,setReferenceId:i,approveReference:V,rejectReference:$,discardReference:q,updateReference:z,referenceData:T,fetchMoreReferences:y,infiniteState:k}},eu=({isOpen:e,experienceId:a,onClose:n,handleCloseExperienceModal:o,handleDeleteOption:i})=>{const{t:s}=G(),l=()=>{i(a),o(),n()};return m(Ne,{testId:"reference-delete-modal",open:e,onClose:n,size:Ve.S,disableBackdropClick:!0,"data-test":"DiscardExperienceModal-Modal",children:[t(Qe,{"data-test":"DiscardExperienceModal-ModalHeader",children:s("noumena.chamber_edit.discard_experience.heading")}),t(pd,{style:{textAlign:"center"},font:"body-l",colorToken:"--text-modal-neutral-default",children:s("noumena.chamber_edit.discard_experience.subheading")}),m(xt,{flexDirection:"column",gap:16,"data-test":"DiscardExperienceModal-ModalFooter",children:[t(X,{size:"full",intent:"negative",testId:"delete-reference-btn",onClick:l,"data-test":"DiscardExperienceModal-Button",children:s("noumena.chamber_edit.discard_experience.discard")}),t(X,{size:"full",tertiary:!0,testId:"delete-reference-no-btn",onClick:n,"data-test":"DiscardExperienceModal-Button",children:s("noumena.chamber_edit.discard_experience.discard_cancel")})]})]})},tu=({isOpen:e,onClose:a,capacityOptions:n,referenceLoading:o,onSubmitManualReference:i})=>{const{width:s}=Re(),l=r.useMemo(()=>s>qe.TABLET_L,[s]),d=r.useMemo(()=>s<=qe.MOBILE_MAX,[s]),[,c]=r.useState(!1),[h,p]=r.useState(""),[g,b]=r.useState({name:"",type:"",size:0}),{reset:f,control:x,setValue:w,handleSubmit:S,formState:{isValid:y}}=oa({defaultValues:{providerName:"",referenceText:""},resolver:ia(hd),mode:"onTouched",reValidateMode:"onSubmit"}),k=()=>{f(),p(""),a()},v=async()=>{await S(i)(),k()};r.useEffect(()=>{w("imageUrl",h)},[h,w]);const T=r.useCallback(P=>{b({name:P.name,type:fd(P.type),size:Number((Math.round(P.size)/1e6).toPrecision(2))})},[]),F=r.useCallback(P=>{c(P)},[]);return m(Ne,{open:!!e,onClose:k,testId:"add-manual-reference-modal",isFullScreen:!l,style:{width:l?752:void 0},hasBackButton:!0,enableCloseButton:!0,closeButtonStyles:{enforceLeft:!0,transparentModalCloseButton:!0,defaultBtnForMobile:!1},disableBackdropClick:!0,"data-test":"AddManualReference-Modal",children:[t(Qe,{isFullScreen:!l,"data-test":"AddManualReference-ModalHeader",children:C("noumena.chamber_edit.add_reference.title")}),m(Ue,{style:{textAlign:"left"},minHeight:"55vh",isFullScreen:!l,noFooter:!0,"data-test":"AddManualReference-ModalBody",children:[t(K,{height:24,"data-test":"AddManualReference-Spacer"}),t(Ft,{control:x,name:"providerName",render:({field:{value:P,onChange:_,onBlur:M},fieldState:{error:W}})=>t(Oe,{label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.provider.full_name"),onBlur:M,value:P,onChange:_,error:!!(W!=null&&W.message),helperText:W==null?void 0:W.message,"data-test":"AddManualReference-TextField"}),"data-test":"AddManualReference-Controller"}),t(K,{height:"16px","data-test":"AddManualReference-Spacer"}),t(Ft,{control:x,name:"capacity",render:({field:{value:P,onChange:_},fieldState:{error:M}})=>t(je,{containerStyle:{padding:"0"},observerMinHeight:"0px",hideIcons:!0,placement:"bottom-start",options:n,inputValue:P,onSelectOption:W=>{_(W.value)},usePopStyle:!d,renderContainerFromBottom:d,"data-test":"AddManualReference-Dropdown",children:({inputProps:W,inputRef:O,toggle:U})=>t(Oe,{readOnly:!0,...W,ref:O,value:Pi(P,n),label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.capacity"),spellCheck:"false",error:!!(M!=null&&M.message),helperText:M==null?void 0:M.message,rightIcon:t(L,{name:"chevron_down_m",size:16,color:"--icon-input-neutral-default",onClick:U,"data-test":"AddManualReference-Icon"}),"data-test":"AddManualReference-TextField"})}),"data-test":"AddManualReference-Controller"}),t(K,{height:"16px","data-test":"AddManualReference-Spacer"}),t(Ft,{control:x,name:"referenceText",render:({field:{value:P,onChange:_,onBlur:M},fieldState:{error:W}})=>t(Da,{label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.reference_text"),autoResize:!0,value:P,onBlur:M,onChange:_,error:!!(W!=null&&W.message),helperText:W==null?void 0:W.message,"data-test":"AddManualReference-TextArea"}),"data-test":"AddManualReference-Controller"}),t(K,{height:"16px","data-test":"AddManualReference-Spacer"}),h?t(gd,{mediaSrc:h,clearMedia:()=>p(""),mediaName:g.name,mediaSize:g.size,mediaType:g.type,"data-test":"AddManualReference-ReferenceMedia"}):t(zi,{acceptedFileTypes:Kr,onUploading:F,maxSize:500,setMediaDetail:T,onContentChange:p,"data-test":"AddManualReference-UploadMedia"}),t(K,{height:"16px","data-test":"AddManualReference-Spacer"})]}),m(xt,{isFullScreen:!l,justifyContent:"space-between","data-test":"AddManualReference-ModalFooter",children:[t(X,{tertiary:!0,testId:"add-reference-cancel-action",size:"full",softDisabled:o,disabled:!y,onClick:k,"data-test":"AddManualReference-Button",children:C("noumena.cancel")}),t(K,{width:16,"data-test":"AddManualReference-Spacer"}),t(X,{testId:"add-reference-save-action",primary:!0,size:"full",softDisabled:o,disabled:!y,onClick:v,"data-test":"AddManualReference-Button",children:C("noumena.button.save")})]})]})},au=({isOpen:e,onClose:a,capacityOptions:n,referenceLoading:o,onSubmitAskForReference:i})=>{const{width:s}=Re(),l=r.useMemo(()=>s>qe.TABLET_L,[s]),d=r.useMemo(()=>s<=qe.MOBILE_MAX,[s]),{reset:c,control:h,handleSubmit:p,formState:{isValid:g}}=oa({defaultValues:{providerName:"",providerEmail:""},resolver:ia(bd),mode:"onTouched",reValidateMode:"onSubmit"}),b=()=>{c(),a()},f=async()=>{await p(i)(),b()};return m(Ne,{open:!!e,onClose:b,testId:"ask-for-reference-modal",isFullScreen:!l,style:{width:l?752:void 0},hasBackButton:!0,enableCloseButton:!0,closeButtonStyles:{enforceLeft:!0,transparentModalCloseButton:!0,defaultBtnForMobile:!1},disableBackdropClick:!0,"data-test":"AskForReference-Modal",children:[t(Qe,{isFullScreen:!l,"data-test":"AskForReference-ModalHeader",children:C("noumena.chamber_edit.add_reference.ask_for_a_reference")}),m(Ue,{style:{textAlign:"left"},minHeight:"55vh",isFullScreen:!l,noFooter:!0,"data-test":"AskForReference-ModalBody",children:[t(E,{font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"AskForReference-TSpan",children:C("noumena.chamber_edit.add_reference.ask_for_a_reference.description")}),t(K,{height:24,"data-test":"AskForReference-Spacer"}),t(Ft,{control:h,name:"providerName",render:({field:{value:x,onChange:w,onBlur:S},fieldState:{error:y}})=>t(Oe,{label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.provider.full_name"),onBlur:S,value:x,onChange:w,error:!!(y!=null&&y.message),helperText:y==null?void 0:y.message,"data-test":"AskForReference-TextField"}),"data-test":"AskForReference-Controller"}),t(K,{height:"16px","data-test":"AskForReference-Spacer"}),t(Ft,{control:h,name:"capacity",render:({field:{value:x,onChange:w},fieldState:{error:S}})=>t(je,{containerStyle:{padding:"0"},observerMinHeight:"0px",hideIcons:!0,placement:"bottom-start",options:n,inputValue:x,onSelectOption:y=>{w(y.value)},usePopStyle:!d,renderContainerFromBottom:d,"data-test":"AskForReference-Dropdown",children:({inputProps:y,inputRef:k,toggle:v})=>t(Oe,{readOnly:!0,...y,ref:k,value:Pi(x,n),label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.capacity"),spellCheck:"false",error:!!(S!=null&&S.message),helperText:S==null?void 0:S.message,rightIcon:t(L,{name:"chevron_down_m",size:16,color:"--icon-input-neutral-default",onClick:v,"data-test":"AskForReference-Icon"}),"data-test":"AskForReference-TextField"})}),"data-test":"AskForReference-Controller"}),t(K,{height:"16px","data-test":"AskForReference-Spacer"}),t(Ft,{control:h,name:"providerEmail",render:({field:{value:x,onChange:w,onBlur:S},fieldState:{error:y}})=>t(Oe,{label:C("noumena.chamber_edit.add_reference.ask_for_a_reference.provider.email"),value:x,onBlur:S,onChange:w,error:!!(y!=null&&y.message),helperText:y==null?void 0:y.message,"data-test":"AskForReference-TextField"}),"data-test":"AskForReference-Controller"}),t(K,{height:"16px","data-test":"AskForReference-Spacer"}),t(K,{height:"16px","data-test":"AskForReference-Spacer"})]}),m(xt,{isFullScreen:!l,justifyContent:"space-between","data-test":"AskForReference-ModalFooter",children:[t(X,{tertiary:!0,testId:"add-reference-cancel-action",size:"full",softDisabled:o,disabled:!g,onClick:b,"data-test":"AskForReference-Button",children:C("noumena.cancel")}),t(K,{width:16,"data-test":"AskForReference-Spacer"}),t(X,{testId:"add-reference-save-action",primary:!0,size:"full",softDisabled:o,disabled:!g,onClick:f,"data-test":"AskForReference-Button",children:C("noumena.button.save")})]})]})},nu=({image:e,text:a,buttonText:n,elementType:o,isEditing:i,isBorder:s,wrapperProps:l,spaceId:d,position:c,bodyContentJson:h,elementId:p,hideContent:g,isHighlight:b,columnWidth:f})=>{const{showExperienceModal:x,handleOpenExperienceModal:w,handleCloseExperienceModal:S,isAddedOption:y,arrayOfOption:k,handleAddOption:v,handleMoveTopOption:T,handleMoveDownOption:F,title:P,handleDeleteOption:_,defaultData:M,setDefaultData:W,showReferenceModal:O,handleCloseAddReferenceModal:U,handleOpenAddReferenceModal:Q,updateElementLoader:V}=xd({elementType:o,spaceId:d,elementPosition:c,bodyContentJson:h,elementId:p}),{loading:$,fetching:q,setExperienceId:z,approveReference:I,rejectReference:B,discardReference:N,updateReference:D,referenceData:ie,fetchMoreReferences:te,infiniteState:H,capacityOptions:se,onSubmitAskForReference:Y,onSubmitManualReference:Me,experienceId:oe}=Kc(),{flags:{noumEditor2:ke}}=le();r.useEffect(()=>{M.id&&z(M.id)},[M.id,z]);const[Pe,ze]=r.useState(!1),[xe,ne]=r.useState(void 0),[Te,Se]=r.useState(!g),pe=r.useCallback(J=>{ne(J),w()},[ne,w]),Z=()=>{ze(!Pe)};return m(j,{children:[y?t(Xe,{isHighlight:b,isBorder:s,...l,currentTitle:P,setShowAll:Se,handleOpenExperienceModal:async()=>{await v("","","",void 0),w()},updateElementLoader:$||V,"data-test":"HomeChambers-ElementWrapper",children:t(_d,{isEditMode:i,arrayOfOptions:k,handleMoveTopOption:T,handleMoveDownOption:F,handleOpenAddExperienceModal:w,handleDeleteOption:_,handleSelectOption:pe,setDefaultData:W,isOpen:!Te,columnWidth:f,"data-test":"HomeChambers-HomeChamberOptions"})}):t(Xe,{isHighlight:b,isBorder:s,...l,currentTitle:P,handleOpenExperienceModal:w,hideContent:g,"data-test":"HomeChambers-ElementWrapper",children:ke&&i?t(Cd,{"data-test":"HomeChambers-HomeNoumAddContianer",children:m(yd,{padding:"12px",fullWidth:!0,align:"center",onClick:J=>{J.stopPropagation(),w()},"data-test":"HomeChambers-StackWrapper",children:[m(E,{font:"body-m-bold","data-test":"HomeChambers-TSpan",children:[" ",n]}),t(wd,{"data-test":"HomeChambers-IconWrapper",children:t(L,{name:"plus_m",size:20,color:"--icon-card-neutral-highlighted","data-test":"HomeChambers-Icon"})})]})}):t(Sd,{"data-testid":"homechambers-testid","data-test":"HomeChambers-HomeChambersWrapper",children:m(j,{children:[t(vd,{"data-test":"HomeChambers-ImageWrapper",children:t(L,{name:e,size:96,color:"--icon-placeholder-neutral-default","data-test":"HomeChambers-Icon"})}),t(kd,{"data-test":"HomeChambers-StyledText",children:a}),i&&t(Ed,{"data-test":"HomeChambers-ButtonWrapper",children:t(X,{secondary:!0,size:"small",type:"button",onClick:w,"data-test":"HomeChambers-Button",children:n})})]})})}),t(tu,{isOpen:O==="manually",onClose:U,capacityOptions:se,referenceLoading:$,onSubmitManualReference:Me,"data-test":"HomeChambers-AddManualReference"}),t(au,{isOpen:O==="ask",onClose:U,capacityOptions:se,referenceLoading:$,onSubmitAskForReference:Y,"data-test":"HomeChambers-AskForReference"}),t(eu,{experienceId:oe,isOpen:Pe,onClose:Z,handleCloseExperienceModal:S,handleDeleteOption:_,"data-test":"HomeChambers-DiscardExperience"}),x&&(i?t(Md,{elementType:o,loading:$||V,onClose:S,isOpen:x,setShowDiscardExperienceModal:Z,handleOpenAddReferenceModal:Q,fetchMoreReferences:te,approveReference:I,rejectReference:B,discardReference:N,updateReference:D,handleAddOption:v,handleDeleteOption:_,referenceFetching:q,referenceData:ie,infiniteState:H,defaultData:M,isEditing:i,title:P,capacityOptions:se,"data-test":"HomeChambers-AddExperience"}):t(Td,{id:(xe==null?void 0:xe.id)||"",title:(xe==null?void 0:xe.title)||"",body:(xe==null?void 0:xe.body)||"",onClose:S,isOpen:x,"data-test":"HomeChambers-ViewExperience"}))]})};function tn({children:e,font:a,colorToken:n,...o}){return t(ec,{...o,children:t(E,{font:a,colorToken:n,"data-test":"TSpan",children:e})})}const qi=(e,a)=>{var l,d;const{isUnregistered:n}=ye(),{data:o,loading:i,refetch:s}=Zo({variables:{chamberId:e},skip:n||a!==_t.Published});return{subWalletData:{subWalletBalance:(l=o==null?void 0:o.getSubWalletBalance)==null?void 0:l.amount,id:(d=o==null?void 0:o.getSubWalletBalance)==null?void 0:d.id,loading:i},refetch:s}},ou=()=>{var O,U,Q;const{spaceId:e,connectionStatus:a,projectType:n,mainSpaceId:o,noumType:i,isOwner:s,setConnectionStatus:l,space:d,onHandleConnection:c,loadingConnectionStatus:h,userActionMode:p,loadingSpace:g,loading:b,onRefetchSpaceById:f,isConnected:x}=ge(),{isUnregistered:w}=ye(),[S,y]=r.useState(!1),{requestConnectionHelper:k,loading:v}=el(),T=Re(),F=r.useMemo(()=>T.width<=qe.MOBILE_L,[T.width]),{onForegroundMessage:P}=tl(),_=v||b||g,M=!(d!=null&&d.isConnected)&&!!(d!=null&&d.enableAds)&&!!e&&!S,W=w&&!!o;return r.useEffect(()=>{(async()=>{W&&M&&!_&&(k(o,e),y(!0),f())})()},[W,_,o,f,k,M,e]),r.useEffect(()=>P(V=>{var q,z;if(((q=V.data)==null?void 0:q.chamberId)===e)switch((z=V.data)==null?void 0:z.pnId){case"connectionInviteAccepted":l(vn.Approved);break;case"connectionInviteDeclined":l(vn.Declined);break}}),[P,l,e]),m(R,{gap:12,fullWidth:F,"data-test":"NoumEditorUserActions-Stack",children:[((O=d==null?void 0:d.category)==null?void 0:O.name)==="Rise"&&x&&t(Ls,{isNoumEditor:!0,"data-test":"NoumEditorUserActions-RiseNoumUserApplyButton"}),e!==o&&!s&&i!==We.Home&&n!==Ba.Secret&&((U=d==null?void 0:d.category)==null?void 0:U.name)!=="Rise"&&t(Bs,{isNoumEditor:!0,"data-test":"NoumEditorUserActions-NoumUserFollow"}),i===We.Home&&((Q=d==null?void 0:d.uid)!=null&&Q._id)?t(Fs,{ownerId:d.uid._id,isNoumEditor:!0,"data-test":"NoumEditorUserActions-NoumSendMessage"}):null,p===Wa.handleConnection&&t(Os,{onHandle:c,loading:h,isNoumEditor:!0,"data-test":"NoumEditorUserActions-NoumUserConnection"}),p===Wa.handleRequest&&t(Ws,{connectionStatus:a,onHandle:c,loading:h,isNoumEditor:!0,"data-test":"NoumEditorUserActions-NoumRequestConnection"}),x&&(d==null?void 0:d.type)===We.RiseApplication&&t(Mi,{"data-test":"NoumEditorUserActions-RiseApplicationActions"})]})},iu=({onEdit:e})=>{var q,z,I;const a=wa(),n=r.useRef(null),{isActive:o}=ye(),{spaceId:i,isArchived:s,space:l,editDisabled:d,onRefetchSpaceById:c}=ge(),{modalType:h,openModal:p,closeModal:g}=Ca(),{flags:{paymentSubscriptions:b,invoiceTool:f,contractTool:x,elementPermission:w}}=le(),S=Re(),{noumLinkData:y,refetch:k,getLinkData:v,loadingLinked:T}=Ti(),F=r.useMemo(()=>S.width<=qe.MOBILE_L,[S.width]);r.useEffect(()=>{v(i||"")},[v,i]);const P=r.useMemo(()=>y==null?void 0:y.getNoumLinkByNoumId,[y]),_=!!((q=P==null?void 0:P.link)!=null&&q._id),{changeProjectChamberStatusHelper:M}=$s(),{checkChamberCanBeUnArchived:W}=Rs(),O=r.useCallback(async()=>{i&&await M(i,al.Published,c)},[i,M,c]),U=B=>{var N,D;switch(B){case"unlinked_noum":P!=null&&P.link&&P.link.linkedNoumsCount>2?(N=n.current)==null||N.toggleUnlinkMultipleNoum():(D=n.current)==null||D.toggleUnlinkConfirmationOpen();break;case"linked_noum":p("link-noum");break;case"new_invoice":a({pathname:"/invoice/create",search:`?noumId=${i}`});break;case"new_contract":a(mt.createContract({noumId:i}));break;case"new_sow":a(mt.createStatementOfWork({noumId:i}));break;case"manage_members":p("manage-members");break}},Q=r.useCallback(()=>{var B,N;a(_?`${kn.LINK_NOUM}?linkID=${(N=(B=y==null?void 0:y.getNoumLinkByNoumId)==null?void 0:B.link)==null?void 0:N._id}`:`${kn.LINK_NOUM}?preselect=${i}`)},[_,a,(I=(z=y==null?void 0:y.getNoumLinkByNoumId)==null?void 0:z.link)==null?void 0:I._id,i]),V=r.useMemo(()=>Ye.compact([w&&{value:"manage_members",key:"Manage Members",type:"value",label:"Manage Members",icon:t(L,{name:"groups_m",size:24,color:"--text-tablecell-header-neutral-highlighted","data-test":"NoumEditorOwnerActions-ellipsisMenuOptions-Icon"})},{value:"linked_noum",key:"Linked Noum",type:"value",label:C("noumena.link_noums.link_noums",{linkNo:""}),icon:t(L,{name:"link_m",size:24,color:"--text-tablecell-header-neutral-highlighted","data-test":"NoumEditorOwnerActions-ellipsisMenuOptions-Icon"})},_&&{value:"unlinked_noum",key:"Unlink",type:"value",label:C("noumena.link_noums.unlink"),intent:"danger",icon:t(L,{name:"unlink_m",size:24,color:"--text-tablecell-header-danger-primary-highlighted","data-test":"NoumEditorOwnerActions-ellipsisMenuOptions-Icon"})}]),[w,_]),$=r.useMemo(()=>Ye.compact([!!f&&{value:"new_invoice",key:"new_invoice",type:"value",label:"Invoice"},!!x&&{value:"new_contract",key:"new_contract",type:"value",label:"Contract"},!!x&&{value:"new_sow",key:"new_sow",type:"value",label:"SOW"}]),[x,f]);return s?m(j,{children:[t(zs,{"data-testid":"archived-noum-actions","data-test":"NoumEditorOwnerActions-RowContainer",children:t(Hs,{disabled:d,size:"full",secondary:!0,onClick:()=>W(i,()=>p("unarchive"),()=>p("setup-slot-for-noum"),l==null?void 0:l.type),"data-test":"NoumEditorOwnerActions-NoumActionButton",children:C("noumena.chamber.unarchive_button")})}),b&&h==="setup-slot-for-noum"&&t(Ds,{open:h==="setup-slot-for-noum",onClose:g,chamberIdAfterCreatingNoum:i,"data-test":"NoumEditorOwnerActions-SetupNoumModal"}),t(Vs,{isOpen:h==="unarchive",handleClose:g,onUnarchive:O,"data-test":"NoumEditorOwnerActions-ChamberUnarchiveModal"})]}):(l==null?void 0:l.type)===We.RiseApplication?t(R,{gap:16,"data-testid":"rise-application-actions",fullWidth:F,"data-test":"NoumEditorOwnerActions-Stack",children:t(Mi,{"data-test":"NoumEditorOwnerActions-RiseApplicationActions"})}):m(j,{children:[m(R,{gap:16,"data-testid":"edit-noum-actions",fullWidth:F,"data-test":"NoumEditorOwnerActions-Stack",children:[V.length>0&&t(Us,{className:"ellipsis-menu","data-test":"NoumEditorOwnerActions-EllipsisWrapper",children:t(Ri,{menuOptions:V,size:"full",onClick:U,containerWidth:"147",loadingLinked:T,"data-test":"NoumEditorOwnerActions-EllipsisMenu"})}),t(je,{containerWidth:"max-content",hideIcons:!0,closeOnSelect:!0,onSelectOption:B=>U(B.value),options:$,isAnimation:!1,observerMinHeight:"0",renderContainerFromBottom:!0,"data-test":"NoumEditorOwnerActions-Dropdown",children:({targetRef:B,targetProps:N,toggle:D})=>t(X,{ref:B,onClick:D,...N,secondary:!0,size:"large",leftIcon:t(L,{name:"plus_m",size:24,"data-test":"NoumEditorOwnerActions-Icon"}),"data-test":"NoumEditorOwnerActions-Button"})}),t(X,{disabled:!o,size:F?"full":"large",primary:!0,leftIcon:t(L,{name:"edit_m",size:24,color:"--icon-button-neutral-alt-default","data-test":"NoumEditorOwnerActions-Icon"}),onClick:e,"data-test":"NoumEditorOwnerActions-Button",children:C("noumena.chamber.edit_button")})]}),t(Qd,{goToNoumLink:Q,isOpen:h==="link-noum",handleClose:g,"data-test":"NoumEditorOwnerActions-LinkNoum"}),t(jd,{noumLink:P==null?void 0:P.link,ref:n,space:l,refetch:k,"data-test":"NoumEditorOwnerActions-HandleUnlinkNoum"}),t(qd,{isOpen:h==="manage-members",handleClose:g,"data-test":"NoumEditorOwnerActions-ManageMembersModal"})]})},Xi=()=>{const{flags:{noumEditor2:e}}=le(),a=wa(),{isOwner:n,isMasterNoum:o,loadingSpace:i,space:s,editDisabled:l}=ge(),d=Re(),{isMobile:c}=ot(),[h,p]=r.useState(!1),g=r.useCallback(()=>{if(e&&d.width<qe.LAPTOP){p(!0);return}const b=o?kn.EDIT_HOME_NOUM:`/noum/${s==null?void 0:s._id}/edit`;a(b)},[o,a,e,s==null?void 0:s._id,d.width]);return i?t(Qs,{"data-testid":"view-mode-actions-skeleton","data-test":"NoumEditorViewModeActions-ActionsWrapper",children:t(Qt,{height:56,borderRadius:8,"data-test":"NoumEditorViewModeActions-Skeleton"})}):t(j,{children:n?m(j,{children:[o?t(R,{fullWidth:c,"data-test":"NoumEditorViewModeActions-Stack",children:t(X,{disabled:l,size:c?"full":"large",primary:!0,leftIcon:t(L,{name:"edit_m",size:24,color:"--icon-button-neutral-alt-default","data-test":"NoumEditorViewModeActions-Icon"}),onClick:g,"data-test":"NoumEditorViewModeActions-Button",children:C("noumena.chamber.edit_button")})}):t(iu,{onEdit:g,"data-test":"NoumEditorViewModeActions-NoumEditorOwnerActions"}),e&&t(js,{isOpen:h,onClose:()=>p(!1),"data-test":"NoumEditorViewModeActions-NoumEditRestrictionModal"})]}):t(ou,{"data-test":"NoumEditorViewModeActions-NoumEditorUserActions"})})},Gi=de`
  border-radius: 16px;
  border: solid 1px var(--border-card-neutral-highlighted);
  padding: 8px;
`,Je=u.div`
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  gap: ${({gap:e})=>`${e||0}px`};
  justify-content: ${({justify:e})=>`${e||"center"}`};
  align-items: ${({align:e})=>`${e||"center"}`};
  ${({fullWidth:e})=>e&&"width: 100%;"};
  & span > span.react-loading-skeleton {
    line-height: unset;
  }
`,An=u(Je)`
  width: 100%;
  ${Gi};
`,Ge=u(Je)`
  display: flex;
  flex-direction: column;
`;u(Ge)`
  display: flex;
  flex-direction: column;
  ${Gi};
`;const ru=u.span`
  padding-top: ${({isMobile:e})=>e?0:24}px;
  color: var(--text-card-header-neutral-highlighted);
  word-break: break-word;
  font-family: var(--font-body-medium-regular-font);
`,lu=u.div`
  width: 100%;
  @media (min-width: ${me.TABLET}) and (max-width: ${me.LAPTOP}) {
    max-width: calc(100vw - 32px);
  }
`,Yi=u.span`
  display: block;
  ${Va.bodyMediumBold}
  color: var(--text-card-neutral-default);
`,su=u.span`
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 24px;
  color: var(--text-card-header-neutral-default);
  ${Va.bodyMedium}
  @media (max-width: ${me.MOBILE_L}) {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
    padding-bottom: 16px;
  }
`,du=u(ve)`
  padding: 24px;
  @media (max-width: ${me.MOBILE_MAX}) {
    padding: 16px;
    border-radius: 0px;
  }
`,Ji=u.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  flex: 1 60%;
  position: relative;
`,cu=u(L)`
  ${({isMobile:e})=>e&&"margin-top: 10px;"}
  ${({isMobile:e})=>!e&&"position: absolute;"}
  ${({isMobile:e})=>!e&&"top: 0px;"}
  ${({isMobile:e})=>!e&&"right: 0px;"}
`,uu=u.span`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
`,mu=u.span`
  display: flex;
  justify-content: space-between;
`,Zi=u.span`
  display: flex;
  flex-direction: column;
  margin-top: 8px;
  color: var(--text-card-header-neutral-highlighted);
  ${Ko.headingMediumBold};
  ${({disabled:e})=>e&&`color: var(--text-card-header-neutral-default);
    `}
  word-break: break-word;
`,pu=u.div`
  margin-top: 16px;

  display: none;

  @media (max-width: ${me.TABLET_L}) {
    display: block;
  }
`,hu=u.div`
  display: flex;
  gap: 8px;
  @media (max-width: ${En.LAPTOP_S_MIN}) {
    ${({isEdit:e})=>e&&`gap: 3px
    `};
  }
`;u.div`
  display: none;
  padding-top: 17px;
  & > div {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--text-card-header-neutral-highlighted);
    padding-top: 2px;
  }
  hr {
    background-color: var(--bg-separator-neutral-default);
    width: 100%;
  }
`;u.div``;u.img`
  @media (max-width: ${me.MOBILE_L}) {
    width: 100%;
    border-radius: 16px;
  }
`;const fu=u.div`
  flex-grow: 1;
  align-self: stretch;
  vertical-align: top;
  display: flex;
  justify-content: end;
`,gu=u.div`
  display: flex;
  justify-content: space-between;
  flex-direction: ${e=>e.isMobile?"column":"row"};
  gap: 16px;
  width: ${({width:e})=>e||"auto"};
  @media (max-width: ${me.MOBILE_MAX}) {
    gap: 0;
  }
`,cn=u.div`
  display: flex;
  padding: ${({isVisitor:e})=>e?"12px 16px 12px 16px":"16px"};
  height: ${({isVisitor:e})=>e?"54px":"auto"};
  max-width: 359px;
  border: 1px solid var(--border-card-neutral-highlighted);
  border-radius: 8px;
  gap: 16px;
  order: ${({order:e})=>e||0};
  flex-grow: 1;
  box-sizing: border-box;
  justify-content: space-between;

  @media (max-width: ${me.MOBILE_MAX}) {
    width: calc(100vw - 32px);
    height: auto;
    border: unset;
    border-top: 1px solid var(--border-card-neutral-highlighted);
    border-radius: unset;
    padding: 16px 0;
  }
  @media (min-width: ${me.TABLET}) and (max-width: ${me.LAPTOP}) {
    width: 330px;
    box-sizing: border-box;
  }
`,bu=u(E)`
  height: 22px;
  padding-top: 9.5px;
`,xu=u(E)`
  height: 22px;
`,xo=u(E)`
  width: 71px;
  height: 39px;
  flex: none;
  flex-grow: 0;
`,Co=u.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 0px;
  gap: 4px;
  height: 19px;
  flex: none;
  flex-grow: 0;
`,Cu=u(E)`
  width: 72px;
  flex: none;
  flex-grow: 0;
`,yu=u(E)`
  text-align: center;
  width: 72px;
  flex: none;
  flex-grow: 0;
  margin-right: 4px;
  white-space: nowrap;
`,wu=u.input`
  border: 0;
  color: var(--text-card-neutral-default);
  font-style: normal;
  font-weight: 400;
  font-size: 12px;
  outline: none;
  display: inline-flex;
  align-items: center;
  font-family: var(--font-family);
  width: 24%;
`,Su=u(L)`
  transition: transform 0.3s;
  ${({isOpen:e})=>e&&"transform: rotate(180deg)"};
`,vu=u.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
  @media (max-width: ${me.MOBILE_MAX}) {
    flex-direction: column;
  }
`,Ha=u(L)`
  margin-bottom: 5px;
`;u.img`
  width: 100%;
  height: 273px;
  background-size: cover;
  border-radius: 12px;
`;const ku=u.span`
  position: relative;
  display: flex;
  flex-direction: row;
  align-items: end;
  ${({isCoverPhoto:e})=>e&&"margin-top: -15px;"};
  gap: 24px;
  color: var(--text-card-header-neutral-default);
  ${Va.bodyMedium}
  @media (max-width: ${me.TABLET_L}) {
    ${({isCoverPhoto:e})=>!e&&"padding: 16px;"};
  }
  @media (max-width: ${me.MOBILE_MAX}) {
    align-items: center;
    gap: 16px;
    margin-top: 16px;
  }
`,Eu=u.div`
  flex-grow: 1;
  align-self: end;
  vertical-align: top;
  display: flex;
  justify-content: end;
`,_u=u.div`
  width: 128px;
  ${({isCoverPhoto:e})=>e&&"margin-left: 16px;"};
  @media (max-width: ${me.MOBILE_L}) {
    width: 80px;
  }
`,At=u(X)`
  ${({enableClick:e})=>e&&de`
      &:hover * {
        color: var(--text-button-neutral-pressed);
      }
    `}
`,Mu=u.div`
  .favrouites {
    position: relative;
  }
  @media (max-width: ${me.MOBILE_L}) {
    position: absolute;
    top: -17px;
    right: 10px;
  }
`,Tu=u(ve)`
  padding: 24px;
  @media (max-width: ${me.TABLET}) {
    padding: 0px 0px 16px 0px;
    border-radius: 0px;
  }
`,yo=u(R)`
  color: var(--text-badge-neutral-default);
  background: var(--bg-badge-neutral-default);
  border-radius: 8px;
  border-color: var(--border-badge-neutral-default);
  cursor: pointer;
`,Iu=u.div`
  color: var(--text-card-neutral-alt-default);
  background: var(--color-base-solid-orange);
  border-color: var(--border-badge-neutral-default);
  border-radius: 8px;
  width: max-content;
  padding: 2px 6px;
  ${nl.badgeCount}
`,Nu=u.div`
  background: var(--bg-badge-danger-warning-primary);
  border-color: var(--border-badge-neutral-default);
  border-radius: 50%;
  width: max-content;
  padding: 2px;
`,wo=u.div`
  &[data-title]:hover::after {
    content: attr(data-title);
    position: absolute;
    background-color: var(--bg-tooltip-neutral-default);
    color: var(--text-tooltip-neutral-alt-default);
    padding: 6px 8px;
    border-radius: 4px;
    white-space: nowrap;
    top: -28px;
    left: ${({isLeft:e})=>e?"90px":"-10px"};
    ${Rn.systemInfoSmall}
  }
`,Pu=u.div`
  display: flex;
  gap: 24px;
  flex-wrap: wrap;
  @media (max-width: ${me.TABLET}) {
    ${({isSummaryDescription:e})=>e&&"padding: 0 16px"};
  }
  ${Je}
`,Au=u.div`
  display: flex;
  gap: 4px;
  color: var(--text-card-neutral-default);
`,Lu=r.createContext({role:null,permissions:[]});function Bu(){const e=r.useContext(Lu);if(!e)throw new Error("useNoumAuthorizationContext must be called within NoumAuthorizationContext.");return e}const UC=["Noum Owner","Manager","Guest","Non-Member"];et.Calendar+"",et.FileManager+"",et.Image+"",et.InvoiceTool+"",et.Messages+"",et.Payment+"",et.Posts+"",et.QuickQuestions+"",et.Text+"",et.Video+"",et.ContractTool+"";const ae=({w:e=128,h:a=128,r:n=8,maxWidth:o})=>t("div",{style:{width:e,height:a,borderRadius:n,maxWidth:o,lineHeight:"unset"},"data-test":"SizedSkeleton",children:t(yt,{w:e,h:a,r:n,"data-test":"SizedSkeleton-StyledSkeleton"})}),QC=()=>t(ae,{w:128,h:128,r:8,"data-test":"SkeletonLoaderAvatar-SizedSkeleton"}),tt=()=>t(ae,{w:40,h:40,r:8,"data-test":"SkeletonLoaderPost-SizedSkeleton"}),Fu=()=>t(ae,{w:56,h:56,r:8,"data-test":"SkeletonLoaderPostII-SizedSkeleton"}),Ou=()=>t(ae,{w:117,h:64,r:8,"data-test":"SkeletonLoaderImageInline-SizedSkeleton"}),Ln=()=>m(Ge,{gap:8,style:{width:"100%"},align:"baseline","data-test":"SkeletonLoaderParagraph-StyledFlexColumn",children:[t(ae,{w:"100%",h:16,r:8,"data-test":"SkeletonLoaderParagraph-SizedSkeleton"}),t(ae,{w:"100%",h:16,r:8,"data-test":"SkeletonLoaderParagraph-SizedSkeleton"}),t(ae,{w:"100%",h:16,r:8,"data-test":"SkeletonLoaderParagraph-SizedSkeleton"}),t(ae,{w:"50%",h:16,r:8,"data-test":"SkeletonLoaderParagraph-SizedSkeleton"})]});var _e=(e=>(e.IDENTITY="noumena.rise.identity.step",e.NATIVE="noumena.rise.native.step",e.FINANCIAL="noumena.rise.finance.step",e.BUSINESS="noumena.rise.business.step",e.PRINCIPLES_YOU="noumena.rise.priciplesyou.step",e.ESSAYS="noumena.rise.essay.step",e))(_e||{});const Wu=({children:e})=>{var I;const{spaceId:a,noumType:n}=ge(),[o,i]=r.useState(!1),[s,l]=r.useState({principlesYou:!1,essays:!1}),{applicationId:d,resultJson:c,refetch:h,status:p,questions:g,parentNoumId:b}=qs(a),{data:f}=ol({skip:!b||n!==We.RiseApplication,variables:{noumId:b}}),{businessFinancialProjectionStatus:x,BusinessPlanStatus:w,identityStatus:S,nativeStatus:y,financialCreditStatus:k,financialCashflowStatus:v,principleYouStatus:T}=c||{},F=S==="SUBMITTED",P=y==="SUBMITTED",_=v==="SUBMITTED"&&k==="SUBMITTED",M=x==="SUBMITTED"&&w==="SUBMITTED",W=T==="SUBMITTED",U=F&&P&&_&&M&&W&&s.essays,Q=(g==null?void 0:g.length)??0,V=((I=f==null?void 0:f.getNoumClassByNoumId)==null?void 0:I.isDeleted)??!1,$=r.useMemo(()=>(g||[]).some(B=>{const N=String((c==null?void 0:c[B==null?void 0:B.id])||"");return(N&&(N==null?void 0:N.replace(/(<([^>]+)>)/gi,""))||"").length<200}),[g,c]),q=r.useCallback(B=>{switch(B){case _e.IDENTITY:return F;case _e.NATIVE:return P;case _e.FINANCIAL:return _;case _e.BUSINESS:return M;case _e.PRINCIPLES_YOU:return W;default:return!1}},[M,_,F,P,W]),z=r.useMemo(()=>({applicationId:d,status:p,noOfEssays:Q,isClassDeleted:V,essayQuestionAnswered:$,refresh:h,isStepCompleted:q,checked:s,setChecked:l,enableApplicationSubmission:U,canSubmit:o,setCanSubmit:i,resultJson:c,identityCompletion:F}),[d,$,V,Q,h,p,q,s,l,U,o,i,c,F]);return t(Xs.Provider,{value:z,children:e})},Bn=750,$u=[{key:"-",type:"value",value:"-",label:"-"},{key:"18-20",type:"value",value:"18-20",label:"18-20"},{key:"21-30",type:"value",value:"21-30",label:"21-30"},{key:"31-40",type:"value",value:"31-40",label:"31-40"},{key:"41-50",type:"value",value:"41-50",label:"41-50"},{key:"51-60",type:"value",value:"51-60",label:"51-60"},{key:"61+",type:"value",value:"61+",label:"61+"}],Ru=[{key:"-",type:"value",value:"-",label:"-"},{key:"1-3",type:"value",value:"1-3",label:"1-3"},{key:"4-5",type:"value",value:"4-5",label:"4-5"},{key:"6-8",type:"value",value:"6-8",label:"6-8"},{key:"9-11",type:"value",value:"9-11",label:"9-11"},{key:"12-14",type:"value",value:"12-14",label:"12-14"},{key:"15+",type:"value",value:"15+",label:"15+"}],So=e=>{var a,n,o,i,s;return{firstName:(e==null?void 0:e.firstName)??"",lastName:(e==null?void 0:e.lastName)??"",username:(e==null?void 0:e.username)??"",title:(e==null?void 0:e.title)??"",bio:(e==null?void 0:e.bio)??"",ageGroup:{min:(a=e==null?void 0:e.ageGroup)==null?void 0:a.min,max:(n=e==null?void 0:e.ageGroup)==null?void 0:n.max},freelancingExperience:{min:(o=e==null?void 0:e.freelancingExperience)==null?void 0:o.min,max:(i=e==null?void 0:e.freelancingExperience)==null?void 0:i.max},profile:{profilePicture:((s=e==null?void 0:e.profile)==null?void 0:s.profilePicture)??""},location:(e==null?void 0:e.location)??""}},zu=Dn({firstName:Lt().required(C("noumena.home_noum.about_me.error.name_required")).min(2,C("noumena.signup.first_name.too_short")).max(20,C("noumena.signup.first_name.too_long")).test("Two letter name validation",C("noumena.signup.two_digit_first_name.incorrect"),e=>e&&e.length<=2?Kn.test(e):!0).matches(eo,C("noumena.home_noum.about_me.error.first_name_alpha_only")),lastName:Lt().required(C("noumena.home_noum.about_me.error.name_required")).min(2,C("noumena.signup.last_name.too_short")).max(20,C("noumena.signup.last_name.too_long")).test("Two letter name validation",C("noumena.signup.two_digit_last_name.incorrect"),e=>e&&e.length<=2?Kn.test(e):!0).matches(eo,C("noumena.home_noum.about_me.error.last_name_alpha_only")),username:Lt().required(C("noumena.home_noum.about_me.error.name_required")).matches(il,C("noumena.home_noum.about_me.error.username")),title:Lt().max(64,C("noumena.home_noum.about_me.error.title_maximum_length")),bio:Lt().max(Bn,`${C("noumena.input.not_exceed-100-1")} ${Bn} ${C("noumena.input.not_exceed-100-2")}`),location:Lt().test("Value not same as one of the suggested values",`${C("noumena.home_noum.about_me.error.location_suggested")}`,(e,a)=>{var o;const n=(o=a.options.context)==null?void 0:o.locationSuggestions;return e===""||n.some(i=>i.value===e)})}).required();function Hu({spaceId:e,handleSuccess:a}){var ze,xe,ne,Te,Se,pe;const{width:n}=Re(),[o,{data:i}]=rl(),[s]=ei(),{handleSave:l}=ll(),{user:d,loading:c,masterId:h,refetchUserData:p}=ye(),[g,b]=r.useState(!1),[f,x]=r.useState(),{refetchSpaceById:w}=Ot(),{t:S}=G(),[y,k]=r.useState(!1),[v,T]=r.useState(),[F,P]=r.useState(" "),[_,M]=r.useState(void 0),[W,O]=r.useState([]),U=n>qe.TABLET_L;r.useEffect(()=>{o()},[o]),r.useEffect(()=>{var ee,J,ce;const Z=(ce=(J=(ee=i==null?void 0:i.capitalquotient)==null?void 0:ee.getCQDetails)==null?void 0:J.forms)==null?void 0:ce.find(re=>(re==null?void 0:re.formId)==="1");Z&&(b(!!Z.status),x(Z))},[i]),r.useEffect(()=>{var J,ce,re,Ee,Le,He,he;const Z=(J=d==null?void 0:d.ageGroup)!=null&&J.min&&((ce=d==null?void 0:d.ageGroup)!=null&&ce.max)?((re=d==null?void 0:d.ageGroup)==null?void 0:re.max)>=90?"61+":`${d.ageGroup.min}-${(Ee=d==null?void 0:d.ageGroup)==null?void 0:Ee.max}`:"-",ee=(Le=d==null?void 0:d.freelancingExperience)!=null&&Le.min&&((He=d==null?void 0:d.freelancingExperience)!=null&&He.max)?((he=d==null?void 0:d.freelancingExperience)==null?void 0:he.max)>=30?"15+":`${d.freelancingExperience.min}-${d.freelancingExperience.max}`:"-";P(Z),M(ee)},[M,P,d]);const{homeNoumAboutMeProfilePicHelper:Q}=Ai(),{reset:V,register:$,trigger:q,setValue:z,getValues:I,handleSubmit:B,formState:{errors:N,isValid:D}}=oa({resolver:ia(zu),context:{locationSuggestions:W},mode:"all",reValidateMode:"onBlur"}),ie=r.useCallback(Z=>{z("profile.profilePicture",Z),q("profile.profilePicture")},[z,q]),te=r.useCallback(()=>{q()},[q]),H=Z=>{let ee={};if(P(Z),Z!=="-")if(Z==="61+")ee={min:61,max:90};else{const J=Z.split("-",2);ee={min:parseInt(J[0],10),max:parseInt(J[1],10)}}V({...I(),ageGroup:ee})},se=Z=>{M(Z);let ee={};if(Z!=="-")if(Z==="15+")ee={min:15,max:30};else{const J=Z.split("-",2);ee={min:parseInt(J[0],10),max:parseInt(J[1],10)}}V({...I(),freelancingExperience:ee})},Y=r.useCallback(()=>{z("profile.profilePicture",""),q("profile.profilePicture")},[z,q]),Me=async Z=>{var ce,re,Ee,Le;k(!0);const ee=Ye.cloneDeep(Z);if((ce=ee.profile)==null||delete ce.profilePicture,F==="-"&&(ee.ageGroup={}),_==="-"&&(ee.freelancingExperience={}),I("profile.profilePicture")!==((re=d==null?void 0:d.profile)==null?void 0:re.profilePicture)){const{profilePicSuccess:He}=await Q(I("profile.profilePicture"));if(He&&g&&f&&h&&I("profile.profilePicture")){const be=[...(Array.isArray(f==null?void 0:f.details)?f==null?void 0:f.details:f==null?void 0:f.details.submitted)||[]],ct=be.findIndex(rt=>rt.qid==="4");ct!==-1&&(be[ct]={...be[ct],value:I("profile.profilePicture")}),s({variables:{input:{noumId:h,status:(Le=(Ee=i==null?void 0:i.capitalquotient)==null?void 0:Ee.getCQDetails)==null?void 0:Le.status,form:{formId:f==null?void 0:f.formId,description:"identity",status:f==null?void 0:f.status,details:be}}}})}}const J=await l(ee);if(k(!1),J){const He={...Z,_id:(d==null?void 0:d._id)??""},he=So(He);V(he),T(he),e&&(w==null||w(),p(),a&&a())}},oe=r.useCallback(Z=>{z("location",Z),q("location")},[z,q]),ke=r.useCallback(Z=>{(Z.value||Z.value!=="")&&oe(Z.value)},[oe]),Pe=r.useCallback(()=>Ye.isEqual(v,I()),[I,v]);return r.useEffect(()=>{if(d&&!v){const Z=So(d);V(Z),T(Z)}},[v,V,d]),t(j,{children:c?t(it,{"data-test":"Spinner"}):m(j,{children:[m(Fd,{"data-test":"PersonalDetailsWrapper",children:[t(Od,{"data-test":"ProfileWrapper",children:m(Wd,{"data-test":"UploadPhoto",children:[t(E,{font:"heading-xs-bold",colorToken:"--text-card-header-neutral-highlighted","data-test":"TSpan",children:S("noumena.myaccount.personal_details_profile")}),t("section",{className:"uploadbar","data-test":"section"}),t(K,{height:U?32:16,"data-test":"Spacer"}),t(cd,{"data-test":"ProfileImage",children:t(sl,{size:"XXXL",url:I("profile.profilePicture")??"",onContentChange:ie,maximumFileSize:5,onlyEditable:!0,"data-test":"EditableAvatar"})}),I("profile.profilePicture")?t(X,{size:"small",secondary:!0,intent:"negative",onClick:Y,"data-test":"Button",children:S("noumena.myaccount.personal_details_removebtn")}):null]})}),m($d,{"data-test":"LeftContent",children:[m(Rd,{"data-test":"TextWrapper",children:[t(Oe,{...$("firstName",{required:{value:!0,message:S("noumena.home_noum.about_me.error.name_required")},onChange:te}),value:I("firstName")??"",label:S("noumena.home_noum.about_me.first_name_label"),error:!!N.firstName,helperText:(ze=N.firstName)==null?void 0:ze.message,"data-test":"TextField"}),t(Oe,{...$("lastName",{required:{value:!0,message:S("noumena.home_noum.about_me.error.name_required")},onChange:te}),value:I("lastName")??"",label:S("noumena.home_noum.about_me.last_name_label"),name:"lastName",error:!!N.lastName,helperText:(xe=N.lastName)==null?void 0:xe.message,"data-test":"TextField"}),t(Oe,{...$("username",{required:{value:!0,message:S("noumena.home_noum.about_me.error.name_required")},onChange:te}),value:I("username")??"",label:S("noumena.myaccount.personal_details_username"),name:"username",error:!!N.username,helperText:(ne=N.username)==null?void 0:ne.message,"data-test":"TextField"}),t(Oe,{...$("title",{required:{value:!0,message:S("noumena.home_noum.about_me.error.name_required")},onChange:te}),value:I("title")??"",label:S("noumena.myaccount.personal_details.professional_title"),name:"title",error:!!N.title,helperText:(Te=N.title)==null?void 0:Te.message,maxLength:64,"data-test":"TextField"}),t(zd,{"data-test":"AboutTextWrapper",children:t(Da,{...$("bio",{required:{value:!0,message:S("noumena.home_noum.about_me.error.name_required")},onChange:te}),error:!!N.bio,value:I("bio")??"",helperText:(Se=N.bio)==null?void 0:Se.message,label:S("noumena.myaccount.personal_details_about"),maxLength:Bn,resize:!1,"data-test":"TextArea"})})]}),m(Hd,{vertical:!U,"data-test":"Content",children:[t(je,{hideIcons:!0,containerHeight:"200px",containerWidth:"193px",options:$u,usePopStyle:!0,onSelectOption:Z=>{H(Z.value)},"data-test":"Dropdown",children:({inputProps:Z,inputRef:ee,toggle:J})=>t(Oe,{ref:ee,...Z,label:S("noumena.myaccount.personal_details.age_group"),value:F,rightIcon:t(L,{name:"chevron_down_m",size:16,onClick:J,color:"--icon-input-neutral-default","data-test":"Icon"}),"data-test":"TextField"})}),t(je,{hideIcons:!0,options:Ru,containerHeight:"300px",containerWidth:"193px",usePopStyle:!0,onSelectOption:Z=>{se(Z.value)},"data-test":"Dropdown",children:({inputProps:Z,inputRef:ee,toggle:J})=>t(Oe,{ref:ee,...Z,label:S("noumena.myaccount.personal_details.years_of_freelancing"),value:_,rightIcon:t(L,{name:"chevron_down_m",size:16,onClick:J,color:"--icon-input-neutral-default","data-test":"Icon"}),"data-test":"TextField"})})]}),t(K,{height:16,"data-test":"Spacer"}),t(Id,{...$("location"),showValue:I("location")??"",onSelect:ke,onClear:()=>oe(""),label:S("noumena.home_noum.about_me.location.label"),error:!!N.location,helperText:(pe=N.location)==null?void 0:pe.message,setTextFieldValue:oe,setSuggestedOptions:O,"data-test":"SearchSelectAPI"}),!U&&m(j,{children:[t(K,{height:32,"data-test":"Spacer"}),t(E,{font:"body-m",colorToken:"--text-card-header-neutral-highlighted","data-test":"TSpan",children:S("noumena.homenoum.edit_personal_details.change_will_applied.text")}),t(K,{height:16,"data-test":"Spacer"})]})]})]}),m(xt,{justifyContent:"space-between","data-test":"ModalFooter",children:[U&&t(E,{font:"body-m",colorToken:"--text-card-header-neutral-highlighted","data-test":"TSpan",children:S("noumena.homenoum.edit_personal_details.change_will_applied.text")}),t(Dd,{"data-test":"SaveButtonWrap",children:t(X,{onClick:B(Me),size:"full",type:"submit",primary:!Pe(),disabled:Pe()||y||!D,loading:y,"data-test":"Button",children:S("noumena.button.save")})})]})]})})}const Ki=r.memo(e=>{const{t:a}=G(),n=r.useCallback(()=>{e.handleClose(!0)},[e]),o=()=>{e.handleSuccess(e.spaceId)};return m(Ne,{open:e.isOpen,testId:"testPersonalDetailsModal",onClose:n,enableCloseButton:!0,size:Ve.XL,disableBackdropClick:!0,"data-test":"PersonalDetailsModal-Modal",children:[t(Qe,{"data-test":"PersonalDetailsModal-ModalHeader",children:a("noumena.homenoum.edit_personal_details")}),t(Hu,{spaceId:e==null?void 0:e.spaceId,handleSuccess:o,"data-test":"PersonalDetailsModal-PersonalDetails"})]})}),Du=()=>{var _;const{user:e}=ye(),a=Wt(),{flags:n}=le(),[o,i]=r.useState(!1),s="https://noudev-cq-portal.noumenati.com/",[l]=ti(),[d,c]=r.useState(!1),[h]=ai(),{isOwner:p,space:g}=ge(),{cqData:b}=Un((g==null?void 0:g._id)||"",!p),{data:f,loading:x}=ni(),w=gt.MOBILE===a,S=!n.cqInHomeNoumsProfile,[y,k]=r.useState({label:"",key:"",type:"value",value:""});r.useEffect(()=>{const M={...y,key:(b==null?void 0:b.visibility).charAt(0).toUpperCase()+(b==null?void 0:b.visibility).slice(1),type:"value",value:(b==null?void 0:b.visibility).charAt(0).toUpperCase()+(b==null?void 0:b.visibility).slice(1)};k(M)},[b]);const v=[{key:"private",label:t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"HomeNoumCQToken-options-TSpan",children:C("noumena.money.cq.private")}),type:"value",value:"private"},{key:"public",label:t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"HomeNoumCQToken-options-TSpan",children:C("noumena.money.cq.public")}),type:"value",value:"public"}],T=r.useMemo(()=>f!=null&&f.getSpaceByType&&(f!=null&&f.getSpaceByType[0])?f==null?void 0:f.getSpaceByType[0]:{token:{count:"--"}},[f]),F=r.useCallback(async()=>{var U;const W=(U=(await l({variables:{},onError:({networkError:Q=null,graphQLErrors:V=[]})=>{const[$]=V;lt(new Error(($==null?void 0:$.message)??Q),{tags:{section:"deleteQuestionMutation"}})},onCompleted:()=>{ba("CQStart",{UUID:e==null?void 0:e._id})}})).data)==null?void 0:U.generateOneTimeToken,O=`${s}?access_token=${W}`;window.open(O,"_blank")},[s,l,e==null?void 0:e._id]),P=r.useCallback(async M=>{k(M),await h({variables:{input:{noumId:b.noumId||"",visibility:M.value.toUpperCase()}},onError:({networkError:W=null,graphQLErrors:O=[]})=>{const[U]=O;lt(new Error((U==null?void 0:U.message)??W),{tags:{section:"deleteQuestionMutation"}})}})},[b.noumId,h]);return m(gu,{isMobile:w,width:!w&&S?"350px":"auto","data-test":"HomeNoumCQToken-CQTokenContainer",children:[p&&m(cn,{order:0,"data-test":"HomeNoumCQToken-GrayBox",children:[m("div",{style:{display:"flex",flexDirection:"column",width:"200px",height:"61px"},children:[m(bu,{font:"body-m",colorToken:"--text-body-neutral-default","data-test":"HomeNoumCQToken-TokenBoxTitle",children:[" ",C("noumena.money.tokens.subheading")]}),m(xo,{font:"heading-m",colorToken:"--text-body-neutral-highlighted","data-test":"HomeNoumCQToken-GrayBoxValue",children:[" ",x?"...":(_=T.token)==null?void 0:_.count]})]}),t(X,{size:"small",style:{alignSelf:"center"},"data-testid":"stepTwoBackButton",tertiary:!0,textOnly:!0,onClick:()=>i(!0),"data-test":"HomeNoumCQToken-Button",children:t(L,{name:"tokensIcon",size:16,color:"--icon-button-neutral-default","data-test":"HomeNoumCQToken-Icon"})}),t($i,{open:o,onClose:()=>i(!1),"data-test":"HomeNoumCQToken-TokenModal"})]}),n.cqInHomeNoumsProfile&&t(j,{children:p?m(cn,{order:1,"data-test":"HomeNoumCQToken-GrayBox",children:[m("div",{style:{display:"flex",flexDirection:"column",width:"172px"},children:[t(xu,{font:"body-m",colorToken:"--text-body-neutral-default","data-test":"HomeNoumCQToken-CQBoxTitle",children:C("noumena.money.wallet.capitalquotient")}),b.fetching&&t(it,{"data-test":"HomeNoumCQToken-Spinner"}),!b.fetching&&m(xo,{font:"heading-m",colorToken:"--text-body-neutral-highlighted","data-test":"HomeNoumCQToken-GrayBoxValue",children:[" ",b.score]}),m(Co,{"data-test":"HomeNoumCQToken-CQFooterBox",children:[b.status!=="InComplete"&&t(Cu,{font:"body-m",colorToken:"--text-card-danger-primary-default","data-test":"HomeNoumCQToken-HelperTextWrapper",children:b.status}),b.status==="InComplete"&&t(yu,{font:"body-m",colorToken:"--text-card-neutral-highlighted","data-test":"HomeNoumCQToken-WarningTextWrapper",children:C("noumena.money.cq.incomplete_displayText")})]}),t(Co,{"data-test":"HomeNoumCQToken-CQFooterBox",children:t(je,{hideIcons:!0,inputValue:(y==null?void 0:y.value).charAt(0).toUpperCase()+(y==null?void 0:y.value).slice(1),options:v,usePortal:!1,onSelectOption:M=>{P(M)},onOpen:()=>c(!0),onClose:()=>c(!1),"data-test":"HomeNoumCQToken-Dropdown",children:({inputProps:M,inputRef:W,toggle:O})=>m(j,{children:[t(wu,{...M,ref:W,"data-test":"HomeNoumCQToken-PrivacyDropdownSelectedValue"}),t(Su,{name:"chevron_down_m",size:16,color:"--icon-card-neutral-default",isOpen:d,onClick:O,"data-test":"HomeNoumCQToken-RightIcon"})]})})})]}),t(X,{size:"small",style:{alignSelf:"center"},"data-testid":"stepTwoBackButton",secondary:!0,onClick:()=>F(),"data-test":"HomeNoumCQToken-Button",children:C("noumena.money.wallet.updateCQ")})]}):t(j,{children:(b==null?void 0:b.visibility)==="Public"?t(cn,{isVisitor:!p,"data-test":"HomeNoumCQToken-GrayBox",children:m(vu,{"data-test":"HomeNoumCQToken-CQBoxVisitor",children:[t(E,{font:"body-m",colorToken:"--text-card-neutral-highlighted","data-test":"HomeNoumCQToken-TSpan",children:C("noumena.money.wallet.capitalquotientscore")}),t(E,{font:"heading-xs-bold",colorToken:"--text-card-neutral-highlighted","data-test":"HomeNoumCQToken-TSpan",children:b.score})]})}):null})})]})},Vu=parseInt(me.MOBILE_L,10),Fn=()=>{const{space:e,spaceId:a}=ge(),{masterId:n}=ye(),i=Re().width<=Vu,s=e==null?void 0:e.isFavourited,[l,{loading:d}]=dl(),[c,{loading:h}]=cl(),{flags:{noumEditor2:p}}=le(),g=r.useMemo(()=>({id:a||"",noumId:n,status:Jo.Published,editorV2Enabled:p}),[n,p,a]),{addToast:b}=st(),f=r.useCallback(y=>{const{networkError:k,graphQLErrors:v}=y;b("error","none",`${C("noumena.toast_error.text")}: ${y?y.message:k}`);const[T]=v;lt(new Error((T==null?void 0:T.message)??k),{tags:{section:"markNoumAsFavourite"}})},[b]),x=r.useCallback(y=>{b("success","none",C(`noumena.chamber.favourites_${y}`))},[b]),w=r.useCallback(async()=>{await l({variables:{noumId:a||""},onError:y=>{f(y)},onCompleted:()=>{x("added")},update:(y,k)=>{y.updateQuery({query:to,variables:g},v=>{var T;return{...v,getSpaceById:{...v==null?void 0:v.getSpaceById,isFavourited:(T=k.data)==null?void 0:T.favouriteNoum}}})}})},[f,x,l,a,g]),S=r.useCallback(async()=>{await c({variables:{noumId:a||""},onError:y=>{f(y)},onCompleted:()=>{x("removed")},update:(y,k)=>{y.updateQuery({query:to,variables:g},v=>{var T;return{...v,getSpaceById:{...v==null?void 0:v.getSpaceById,isFavourited:!((T=k.data)!=null&&T.unfavouriteNoum)}}})}})},[f,x,c,a,g]);return t(Nd,{disabled:d||h,isMobile:i,"data-test":"Favourite-IconWrapper",children:t(cu,{className:"favrouites",isMobile:i,name:s?"star_filled_m":"add_to_favourites",color:s?"--icon-button-neutral-pressed":"",size:24,onClick:s?S:w,"data-test":"Favourite-FavouriteIcon"})})},Uu=parseInt(me.MOBILE_L,10),Qu=r.forwardRef(({disabled:e,name:a,title:n,icon:o,imageURL:i,lastUpdated:s,followers:l,location:d,bio:c,ownerName:h,ownerImageURL:p,ownerTitle:g,ownerBio:b,loading:f=!1,isMasterNoum:x,isSecretNoum:w=!1,spaceId:S,isUpdateMode:y,category:k,noumValidity:v,isPublished:T},F)=>{var Pe,ze,xe;const[P,_]=r.useState(!1),{t:M}=G(),{isOwner:W,space:O,noumType:U}=ge(),{space:Q}=Ot(),[V,$]=qt(!1),q=Re(),{flags:z}=le(),I=q.width<=Uu,B=x?b:c,N=x?g:n,D=N==null?void 0:N.toLocaleLowerCase(),ie={spaceId:S,name:a,description:B,profileImage:i,categoryId:(k==null?void 0:k._id)||void 0},{isUnregistered:te}=ye(),{aboutToExpireInfo:H={showLabel:!1,days:0},expiredInfo:se={showLabel:!1,days:0},validityDate:Y}=v||{},Me=r.useCallback(()=>{_(ne=>!ne)},[]),oe=U===We.RiseApplication||((Pe=O==null?void 0:O.category)==null?void 0:Pe.name)==="Rise"?Ii:i,ke=U===We.RiseApplication;return m(lu,{ref:F,"data-test":"ProfileSummaryOld-ProfileSummaryContainer",children:[!f&&m(du,{"data-test":"ProfileSummaryOld-StyledCard",children:[m(su,{"data-testid":"theadSection","data-test":"ProfileSummaryOld-ProfileSummaryHead",children:[t(Yt,{disabled:e,url:x?p:oe,size:"XXL",width:I?q.width-32:void 0,height:I?q.width-32:void 0,borderRadius:16,"data-test":"ProfileSummaryOld-Avatar"}),m(Ji,{"data-test":"ProfileSummaryOld-ProfileSummaryDataContainer",children:[!I&&!y&&T&&!te&&t(Fn,{"data-test":"ProfileSummaryOld-Favourite"}),m(uu,{"data-testid":"ttagsSection","data-test":"ProfileSummaryOld-TagSection",children:[N&&N.length>0&&t(ft,{icon:o??void 0,title:N,...!x&&D?{color:`var(${Oi(D)})`,bgColor:`var(${Wi(D)})`}:{secondary:!0},"data-test":"ProfileSummaryOld-Tag",children:ke?M("noumena.rise_application"):N}),!x&&!w&&!ke&&t(ft,{tertiary:!0,"data-test":"ProfileSummaryOld-Tag",children:M("noumena.profile_summary.followers",{postProcess:"interval",count:l||0})}),e&&t(ft,{tertiary:!0,"data-test":"ProfileSummaryOld-Tag",children:M("noumena.archived")}),H.showLabel&&m(ft,{secondary:!0,icon:t(Ha,{name:"time_m",size:16,"data-test":"ProfileSummaryOld-NoumStatusIcon"}),"data-test":"ProfileSummaryOld-Tag",children:[`${M("noumena.money.subscription.noum.expires.text",{day:H.days})} `,W&&t(E,{colorToken:"--text-tag-brand-primary-default",font:"link-m",onClick:Me,"data-test":"ProfileSummaryOld-TSpan",children:`${M("noumena.money.myplans.renew")}`})]}),se.showLabel&&!!Y&&m(ft,{danger:!0,icon:t(Ha,{name:"time_m_red",size:16,"data-test":"ProfileSummaryOld-NoumStatusIcon"}),"data-test":"ProfileSummaryOld-Tag",children:[se.showGracePeriodLabel?`${M("noumena.money.subscription.noum.grace.period.text",{day:se.days})} `:`${M("noumena.money.subscription.noum.expired.text",{date:Sa(new Date(Y),"dd MMM yyyy")})} `,W&&t(E,{colorToken:"--text-tag-brand-primary-default",font:"link-m",onClick:Me,"data-test":"ProfileSummaryOld-TSpan",children:`${M("noumena.money.myplans.renew")}`})]})]}),m(mu,{"data-test":"ProfileSummaryOld-ProfileSummaryNameAndFavouritesContainer",children:[t(Zi,{disabled:e,"data-testid":"tprofileSummaryName","data-test":"ProfileSummaryOld-ProfileSummaryName",children:x?h:a}),I&&!y&&T&&!te&&t(Fn,{"data-test":"ProfileSummaryOld-Favourite"})]}),x&&d?t(Yi,{"data-testid":"tprofileSummaryLocation","data-test":"ProfileSummaryOld-ProfileSummaryLocation",children:d}):null,t(E,{font:"body-m",$fill:!0,colorToken:"--text-card-neutral-default","data-test":"ProfileSummaryOld-TSpan",children:e?M("noumena.profile_summary.archived",{lastUpdated:s}):s?M("noumena.profile_summary.last_update",{lastUpdated:s}):null})]}),y&&t(fu,{"data-test":"ProfileSummaryOld-ProfileSummaryEdit",children:t(X,{leftIcon:t(L,{name:"edit_m",size:24,color:"--icon-button-neutral-default","data-test":"ProfileSummaryOld-Icon"}),size:"small",tertiary:!0,onClick:$,disabled:((ze=Q==null?void 0:Q.category)==null?void 0:ze.name.toLowerCase())==="rise_application","data-test":"ProfileSummaryOld-Button",children:M("noumena.chamber.edit_button")})})]}),t(ru,{"data-testid":"tprofileSummaryDescription",isMobile:B!=null&&B.length?I:!0,"data-test":"ProfileSummaryOld-ProfileSummaryDescription",children:B}),x&&z.cqInHomeNoumsProfile&&m(j,{children:[t(K,{height:24,"data-test":"ProfileSummaryOld-Spacer"}),t(Du,{"data-test":"ProfileSummaryOld-HomeNoumCQToken"})]}),x&&W&&((xe=O==null?void 0:O.uid)==null?void 0:xe.userStatus)===oi.Active&&(!(O!=null&&O.percentCompleted)||(O==null?void 0:O.percentCompleted)<100)?t(pu,{"data-test":"ProfileSummaryOld-CompletenessWrapper",children:t(Pd,{"data-test":"ProfileSummaryOld-ChamberCompleteness"})}):null]}),t(j,{children:x?t(Ki,{isOpen:V,handleClose:$,handleSuccess:$,spaceId:S,isUpdateMode:!0,"data-test":"ProfileSummaryOld-PersonalDetailsModal"}):V?t(Ni,{isOpen:V,handleClose:$,handleSuccess:$,isUpdateMode:!0,summaryData:ie,"data-test":"ProfileSummaryOld-ProjectCreate"}):null}),P&&z.paymentSubscriptions&&W&&t(Fi,{onClose:Me,open:P,chamber_id:v==null?void 0:v.chember,noumExpiryDate:v==null?void 0:v.validityDate,noum_transaction_fee_id:v==null?void 0:v.noumTransactionFeeId,"data-test":"ProfileSummaryOld-RenewNoumModal"})]})}),ju={XXXXL:343,XXXL:168,XXL:128,XVL:80,XL:56,L:40,M:24,S:16},qu={XXXXL:10,XXXL:12,XXL:12,XVL:12,XL:12,L:12,M:6,S:4},Xu={XXXXL:40,XXXL:40,XXL:40,XVL:40,XL:20,L:20,M:6,S:6},Gu={XXXXL:24,XXXL:24,XXL:24,XVL:20,XL:12,L:12,M:3,S:3},Yu={XXXXL:8,XXXL:8,XXL:8,XVL:8,XL:4,L:4,M:2,S:2},Ju={XXXXL:12,XXXL:12,XXL:12,XVL:12,XL:6,L:6,M:2,S:2},vo=[{label:C("noumena.editor.Cover_photo_add_new_photo"),key:C("noumena.editor.Cover_photo_add_new_photo"),type:"value",value:C("noumena.editor.Cover_photo_add_new_photo"),icon:t(L,{color:"--icon-tablecell-neutral-highlighted",size:24,name:"plus_m","data-test":"bannerEditOptions-Icon"})},{value:C("noumena.editor.Cover_photo_remove"),key:C("noumena.editor.Cover_photo_remove"),type:"value",label:C("noumena.editor.Cover_photo_remove"),intent:"danger",labelColor:"--text-tablecell-header-danger-primary-highlighted",icon:t(L,{name:"delete_m",size:24,color:"--text-tablecell-danger-primary-default","data-test":"bannerEditOptions-Icon"})}],Zu=u.div`
  width: ${e=>e.isBanner?"100%":e.size?`${e.size}px`:"100%"};
  display: flex;
  justify-content: center;
  align-items: center;
  height: ${e=>e.size?`${e.size}px`:"fit-content"};
  border-radius: ${e=>e.radius}px;
  overflow: hidden;
  img {
    object-fit: cover;
    ${e=>e.disabled&&`
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
    `}
  }
  position: relative;
  opacity: ${({opacity:e})=>e??1};
  border: ${e=>e.isCoverUrl&&"2px dashed var(--border-card-neutral-default)"};
`,Ku=u.div`
  width: ${({isBanner:e})=>e&&"173px"};
  height: ${({isBanner:e})=>e&&"36px"};
  border-radius: ${({radius:e})=>e&&`${e}px`};
  position: absolute;
  top: ${({position:e,isBanner:a})=>a&&e&&`${e}px`};
  right: ${({position:e})=>e&&`${e}px`};
  bottom: ${({position:e,isBanner:a})=>!a&&e&&`${e}px`};
  cursor: pointer;
  vertical-align: middle;
  gap: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-base-gray-transparency-40);
  padding: ${({isBanner:e})=>!e&&"4px"};
  :hover {
    background: var(--color-base-gray-transparency-50);
  }
`;u(L)`
  position: absolute;
  bottom: 0;
  right: 0;
  background: ${({overridedIcon:e})=>e==="arrow_down_m"?"var(--bg-button-success-secondary-default)":"var(--bg-button-neutral-default)"};
  border-radius: ${({borderRadius:e})=>`${e}px`};
  border: ${({overridedIcon:e})=>"2px solid var(--border-avatar-neutral-alt-default)"};
  box-shadow: 0px 4px 32px rgba(32, 17, 62, 0.08);
`;const em=u.img`
  height: ${({size:e})=>e&&e}px;
  width: inherit;
  object-fit: ${({isBanner:e})=>e?"cover":"contain"};
`,tm=u.div`
  position: absolute;
  top: 16px;
  left: 16px;
`,am=u(X)`
  position: absolute;
  top: 16px;
  right: 16px;
  background-color: ${({isFocused:e})=>e?"var(--color-base-gray-transparency-50)":"var(--color-base-gray-transparency-40)"};
  color: var(--bg-card-neutral-alt-default);
  :hover {
    background: var(--color-base-gray-transparency-50);
  }
`,nm=u(R)`
  cursor: pointer;
  :hover {
    background: var(--bg-card-brand-secondary-highlighted);
  }
`,Kt={XXXXL:"XXXXL",XXXL:"XXXL",XXL:"XXL",XVL:"XVL",XL:"XL",L:"L",M:"M",S:"S"},om=({name:e,size:a,color:n,onClick:o,isBanner:i})=>{const s=Xu[a||Kt.L],l=i?16:Ju[a||Kt.L],d=i?8:Yu[a||Kt.L],c=i?24:Gu[a||Kt.L];return m(Ku,{"data-testid":"avatarEditButton",size:s,position:l,radius:d,onClick:o,isBanner:i,"data-test":"BannerEditButton-StyledButton",children:[t(L,{name:e,size:c,color:n,"data-testid":"avatarEditButtonIcon","data-test":"BannerEditButton-Icon"}),i&&t(E,{font:"button-s",colorToken:"--bg-card-neutral-alt-default","data-test":"BannerEditButton-TSpan",children:C("noumena.avatar.add_button_text")})]})},im=({disabled:e,url:a,size:n,fileSize:o,maximumFileSize:i,editable:s,isUploadComplete:l,isUploadStarted:d,onClick:c,onClose:h,width:p,height:g,borderRadius:b,opacity:f,isBanner:x=!0,onClear:w,loading:S})=>{const[y,k]=r.useState(!1),v=p||ju[n||Kt.L],T=r.useRef(null);ii(T,!0,()=>k(!1));const F=b??qu[n||Kt.L],{t:P}=G(),{addToast:_}=st(),M=r.useMemo(()=>d&&!l||!1,[l,d]),W=r.useMemo(()=>x&&s&&!a||!1,[s,x,a]),O=Q=>{Q.preventDefault(),s&&(c==null||c(Q))};r.useEffect(()=>{s&&!ul(o||0,i)&&(h==null||h())},[s,o,i,_,P,h]);const U=(Q,V)=>{switch(k(!1),V){case"Add New Photo":O(Q);break;case"Remove":w==null||w();break}};return t(j,{children:m(Zu,{"aria-label":"profile-banner","data-testid":"avatarContainer",size:x?g:v,radius:F,disabled:e,opacity:f,isBanner:x,isCoverUrl:W,"data-test":"ProfileBanner-StyledAvatarContainer",children:[a?t(em,{src:a,size:x?g:p||v,isBanner:x,"data-test":"ProfileBanner-ProfileBannerImage"}):x?s&&t(L,{name:"picture_m",size:150,"data-testid":"avatarIcon",color:"--color-base-gray-90","data-test":"ProfileBanner-Icon"}):t(L,{imageIconName:"avatar_m",size:v,"data-testid":"avatarIcon","data-test":"ProfileBanner-Icon"}),(M||S)&&t(it,{"data-test":"ProfileBanner-Spinner"}),!M&&s&&t("div",{ref:T,children:x&&a?t(je,{containerWidth:"max-content",options:vo,isAnimation:!1,usePortal:!1,observerMinHeight:"0",renderContainerFromBottom:!0,isOpen:y,optionsRenderer:()=>t(R,{vertical:!0,"data-test":"ProfileBanner-Stack",children:vo.map(Q=>m(nm,{fullWidth:!0,padding:"13px",gap:21,borderBottom:!0,align:"center",onClick:V=>{V.stopPropagation(),U(V,Q.value)},"data-test":"ProfileBanner-DropDownItems",children:[Q.icon,t(E,{font:"body-m-bold",colorToken:Q.intent==="danger"?"--text-tablecell-header-danger-primary-highlighted":void 0,"data-test":"ProfileBanner-TSpan",children:Q.label})]}))}),"data-test":"ProfileBanner-Dropdown",children:({targetRef:Q,targetProps:V})=>t(am,{ref:Q,...V,size:"small",isFocused:y,leftIcon:t(L,{size:24,name:"picture_m",color:"--icon-tag-neutral-alt-default","data-test":"ProfileBanner-Icon"}),color:"--icon-tag-neutral-alt-default",onClick:()=>k(!y),"data-test":"ProfileBanner-DropDownBannerbutton",children:t(E,{font:"button-s",colorToken:"--bg-card-neutral-alt-default","data-test":"ProfileBanner-TSpan",children:P("noumena.avatar.editable_button_text")})})}):t(om,{size:n,name:"picture_m",color:"--icon-tag-neutral-alt-default",onClick:O,isBanner:x,"data-test":"ProfileBanner-BannerEditButton"})}),x&&s&&!a&&t(tm,{"data-test":"ProfileBanner-BannerDescription",children:t(E,{font:"button-s",colorToken:"--text-button-neutral-disabled","data-test":"ProfileBanner-TSpan",children:P("noumena.editor.Cover_photo_description")})})]})})},ko=r.memo(({url:e,size:a,maximumFileSize:n,defaultImagePlaceHolder:o,onContentChange:i,onClear:s,onlyEditable:l,isBanner:d=!0,height:c,borderRadius:h,loading:p})=>t(zn,{url:e||"",maxSize:n,acceptedFileTypes:ri,onContentChange:i,"data-test":"ProfileBannerEditable-Upload",children:({triggerElRef:g,...b})=>t(im,{isUploadComplete:b.isUploadComplete,isUploadStarted:b.isUploadStarted,url:e||o,size:a,editable:l,fileSize:b.fileSize,maximumFileSize:n,onClick:b.onClickHandler,onClear:s,onClose:b.onCloseHandler,isBanner:d,height:c,borderRadius:h,isLoadingBanner:p,"data-test":"ProfileBannerEditable-ProfileBanner"})}));u(R).attrs({fullWidth:!0})`
  background: var(--bg-card-neutral-default);
  border-radius: 8px;
  margin-top: 16px;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
`;var pt=(e=>(e.PUBLIC="Public",e.PRIVATE="Private",e))(pt||{});const rm="Rise",Eo=({chamberTitle:e,isMasterNoum:a,disabled:n,lastUpdated:o,location:i,ownedBy:s})=>{const{t:l}=G();return a?m(R,{gap:8,"data-test":"NoumBio-Stack",children:[t(E,{font:"body-m",$fill:!0,colorToken:"--text-card-neutral-default","data-test":"NoumBio-TSpan",children:e}),t(E,{"data-test":"NoumBio-TSpan",children:""}),t(Yi,{"data-testid":"tprofileSummaryLocation","data-test":"NoumBio-ProfileSummaryLocation",children:i})]}):m(hu,{"data-test":"NoumBio-NoumHeaderAdditionalDetails",children:[t(Au,{"data-test":"NoumBio-OwnedWrapper",children:t(xa,{i18nKey:"noumena.profile_summary.owned_by",values:{name:s},components:{strong:t(E,{font:"body-m","data-test":"NoumBio-TSpan",children:s})},"data-test":"NoumBio-Trans"})}),t(E,{"data-test":"NoumBio-TSpan",children:""}),t(E,{font:"body-m",$fill:!0,colorToken:"--text-card-neutral-default","data-test":"NoumBio-TSpan",children:n?l("noumena.profile_summary.archived",{lastUpdated:o}):o?l("noumena.profile_summary.last_update",{lastUpdated:o}):null})]})},_o=()=>{var rt,Jt,zt,ka,ra,Ea,_a,la,sa,da,ca,ua,ma,Be,It,Nt;const{connectedMembersCount:e,followersCount:a=0,isMasterNoum:n,space:o,isOwner:i,isFollowing:s,isConnected:l,refetchConnectedMembers:d,refetchFollowersCount:c,noumType:h,projectType:p,connectionStatus:g,lastUpdatedConnectionId:b,loadingSpace:f}=ge(),{eventMeta:x,networkStatus:w}=Ua({chamberId:(o==null?void 0:o._id)||"",preventGetEvents:!1}),{data:S,refetch:y,loading:k}=ni(),[v,T]=r.useState(),[F,P]=r.useState(),[_,M]=r.useState(),[W,O]=r.useState(!1),[U,Q]=r.useState(!1),[V,$]=r.useState(!1),[q,z]=qt(),{flags:{noumDashboardMetrics:I}}=le(),B=i||l||n&&e>0,N=r.useMemo(()=>(p===Ba.Public||p===Ba.Secret)&&!n,[n,p]),{data:D,refetch:ie,loading:te}=Xd({limit:3,requestFrom:n?null:o==null?void 0:o._id,status:ml.Invited}),{data:H,refetch:se,loading:Y}=Gd(n?{limit:3}:{spaceId:o==null?void 0:o._id,limit:3},i),Me=r.useCallback(()=>{B&&(n||!i||!I?T(Pt.Connections):i?(P(Gs.connections),T(po.Statistics)):T(Pt.Connections))},[B,n,i,I]),{noumLinkData:oe,getLinkData:ke,loadingLinked:Pe}=Ti(),{totalCount:ze,loading:xe}=ho("",Pt.ProjectSpaces,void 0,n?(rt=o==null?void 0:o.uid)==null?void 0:rt._id:null),ne=n?ze:0,{totalCount:Te,loading:Se}=ho("",Pt.OwnedNoums,void 0,n?(Jt=o==null?void 0:o.uid)==null?void 0:Jt._id:null);r.useEffect(()=>{ke((o==null?void 0:o._id)||""),d(),c&&(o!=null&&o._id)&&c()},[ke,d,c,o==null?void 0:o._id]);const pe=r.useMemo(()=>{var fe,Fe;return((Fe=(fe=oe==null?void 0:oe.getNoumLinkByNoumId)==null?void 0:fe.link)==null?void 0:Fe.linkedNoums)||[]},[(ka=(zt=oe==null?void 0:oe.getNoumLinkByNoumId)==null?void 0:zt.link)==null?void 0:ka.linkedNoums]),Z=r.useMemo(()=>{var fe,Fe;return((Fe=(fe=oe==null?void 0:oe.getNoumLinkByNoumId)==null?void 0:fe.link)==null?void 0:Fe.linkedNoumsCount)||0},[(Ea=(ra=oe==null?void 0:oe.getNoumLinkByNoumId)==null?void 0:ra.link)==null?void 0:Ea.linkedNoumsCount]),ee=r.useMemo(()=>{var fe;return((fe=oe==null?void 0:oe.getNoumLinkByNoumId)==null?void 0:fe.link)||!1},[oe]),J=r.useMemo(()=>{var fe;return(o==null?void 0:o.description)||((fe=o==null?void 0:o.uid)==null?void 0:fe.bio)||void 0},[o==null?void 0:o.description,(_a=o==null?void 0:o.uid)==null?void 0:_a.bio]),ce=r.useMemo(()=>ee?ee==null?void 0:ee.followersCount:a,[ee,a]),re=r.useMemo(()=>{var fe;return(o==null?void 0:o.type)!==We.Home&&(o==null?void 0:o.projectType)!==Ba.Secret&&h!==We.RiseApplication&&((fe=o==null?void 0:o.category)==null?void 0:fe.name)!==rm},[h,(la=o==null?void 0:o.category)==null?void 0:la.name,o==null?void 0:o.projectType,o==null?void 0:o.type]),Ee=r.useMemo(()=>!(o!=null&&o.percentCompleted)||(o==null?void 0:o.percentCompleted)<100,[o==null?void 0:o.percentCompleted]),Le=r.useMemo(()=>{var fe,Fe;return((fe=D==null?void 0:D.requestedConnection)==null?void 0:fe.count)&&((Fe=D==null?void 0:D.requestedConnection)==null?void 0:Fe.count)>0},[(sa=D==null?void 0:D.requestedConnection)==null?void 0:sa.count]),He=r.useMemo(()=>{var fe,Fe;return((fe=H==null?void 0:H.receivedConnectionRequest)==null?void 0:fe.count)&&((Fe=H==null?void 0:H.receivedConnectionRequest)==null?void 0:Fe.count)>0},[(da=H==null?void 0:H.receivedConnectionRequest)==null?void 0:da.count]),he=r.useMemo(()=>S!=null&&S.getSpaceByType&&(S!=null&&S.getSpaceByType[0])?S==null?void 0:S.getSpaceByType[0]:{token:{count:"--"}},[S]),be=()=>se(n?{}:{spaceId:o==null?void 0:o._id});r.useEffect(()=>{var fe,Fe,Ht;b&&((fe=D==null?void 0:D.requestedConnection)!=null&&fe.data)&&((Ht=(Fe=D==null?void 0:D.requestedConnection)==null?void 0:Fe.data)==null?void 0:Ht.findIndex(Dt=>(Dt==null?void 0:Dt.connectionId)===b))>-1&&ie()},[(ca=D==null?void 0:D.requestedConnection)==null?void 0:ca.data,b,ie]);const ct=r.useMemo(()=>{var fe;return typeof((fe=he.token)==null?void 0:fe.count)=="number"&&he.token.count>0},[(ua=he.token)==null?void 0:ua.count]);return r.useEffect(()=>{Ee||y()},[Ee,y]),r.useEffect(()=>{ke((o==null?void 0:o._id)||"")},[a]),m(j,{children:[(i||n||g===vn.Approved)&&m(Pu,{isSummaryDescription:!!J,"data-test":"NoumMembersInformation-InfoStackWrapper",children:[!f&&e>0&&h!==We.RiseApplication?t(At,{textOnly:!0,onClick:Me,enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:e.toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.chamber.connections",{postProcess:"interval",count:e})})]})}):f&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),!f&&re&&ce>0?t(At,{textOnly:!0,onClick:()=>i&&T(Pt.Followers),enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:ce.toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.chamber.followers",{postProcess:"interval",count:ce})})]})}):f&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),!Pe&&pe.length>0?t(At,{textOnly:!0,onClick:()=>T(Pt.Noums),enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:Z.toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.noum_editor.linked_noum")})]})}):Pe&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),!Se&&Te>0?t(At,{textOnly:!0,onClick:()=>T(Pt.OwnedNoums),enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:Te.toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.noum_editor.owned_noum")})]})}):Se&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),i&&N?t(j,{children:!te&&Le?t(At,{textOnly:!0,onClick:z,enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:(((ma=D==null?void 0:D.requestedConnection)==null?void 0:ma.count)||0).toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.chamber.modal.invited_by_me")})]})}):te&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"})}):(!te||!Y)&&(He||Le)?t(At,{textOnly:!0,onClick:z,enableClick:B,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:((((Be=H==null?void 0:H.receivedConnectionRequest)==null?void 0:Be.count)||0)+(((It=D==null?void 0:D.requestedConnection)==null?void 0:It.count)||0)).toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.chamber.modal.requests_invites")})]})}):(te||Y)&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),w===bt.ready&&((x==null?void 0:x.hostedEventsCount)??0)>0?t(At,{textOnly:!0,enableClick:!0,"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:((x==null?void 0:x.hostedEventsCount)||0).toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.noum.events",{postProcess:"interval",count:(x==null?void 0:x.hostedEventsCount)||0})})]})}):w!==bt.ready&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"}),!k&&i&&n&&ct?t(At,{textOnly:!0,enableClick:!0,onClick:()=>$(!0),"data-test":"NoumMembersInformation-NoumsMemberButton",children:m(R,{gap:4,align:"center","data-test":"NoumMembersInformation-Stack",children:[t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:(Nt=he.token)==null?void 0:Nt.count.toLocaleString()}),t(E,{font:"footnote-bold",colorToken:"--text-tablecell-header-neutral-default","data-test":"NoumMembersInformation-TSpan",children:C("noumena.money.tokens.subheading")})]})}):k&&t(yt,{w:100,h:15,r:8,"data-test":"NoumMembersInformation-StyledSkeleton"})]}),(s||B||pe.length>0||n&&v===Pt.OwnedNoums)&&!xe&&!Se&&t(Ys,{isOpen:!!v&&v!==po.Statistics,defaultTab:v,handleClose:()=>T(void 0),followersCount:ce,linkedNoumsCount:Z,connectedProjectsCount:ne,setInvitedNoumId:M,showInviteModal:()=>O(!0),userNoumsCount:Te,"data-test":"NoumMembersInformation-ConnectionDetailsModal"}),t(Js,{isOpen:!!F,dashboardType:F,handleClose:()=>P(void 0),"data-test":"NoumMembersInformation-NoumDashboardMetricsModal"}),t(Zs,{isOpen:W,invitedNoumId:_,ownNoumId:(o==null?void 0:o._id)||"",closeInviteModal:()=>O(!1),"data-test":"NoumMembersInformation-ConnectionInviteModal"}),t(Jd,{spaceId:(o==null?void 0:o._id)||"",isOpen:U,handleClose:()=>Q(!1),isOnlyInvite:!0,"data-test":"NoumMembersInformation-ChamberVisibilityInviteModal"}),t(Yd,{isOpen:q,isChambersScreen:n,handleClose:z,noumId:(o==null?void 0:o._id)||"",isInviteOnly:N,refetchReceivedRequests:be,"data-test":"NoumMembersInformation-RequestsAndInvitesModal"}),t($i,{open:V,onClose:()=>$(!1),"data-test":"NoumMembersInformation-TokenModal"})]})},lm=({summaryDescription:e,isUpdateMode:a})=>{const{isTablet:n,isMobile:o}=ot();return m(j,{children:[m(R,{justify:"space-between",vertical:n||o,padding:o||n?"0 16px":void 0,fullWidth:!0,align:n||o?"start":"center",gap:16,reverse:!e&&o,"data-test":"NoumDescription-Stack",children:[e&&t(E,{"data-testid":"tprofileSummaryDescription",font:"body-m",style:{wordBreak:"break-word"},"data-test":"NoumDescription-TSpan",children:e}),!a&&!e&&t(_o,{"data-test":"NoumDescription-NoumMembersInformation"}),o&&t(Xi,{"data-test":"NoumDescription-NoumEditorViewModeActions"})]}),e&&t(K,{height:16,"data-test":"NoumDescription-Spacer"}),!a&&e&&t(_o,{"data-test":"NoumDescription-NoumMembersInformation"})]})},sm=()=>{const{user:e}=ye(),{flags:a}=le(),n="https://noudev-cq-portal.noumenati.com/",[o]=ti(),[i]=ai(),{isOwner:s,space:l}=ge(),{cqData:d}=Un((l==null?void 0:l._id)||"",!s),[c,h]=r.useState(),p=r.useMemo(()=>d.status==="InComplete",[d.status]);r.useEffect(()=>{h(d==null?void 0:d.visibility)},[d]);const g=[{key:"public",label:C("noumena.money.cq.public"),type:"value",value:"Public",icon:t(L,{name:"eye_on_m",size:24,"data-test":"CQToken-options-Icon"}),description:C("noumena.money.public.description"),rightIcon:t(Nn,{isChecked:c===pt.PUBLIC,icon:t(L,{name:"flag_pl_m",size:c===pt.PUBLIC?12:0,color:c===pt.PUBLIC?"--icon-radiobutton-brand-primary-default":"--icon-radiobutton-inactive-default","data-test":"CQToken-options-Icon"}),"data-test":"CQToken-options-Radiobox"})},{key:"private",label:C("noumena.money.cq.private"),type:"value",value:"Private",icon:t(L,{name:"lock_m",size:24,"data-test":"CQToken-options-Icon"}),description:C("noumena.money.private.description"),rightIcon:t(Nn,{isChecked:c===pt.PRIVATE,icon:t(L,{name:"flag_pl_m",size:c===pt.PRIVATE?12:0,color:c===pt.PRIVATE?"--icon-radiobutton-brand-primary-default":"--icon-radiobutton-inactive-default","data-test":"CQToken-options-Icon"}),"data-test":"CQToken-options-Radiobox"})},{key:"update CQ",label:m(R,{gap:8,align:"center","data-test":"CQToken-options-Stack",children:[C("noumena.money.update.cq")," ",p&&t(Iu,{"data-test":"CQToken-options-TagInComplete",children:d.status})]}),type:"value",value:"update CQ",icon:t(L,{name:"edit_m",size:24,"data-test":"CQToken-options-Icon"}),description:C("noumena.money.cq.incomplete_displayText")}],b=r.useCallback(async()=>{var y;const w=(y=(await o({variables:{},onError:({networkError:k=null,graphQLErrors:v=[]})=>{const[T]=v;lt(new Error((T==null?void 0:T.message)??k),{tags:{section:"deleteQuestionMutation"}})},onCompleted:()=>{ba("CQStart",{UUID:e==null?void 0:e._id})}})).data)==null?void 0:y.generateOneTimeToken,S=`${n}?access_token=${w}`;window.open(S,"_blank")},[n,o,e==null?void 0:e._id]),f=r.useCallback(async x=>{switch(x){case"update CQ":b();break;default:h(x),await i({variables:{input:{noumId:d.noumId||"",visibility:x.toUpperCase()}},onError:({networkError:w=null,graphQLErrors:S=[]})=>{const[y]=S;lt(new Error((y==null?void 0:y.message)??w),{tags:{section:"deleteQuestionMutation"}})}});break}},[d.noumId,b,i]);return d.fetching?t(Qt,{width:195,height:23,borderRadius:12,enableAnimation:!0,baseColor:"var(--color-base-gray-100)","data-test":"CQToken-Skeleton"}):t(j,{children:a.cqInHomeNoumsProfile&&t(j,{children:s?t(je,{options:g,usePortal:!0,renderContainerFromBottom:!0,containerWidth:"max-content",onSelectOption:x=>{f(x.value)},observerMinHeight:"0",isRenderFromBottomContentCentered:!0,"data-test":"CQToken-Dropdown",children:({inputProps:x,inputRef:w,toggle:S})=>t(j,{children:m(yo,{...x,ref:w,onClick:S,gap:7,align:"center",padding:"2px 6px","data-test":"CQToken-TagWrapper",children:[t(wo,{"data-title":c===pt.PUBLIC?C("noumena.money.cq.public"):C("noumena.money.cq.private"),"data-test":"CQToken-TooltipWrapper",children:t(L,{name:c===pt.PUBLIC?"eye_on_m":"lock_m",size:16,color:"--icon-card-neutral-default","data-test":"CQToken-Icon"})}),m(R,{gap:4,align:"center","data-test":"CQToken-Stack",children:[t(E,{font:"footnote-bold",colorToken:"--text-badge-neutral-default","data-test":"CQToken-TSpan",children:C("noumena.money.cq")}),p&&t(wo,{"data-title":C("noumena.money.incompleteCQ.description"),isLeft:!0,"data-test":"CQToken-TooltipWrapper",children:t(Nu,{"data-test":"CQToken-InCompleteIconContainer",children:t(L,{name:"alert_xs",size:10,color:"--icon-badge-neutral-alt-default","data-test":"CQToken-Icon"})})}),t(xa,{count:Number(d.score),"data-test":"CQToken-Trans",children:t(E,{font:"footnote-bold",colorToken:p?"--bg-badge-danger-warning-primary":"--text-badge-neutral-default","data-test":"CQToken-TSpan",children:{count:d.score}})})]}),t(L,{name:"chevron_down_m",size:14,color:"--icon-card-neutral-default","data-test":"CQToken-Icon"})]})})}):t(j,{children:c===pt.PUBLIC?t(yo,{gap:7,align:"center",padding:"2px 6px","data-test":"CQToken-TagWrapper",children:!d.fetching&&m(R,{gap:4,align:"center","data-test":"CQToken-Stack",children:[t(E,{font:"footnote-bold",colorToken:"--text-badge-neutral-default","data-test":"CQToken-TSpan",children:C("noumena.money.cq")}),t(xa,{count:Number(d.score),"data-test":"CQToken-Trans",children:t(E,{font:"footnote-bold",colorToken:"--text-badge-neutral-default","data-test":"CQToken-TSpan",children:{count:d.score}})})]})}):null})})})},dm=({isMasterNoum:e,noumValidity:a,disabled:n,memberData:o,ownerTitle:i,title:s,icon:l,toggleRenewModal:d})=>{var v;const{noumType:c,space:h}=ge(),p=c===We.RiseApplication,{user:g}=ye(),b=(g==null?void 0:g._id)===((v=h==null?void 0:h.uid)==null?void 0:v._id),f=e?i:s,x=f==null?void 0:f.toLocaleLowerCase(),{t:w}=G(),{aboutToExpireInfo:S={showLabel:!1,days:0},expiredInfo:y={showLabel:!1,days:0},validityDate:k}=a||{};return m(j,{children:[e&&t(sm,{"data-test":"NoumTagsDetail-CQToken"}),(o==null?void 0:o.noumMember)&&t(Zd,{member:o.noumMember,"data-test":"NoumTagsDetail-MemberRoleTag"}),!e&&f&&f.length>0&&t(ft,{icon:l,title:f,...!e&&x?{color:`var(${Oi(x)})`,bgColor:`var(${Wi(x)})`}:{secondary:!0},size:"small","data-test":"NoumTagsDetail-Tag",children:p?w("noumena.rise_application"):f}),!e&&!p&&(h==null?void 0:h.projectType)&&t(ft,{tertiary:!0,size:"small","data-test":"NoumTagsDetail-Tag",children:w(`noumena.noum.project_type.${h==null?void 0:h.projectType}`)}),n&&t(ft,{tertiary:!0,"data-test":"NoumTagsDetail-Tag",children:w("noumena.archived")}),S.showLabel&&m(ft,{secondary:!0,icon:t(Ha,{name:"time_m",size:16,"data-test":"NoumTagsDetail-NoumStatusIcon"}),"data-test":"NoumTagsDetail-Tag",children:[`${w("noumena.money.subscription.noum.expires.text",{day:S.days})} `,b&&t(E,{colorToken:"--text-tag-brand-primary-default",font:"link-m",onClick:d,"data-test":"NoumTagsDetail-TSpan",children:`${w("noumena.money.myplans.renew")}`})]}),y.showLabel&&!!k&&m(ft,{danger:!0,icon:t(Ha,{name:"time_m_red",size:16,"data-test":"NoumTagsDetail-NoumStatusIcon"}),"data-test":"NoumTagsDetail-Tag",children:[y.showGracePeriodLabel?`${w("noumena.money.subscription.noum.grace.period.text",{day:y.days})} `:`${w("noumena.money.subscription.noum.expired.text",{date:Sa(new Date(k),"dd MMM yyyy")})} `,b&&t(E,{colorToken:"--text-tag-brand-primary-default",font:"link-m",onClick:d,"data-test":"NoumTagsDetail-TSpan",children:`${w("noumena.money.myplans.renew")}`})]})]})},Et="https://noudev-cq-portal.noumenati.com/",er=`${Et}build-cq-dialog/principles-you`,cm=[{step:_e.IDENTITY,url:`${Et}build-cq-dialog/identity-capital`,showCheckbox:!1},{step:_e.NATIVE,url:`${Et}build-cq-dialog/native-capital`,showCheckbox:!1},{step:_e.FINANCIAL,url:`${Et}build-cq-dialog/financial-capital`,showCheckbox:!1},{step:_e.BUSINESS,url:`${Et}build-cq-dialog/business-plan`,showCheckbox:!1},{step:_e.PRINCIPLES_YOU,url:er,showCheckbox:!1},{step:_e.ESSAYS,url:null,showCheckbox:!0}],um=[{step:_e.IDENTITY,url:`${Et}build-cq-dialog/identity-capital`,showCheckbox:!1},{step:_e.NATIVE,url:`${Et}build-cq-dialog/native-capital`,showCheckbox:!1},{step:_e.FINANCIAL,url:`${Et}build-cq-dialog/financial-capital`,showCheckbox:!1}],mm=[{step:_e.BUSINESS,url:`${Et}build-cq-dialog/business-plan`,showCheckbox:!1},{step:_e.PRINCIPLES_YOU,url:er,showCheckbox:!1},{step:_e.ESSAYS,url:null,showCheckbox:!0}],un=r.memo(({step:e,stepCompleted:a,showCheckbox:n,noOfEssays:o,canEdit:i,identityStepCompleted:s,refreshApplication:l,url:d,applicationId:c,noumId:h,isClassDeleted:p,checked:g,onCheckBoxClicked:b,essayQuestionAnswered:f})=>{const{addToast:x}=st(),{isMobile:w}=ot(),S=tc(),{t:y}=G(),{modalType:k,openModal:v,closeModal:T,contextData:F}=Ca(),P=()=>{l(),T()},{user:_}=ye(),M=e===_e.ESSAYS,W=e===_e.PRINCIPLES_YOU;r.useEffect(()=>{a&&!M&&!W?ba(sn.RISE.APPLICATION_STEP,{UUID:_==null?void 0:_._id,title:y(e)}):a&&!M&&W&&ba(sn.RISE.PRINCIPLES_YOU_CLICKED,{UUID:_==null?void 0:_._id,title:y(e)})},[e,a,_,M,W,y]);const O=async()=>{if(e===_e.FINANCIAL&&!s){x("error","icon",y("noumena.rise_program.identity.capital.error"));return}const{token:$,error:q}=await S();if($){const z=`${d}?access_token=${$}&rise_application=true&applicationId=${c}&noumId=${h}`;v("admin-modal",z);return}q&&x("error","none",q.message)},U=$=>{g?b(q=>({...q,essays:$})):f?(b(q=>({...q,essays:!1})),x("error","icon",y("noumena.rise_program.esssay_not_answered"))):(b(q=>({...q,essays:$})),ba(sn.RISE.APPLICATION_STEP,{UUID:_==null?void 0:_._id,title:"Essays"}))},Q=$=>{if(p){x("error","icon",y("noumena.rise_program.can_user_apply"));return}i||x("error","icon",y("noumena.rise_program.not.owner.error")),U($)};return m(j,{children:[m(Ks,{showCheckbox:n,hasRightBorder:!w,hasBottomBorder:w,onClick:()=>{if(d){if(p){x("error","icon",y("noumena.rise_program.can_user_apply"));return}if(!i){x("error","icon",y("noumena.rise_program.not.owner.error"));return}O()}},"data-test":"RiseApplicationStep-RiseStep",children:[t(E,{font:"body-m",colorToken:"--text-tablecell-header-neutral-highlighted",singleLine:!0,"data-test":"RiseApplicationStep-TSpan",children:M?y(e,{noOfEssays:o}):y(e)}),a?t(ft,{secondary:!0,success:!0,"data-test":"RiseApplicationStep-Tag",children:y("noumena..rise_program.done")}):M||t(L,{name:"chevron_right_m",size:12,color:n?"--icon-tablecell-neutral-default":"--icon-tablecell-neutral-highlighted",style:{marginRight:"8px"},"data-test":"RiseApplicationStep-Icon"}),n&&t(j,{children:m(R,{gap:8,justify:"flex-start","data-test":"RiseApplicationStep-Stack",children:[t(li,{isChecked:g,onChange:Q,disableClick:!i,icon:t(L,{name:"tick_m",size:20,color:"--icon-checkbox-neutral-alt-default","data-test":"RiseApplicationStep-Icon"}),"data-test":"RiseApplicationStep-Checkbox"}),t(E,{font:"body-m",colorToken:"--text-tablecell-header-neutral-default",singleLine:!0,"data-test":"RiseApplicationStep-TSpan",children:y("noumena.rise_program.essay_confirmation")})]})})]}),t(Ne,{open:k==="admin-modal",size:Ve.XXL,enableCloseButton:!0,onClose:P,"data-test":"RiseApplicationStep-Modal",children:t(ed,{"data-test":"RiseApplicationStep-RiseIFrameContainer",children:t(td,{src:F||"",title:"rise","data-test":"RiseApplicationStep-RiseIframe"})})})]})}),pm=r.memo(()=>{const{spaceId:e,isConnected:a,isOwner:n}=ge(),{isTablet:o,isDesktop:i,isMobile:s}=ot(),{status:l,noOfEssays:d,refresh:c,essayQuestionAnswered:h,isStepCompleted:p,isClassDeleted:g,checked:b,setChecked:f,identityCompletion:x,applicationId:w}=ad();if(!l)return null;const S=l===pl.Inprogress||a;return m(R,{vertical:!0,gap:16,padding:s?"16px":"0px","data-test":"RiseApplicationSteps-Stack",children:[!i&&n&&l===ao.Inprogress&&t(nd,{"data-test":"RiseApplicationSteps-RiseApplicationInfoText"}),S&&(i||s)&&t(od,{isMobile:s,"data-test":"RiseApplicationSteps-RiseStepWrapper",children:cm.map(({step:y,url:k,showCheckbox:v})=>t(un,{step:y,noOfEssays:d,refreshApplication:c,url:k,stepCompleted:p(y),isClassDeleted:g,canEdit:n,essayQuestionAnswered:h,noumId:e||"",identityStepCompleted:x,showCheckbox:v,onCheckBoxClicked:f,applicationId:w,checked:y===_e.PRINCIPLES_YOU?b.principlesYou:b.essays,"data-test":`RiseApplicationSteps-RiseApplicationStep-${y}`},y))}),S&&o&&m(id,{vertical:!0,gap:-1,align:"stretch",fullWidth:!0,"data-test":"RiseApplicationSteps-RiseStepWrapperTablet",children:[t(fo,{"data-test":"RiseApplicationSteps-TabletWrapper",children:um.map(({step:y,url:k,showCheckbox:v})=>t(un,{step:y,noOfEssays:d,refreshApplication:c,url:k,stepCompleted:p(y),isClassDeleted:g,canEdit:n,essayQuestionAnswered:h,noumId:e||"",identityStepCompleted:x,showCheckbox:v,onCheckBoxClicked:f,applicationId:w,checked:y===_e.PRINCIPLES_YOU?b.principlesYou:b.essays,"data-test":`RiseApplicationSteps-RiseApplicationStep-${y}`},y))}),t(fo,{"data-test":"RiseApplicationSteps-TabletWrapper",children:mm.map(({step:y,url:k,showCheckbox:v})=>t(un,{step:y,noOfEssays:d,refreshApplication:c,url:k,stepCompleted:p(y),isClassDeleted:g,canEdit:n,essayQuestionAnswered:h,noumId:e||"",identityStepCompleted:x,showCheckbox:v,onCheckBoxClicked:f,applicationId:w,checked:y===_e.PRINCIPLES_YOU?b.principlesYou:b.essays,"data-test":`RiseApplicationSteps-RiseApplicationStep-${y}`},y))})]}),(a||n&&l!==ao.Inprogress)&&!i&&t(rd,{status:l,isOwner:n,"data-test":"RiseApplicationSteps-RiseApplicationStatus"})]})}),hm=r.forwardRef(({disabled:e,name:a,title:n,icon:o,imageURL:i,lastUpdated:s,location:l,bio:d,ownerName:c,ownerImageURL:h,ownerTitle:p,ownerBio:g,isMasterNoum:b,spaceId:f,isUpdateMode:x,category:w,noumValidity:S,isPublished:y,coverURL:k,isCustomPreview:v})=>{var sa,da,ca,ua,ma;const[T,F]=r.useState(!1),{t:P}=G(),{user:_,masterId:M,refetchUserData:W}=ye(),O="",{data:U}=hl({variables:{memberId:O},skip:!O}),{space:Q,noumType:V,connectionStatus:$,onHandleConnection:q,mainSpaceId:z,userActionMode:I,onRefetchSpaceById:B}=ge(),{space:N,refetchSpaceById:D}=Ot(),ie=r.useCallback(()=>{N?D==null||D():B()},[N,D,B]),{data:te}=fl(),[H]=ei(),se=N||Q,Y=(_==null?void 0:_._id)===((sa=se==null?void 0:se.uid)==null?void 0:sa._id),{cqData:Me}=Un((se==null?void 0:se._id)||"",!Y),[oe,ke]=qt(!1),{flags:Pe}=le(),{isUnregistered:ze}=ye(),{isTablet:xe,isMobile:ne}=ot(),[Te,Se]=r.useState(!1),[pe,Z]=r.useState(),ee=b?g:d,J=b?p:n,ce=Y?P("noumena.you"):c,re=b?h:i,{updateProjectChamberHelper:Ee,loading:Le}=ud(),{homeNoumAboutMeProfilePicHelper:He}=Ai(),he=V===We.RiseApplication||((da=se==null?void 0:se.category)==null?void 0:da.name)==="Rise"?Ii:i,[be,ct]=r.useState(()=>re&&re!==nn?re:nn),[rt,Jt]=r.useState(()=>k&&k!==nn?k:void 0),zt=!1;r.useEffect(()=>{var It,Nt,fe;const Be=(fe=(Nt=(It=te==null?void 0:te.capitalquotient)==null?void 0:It.getCQDetails)==null?void 0:Nt.forms)==null?void 0:fe.find(Fe=>(Fe==null?void 0:Fe.formId)==="1");Be&&(Se(!!Be.status),Z(Be))},[te]);const ka={spaceId:f,name:a,description:ee,profileImage:i,categoryId:(w==null?void 0:w._id)||void 0},ra=()=>{F(Be=>!Be)};r.useEffect(()=>{ct(re)},[h,i,k,re]);const Ea=r.useCallback(async Be=>{var It,Nt;if(ct(Be),f&&Be)if(b){const{profilePicSuccess:fe}=await He(Be);if(fe&&Te&&pe&&M){const Ht=[...(Array.isArray(pe==null?void 0:pe.details)?pe==null?void 0:pe.details:pe==null?void 0:pe.details.submitted)||[]],Dt=Ht.findIndex(Rr=>Rr.qid==="4");Dt!==-1&&(Ht[Dt]={...Ht[Dt],value:Be}),H({variables:{input:{noumId:M,status:(Nt=(It=te==null?void 0:te.capitalquotient)==null?void 0:It.getCQDetails)==null?void 0:Nt.status,form:{formId:pe==null?void 0:pe.formId,description:"identity",status:pe==null?void 0:pe.status,details:Ht}}}})}}else await Ee(f,{profileImage:Be},!0);ie(),W()},[(ua=(ca=te==null?void 0:te.capitalquotient)==null?void 0:ca.getCQDetails)==null?void 0:ua.status,ie,He,pe,Te,b,M,W,f,H,Ee]),_a=Me.visibility===pt.PRIVATE&&!Y&&b,la=r.useCallback(async Be=>{Jt(Be),f&&await Ee(f,{headerBackgroundUrl:Be},!0),ie()},[ie,f,Ee]);return m(j,{children:[m(Tu,{"data-test":"ProfileSummaryNew-NoumEditorStyledCard",children:[t(ko,{height:x||rt?273:void 0,url:rt,onContentChange:Be=>la(Be),maximumFileSize:5,onlyEditable:x,borderRadius:xe?0:void 0,onClear:()=>la(""),loading:Le,"data-test":"ProfileSummaryNew-ProfileBannerEditable"}),m(ku,{"data-testid":"theadSection",isCoverPhoto:!!rt||x,"data-test":"ProfileSummaryNew-NoumEditorHead",children:[t(_u,{"aria-label":"profile_picture",isCoverPhoto:!!rt||x,"data-test":"ProfileSummaryNew-ProfilePictureHeader",children:t(ko,{url:b?be:he,onContentChange:Ea,maximumFileSize:5,onlyEditable:x,size:ne?"XVL":"XXL",borderRadius:16,isBanner:!1,"data-test":"ProfileSummaryNew-ProfileBannerEditable"})}),m(Ji,{"data-test":"ProfileSummaryNew-ProfileSummaryDataContainer",children:[m(R,{gap:8,wrap:"wrap",justify:_a?"flex-end":"space-between","data-testid":"ttagsSection",padding:xe?"0 16px 0 0":"0",align:"center","data-test":"ProfileSummaryNew-Stack",children:[t(R,{"aria-label":"noum_tag_details",gap:8,"data-test":"ProfileSummaryNew-Stack",children:t(dm,{disabled:e,icon:o,isMasterNoum:b,memberData:U,noumValidity:S,ownerTitle:p,title:n,toggleRenewModal:ra,"data-test":"ProfileSummaryNew-NoumTagsDetail"})}),!x&&y&&!ze&&t(Mu,{"aria-label":"favourite_icon","data-test":"ProfileSummaryNew-FavWrapper",children:t(Fn,{"data-test":"ProfileSummaryNew-Favourite"})})]}),m(R,{justify:"space-between",align:"center",padding:xe?"0 16px 0 0":"0","data-test":"ProfileSummaryNew-Stack",children:[m(R,{vertical:!0,"data-test":"ProfileSummaryNew-Stack",children:[t(Zi,{"aria-label":"noum_profile_name",disabled:e,"data-testid":"tprofileSummaryName","data-test":"ProfileSummaryNew-ProfileSummaryName",children:t(E,{font:ne?"heading-xs-bold":"heading-m-bold",colorToken:"--text-card-header-neutral-hightlighted","data-test":"ProfileSummaryNew-TSpan",children:b?c:a})}),!ne&&t(j,{children:t(Eo,{isMasterNoum:b,lastUpdated:s,ownedBy:ce,disabled:e,chamberTitle:J,location:l,"data-test":"ProfileSummaryNew-NoumBio"})})]}),!ne&&!v&&t(Xi,{"data-test":"ProfileSummaryNew-NoumEditorViewModeActions"})]})]}),x&&t(Eu,{"aria-label":"noum_edit_information","data-test":"ProfileSummaryNew-NoumEditorEdit",children:t(X,{leftIcon:t(L,{name:"edit_m",size:24,color:"--icon-button-neutral-default","data-test":"ProfileSummaryNew-Icon"}),size:"large",tertiary:!0,onClick:ke,disabled:((ma=N==null?void 0:N.category)==null?void 0:ma.name.toLowerCase())==="rise_application","data-test":"ProfileSummaryNew-Button",children:P("noumena.chamber.edit_information__button")})})]}),zt,ne&&m(j,{children:[t(K,{height:16,"data-test":"ProfileSummaryNew-Spacer"}),t(R,{padding:"0 16px","data-test":"ProfileSummaryNew-Stack",children:t(Eo,{isMasterNoum:b,lastUpdated:s,ownedBy:ce,disabled:e,chamberTitle:J,location:l,"data-test":"ProfileSummaryNew-NoumBio"})})]}),t(K,{height:16,"data-test":"ProfileSummaryNew-Spacer"}),m(R,{vertical:!0,reverse:ne,"data-test":"ProfileSummaryNew-Stack",children:[!Y&&I===Wa.handleInvitation&&t(ld,{connectionStatus:$,onHandle:q,isNoumEditor:!0,"data-test":"ProfileSummaryNew-NoumInvitedConnection"}),!Y&&!b&&f!==z&&I===Wa.handleWaitInvitation&&t(sd,{"data-test":"ProfileSummaryNew-NoumWaitInvitation"}),t(lm,{isUpdateMode:x,summaryDescription:ee,"data-test":"ProfileSummaryNew-NoumDescription"})]}),We.RiseApplication===V&&t(pm,{"data-test":"ProfileSummaryNew-RiseApplicationSteps"})]}),t(j,{children:b?t(Ki,{isOpen:oe,handleClose:ke,handleSuccess:ke,spaceId:f,isUpdateMode:!0,"data-test":"ProfileSummaryNew-PersonalDetailsModal"}):oe?t(Ni,{isOpen:oe,handleClose:ke,handleSuccess:ke,isUpdateMode:!0,summaryData:ka,"data-test":"ProfileSummaryNew-ProjectCreate"}):null}),T&&Pe.paymentSubscriptions&&Y&&t(Fi,{onClose:ra,open:T,chamber_id:S==null?void 0:S.chember,noumExpiryDate:S==null?void 0:S.validityDate,noum_transaction_fee_id:S==null?void 0:S.noumTransactionFeeId,"data-test":"ProfileSummaryNew-RenewNoumModal"})]})}),jC=({isCustomPreview:e,...a})=>{const{flags:{noumEditor2:n,noumCustomPreivewV2:o}}=le();return n&&(!e||e&&o)?t(dd,{"data-test":"ProfileSummary-NoumByLinkProvider",children:t(Wu,{"data-test":"ProfileSummary-RiseApplicationProvider",children:t(hm,{isCustomPreview:e,...a,"data-test":"ProfileSummary-ProfileSummaryNew"})})}):t(Qu,{...a,"data-test":"ProfileSummary-ProfileSummaryOld"})},qC=u(ve)`
  overflow: visible;
  width: 100%;
  transition: all 0.1s ease-in-out;
  padding: ${({isEdit:e,isEmptySection:a,isBackground:n})=>e?a&&!n?"0":"16px":n?"16px":"0px"};
  ${({isBackground:e})=>!e&&"background: none"};
  height: ${({height:e})=>e?`${e}px`:"unset"};
  @media (max-width: ${$t.MOBILE_L_MAX}) {
    padding: 16px 0;
  }
`,fm=e=>{switch(e){case ht.TwoColumnsRightWider:return"64.5% max(34.5%)";case ht.TwoColumnsLeftWider:return"max(34.5%) 64.5%";case ht.TwoEqualColumns:return"minmax(0, 1fr) minmax(0, 1fr)";case ht.ThreeEqualColumns:return"minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr)";case ht.SingleColumn_700Px:return"700px";default:return"minmax(auto, 100%)"}},XC=u.div`
  box-sizing: border-box;
  display: grid;
  transition: all 0.1s ease-in-out;
  width: 100%;
  align-items: ${({sectionAlign:e})=>e===no.Top?"flex-start":e===no.Bottom?"flex-end":"center"};
  justify-content: center;
  grid-gap: 16px;
  grid-template-columns: ${({noumSectionType:e,isSmallerThanLaptop:a})=>a?"1fr":fm(e)};
  grid-template-rows: auto;
  grid-template-areas: 'body';

  @media (max-width: ${$t.MOBILE_L_MAX}) {
    display: block;
  }
`,tr=u(ve)`
  width: ${({width:e})=>e&&`${e}%`};
  height: 52px;
  padding: 0px;
  border-radius: 4px;
  background: var(--bg-section-picker-brand-secondary-default);
  border: 1px solid var(--border-section-picker-brand-secondary-default);
  &.inActive {
    background: var(--bg-section-picker-neutral-disabled);
    border: none;
  }
  cursor: inherit;
`,gm=u(ve)`
  width: 112px;
  height: 64px;
  border: 1px solid var(--border-card-neutral-default);
  border-radius: 8px;
  padding: 6px;
  gap: 3px;
  display: flex;
  flex-direction: row;
  &:hover {
    background: var(--bg-section-picker-brand-secondary-default);
    cursor: pointer;
    border: 1px solid var(--color-base-primary-60);
    & > ${tr} {
      background: var(--bg-section-picker-brand-primary-default);
      &.inActive {
        background: var(--bg-section-picker-brand-secondary-disabled);
      }
    }
  }
`,bm=({layoutSectionType:e,columnsArray:a,handleSelectSectionType:n})=>{const o=a==null?void 0:a.reduce((i,s)=>Math.abs(i)+Math.abs(s),0);return t(gm,{"aria-label":`${e}`,onClick:()=>n(e),"data-test":"SectionLayoutItem-Container",children:a.map(i=>t(tr,{width:Math.abs(i)/o*100,className:i<0?"inActive":"","data-test":"SectionLayoutItem-Column"},ws()))})},xm=[{layoutSectionType:ht.SingleColumn,column:[1]},{layoutSectionType:ht.SingleColumn_700Px,column:[-1,3,-1]},{layoutSectionType:ht.ThreeEqualColumns,column:[1,1,1]},{layoutSectionType:ht.TwoEqualColumns,column:[2,2]},{layoutSectionType:ht.TwoColumnsRightWider,column:[2,1]},{layoutSectionType:ht.TwoColumnsLeftWider,column:[1,2]}];C("noumena.noum_editor.popup.pick_section_layout.tab.empty_sections"),C("noumena.noum_editor.popup.pick_section_layout.tab.section_templates");const Cm=({handleSelectSectionType:e})=>t(j,{children:xm.map(a=>t(bm,{layoutSectionType:a.layoutSectionType,handleSelectSectionType:e,columnsArray:a.column,"data-test":"EmptySections-SectionLayoutItem"},`section-layout-item-${a.layoutSectionType}`))}),ym=()=>t(j,{children:"Section Templates"}),wm=u.div`
  width: 100%;
  gap: 12px;
`,Sm=u(R)`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  padding-top: 17px;
`,vm=({position:e,setIsPopover:a,setIsLoading:n})=>{const{id:o}=Ot(),[i,s]=r.useState("0"),{addSectionsHelper:l}=Jc(),d=r.useCallback(async p=>{n==null||n(!0),await l({noumId:o,position:e,type:p},o),a(!1),n==null||n(!1)},[l,o,e,n,a]);r.useCallback(p=>{p&&p!==i&&s(p)},[i]);const c=()=>i==="0"?t(j,{children:t(Cm,{handleSelectSectionType:d,"data-test":"SectionLayoutPicker-tabComponent-EmptySections"})}):t(ym,{"data-test":"SectionLayoutPicker-tabComponent-SectionTemplates"}),h=!1;return m(wm,{"data-test":"SectionLayoutPicker-SectionLayoutPickerWrapper",children:[t(R,{fullWidth:!0,justify:"center",fixedHeight:29,"data-test":"SectionLayoutPicker-Stack",children:t(E,{font:"body-xl-bold","data-test":"SectionLayoutPicker-TSpan",children:C("noumena.noum_editor.popup.pick_section_layout.title")})}),h,t(Sm,{fullWidth:!0,"data-test":"SectionLayoutPicker-TabContent",children:c()})]})},km=u.div`
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px dashed var(--color-base-gray-80);
  border-radius: 16px;
  padding: 68px 0;
  cursor: pointer;
  :hover {
    border-color: var(--border-add-section-neutral-hover);
    background-color: var(--bg-add-section-neutral-hover);
    path {
      fill: var(--icon-add-content-brand-primary-default);
    }
    & .section-header {
      color: var(--text-add-section-header-neutral-hover);
    }
  }
`,GC=e=>{const{title:a,description:n}=e,[o,i]=r.useState(!1);return t(Nm,{isOpen:o,onClose:()=>i(!1),offsetY:71,renderPopoverContent:()=>t(vm,{position:1,setIsPopover:i,"data-test":"EmptyNoumState-SectionLayoutPicker"}),renderTargetContent:()=>t(km,{onClick:()=>i(!0),"data-test":"EmptyNoumState-EmptyNoumContainer",children:m(R,{gap:9,vertical:!0,align:"center",onClick:()=>i(s=>!s),"data-test":"EmptyNoumState-Stack",children:[t(L,{name:"plus_icon",size:16,"data-test":"EmptyNoumState-Icon"}),t(E,{font:"body-l-bold",className:"section-header","data-test":"EmptyNoumState-TSpan",children:a}),t(E,{font:"systemInfo-s",colorToken:"--text-add-section-neutral-default","data-test":"EmptyNoumState-TSpan",children:n})]})}),"data-test":"EmptyNoumState-PopoverWrapper"})},YC={[A.Image]:C("noumena.chambers.toolbox.element.image"),[A.Video]:C("noumena.chambers.toolbox.element.video"),[A.Text]:C("noumena.chambers.toolbox.element.text"),[A.QuickQuestions]:C("noumena.chambers.toolbox.element.quick_questions"),[A.Message]:C("noumena.chambers.toolbox.element.message"),[A.ProjectWorkExperience]:C("noumena.homeChambers.addExperience.currentTitle"),[A.EducationTraining]:C("noumena.homeChambers.addEducation.currentTitle"),[A.AchievementAward]:C("noumena.homeChambers.addAchievement.currentTitle"),[A.PublicationDesignPatterns]:C("noumena.homeChambers.publicationAndDesign.currentTitle"),[A.PersonalInterest]:C("noumena.homeChambers.personalInterest.currentTitle"),[A.SocialInterest]:C("noumena.homeChambers.socialInterest.currentTitle"),[A.Calendar]:C("noumena.homeChambers.calendar.currentTitle"),[A.BusinessBrief]:C("noumena.chambers.toolbox.element.businessBrief"),[A.Connection]:"",[A.ContractManager]:C("noumena.chambers.toolbox.element.contracts"),[A.FilesManager]:C("noumena.chambers.toolbox.element.file"),[A.Skills]:C("noumena.homenoum.skills.title"),[A.Usernetwork]:C("noumena.chambers.toolbox.element.usernetwork"),[A.Userposts]:C("noumena.chambers.toolbox.element.posts"),[A.Wallet]:C("noumena.noum_editor.tool.title.wallet"),[A.Home]:"",[A.Instagram]:"",[A.Invitation]:"",[A.Profile]:"",[A.Events]:""},JC={[A.AchievementAward]:C("noumena.noum_editor.tool.project_work_experience.description"),[A.BusinessBrief]:C("noumena.noum_editor.tool.business_brief.description"),[A.Calendar]:C("noumena.noum_editor.tool.event.description"),[A.Connection]:"",[A.ContractManager]:"",[A.EducationTraining]:C("noumena.noum_editor.tool.project_work_experience.description"),[A.FilesManager]:C("noumena.noum_editor.tool.file_Manager.description"),[A.Home]:"",[A.Image]:C("noumena.drag_drop_image_file_type_size.text"),[A.Instagram]:"",[A.Invitation]:"",[A.Message]:C("noumena.noum_editor.tool.message.description"),[A.PersonalInterest]:C("noumena.noum_editor.tool.project_work_experience.description"),[A.Profile]:"",[A.ProjectWorkExperience]:C("noumena.noum_editor.tool.project_work_experience.description"),[A.PublicationDesignPatterns]:C("noumena.noum_editor.tool.project_work_experience.description"),[A.QuickQuestions]:C("noumena.noum_editor.tool.quick_questions.description"),[A.Skills]:"",[A.SocialInterest]:C("noumena.noum_editor.tool.social_interests.description"),[A.Text]:C("noumena.noum_editor.tool.text.description"),[A.Usernetwork]:"",[A.Userposts]:C("noumena.noum_editor.tool.post.description"),[A.Video]:C("noumena.drag_drop_video_file_type_size.text"),[A.Wallet]:"",[A.Events]:C("noumena.noum_editor.tool.event.description")},ZC={[A.Userposts]:C("noumena.noum_editor.tool.posts.delete_modal_description"),[A.Calendar]:C("noumena.noum_editor.tool.calendar.delete_modal_description"),[A.FilesManager]:C("noumena.noum_editor.tool.file_manager.delete_modal_description")};var ar=(e=>(e.Above="Above",e.Below="Below",e))(ar||{}),Ut=(e=>(e.bothTop="bothTop",e.bothBottom="bothBottom",e.topLeft="topLeft",e.topRight="topRight",e))(Ut||{});const KC={SKILLS:C("noumena.noum_editor.no_delete_skills_tool"),USERNETWORK:C("noumena.noum_editor.no_delete_network_tool")},jn=de`
  position: absolute;
  top: -28px;
  display: none;
`,ey=u.div`
  box-sizing: border-box;
  border: ${({isSectionBackground:e,isColumnBackground:a})=>a&&e?"1px solid var(--bg-card-neutral-alt-default)":"1px solid var(--border-card-neutral-default)"};
  border-radius: 16px;
  width: ${({isDragging:e})=>e?"303px":"100%"};
`,ty=u.div`
  background: ${({isTool:e})=>e?"var(--bg-tool-toolbox-brand-primary-default)":"var(--bg-section-toolbox-default)"};
  border-radius: 6px 6px 0px 0px;
  padding: 5px 8px;
  left: ${({isTool:e})=>e?"16px":"24px"};
  ${jn}
  ${({isTool:e})=>e&&de`
      max-width: 25%;
      @media (min-width: ${En.LAPTOP_M_MIN}) {
        max-width: 30%;
      }
      @media (min-width: ${En.LAPTOP_L_MIN}) {
        max-width: 35%;
      }
    `}
`,ay=u(E)`
  text-overflow: ellipsis;
  display: block;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
`,ny=u.div`
  left: calc(50% - 15px);
  ${({isBottom:e})=>e&&"top: unset !important; bottom: -28px "};
  z-index: 1;
  ${jn}
`,oy=u(R)`
  right: ${({isTool:e})=>e?"16px":"24px"};
  ${jn}
`,iy=u.div`
  position: relative;
  width: ${({isDragging:e})=>e?"303px":"100%"};
  ${({isActive:e})=>e?de`
          & .parent {
            display: flex;
          }
          .parent-wrapper {
            border: 1px solid var(--bg-section-toolbox-default);
          }
        `:de`
          &:hover:not(:has(.element-container:hover, .child:hover)) .parent {
            display: flex;
          }
          &:hover:not(:has(.element-container:hover, .child:hover))
            .parent-wrapper,
          .parent-wrapper:hover:not(:has(.child-wrapper, .child-wrapper:hover)) {
            border: 1px dashed var(--bg-section-toolbox-default);
          }
        `}

  ${({isChild:e,isActive:a,isDragging:n,isElementDragging:o,isHoverNotActive:i,isMoveTool:s})=>e&&(a||n)?de`
          &:has(.element-container, .child) .child,
          .child {
            display: ${i?"none":"flex"};
          }
          .child-wrapper {
            border: 1px ${n?"dashed":"solid"}
              var(--bg-tool-toolbox-brand-primary-default);
            height: ${s?"75px":""};
          }
        `:e&&!o&&de`
          &:hover:has(.element-container:hover, .child) .child,
          .child:hover {
            display: flex;
          }
          &:hover .child-wrapper,
          .child-wrapper:hover {
            border: 1px dashed var(--bg-tool-toolbox-brand-primary-default);
          }
        `}
`,ry=u.div`
  border-right: ${({isEdge:e})=>e==="right"?"":"1px solid var(--color-base-background-transparent)"};
  padding: 0 6px;
  opacity: ${e=>e.disabled?"0.2":"1"};
`,ly=u.div`
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  height: 19px;
  background-color: ${({bgColor:e})=>e??"var(--bg-button-neutral-default)"};
  border-radius: ${({isEdge:e})=>e===Ut.topLeft?"8px 0px 0px 0px":e===Ut.topRight?"0px 8px 0px 0px":e===Ut.bothBottom?"0px 0px 8px 8px":e===Ut.bothTop?"8px 8px 0px 0px":""};
  cursor: ${({cursorAllowed:e})=>e?"pointer":"not-allowed"};
  padding: 5px 0px;
  svg {
    ${({cursorAllowed:e})=>!e&&`
      opacity: 0.3;
    `}
  }

  &[data-title]:hover::after {
    content: attr(data-title);
    position: absolute;
    background-color: var(--bg-tooltip-neutral-default);
    color: var(--text-tooltip-neutral-alt-default);
    padding: 6px 8px;
    border-radius: 4px;
    white-space: nowrap;
    top: -28px;
    ${({isSectionBackground:e,cursorAllowed:a,isEdge:n})=>!e&&!a&&n!==Ut.topRight?"right:-55px":!a&&n===Ut.topRight&&"right:-25px"};
    z-index: 999999999;
    ${Rn.systemInfoSmall};
  }
  :hover {
    background-color: ${({hoverColor:e})=>e??"var(--bg-button-neutral-alt-hover)"};
  }
`,sy=u.ul`
  margin: 0;
  padding: 0;
  text-align: 'start';
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`,dy=u.div`
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  width: 100%;
  color: var(--text-modal-neutral-default);
  ${gl.bodyTypography.bodyLarge}
`,cy=u.div`
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`,Em=u.div`
  width: 100%;
`,_m=u.div``,ga=u.div`
  &,
  &::before {
    position: absolute;
    width: 32px;
    height: 32px;
    z-index: -1;
  }

  &::before {
    content: '';
    transform: rotate(45deg);
    background: var(--bg-card-neutral-alt-default);
  }
`,Mm=u.div`
  position: relative;
  width: ${({width:e})=>e&&`${e}px`};
  min-height: 231px;
  border-radius: 16px;

  gap: 16px;
  filter: drop-shadow(0px 4px 32px rgba(32, 17, 62, 0.08));
  background: var(--bg-card-neutral-alt-default);
  background-size: cover;
  z-index: 10;

  &[data-popper-placement^='top'] > ${ga} {
    bottom: -16px;
  }

  &[data-popper-placement^='bottom'] > ${ga} {
    top: -16px;
  }

  &[data-popper-placement^='left'] > ${ga} {
    right: -16px;
  }

  &[data-popper-placement^='right'] > ${ga} {
    left: -16px;
  }
`;u(R)``;u(R)``;const Tm=u.div`
  position: absolute;
  right: 16px;
  z-index: 5;
`,Im=e=>t(Tm,{"data-test":"CloseButton-CloseButtonWrapper",children:t(X,{...e,testId:"popover_close_btn",size:"small",textOnly:!0,icon:t(L,{name:"close_m",size:24,color:"--icon-card-neutral-default","data-test":"CloseButton-Icon"}),onClick:e.onClose,"data-test":"CloseButton-Button"})}),Nm=({isOpen:e,width:a=384,renderTargetContent:n,renderPopoverContent:o,placement:i="top",onClose:s,offsetX:l=0,offsetY:d=150})=>{const c=r.useRef(null);ii(c,!0,s,{excludes:["#create_wallet_button","#confirm_create_wallet_button"]});const[h,p]=r.useState(null),[g,b]=r.useState(null),[f,x]=r.useState(null),{styles:w,attributes:S}=Ss(h,g,{strategy:"fixed",placement:i,modifiers:[{name:"offset",options:{offset:[l,d]}},{name:"arrow",options:{element:f,padding:120}}]});return m(Em,{ref:c,onClick:y=>y.stopPropagation(),"data-test":"PopoverWrapper-StyledPopoverWrapper",children:[t(_m,{ref:p,"data-testid":"popover-reference-container","data-test":"PopoverWrapper-ReferenceContainer",children:n()}),e&&m(Mm,{width:a,placement:i,ref:b,style:w.popper,...S.popper,"data-test":"PopoverWrapper-PopoverContainer",children:[m(R,{padding:16,"data-test":"PopoverWrapper-Stack",children:[t(Im,{onClose:s,"data-test":"PopoverWrapper-CloseButton"}),o()]}),t(ga,{ref:x,style:w.arrow,"data-test":"PopoverWrapper-Arrow"})]})]})},uy=u.div`
  height: 24px;
  border-radius: 8px;
  display: flex;
  position: relative;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  border: 1px dashed var(--border-add-section-neutral-default);
  background: var(--bg-add-section-neutral-default);
  width: 100%;

  &[data-title]:hover::after {
    content: attr(data-title);
    position: absolute;
    background-color: var(--bg-tooltip-neutral-default);
    color: var(--text-tooltip-neutral-alt-default);
    padding: 6px 8px;
    border-radius: 4px;
    white-space: nowrap;
    top: -20px;
    z-index: 999999999;
    ${Rn.systemInfoSmall};
  }

  :hover {
    border-color: var(--border-add-section-neutral-hover);
    background-color: var(--bg-add-section-neutral-hover);
    path {
      fill: var(--icon-add-content-brand-primary-default);
    }
  }
`,my=u.div`
  margin: 0 auto;
`,py=[{name:"test1",image:"terms_m",text:C("noumena.chambers.toolbox.element.all"),id:"xss1",labelSize:"medium",group:"all"},{name:"test1",image:"terms_m",text:C("noumena.chambers.toolbox.element.layout"),id:"xsds1",labelSize:"medium",group:"layout"},{name:"test1",image:"terms_m",text:C("noumena.chambers.toolbox.element.socialTools"),id:"xs1",labelSize:"medium",group:"socialmedia"},{name:"test1",image:"terms_m",text:C("noumena.chambers.toolbox.group.money"),id:"xsss1",labelSize:"medium",group:"finance"}],hy=[{size:24,name:"text_m",type:A.Text,text:C("noumena.chambers.toolbox.element.text"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.text_tool_tip")},{size:24,name:"picture_m",type:A.Image,text:C("noumena.chambers.toolbox.element.image"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.image_tool_tip")},{size:24,name:"play_m",type:A.Video,text:C("noumena.chambers.toolbox.element.video"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.video_tool_tip")},{size:24,name:"wallet_m",type:A.Wallet,text:C("noumena.chambers.toolbox.element.CreateNoumWallet"),group:["all","finance"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.CreateNoumWallet_tool_tip")},{size:24,name:"message_m",type:A.Message,text:C("noumena.chambers.toolbox.element.message"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","HOME","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.message_tool_tip")},{size:24,name:"quick_questions_m",type:A.QuickQuestions,text:C("noumena.chambers.toolbox.element.quick_questions"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.quick_questions_tool_tip")},{size:24,name:"lecterm_m",type:A.BusinessBrief,text:C("noumena.chambers.toolbox.element.businessBrief"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"briefcase_s",type:A.ProjectWorkExperience,text:C("noumena.chambers.toolbox.element.projectWorkExperience"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"education_s",type:A.EducationTraining,text:C("noumena.chambers.toolbox.element.educationTraining"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"avard_s",type:A.AchievementAward,text:C("noumena.chambers.toolbox.element.achievementAward"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"blub_s",type:A.PublicationDesignPatterns,text:C("noumena.chambers.toolbox.element.publicationDesignPatterns"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"interest_s",type:A.PersonalInterest,text:C("noumena.chambers.toolbox.element.personalInterest"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"heart_s",type:A.SocialInterest,text:C("noumena.chambers.toolbox.element.socialInterest"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"calendar_m",type:A.Calendar,text:C("noumena.chambers.toolbox.element.calendar"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.calendar_tool_tip")},{size:24,name:"posts_m",type:A.Userposts,text:C("noumena.chambers.toolbox.element.posts"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.posts_tool_tip")},{size:24,name:"network_m",type:A.Usernetwork,text:C("noumena.chambers.toolbox.element.usernetwork"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"file_m",type:A.FilesManager,text:C("noumena.chambers.toolbox.element.file"),group:["all","layout"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"]},{size:24,name:"contract_m",type:A.ContractManager,text:C("noumena.chambers.toolbox.element.contracts"),group:["all","layout"],disabled:!1,allowedNoumTypes:["PROJECT"]}],fy=[{size:24,name:"text_m",type:A.Text,text:C("noumena.chambers.toolbox_v2.element.text"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.text_tool_tip")},{size:24,name:"picture_m",type:A.Image,text:C("noumena.chambers.toolbox_v2.element.image"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.image_tool_tip")},{size:24,name:"file_m",type:A.FilesManager,text:C("noumena.chambers.toolbox.element.document"),toolTipText:C("noumena.chambers.toolbox.element.document_tool_tip"),group:["all","layout"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"]},{size:24,name:"play_m",type:A.Video,text:C("noumena.chambers.toolbox_v2.element.video"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.video_tool_tip")},{size:24,name:"wallet_m",type:A.Wallet,text:C("noumena.chambers.toolbox_v2.element.wallet"),group:["all","finance"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.CreateNoumWallet_tool_tip")},{size:24,name:"message_m",type:A.Message,text:C("noumena.chambers.toolbox.element.message"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","HOME","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.message_tool_tip")},{size:24,name:"quick_questions_m",type:A.QuickQuestions,text:C("noumena.chambers.toolbox_v2.element.questions"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.quick_questions_tool_tip")},{size:24,name:"lecterm_m",type:A.BusinessBrief,text:C("noumena.chambers.toolbox.element.businessBrief"),toolTipText:C("noumena.chambers.toolbox.element.businessBrief"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"briefcase_s",type:A.ProjectWorkExperience,text:C("noumena.chambers.toolbox.element.projectWorkExperience"),toolTipText:C("noumena.chambers.toolbox.element.projectWorkExperience"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"education_s",type:A.EducationTraining,text:C("noumena.chambers.toolbox.element.educationTraining"),group:["all","layout"],disabled:!1,toolTipText:C("noumena.chambers.toolbox.element.educationTraining"),allowedNoumTypes:["HOME"]},{size:24,name:"avard_s",type:A.AchievementAward,text:C("noumena.chambers.toolbox.element.achievementAward"),toolTipText:C("noumena.chambers.toolbox.element.achievementAward"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"blub_s",type:A.PublicationDesignPatterns,text:C("noumena.chambers.toolbox.element.publicationDesignPatterns"),toolTipText:C("noumena.chambers.toolbox.element.publicationDesignPatterns"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"interest_s",type:A.PersonalInterest,text:C("noumena.chambers.toolbox.element.personalInterest"),toolTipText:C("noumena.chambers.toolbox.element.personalInterest"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"heart_s",type:A.SocialInterest,text:C("noumena.chambers.toolbox.element.socialInterest"),toolTipText:C("noumena.chambers.toolbox.element.socialInterest"),group:["all","layout"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"calendar_m",type:A.Calendar,text:C("noumena.chambers.toolbox.element.calendar"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["HOME","PROJECT","RISE_APPLICATION"],toolTipText:C("noumena.chambers.toolbox.element.calendar_tool_tip")},{size:24,name:"posts_m",type:A.Userposts,text:C("noumena.chambers.toolbox.element.posts"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["PROJECT","RISE_APPLICATION","HOME"],toolTipText:C("noumena.chambers.toolbox.element.posts_tool_tip")},{size:24,name:"network_m",type:A.Usernetwork,text:C("noumena.chambers.toolbox.element.usernetwork"),group:["all","socialmedia"],disabled:!1,allowedNoumTypes:["HOME"]},{size:24,name:"contract_m",type:A.ContractManager,text:C("noumena.chambers.toolbox.element.contracts"),toolTipText:C("noumena.chambers.toolbox.element.contracts"),group:["all","layout"],disabled:!1,allowedNoumTypes:["PROJECT"]}],gy=r.memo(e=>{const{t:a}=G(),[n,o]=r.useState(!1),i=r.useCallback(async()=>{e.handleClose()},[e]),s=r.useCallback(async()=>{e.handleSelectElementType&&(e==null||e.handleSelectElementType(A.Wallet),e.handleClose())},[e]),l=r.useCallback(async()=>{o(!0)},[]);return m(Ne,{size:Ve.S,testId:"testCloseWallet",open:e.isOpen,onClose:e.handleClose,disableBackdropClick:!0,children:[t(Qe,{children:a(n?"noumena.container.created_subWallet.title":"noumena.container.create_subWallet.title")}),t(Ue,{hideScrollbar:!0,children:t(E,{colorToken:"--text-modal-neutral-default",font:"body-l",style:{width:"279px"},textAlign:"center","data-test":"NoumWalletCreateModal-TSpan",children:a(n?"noumena.container.created_subWallet.text":"noumena.container.create_subWallet.text")})}),t(xt,{flexDirection:"column",gap:16,children:n?t(X,{"data-testid":"confirmCloseWallet",primary:!0,size:"full",id:"confirm_create_wallet_button",onClick:()=>s(),"data-test":"NoumWalletCreateModal-Button",children:a("noumena.container.close_subwallet.close")}):m(j,{children:[t(X,{"data-testid":"continueButton",primary:!0,size:"full",id:"create_wallet_button",onClick:l,"data-test":"NoumWalletCreateModal-Button",children:a("noumena.container.close_subwallet.Continue")}),t(X,{"data-testid":"cancelButton",tertiary:!0,size:"full",onClick:()=>i(),"data-test":"NoumWalletCreateModal-Button",children:a("noumena.container.close_subwallet.Cancel")})]})})]})}),by=u.div``,xy=u(R)`
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.1);
  z-index: 999;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Cy=u.div``,yy=u.div`
  height: 277px;
  overflow: auto;
`,wy=u.div`
  display: flex;
  flex-direction: row;
  gap: 8px;
  flex-wrap: wrap;
`,Sy=u.div`
  display: flex;
  padding: 12px 6px;
  align-items: center;
  border-radius: 8px;
  cursor: pointer;
  position: relative;
  width: 109px;
  height: 90px;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--bg-separator-neutral-default);
  gap: 4px;
  box-sizing: border-box;
  ${({disabled:e})=>!e&&de`
      &:hover {
        border: 1px solid var(--bg-tool-toolbox-brand-primary-default);
        background: var(--bg-button-brand-secondary-default);
        path {
          fill: var(--bg-tool-toolbox-brand-primary-default) !important;
        }
        & > div > span {
          opacity: 0.95;
          color: var(--color-base-primary-50);
          transition: opacity 1s;
        }
      }
    `}
  &:hover span.toolbox-tooltip {
    opacity: 0.95;
    transition: opacity 1s;
  }
`,vy=u.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
`,Pm=u(E)`
  color: ${({isDisabled:e=!1})=>e?"var(--text-card-neutral-disabled)":"var(--text-card-neutral-highlighted)"};

  justify-content: start;
  align-items: center;
  .disabled {
    color: var(--text-card-neutral-disabled);
  }
  width: 100%;
  ${({overflow:e})=>e&&`text-overflow: ${e}`};
`,ky=u(Pm)`
  font-weight: var(--font-body-small-bold-weight);
  font-size: var(--font-link-small-size);
  color: var(--text-card-brand-primary-default);
`,Ey=u(E)`
  width: max-content;
  max-width: 270px;
  padding: 6px 8px;
  z-index: 100;
  background: var(--bg-tooltip-neutral-default);
  opacity: 0;
  border-radius: 4px;
  text-align: center;
  position: absolute;
  color: var(--text-tooltip-neutral-alt-default);

  transition: opacity 0.5s;
  top: ${({top:e})=>e||"-30px"};
  ${({childIndex:e})=>e%4===0?"left:0 !important;":e%4===3?"right : 0px !important;":"left: 50%; transform: translate(-50%);"}
`,_y=u.div`
  text-align: justify;
  margin: 0px;
`,My=u.div`
  position: relative;
  width: 100%;
  @media (max-width: ${me.TABLET_L}) {
    width: 100%;
    margin: auto;
  }
`,Ty=u.div`
  position: relative;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  border-radius: 12px;
  background: ${({isBackground:e})=>e?"var(--bg-card-neutral-alt-default)":"none"};
`,Iy=u.div`
  padding: 8px 0;
  &:first-child {
    padding-top: 0px;
  }
`;u.div`
  display: flex;
  flex-direction: column;
  gap: 60px;
  padding: 60px 0px;
  align-items: center;
  background-color: var(--bg-body-neutral-alt-highlighted);
  width: 100%;
`;u.div`
  width: 783px;
  @media (max-width: ${me.MOBILE_L}) {
    width: min-content;
  }
`;u.span`
  display: inline-flex;
  justify-content: center;
  width: 100%;
  padding: 24px;
  text-align: center;
  color: var(--text-card-brand-primary-default);
  ${Va.bodyXLargeBold};
`;const Ny=u(ve)`
  width: 303px;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 24px 0;
`,Py=u.div`
  display: flex;
  transition: all 0.1s ease-in-out;
  flex-direction: ${({insertDirection:e})=>e===ar.Below?"column-reverse":"column"};
  gap: 16px;
`,Ay=u.div`
  border: 1px solid var(--border-section-picker-brand-secondary-default);
  background: var(--bg-section-picker-brand-secondary-default);
  border-radius: 8px;
  position: absolute;
  width: 100%;
  ${({placeholderProps:e})=>e&&`top: ${e.dragY}px;  height: ${e.dragHeight}px`}
`,Ly=u(ve)`
  position: relative;
  ${({isDragging:e})=>e&&" margin-top: 12px;"};
  ${({isBackground:e})=>e&&"background: none"};
  ${({isSkillOrNetwork:e})=>e?"padding: 16px;":"padding: 0"};
`,By=u.div`
  position: absolute;
  inset: 0;
  background: transparent;
  z-index: 9;
`,Fy=u(R)`
  position: relative;
  transition: all 0.1s ease-in-out;
  border-radius: 16px;
  padding: ${({isBackground:e})=>e?"12px 24px":"0"};
  background: ${({isBackground:e})=>e?"var(--bg-card-neutral-alt-default)":"none"};
`,Oy=u.div`
  position: relative;
  transition: all 0.1s ease-in-out;
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex-grow: 1;
  height: ${({height:e})=>e?`${e}px`:"auto"};
  min-height: 106px;
`,kt=()=>m(Je,{gap:8,justify:"flex-start",align:"center","data-test":"SkeletonLoaderElementHeader-StyledFlexRow",children:[t(tt,{"data-test":"SkeletonLoaderElementHeader-SkeletonLoaderPost"}),t(yt,{w:140,h:30,r:8,"data-test":"SkeletonLoaderElementHeader-StyledSkeleton"})]}),nr=()=>t(ve,{"data-test":"SkeletonLoaderImageElement-Card",children:m(Je,{justify:"space-between","data-test":"SkeletonLoaderImageElement-StyledFlexRow",children:[t(kt,{"data-test":"SkeletonLoaderImageElement-SkeletonLoaderElementHeader"}),t(Ou,{"data-test":"SkeletonLoaderImageElement-SkeletonLoaderImageInline"})]})}),or=["image/jpg","image/png","image/jpeg"],ir=["video/mp4","video/quicktime"],Am=or.map(e=>e).join(""),Lm=ir.map(e=>e).join(""),Bm=1,Fm=5,Om=100,rr=e=>e==="video"?{formats:Lm,extensions:ir,maxFileSize:Fm,defaultFootNote:"noumena.drag_drop_video_file_type_size.text"}:e==="image"?{formats:Am,extensions:or,maxFileSize:Bm,defaultFootNote:"noumena.drag_drop_image_file_type_size.text"}:{formats:"*",extensions:[],maxFileSize:Om,defaultFootNote:"noumena.drag_drop_default_file_type_size.text"};u.div``;u.div`
  padding-top: 16px;
  height: 413px;
  max-height: 413px;
  width: auto;
  background-size: cover;

  @media (max-width: ${me.MOBILE_L}) {
    max-height: 222px;
  }

  img {
    height: 413px;
    max-height: 413px;
    width: auto;
    @media (max-width: ${me.MOBILE_L}) {
      height: 222px;
      max-height: 222px;
    }
  }
`;const Wm=u.div`
  width: 100%;

  ${({isUploadComplete:e,noumEditor2:a})=>e?a?"padding: 0px;":"padding: 16px;":`padding: 16px;
        border: 1px solid var(--border-card-neutral-highlighted);
      `}

  background: ${({isBackground:e})=>e?"none":"var(--bg-card-neutral-alt-default)"};
  box-sizing: border-box;
  border-radius: 8px;
`,$m=u.div`
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  ${({isUploadComplete:e})=>e?`
          padding-left: 16px;
          padding-right: 16px;
        `:""}
`,Rm=u.div`
  width: 100%;
  border-radius: 4px;
`,Mo=u.div`
  width: 100%;
  display: flex;
  flex-direction: row;
`,zm=u.div`
  height: 94px;
  width: 100%;
  background: var(--bg-dragdrop-neutral-default);
  border: 2px dashed var(--border-dragdrop-neutral-default);
  box-sizing: border-box;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  ${({isDraggingOver:e})=>e?`
      background: var(--bg-dragdrop-brand-secondary-active);
      border: 2px dashed var(--border-dragdrop-brand-primary-active);
      box-sizing: border-box;
      border-radius: 8px;
      `:""}

  ${({error:e})=>e?`
      background: var(--bg-dragdrop-danger-secondary-default);
      border: 2px dashed var(--border-dragdrop-danger-primary-default);
      box-sizing: border-box;
      border-radius: 8px;
      `:""}
`,Hm=r.memo(e=>{const{t:a}=G(),n=rr("image");return m(zm,{...e,onClick:e.onClick,"data-testid":"image-edit-pre-upload-container","data-test":"EditPreUpload-EditPreUploadContainer",children:[t("div",{children:t(E,{font:"body-l-bold",$fill:!0,colorToken:"--text-dragdrop-header-neutral-default","data-test":"EditPreUpload-TSpan",children:t(xa,{i18nKey:"noumena.image_element.edit_pre_upload.text",components:{link1:t(E,{"data-testid":"multi_media_upload_btn",font:"body-l-bold",colorToken:"--text-dragdrop-brand-primary-default","data-test":"EditPreUpload-TSpan"})},"data-test":"EditPreUpload-Trans"})})}),t(K,{height:"7px","data-test":"EditPreUpload-Spacer"}),t("div",{children:e.error?t(E,{font:"footnote",$fill:!0,colorToken:"--text-dragdrop-danger-primary-default","data-test":"EditPreUpload-TSpan",children:`${a("noumena.image_element.edit_pre_upload.error_text")} ${a(n.defaultFootNote)}`}):t(E,{font:"footnote",$fill:!0,colorToken:"--text-dragdrop-neutral-default","data-test":"EditPreUpload-TSpan",children:a(n.defaultFootNote)})})]})}),Dm=r.memo(e=>{const{t:a}=G(),n=!!(!e.error&&e.url&&e.isUploadComplete&&e.uploadPercentage===100);return m(Wm,{...e,"data-testid":"image-edit-uploading",isBackground:e.noumEditor2,"data-test":"EditUploading-EditUploadingContainer",children:[(!(e!=null&&e.noumEditor2)||!n)&&t(Mo,{draggable:"false",onDragStart:o=>o.preventDefault(),"data-test":"EditUploading-ProgressErrorWrapper",children:m($m,{isUploadComplete:n,"data-test":"EditUploading-VerticalCenterWrapper",children:[m("div",{children:[t(E,{font:"body-m",$fill:!0,colorToken:"--text-card-header-neutral-highlighted","data-test":"EditUploading-TSpan",children:e.fileName}),t(K,{height:4,"data-test":"EditUploading-Spacer"}),e.fileSize&&t(E,{font:"systemInfo-s",$fill:!0,colorToken:"--text-card-neutral-default","data-test":"EditUploading-TSpan",children:si(e.fileSize||0)})]}),t(K,{isFlex:!0,"data-test":"EditUploading-Spacer"}),t(L,{name:"close_m",size:24,onClick:e.onClose,color:"--icon-card-neutral-default","data-test":"EditUploading-Icon"})]})}),m("div",{children:[e.error?m(j,{children:[t(K,{height:6,"data-test":"EditUploading-Spacer"}),t(Mo,{"data-test":"EditUploading-ProgressErrorWrapper",children:m(E,{font:"footnote",colorToken:"--text-card-danger-primary-default","data-test":"EditUploading-TSpan",children:[`${a("noumena.image_element.edit_uploading.error_text")} `,t(E,{font:"link-s",colorToken:"--text-card-danger-primary-default",style:{cursor:"pointer"},onClick:e.onTryAgain,"data-test":"EditUploading-TSpan",children:a("noumena.image_element.edit_uploading.error_try_again")})]})})]}):null,!e.error&&!e.isUploadComplete&&m(j,{children:[t(K,{height:16,"data-test":"EditUploading-Spacer"}),t(Rm,{"data-test":"EditUploading-ProgressBarWrapper",children:t(di,{backgroudColor:"var(--bg-progressbar-neutral-default)",percentage:e.uploadPercentage,barSize:8,"data-test":"EditUploading-ProgressBar"})})]})]}),n&&t(ci,{url:e.url,meta:e.meta,elementId:e.elementId,noumEditor2:e.noumEditor2,"data-test":"EditUploading-ImageView"})]})}),lr=e=>{const a=e.url==="undefined"?void 0:e.url;return t(zn,{url:a,acceptedFileTypes:ri,onContentChange:e.onContentChange,maxSize:20,"data-test":"ImageEditor-Upload",children:({triggerElRef:n,...o})=>m("div",{ref:n,children:[!o.isUploadStarted&&!o.isUploadComplete&&t(Hm,{isDraggingOver:o.isDraggingOver,error:o.error,onClick:o.onClickHandler,"data-test":"ImageEditor-EditPreUpload"}),o.isUploadStarted&&t(Dm,{isUploadComplete:o.isUploadComplete,url:o.url,fileName:o.fileName,fileSize:o.fileSize,fileType:o.fileType,error:o.error,uploadPercentage:o.uploadPercentage,onClose:o.onCloseHandler,noumEditor2:e.noumEditor2,meta:e.meta,elementId:e.elementId,"data-test":"ImageEditor-EditUploading"})]})})},Vm=r.memo(e=>{const{isEditing:a,isCustomPreview:n,isActiveTool:o}=e,{isLoading:i}=Ct(),s=r.useContext(Li),l=!a||n,{flags:{noumEditor2:d}}=le(),{meta:c}=r.useMemo(()=>l?Ae.getPublished(e.element):Ae.getUnpublished(e.element),[l,e.element]),h=a?Ae.getBodyContent(e.element):e.url;if(l&&!h)return null;const p=!e.isCustomPreview||e.selectedCustomPreviewTab===wt.Preview;return i?t(nr,{"data-test":"Content-SkeletonLoaderImageElement"}):o&&h||l?t(ci,{url:h||void 0,isCollapse:p&&s.isCollapse,viewOnly:l,meta:c,isCustomPreview:e.isCustomPreview,elementId:e.element._id,noumEditor2:d,"data-test":"Content-ImageView"}):t(lr,{url:h||void 0,onContentChange:e.onContentChange,meta:c,elementId:e.element._id,noumEditor2:d,"data-test":"Content-ImageEditor"})}),Um=r.memo(({onContentChange:e,...a})=>t(Xe,{...a,isSpecialCollapsing:!1,"data-test":"ImageElement-ElementWrapper",children:t(Vm,{...a,onContentChange:e,"data-test":"ImageElement-Content"})}));u.div``;u.div`
  padding-top: 16px;
  height: 413px;
  width: auto;
  max-height: 413px;

  div {
    height: 413px;
    max-height: 413px;
    width: auto;
  }

  button.vjs-big-play-button,
  .video-js:hover button.vjs-big-play-button {
    width: 56px;
    height: 56px;
    background-color: var(--bg-button-brand-primary-default);
    border-color: var(--bg-button-brand-primary-default);
  }

  .video-js .vjs-big-play-button .vjs-icon-placeholder:before {
    top: 4px;
  }

  @media (max-width: ${me.MOBILE_L}) {
    height: 222px;
    max-height: 222px;
    div {
      height: 222px;
      max-height: 222px;
    }
  }
`;const Qm=u.div`
  width: 100%;

  ${({isUploadComplete:e,noumEditor2:a})=>e?a?"padding: 0px;":"padding:16px;":`
        padding: 16px;
      `}

  box-sizing: border-box;
  border-radius: 8px;
`,jm=u.div`
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  ${({isUploadComplete:e})=>e?`
          padding-left: 16px;
          padding-right: 16px;
        `:""}
`,qm=u.div`
  width: 100%;
  border-radius: 4px;
`,To=u.div`
  width: 100%;
  display: flex;
  flex-direction: row;
`,Xm=u.div`
  height: 94px;
  width: 100%;
  background: var(--bg-dragdrop-neutral-default);
  border: 2px dashed var(--border-dragdrop-neutral-default);
  box-sizing: border-box;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  ${({isDraggingOver:e})=>e?`
        background: var(--bg-dragdrop-brand-secondary-focused);
        border: 2px dashed var(--border-dragdrop-brand-primary-focused);
        box-sizing: border-box;
        border-radius: 8px;
        `:""}

  ${({error:e})=>e?`
        background: var(--bg-dragdrop-danger-secondary/-default);
        border: 2px dashed var(--border-dragdrop-danger-primary-default);
        box-sizing: border-box;
        border-radius: 8px;
        `:""}
`,Gm=r.memo(e=>{const{t:a}=G(),n=rr("video");return m(Xm,{...e,onClick:e.onClick,"data-testid":"edit-pre-upload-container","data-test":"EditPreUpload-EditPreUploadContainer",children:[m("div",{children:[t(E,{font:"body-l-bold",$fill:!0,colorToken:"--text-dragdrop-header-neutral-default","data-test":"EditPreUpload-TSpan",children:a("noumena.video_element.edit_pre_upload.left_text")}),t(E,{font:"body-l-bold",$fill:!0,colorToken:"--text-dragdrop-brand-primary-default","data-test":"EditPreUpload-TSpan",children:a("noumena.video_element.edit_pre_upload.link_text")}),t(E,{font:"body-l-bold",$fill:!0,colorToken:"--text-dragdrop-neutral-default","data-test":"EditPreUpload-TSpan",children:a("noumena.video_element.edit_pre_upload.right_text")})]}),t(K,{height:"7px","data-test":"EditPreUpload-Spacer"}),t("div",{children:e.error?t(E,{font:"footnote",$fill:!0,colorToken:"--text-dragdrop-danger-primary-default","data-test":"EditPreUpload-TSpan",children:`${a("noumena.video_element.edit_pre_upload.error_text")} ${a(n.defaultFootNote)}`}):t(E,{font:"footnote",$fill:!0,colorToken:"--text-dragdrop-neutral-default","data-test":"EditPreUpload-TSpan",children:a(n.defaultFootNote)})})]})}),Ym=r.memo(e=>{const{t:a}=G(),n=!!(!e.error&&e.url&&e.isUploadComplete&&e.uploadPercentage===100),o=ui(e.url??""),i=mi(o);return m(Qm,{...e,isBackground:e.noumEditor2,"data-test":"EditUploading-EditUploadingContainer",children:[(!(e!=null&&e.noumEditor2)||!n)&&t(To,{"data-test":"EditUploading-ProgressErrorWrapper",children:m(jm,{isUploadComplete:n,"data-test":"EditUploading-VerticalCenterWrapper",children:[m("div",{children:[t(E,{font:"body-m",$fill:!0,colorToken:"--text-card-header-neutral-highlighted","data-test":"EditUploading-TSpan",children:e.fileName}),t(K,{height:4,"data-test":"EditUploading-Spacer"}),e.fileSize&&t(E,{font:"systemInfo-s",$fill:!0,colorToken:"--text-card-neutral-default","data-test":"EditUploading-TSpan",children:si(e.fileSize||0)})]}),t(K,{isFlex:!0,"data-test":"EditUploading-Spacer"}),t(L,{name:"close_m",size:24,onClick:e.onClose,color:"--icon-card-neutral-default","data-test":"EditUploading-Icon"})]})}),m("div",{children:[e.error?m(j,{children:[t(K,{height:6,"data-test":"EditUploading-Spacer"}),t(To,{"data-test":"EditUploading-ProgressErrorWrapper",children:m(E,{font:"footnote",colorToken:"--text-card-danger-primary-default","data-test":"EditUploading-TSpan",children:[`${a("noumena.video_element.edit_uploading.error_text")} `,t(E,{font:"link-s",colorToken:"--text-card-danger-primary-default",style:{cursor:"pointer"},onClick:e.onTryAgain,"data-test":"EditUploading-TSpan",children:a("noumena.video_element.edit_uploading.error_try_again")})]})})]}):null,!e.error&&!e.isUploadComplete&&m(j,{children:[t(K,{height:16,"data-test":"EditUploading-Spacer"}),t(qm,{"data-test":"EditUploading-ProgressBarWrapper",children:t(di,{backgroudColor:"var(--bg-progressbar-neutral-default)",percentage:e.uploadPercentage,barSize:8,"data-test":"EditUploading-ProgressBar"})})]})]}),n&&t(Bi,{fileType:i,url:e.url,meta:e.meta,elementId:e.elementId,"data-test":"EditUploading-VideoView"})]})}),Jm=r.memo(e=>{const a=e.url==="undefined"?void 0:e.url,{flags:{noumEditor2:n}}=le();return t(zn,{url:a,acceptedFileTypes:bl,onContentChange:e.onContentChange,maxSize:200,generateThumbnail:!0,"data-test":"VideoEditor-Upload",children:({triggerElRef:o,...i})=>m("div",{ref:o,children:[!i.isUploadStarted&&!i.isUploadComplete&&t(Gm,{isDraggingOver:i.isDraggingOver,error:i.error,onClick:i.onClickHandler,"data-test":"VideoEditor-EditPreUpload"}),i.isUploadStarted&&t(Ym,{isUploadComplete:i.isUploadComplete,url:i.url,fileName:i.fileName,fileSize:i.fileSize,fileType:i.fileType,error:i.error,uploadPercentage:i.uploadPercentage,onClose:i.onCloseHandler,noumEditor2:n,meta:e==null?void 0:e.meta,elementId:e.elementId,"data-test":"VideoEditor-EditUploading"})]})})}),Zm=r.memo(e=>{const{isEditing:a,isCustomPreview:n,element:o,url:i,selectedCustomPreviewTab:s,onContentChange:l}=e,d=r.useContext(Li),c=!a||n,{isLoading:h}=Ct(),p=(a?Ae.getBodyContent(o):i)||void 0,{meta:g}=r.useMemo(()=>c?Ae.getPublished(o):Ae.getUnpublished(o),[c,o]);if(h)return t(nr,{"data-test":"Content-SkeletonLoaderImageElement"});if(c&&!p)return null;const b=!n||s===wt.Preview,f=ui(i??""),x=mi(f);return c?t(Bi,{url:p,fileType:x,isCollapse:b&&d.isCollapse,viewOnly:!0,isCustomPreview:n,elementId:o==null?void 0:o._id,meta:g,"data-test":"Content-VideoView"}):t(Jm,{url:p,onContentChange:l,meta:g,elementId:o._id,"data-test":"Content-VideoEditor"})}),Km=r.memo(({onContentChange:e,...a})=>t(Xe,{...a,isSpecialCollapsing:!1,"data-test":"VideoElement-ElementWrapper",children:t(Zm,{...a,onContentChange:e,"data-test":"VideoElement-Content"})})),ep=u(R)`
  box-sizing: border-box;
  justify-content: center;
  align-items: center;
  padding: 4px;
  display: flex;
  flex-direction: column;

  @media ${ue.LAPTOP} {
    padding: 12px;
  }
`,tp=u(ve)`
  box-sizing: border-box;
  border-radius: 0;
  position: relative;
  padding: ${({isNoumEditor2:e})=>e?"0":"16px"};
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media ${ue.LAPTOP} {
    border-radius: 16px;
    padding: ${({isNoumEditor2:e})=>e?"0":"24px"};
  }
  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,ap=u.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: relative;
  min-height: 75px;
`,np=u.div`
  display: flex;
  align-items: center;
  gap: 12px;
  padding: ${({isNoumEditor2:e})=>e&&"16px 16px 0 16px"};
`,op=u.div`
  padding: 8px;
  cursor: pointer;
  background-color: var(--bg-button-neutral-default);
  border-radius: 8px;
  :hover {
    background-color: var(--bg-button-neutral-alt-hover);
  }
  ${Ko.headingXSmallBold}
`,ip=u.div`
  flex: 1;
  user-select: none;
`,rp=u.div`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  overflow-x: auto;
  ${Qa}
`;u.div`
  display: flex;
  align-items: center;

  & > form {
    gap: 12px;

    & > div {
      margin: 0;

      & input {
        width: 0;
        height: 0;
        margin: 0;
      }
    }
  }
`;u.div`
  position: absolute;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 15px 0;
  z-index: -1;
  background: transparent;
  transition: all 0.2s linear;

  ${({visible:e})=>e&&`
      z-index: 1;
    `}
`;u.div`
  overflow-y: auto;
`;u.div``;u.div`
  margin-top: 12px;
`;u.div`
  display: flex;
  flex-direction: column;
`;u.div`
  width: 100%;
`;u.div`
  display: flex;
  align-items: center;
  padding: 12px 0;
`;u.div`
  margin-left: 16px;
  margin-right: auto;
`;const lp=r.forwardRef((e,a)=>{const{t:n}=G();return t(Xe,{ref:a,isBorder:!1,...e,"data-testid":"calendar-element-edit","data-test":"CalendarElementEditMode-ElementWrapper",children:m(ep,{justify:"center",align:"center","data-test":"CalendarElementEditMode-EditModeWrapper",children:[t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"CalendarElementEditMode-TSpan",children:n("noumena.chamber.calendar.edit_mode_message_1")}),t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"CalendarElementEditMode-TSpan",children:n("noumena.chamber.calendar.edit_mode_message_2")})]})})}),sp=({chamberId:e,limit:a=10,preventGetEvents:n=!1,isOwner:o=!0})=>{const[i,s]=r.useState(1),l=(i-1)*a,{events:d,...c}=Ua({chamberId:e,limit:a*i,preventGetEvents:n,isOwner:o,offset:0}),h=g=>{s(Math.max(1,g))},p=r.useMemo(()=>d.slice(l,l+a),[d,a,l]);return{...c,onChangePage:h,currentPage:i,events:p}},sr=e=>{const a=r.useRef(!1),{hash:n}=vs(),o=r.useRef(n),{scrollIntoElement:i}=ac();r.useEffect(()=>{if(n&&(o.current!==n&&(o.current=n,a.current=!1),!a.current&&e)){const s=n.replace("#","");a.current=i(s)}})},dr=()=>m(Je,{gap:12,justify:"space-between",fullWidth:!0,"data-test":"SkeletonLoaderHeaderSubElement-StyledFlexRow",children:[t(kt,{"data-test":"SkeletonLoaderHeaderSubElement-SkeletonLoaderElementHeader"}),t(tt,{"data-test":"SkeletonLoaderHeaderSubElement-SkeletonLoaderPost"})]}),Io=()=>t(ve,{"data-test":"SkeletonLoaderCalendarElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderCalendarElement-StyledFlexColumn",children:[t(dr,{"data-test":"SkeletonLoaderCalendarElement-SkeletonLoaderHeaderSubElement"}),m(Je,{gap:12,fullWidth:!0,"data-test":"SkeletonLoaderCalendarElement-StyledFlexRow",children:[t(ae,{w:234,h:94,r:8,"data-test":"SkeletonLoaderCalendarElement-SizedSkeleton"}),t(ae,{w:234,h:94,r:8,"data-test":"SkeletonLoaderCalendarElement-SizedSkeleton"}),t(ae,{w:234,h:94,r:8,"data-test":"SkeletonLoaderCalendarElement-SizedSkeleton"})]})]})}),dp=3,cp=ja(({isOpen:e,onClose:a,event:n,spaceId:o,onContinueClick:i,onEventAccepted:s,onEventDeclined:l})=>{const{onGoLive:d,onAccept:c,onDecline:h,onAttending:p,onNotAttending:g,onAttend:b}=Ua({chamberId:o,limit:dp,preventGetEvents:!0}),{t:f}=G(),x=xl({dateTime:new Date(n==null?void 0:n.eventDate)}),{diffSeconds:w}=Cl({startTimestamp:(x==null?void 0:x.getTime())||0,durationInSeconds:(n==null?void 0:n.duration)||0,status:n==null?void 0:n.status});return m(Ne,{onClose:a,enableCloseButton:!0,open:e,size:Ve.M,disableBackdropClick:!0,"data-test":"StartNowEventWarningModal-Modal",children:[t(Qe,{"data-test":"StartNowEventWarningModal-ModalHeader",children:f("noumena.event.modal.start_now")}),m(Ue,{"data-test":"StartNowEventWarningModal-ModalBody",children:[t(E,{font:"body-m",textAlign:"center",colorToken:"--text-modal-neutral-default","data-test":"StartNowEventWarningModal-TSpan",children:w<0?f("noumena.event.modal.another_event_scheduled_now"):m(j,{children:[f("noumena.event.modal.another_event_scheduled_in"),t(yl,{initialSeconds:w,unit:"minute","data-test":"StartNowEventWarningModal-Timer"}),":"]})}),t(K,{height:16,"data-test":"StartNowEventWarningModal-Spacer"}),n&&o&&t(qa,{event:n,chamberId:o||"",type:"calendar",onGoLive:()=>d(n._id||""),onAccept:()=>s==null?void 0:s(n,c),onDecline:()=>l==null?void 0:l(n,h),onAttending:()=>s==null?void 0:s(n,p),onNotAttending:()=>l==null?void 0:l(n,g),onEditEvent:()=>{},onJoinEvent:()=>{},onAttend:()=>s==null?void 0:s(n,b),onClickSeeMore:()=>{},onViewAttendees:()=>{},hideActionButtons:!0,notClickable:!0,hideDescription:!0,"data-test":"StartNowEventWarningModal-EventItem"},n._id),t(K,{height:16,"data-test":"StartNowEventWarningModal-Spacer"}),t(E,{font:"body-m",textAlign:"center",colorToken:"--text-modal-neutral-default","data-test":"StartNowEventWarningModal-TSpan",children:f("noumena.event.modal.start_now.reminder")})]}),m(xt,{gap:16,flexDirection:"row",marginTop:12,"data-test":"StartNowEventWarningModal-ModalFooter",children:[t(X,{tertiary:!0,intent:"negative",size:"full",onClick:a,"data-testid":"cancel-button","data-test":"StartNowEventWarningModal-Button",children:f("noumena.event.modal.cancel")}),t(X,{onClick:i,primary:!0,size:"full","data-testid":"confirm-button","data-test":"StartNowEventWarningModal-Button",children:f("noumena.event.modal.continue")})]})]})}),up=[{_id:"647f3395b19878000da40bfe",status:wl.GoLive,privacy:Sl.Public,title:"Test Event #01",description:"This is an example event just to show you what calendar will look like in your Noum. Dont worry, it will not be visible when you publish your Noum ",eventDate:"2023-06-06T14:00:00.000Z",duration:3600,eventStatusUpdatedAt:"2023-06-06T13:30:00.227Z",socialHall:{_id:"647f33957c40e809b22407a1",isActive:!0},chamberId:{_id:"62bd985ea7564f000e31c472"},userId:{_id:"6295ce0b1792ec247e8eb225",firstName:"Swarup",middleName:null,lastName:"Ghosh Dev"},isInstantEvent:!0,currentUser:{eventId:"647f3395b19878000da40bfe",userId:"62fcdb69c2b876000fb22f71",userRole:vl.Participant,invitation:{_id:"647f36c2b19878000da40dd3"}}}],cr=({activeFilter:e,onFilterChange:a,isNoumEditor2:n})=>t(rp,{"data-testid":"calendar-element-viewmode-subheader","data-test":"CalendarElementViewModeSubHeader-SubHeaderWrapper",children:t(pi,{visible:!0,isNoumEditor2:n,activeFilter:e,onChange:a,"data-test":"CalendarElementViewModeSubHeader-EventFilter"})}),mp=({isNoumLayoutSmallViewMode:e})=>m(R,{fullWidth:!0,vertical:!0,padding:"16px",gap:25,"data-test":"CalendarPlaceHolder-Stack",children:[m(R,{justify:"space-between",fullWidth:!0,align:"center","data-test":"CalendarPlaceHolder-Stack",children:[t(E,{font:"heading-xs-bold","data-test":"CalendarPlaceHolder-TSpan",children:C("noumena.homeChambers.event.event_other")}),t(X,{size:"small",secondary:!0,icon:t(L,{name:"plus_m",size:24,"data-test":"CalendarPlaceHolder-Icon"}),"data-test":"CalendarPlaceHolder-Button"})]}),e?t(ji,{activeFilter:"all",onChange:()=>{},"data-test":"CalendarPlaceHolder-EventFilterDropDown"}):t(cr,{activeFilter:"all",activeViewMode:"",onFilterChange:()=>{},onViewModeChange:()=>{},isNoumEditor2:!0,"data-test":"CalendarPlaceHolder-CalendarElementViewModeSubHeader"}),up.map(a=>t(qa,{event:a,chamberId:"",type:"calendar",onGoLive:async()=>{},onAccept:async()=>{},onDecline:async()=>{},onAttending:async()=>{},onNotAttending:async()=>{},onEditEvent:async()=>{},onJoinEvent:async()=>{},onAttend:async()=>{},onClickSeeMore:async()=>{},onViewAttendees:async()=>{},isNoumLayoutSmallViewMode:e,"data-test":"CalendarPlaceHolder-EventItem"},a._id))]}),pp=ja(({isOpen:e,onClose:a,isNoumEditor2:n,chamberId:o,isOwner:i,spaceId:s,onEventAccepted:l,onEventDeclined:d,spaceType:c})=>{const{t:h}=G(),{events:p,eventsCount:g,activeFilter:b,onChangeFilter:f,onGoLive:x,onJoinEvent:w,networkStatus:S,fetchMoreEvents:y,onAccept:k,onAttend:v,onDecline:T,onAttending:F,onNotAttending:P,onCopyLink:_,refetchEvents:M}=Ua({chamberId:s,limit:10,isOwner:i,preventGetEvents:!e}),W=r.useRef(null),O=r.useCallback((N,D)=>{var ie;(ie=W.current)==null||ie.open(N,D)},[]),{openModal:U,closeModal:Q,contextData:V,modalType:$}=Ca(),q=r.useCallback(async N=>{var D;w(N._id??"",((D=N.socialHall)==null?void 0:D._id)??"")},[w]),z=r.useCallback(async N=>{var D;await x(N._id),w(N._id??"",((D=N.socialHall)==null?void 0:D._id)??"")},[x,w]),I=()=>{a()},B=g>p.length;return m(Ne,{onClose:I,enableCloseButton:!0,open:e,size:Ve.XL,disableBackdropClick:!0,"data-test":"AllCalendarModal-Modal",children:[t(Qe,{"data-test":"AllCalendarModal-ModalHeader",children:h("noumena.events.title")}),m(Ue,{style:{gap:"15px",height:"628px"},"data-test":"AllCalendarModal-ModalBody",children:[i&&t(pi,{visible:!0,activeFilter:b,onChange:f,isNoumEditor2:n,"data-test":"AllCalendarModal-EventFilter"}),t(aa,{onFetchMore:()=>{B&&y()},status:p.length!==0&&B?hi({networkStatus:S,totalCount:g,currentCount:p.length}):"end",grow:!0,width:"100%",disableFetchMoreWhileLoading:!0,isSpinnerRelative:!0,style:{overflow:"unset",scrollbarWidth:"none"},"data-test":"AllCalendarModal-Infinite",children:t(R,{gap:15,vertical:!0,align:"center",grow:!0,"data-test":"AllCalendarModal-Stack",children:p.length===0?t(j,{children:S===bt.ready?t(kl,{activeFilter:b,"data-test":"AllCalendarModal-EventListEmptyScreen"}):t(it,{"data-test":"AllCalendarModal-Spinner"})}):p.map(N=>t(qa,{event:N,chamberId:o,type:n?"calendar":"notification",onGoLive:()=>z(N),onAccept:()=>l==null?void 0:l(N,k),onDecline:()=>d==null?void 0:d(N,T),onAttending:()=>l==null?void 0:l(N,F),onNotAttending:()=>d==null?void 0:d(N,P),onJoinEvent:()=>q(N),onAttend:()=>l==null?void 0:l(N,v),onEditEvent:()=>U("edit-event",{event:N,callback:M}),onViewAttendees:O,onCopyLink:()=>{var D;return _==null?void 0:_((D=N==null?void 0:N.socialHall)==null?void 0:D._id,N==null?void 0:N.status)},"data-test":"AllCalendarModal-EventItem"},N._id))})})]}),$==="edit-event"&&t(fi,{chamberId:s,isOpen:!0,onClose:Q,event:V==null?void 0:V.event,eventSuccessCallback:V==null?void 0:V.callback,isProjectNoum:c===We.Project,"data-test":"AllCalendarModal-CreateEditEventModal"}),t(gi,{ref:W,onRefetchEvents:M,"data-test":"AllCalendarModal-EventAttendeesModal"})]})}),hp=u.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  box-sizing: border-box;
  ${({isNoumEditor2:e})=>e&&"padding: 0 16px 16px"}
`,fp=u.div`
  margin: 0 auto;
`,gp=u(E)`
  user-select: none;
  text-align: center;
`,bp=u(X)`
  padding: 12px;
  margin-top: 16px;
  min-height: unset;
  height: unset;
`,xp=u.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  & * {
    user-select: none;
  }
  @media (max-width: ${me.MOBILE_L}) {
    align-items: stretch;
  }
`,Cp=u.div`
  display: flex;
  flex-direction: column;
  gap: 16px;

  & * {
    user-select: none;
  }
`,mn=u.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px;
  border-radius: 8px;
  flex: 1;
  cursor: pointer;
  transition: all 0.2s linear;
  background-color: ${({active:e})=>e?"var(--bg-summary-button-brand-secondary-highlighted)":"var(--bg-summary-button-neutral-default)"};
  &:hover {
    background-color: ${({active:e})=>e?"var(--bg-summary-button-brand-secondary-hover)":"var(--bg-summary-button-neutral-hover)"};
  }
`,yp=u.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  gap: 8px;
`,pn=u(E)``,hn=u(E)``,fn=u(E)``,wp=u.div`
  display: flex;
  flex-direction: column;
  gap: 16px;

  & * {
    user-select: none;
  }
  & :nth-last-child(1) {
    ${({isEventBottomBorder:e})=>e&&"border-radius: 16px"};
  }
`,ur=u(E)`
  ${({isNoumEditor2:e})=>e&&"padding: 0 16px"}
`,Sp=u.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 64px;
`,vp=u(E)`
  font-size: 12px;
  font-weight: 600;
  line-height: 160%;
`,kp=u(E)`
  font-size: 16px;
  font-weight: 600;
  line-height: 150%;
`,Ep=u(E)`
  font-size: 16px;
  font-weight: 600;
  line-height: 150%;
  text-align: left;
`,_p=u(E)`
  font-size: 12px;
  font-weight: 600;
  line-height: 160%;
  text-align: left;
`,Mp=u.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  padding: 16px;
  gap: 8px;
  border-radius: 8px;
  border: 1px solid var(--border-card-neutral-default);
  flex: 1;

  @media (max-width: ${me.MOBILE_MAX}) {
    flex-direction: column;

    & > div:last-of-type {
      margin-top: 3px;
    }
  }
`,Tp=u.div`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  flex: 1;

  @media (max-width: ${me.MOBILE_MAX}) {
    flex: 0;
    width: 100%;
  }
`,Ip=u.div`
  inset: 0 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  height: 50px;
  span {
    position: absolute;
  }
`,Np=ja(({events:e,eventHost:a,masterNoumId:n,onEditEvent:o,onGoLive:i,onJoinEvent:s,onAccept:l,onDecline:d,onAttend:c,onAttending:h,onNotAttending:p,onEventDeclined:g,onEventAccepted:b})=>m(Cp,{"data-testid":"guest-events-list-collapsed","data-test":"CalendarGuestEventsListCollapsed-GuestEventsListCollapsedWrapper",children:[!!a&&t(ur,{font:"body-m",colorToken:"--text-card-neutral-highlighted","data-test":"CalendarGuestEventsListCollapsed-GuestEventsHeaderTitle",children:C("noumena.homeChambers.event.guest_upcoming_events_num",{postProcess:"interval",count:(e==null?void 0:e.length)||0,host:a})}),e.map(f=>m(yp,{"data-test":"CalendarGuestEventsListCollapsed-GuestEventsListCollapsedItem",children:[m(Sp,{"data-test":"CalendarGuestEventsListCollapsed-EventDateWrapper",children:[t(vp,{colorToken:"--text-upcoming-event-brand-primary-highlighted","data-test":"CalendarGuestEventsListCollapsed-GuestEventMonth",children:on({dateTime:f.eventDate,returnFormat:"MMMM"})}),t(kp,{colorToken:"--text-upcoming-event-neutral-highlighted","data-test":"CalendarGuestEventsListCollapsed-GuestEventDate",children:on({dateTime:f.eventDate,returnFormat:"d"})})]}),m(Mp,{"data-test":"CalendarGuestEventsListCollapsed-GuestEventBodyWrapper",children:[m(Tp,{"data-test":"CalendarGuestEventsListCollapsed-GuestEventBody",children:[t(Ep,{colorToken:"--text-upcoming-event-neutral-highlighted","data-test":"CalendarGuestEventsListCollapsed-GuestEventTitle",children:f.title}),t(_p,{colorToken:"--text-tablecell-body-neutral-default","data-test":"CalendarGuestEventsListCollapsed-GuestEventTime",children:on({dateTime:f.eventDate,returnFormat:"h:mm aa"})})]}),t(El,{type:"calendar",event:f,noumId:n??"",onEditEvent:()=>o(f),onGoLive:()=>i(f),onJoinEvent:()=>s(f),onAccept:()=>b==null?void 0:b(f,l),onDecline:()=>g==null?void 0:g(f,d),onAttend:()=>b==null?void 0:b(f,c),onAttending:()=>b==null?void 0:b(f,h),onNotAttending:()=>g==null?void 0:g(f,p),"data-test":"CalendarGuestEventsListCollapsed-EventItemButtons"})]})]},f._id))]})),mr=ja(({events:e,eventHost:a,masterNoumId:n,onGoLive:o,onAccept:i,onDecline:s,onAttending:l,onNotAttending:d,onEditEvent:c,onJoinEvent:h,onAttend:p,refetchEvents:g,onCopyLink:b,onEventDeclined:f,onEventAccepted:x,isNoumEditor2:w,isNoumLayoutSmallViewMode:S,eventsCount:y})=>{const k=r.useRef(null),[v,T]=r.useState(!1),F=r.useCallback((_,M)=>{var W;(W=k.current)==null||W.open(_,M)},[]),P=r.useCallback(_=>{T(_)},[T]);return m(j,{children:[m(wp,{"data-testid":"events-list-expanded",isEventBottomBorder:(y||0)<=3,"data-test":"CalendarEventsListExpanded-EventsListExpandedWrapper",children:[!!a&&t(ur,{font:"body-m",colorToken:"--text-card-neutral-highlighted",isNoumEditor2:w,"data-test":"CalendarEventsListExpanded-GuestEventsHeaderTitle",children:C("noumena.homeChambers.event.guest_upcoming_events",{host:a})}),e.map(_=>t(qa,{event:_,chamberId:n||"",type:"calendar",onGoLive:()=>o(_),onAccept:()=>x==null?void 0:x(_,i),onDecline:()=>f==null?void 0:f(_,s),onAttending:()=>x==null?void 0:x(_,l),onNotAttending:()=>f==null?void 0:f(_,d),onEditEvent:()=>c(_),onJoinEvent:()=>h(_),onAttend:()=>x==null?void 0:x(_,p),onClickSeeMore:()=>P(_),onViewAttendees:F,onCopyLink:()=>{var M;return b==null?void 0:b((M=_==null?void 0:_.socialHall)==null?void 0:M._id,_==null?void 0:_.status)},isNoumLayoutSmallViewMode:S,"data-test":"CalendarEventsListExpanded-EventItem"},_._id))]}),t(gi,{ref:k,onRefetchEvents:g,"data-test":"CalendarEventsListExpanded-EventAttendeesModal"}),!!v&&t(_l,{eventId:v._id??"",isOpen:!!v,onClose:()=>T(!1),onEditEvent:c,"data-test":"CalendarEventsListExpanded-EventDetailModal"})]})}),Pp=({masterNoumId:e,events:a,eventMeta:n,isCollapsed:o,onEditEvent:i,onRefetchEvents:s,onGoLive:l,onJoin:d,onAccept:c,onDecline:h,onAttend:p,onAttending:g,onNotAttending:b,isNoumEditor2:f,isNoumLayoutSmallViewMode:x})=>{const w=r.useMemo(()=>{var S,y,k;return((k=(y=(S=a[0])==null?void 0:S.chamberId)==null?void 0:y.uid)==null?void 0:k.firstName)||""},[a]);return o?t(Np,{events:a,eventMeta:n,eventHost:w,masterNoumId:e,onGoLive:l,onAccept:c,onDecline:h,onAttending:g,onNotAttending:b,onEditEvent:i,onJoinEvent:d,onAttend:p,"data-test":"CalendarElementGuestView-CalendarGuestEventsListCollapsed"}):t(mr,{masterNoumId:e,events:a,eventHost:w,onGoLive:l,onAccept:c,onDecline:h,onAttending:g,onNotAttending:b,onEditEvent:i,onJoinEvent:d,onAttend:p,refetchEvents:s,isNoumEditor2:f,isNoumLayoutSmallViewMode:x,"data-test":"CalendarElementGuestView-CalendarEventsListExpanded"})},Ap={all:C("noumena.homeChambers.calendar.noEvents"),[Ie.Attending]:C("noumena.homeChambers.calendar.noAttendingEvents"),[Ie.Hosting]:C("noumena.homeChambers.calendar.noHostingEvents"),[Ie.Invitation]:C("noumena.homeChambers.calendar.noInvitedEvents"),[Ie.Expired]:C("noumena.homeChambers.calendar.noPastEvents"),[Ie.Upcoming]:C("noumena.homeChambers.calendar.noUpcoming")},Lp=({isCollapsed:e,activeFilter:a,onAddEvent:n,loading:o,isNoumEditor2:i})=>o?null:m(hp,{"data-testid":"calendar-no-events-wrapper",isNoumEditor2:i,"data-test":"CalendarNoEvents-CalendarNoEventsWrapper",children:[!e&&t(fp,{"data-test":"CalendarNoEvents-NoEventsIconWrapper",children:t(L,{name:"calendar_xxxl",size:64,color:"--icon-placeholder-neutral-default","data-test":"CalendarNoEvents-Icon"})}),t(gp,{"data-testid":"no-events-text",font:"body-xl",colorToken:"--text-placeholder-neutral-default","data-test":"CalendarNoEvents-StyledText",children:e?C("noumena.homeChambers.calendar.noEvents"):Ap[a]}),!e&&["all",Ie.Hosting].includes(a)&&t(bp,{secondary:!0,onClick:n,"data-test":"CalendarNoEvents-AddNewEventButton",children:C("noumena.homeChambers.event.add_new_event")})]}),Bp=({activeFilter:e,onFilterChange:a,eventMeta:n})=>m(xp,{"data-testid":"owner-events-list-collapsed","data-test":"CalendarOwnerEventsListCollapsed-OwnerEventsListCollapsedWrapper",children:[m(mn,{active:e===Ie.Attending,onClick:()=>a(Ie.Attending),"data-test":"CalendarOwnerEventsListCollapsed-OwnerEventsListCollapsedItem",children:[t(pn,{font:"body-m-bold",colorToken:e===Ie.Attending?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCategory",children:C("noumena.homeChambers.event.filter_attending")}),t(hn,{font:"body-xl-bold",colorToken:e===Ie.Attending?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCount",children:(n==null?void 0:n.acceptedEventsCount)||0}),t(fn,{font:"footnote-bold",colorToken:e===Ie.Attending?"--text-summary-button-brand-primary-default":"--text-summary-button-neutral-default","data-test":"CalendarOwnerEventsListCollapsed-EventHelper",children:C(oo("noumena.homeChambers.event.event",(n==null?void 0:n.acceptedEventsCount)||0))})]}),m(mn,{active:e===Ie.Hosting,onClick:()=>a(Ie.Hosting),"data-test":"CalendarOwnerEventsListCollapsed-OwnerEventsListCollapsedItem",children:[t(pn,{font:"body-m-bold",colorToken:e===Ie.Hosting?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCategory",children:C("noumena.homeChambers.event.filter_hosting")}),t(hn,{font:"body-xl-bold",colorToken:e===Ie.Hosting?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCount",children:(n==null?void 0:n.hostedEventsCount)||0}),t(fn,{font:"footnote-bold",colorToken:e===Ie.Hosting?"--text-summary-button-brand-primary-default":"--text-summary-button-neutral-default","data-test":"CalendarOwnerEventsListCollapsed-EventHelper",children:C(oo("noumena.homeChambers.event.event",(n==null?void 0:n.hostedEventsCount)||0))})]}),m(mn,{active:e===Ie.Invitation,onClick:()=>a(Ie.Invitation),"data-test":"CalendarOwnerEventsListCollapsed-OwnerEventsListCollapsedItem",children:[t(pn,{font:"body-m-bold",colorToken:e===Ie.Invitation?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCategory",children:C("noumena.homeChambers.event.filter_invites")}),t(hn,{font:"body-xl-bold",colorToken:e===Ie.Invitation?"--text-summary-button-brand-primary-highlighted":"--text-summary-button-neutral-highlighted","data-test":"CalendarOwnerEventsListCollapsed-EventCount",children:(n==null?void 0:n.pendingEventsCount)||0}),t(fn,{font:"footnote-bold",textAlign:"center",colorToken:e===Ie.Invitation?"--text-summary-button-brand-primary-default":"--text-summary-button-neutral-default","data-test":"CalendarOwnerEventsListCollapsed-EventHelper",children:C("noumena.homeChambers.event.event_without_reply")})]})]}),Fp=({masterNoumId:e,loading:a,events:n,eventMeta:o,eventsCount:i,isCollapsed:s,activeFilter:l,activeViewMode:d,onChangeFilter:c,onFilterChanged:h,onChangeViewMode:p,onAddEvent:g,onEditEvent:b,onRefetchEvents:f,onGoLive:x,onJoin:w,onAccept:S,onDecline:y,onAttend:k,onAttending:v,onNotAttending:T,onCopyLink:F,isNoumEditor2:P,isNoumLayoutSmallViewMode:_})=>{const M=r.useMemo(()=>s?!1:i?!0:l!=="all",[l,i,s]),W=r.useMemo(()=>s?!!(o!=null&&o.allEventsCount):!1,[o==null?void 0:o.allEventsCount,s]),O=r.useMemo(()=>i?!1:s?!(o!=null&&o.allEventsCount):!0,[o==null?void 0:o.allEventsCount,i,s]);return m(j,{children:[!_&&M&&t(cr,{activeFilter:l,activeViewMode:d,onFilterChange:c,onViewModeChange:p,isNoumEditor2:P,"data-test":"CalendarElementOwnerView-CalendarElementViewModeSubHeader"}),_&&!!(o!=null&&o.allEventsCount)&&t(ji,{activeFilter:l,onChange:c,"data-test":"CalendarElementOwnerView-EventFilterDropDown"}),a?t(Ip,{"data-test":"CalendarElementOwnerView-LoadingContainer",children:t(it,{"data-test":"CalendarElementOwnerView-Spinner"})}):m(j,{children:[W&&t(Bp,{activeFilter:l,onFilterChange:h,eventMeta:o,"data-test":"CalendarElementOwnerView-CalendarOwnerEventsListCollapsed"}),i>0&&!s&&t(mr,{eventsCount:i,masterNoumId:e,events:n,eventHost:"",onGoLive:x,onAccept:S,onDecline:y,onAttending:v,onNotAttending:T,onEditEvent:b,onJoinEvent:w,onAttend:k,refetchEvents:f,onCopyLink:F,isNoumEditor2:P,isNoumLayoutSmallViewMode:_,"data-test":"CalendarElementOwnerView-CalendarEventsListExpanded"}),O&&t(Lp,{isCollapsed:s,activeFilter:l,loading:a,onAddEvent:g,isNoumEditor2:P,"data-test":"CalendarElementOwnerView-CalendarNoEvents"})]})]})},Op=({isOwner:e,handleDropdownClick:a,isAnotherEventLive:n,selectedCustomPreviewTab:o,onAddEvent:i,isNoumEditor:s})=>{const{flags:l}=le();return t(j,{children:l.shInstantEvent?e&&o!==wt.Preview&&t(je,{hideIcons:!0,onSelectOption:a,options:Ml(n),usePortal:!1,observerMinHeight:"0",containerPadding:"12px",containerWidth:n?"auto":"150px",padding:"0","data-test":"AddEventButton-Dropdown",children:({targetProps:d,targetRef:c})=>t(X,{ref:c,...d,size:"small",icon:t(L,{name:"add_s",size:16,color:s?"--icon-button-brand-secondary-default":"--icon-button-neutral-alt-default","data-test":"AddEventButton-Icon"}),primary:!s,secondary:s,"data-test":"AddEventButton-Button"})}):t(X,{onClick:i,size:"small",icon:t(L,{name:"add_s",size:16,color:s?"--icon-button-brand-secondary-default":"--icon-button-neutral-alt-default","data-test":"AddEventButton-Icon"}),primary:!s,secondary:s,"data-test":"AddEventButton-Button"})})},Wp=({currentTitle:e,isCollapsed:a,isOwner:n,onToggleCollapse:o,handleDropdownClick:i,isAnotherEventLive:s,selectedCustomPreviewTab:l,onAddEvent:d,isNoumEditor:c,showAddEventBtn:h})=>t(j,{children:m(np,{"data-testid":"calendar-element-header",isNoumEditor2:c,"data-test":"CalendarElementViewModeHeader-ViewModeHeaderWrapper",children:[!c&&t(op,{"data-testid":"calendar-collapse-button",onClick:()=>o(!a),"data-test":"CalendarElementViewModeHeader-CollapseButton",children:t(L,{name:a?"chevron_small_down_m":"chevron_small_up_m",size:24,color:"--icon-button-neutral-default","data-test":"CalendarElementViewModeHeader-Icon"})}),t(ip,{"data-test":"CalendarElementViewModeHeader-ViewModeHeaderTitleWrapper",children:t(E,{font:"heading-xs-bold",colorToken:"--text-body-header-neutral-default","data-test":"CalendarElementViewModeHeader-TSpan",children:e})}),(c&&!!h||!c)&&t(Op,{isOwner:n,handleDropdownClick:i,isAnotherEventLive:s,selectedCustomPreviewTab:l,onAddEvent:d,isNoumEditor:c,"data-test":"CalendarElementViewModeHeader-AddEventButton"})]})}),$p=(e,a)=>{const{flags:{noumEditor2:n}}=le(),[o,i]=r.useState(!(n&&!a)),[s,l]=r.useState("list"),[d,c]=r.useState();nc(e,()=>{var p;c(((p=e==null?void 0:e.current)==null?void 0:p.scrollHeight)||0)});const h=r.useMemo(()=>n&&!a,[a,n]);return r.useEffect(()=>{var p;d||c((p=e.current)==null?void 0:p.clientHeight)},[d,e]),{isCollapsed:o,setIsCollapsed:i,viewMode:s,setViewMode:l,childrenHeight:d,isNoumEditor2:h}},gn=3,Rp=r.forwardRef((e,a)=>{const{masterId:n}=ye(),o=r.useRef(null),[i,s]=qt(),[l,d]=qt(),[c,h]=qt(),{isCollapsed:p,setIsCollapsed:g,viewMode:b,setViewMode:f,isNoumEditor2:x}=$p(o,e.isCustomPreview),{events:w,eventsCount:S,eventMeta:y,currentPage:k,activeFilter:v,loading:T,networkStatus:F,onJoinEvent:P,onChangeFilter:_,onGoLive:M,onAccept:W,onDecline:O,onAttending:U,onNotAttending:Q,onAttend:V,onCopyLink:$,onChangePage:q,refetchEvents:z}=sp({chamberId:e.spaceId,limit:gn,isOwner:e.isOwner}),B=bi()===$e.NOUMLAYOUTSMALL,{openModal:N,closeModal:D,contextData:ie,modalType:te}=Ca(),H=r.useCallback(()=>{e.spaceId===n&&z()},[n,e.spaceId,z]);r.useEffect(()=>(document.addEventListener(io,H),()=>{document.removeEventListener(io,H)}),[H]),sr((w==null?void 0:w.length)>0);const{isAnotherEventLive:se,eventScheduledIn60Mins:Y}=Yc(e.spaceId),Me=r.useCallback(ne=>{_(ne),g(!1)},[_,g]),oe=r.useMemo(()=>p?!e.isOwner:!0,[p,e.isOwner]),ke=r.useCallback(async ne=>{var Te;P(ne._id??"",((Te=ne.socialHall)==null?void 0:Te._id)??"")},[P]),Pe=r.useCallback(async ne=>{var Te;await M(ne._id),P(ne._id??"",((Te=ne.socialHall)==null?void 0:Te._id)??"")},[M,P]),ze=r.useCallback(ne=>{ne.value===ro.START_NOW?Y?d():s():ne.value===ro.SCHEDULE&&N("edit-event",{callback:z})},[Y,d,s,N,z]);if(!S&&e.isEditing&&x)return T?t(Io,{"data-test":"CalendarElementViewMode-SkeletonLoaderCalendarElement"}):t(mp,{isNoumLayoutSmallViewMode:B,"data-test":"CalendarElementViewMode-CalendarPlaceHolder"});if(!S&&!e.isOwner)return null;const xe=()=>{s(),d()};return T&&F!==bt.setVariables?t(Io,{"data-test":"CalendarElementViewMode-SkeletonLoaderCalendarElement"}):m(j,{children:[m(tp,{id:"event",ref:a,style:{overflow:"visible"},"data-testid":"calendar-viewmode-wrapper",isNoumEditor2:x,"data-test":"CalendarElementViewMode-ViewModeWrapper",children:[t(Wp,{showAddEventBtn:!!(y!=null&&y.allEventsCount)||T,isAnotherEventLive:se,isStartNowModalOpen:l,toggleStartNowModal:d,currentTitle:e.currentTitle,isCollapsed:p,isOwner:e.isOwner,onToggleCollapse:g,handleDropdownClick:ze,selectedCustomPreviewTab:e.selectedCustomPreviewTab,onAddEvent:()=>{N("edit-event",{callback:z})},isNoumEditor:x,"data-test":"CalendarElementViewMode-CalendarElementViewModeHeader"}),t(ap,{ref:o,"data-test":"CalendarElementViewMode-ViewModeChildrenWrapper",children:e.isOwner?t(Fp,{loading:T,masterNoumId:n,events:w,eventMeta:y,eventsCount:S,isCollapsed:p,activeFilter:v,activeViewMode:b,onChangeFilter:ne=>{_(ne)},onFilterChanged:ne=>{Me(ne)},onChangeViewMode:ne=>f(ne),onAddEvent:()=>{N("edit-event",{callback:z})},onEditEvent:ne=>{N("edit-event",{event:ne,callback:z})},onRefetchEvents:z,onGoLive:Pe,onJoin:ke,onAccept:W,onDecline:O,onAttending:U,onNotAttending:Q,onAttend:V,onCopyLink:$,isNoumEditor2:x,isNoumLayoutSmallViewMode:B,"data-test":"CalendarElementViewMode-CalendarElementOwnerView"}):t(Pp,{masterNoumId:n,events:w,eventMeta:y,isCollapsed:p,onEditEvent:ne=>{N("edit-event",{event:ne,callback:z})},onRefetchEvents:z,onGoLive:Pe,onJoin:ke,onAccept:W,onDecline:O,onAttending:U,onNotAttending:Q,onAttend:V,isNoumEditor2:x,isNoumLayoutSmallViewMode:B,"data-test":"CalendarElementViewMode-CalendarElementGuestView"})}),x&&S>gn&&!T?t(R,{fullWidth:!0,justify:"center",padding:"0 16px 16px 16px","data-test":"CalendarElementViewMode-Stack",children:t(X,{textOnly:!0,size:"small",onClick:h,secondary:!0,rightIcon:t(L,{size:12,name:"chevron_right_m","data-test":"CalendarElementViewMode-Icon"}),"data-test":"CalendarElementViewMode-Button",children:C("noumena.editor.all_events")})}):oe&&!T&&t(Qn,{totalCount:S,pageSize:gn,currentPage:k,onPageChange:q,"data-test":"CalendarElementViewMode-Pagination"})]}),te==="edit-event"&&t(fi,{isOpen:!0,onClose:D,event:ie==null?void 0:ie.event,eventSuccessCallback:ie==null?void 0:ie.callback,chamberId:e.spaceId,isProjectNoum:e.spaceType===We.Project,"data-test":"CalendarElementViewMode-CreateEditEventModal"}),i&&t(Tl,{isProjectNoum:!1,chamberId:e.spaceId,onClose:s,isOpen:i,"data-test":"CalendarElementViewMode-OnDemandEventModal"}),l&&t(cp,{onContinueClick:xe,spaceId:e.spaceId,event:Y,onClose:d,isOpen:l,"data-test":"CalendarElementViewMode-StartNowEventWarningModal"}),t(pp,{isOpen:c,onClose:h,chamberId:n,spaceId:e.spaceId,isOwner:e.isOwner,isNoumLayoutSmallViewMode:B,spaceType:e.spaceType,isNoumEditor2:x,"data-test":"CalendarElementViewMode-AllCalendarModal"})]})}),zp=r.forwardRef((e,a)=>{const{flags:{noumEditor2:n}}=le();return e.isEditing&&(!n||e.isCustomPreview)?t(lp,{...e,ref:a,"data-test":"CalendarElement-CalendarElementEditMode"}):t(Rp,{...e,ref:a,"data-test":"CalendarElement-CalendarElementViewMode"})}),Hp=()=>{const{width:e}=Re(),a=r.useMemo(()=>e<=qe.MOBILE_MAX,[e]),n=r.useMemo(()=>a?"87%":void 0,[a]);return t(ve,{"data-test":"SkeletonLoaderBusinessBriefElement-Card",children:m(Ge,{gap:16,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderBusinessBriefElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderBusinessBriefElement-SkeletonLoaderElementHeader"}),t(ae,{w:313,h:40,r:8,maxWidth:n,"data-test":"SkeletonLoaderBusinessBriefElement-SizedSkeleton"}),t(Ln,{"data-test":"SkeletonLoaderBusinessBriefElement-SkeletonLoaderParagraph"})]})})},No=u.div`
  display: flex;
  justify-content: center;
  ${({isNoumEditor2:e})=>e&&"padding: 16px"}
`,Dp=({wrapperProps:e,isBorder:a,elementId:n,elementPosition:o,spaceId:i,isEditing:s,textEditor:l,basicToolbar:d=!1})=>{const{t:c}=G(),{lastRerenderEvent:h}=Ot(),p=r.useRef(!0),[g,b]=r.useState((l==null?void 0:l.initialValue)||""),[f,x]=r.useState((l==null?void 0:l.initialValue)||""),[w,S]=r.useState(h);r.useEffect(()=>{w!==h&&(b(l==null?void 0:l.initialValue),S(h))},[l==null?void 0:l.initialValue,h,w]);const y=r.useCallback(M=>{x(M==="<p><br></p>"?"":M)},[]),{setDisableUpdate:k}=r.useContext(xi),{updateElementHelper:v,loading:T}=Ci();r.useEffect(()=>{k(T)},[k,T]);const F={...!s&&{...l}},P=r.useCallback(M=>{var W;if(M.isChanged){const O=Ye.clone(M.value);y(O??""),b(O),(W=l==null?void 0:l.onContentChange)==null||W.call(l,M)}},[l,y]);r.useEffect(()=>{n&&i&&!p.current&&v(i,{elementId:n,bodyContent:f,position:o,status:_t.Unsaved,bodyContentType:Il.Json}),p.current&&(p.current=!1)},[n,o,i,f,v]);const{isLoading:_}=Ct();return!s&&_?t(Hp,{"data-test":"BusinessBrief-SkeletonLoaderBusinessBriefElement"}):t(Xe,{isBorder:a,...e,currentTitle:c("noumena.homeChambers.addBusiness.currentTitle"),"data-test":"BusinessBrief-ElementWrapper",children:t(j,{children:e.isNoumEditor2?t(j,{children:!e.isActiveTool&&s?t(R,{padding:"16px","data-test":"BusinessBrief-Stack",children:t(E,{font:"body-m",colorToken:"--text-input-neutral-default","data-test":"BusinessBrief-TSpan",children:c("noumena.homeChambers.addBusiness.description")})}):t(No,{isNoumEditor2:e.isNoumEditor2,"data-test":"BusinessBrief-ContentContainer",children:t(In,{placeholder:c("noumena.homeChambers.addBusiness.tellAboutExperience"),initialValue:g,onContentChange:P,width:"100%",basicToolbar:d,editEnabled:s,...F,"data-test":"BusinessBrief-RichTextEditor"})})}):t(No,{"data-test":"BusinessBrief-ContentContainer",children:t(In,{placeholder:c("noumena.homeChambers.addBusiness.tellAboutExperience"),initialValue:g,onContentChange:P,width:"100%",basicToolbar:d,editEnabled:s,...F,"data-test":"BusinessBrief-RichTextEditor"})})})})},Vp=()=>{const{width:e}=Re(),a=r.useMemo(()=>e<=qe.MOBILE_MAX,[e]),n=r.useMemo(()=>a?"87%":void 0,[a]);return t(ve,{"data-test":"SkeletonLoaderTextElement-Card",children:m(Ge,{gap:16,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderTextElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderTextElement-SkeletonLoaderElementHeader"}),t(K,{height:5,"data-test":"SkeletonLoaderTextElement-Spacer"}),t(ae,{w:313,h:33,r:8,maxWidth:n,"data-test":"SkeletonLoaderTextElement-SizedSkeleton"}),t(Ln,{"data-test":"SkeletonLoaderTextElement-SkeletonLoaderParagraph"}),t(Ln,{"data-test":"SkeletonLoaderTextElement-SkeletonLoaderParagraph"})]})})},Po=r.memo(e=>{var c,h;const{isLoading:a}=Ct(),[n,o]=r.useState((c=e.textEditor)==null?void 0:c.initialValue),{lastRerenderEvent:i}=Ot(),[s,l]=r.useState(i);r.useEffect(()=>{var p;s!==i&&(o((p=e.textEditor)==null?void 0:p.initialValue),l(i))},[(h=e.textEditor)==null?void 0:h.initialValue,i,s]);const d=p=>{var b,f;const g=Ye.clone(p);(f=(b=e.textEditor)==null?void 0:b.onContentChange)==null||f.call(b,g)};return a?t(Vp,{"data-test":"TextElement-SkeletonLoaderTextElement"}):t(Xe,{...e,"data-test":"TextElement-ElementWrapper",children:t(In,{...e.isCustomPreview?void 0:{...e.textEditor},initialValue:n,onContentChange:d,"data-test":"TextElement-RichTextEditor"})})}),Up=()=>t(ve,{"data-test":"SkeletonLoaderMessageElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderMessageElement-StyledFlexColumn",children:[t(dr,{"data-test":"SkeletonLoaderMessageElement-SkeletonLoaderHeaderSubElement"}),m(Je,{gap:24,fullWidth:!0,"data-test":"SkeletonLoaderMessageElement-StyledFlexRow",children:[t(ae,{w:116,h:16,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderMessageElement-SizedSkeleton"})]})]})}),Ao=[{label:C("noumena.message.my_conversations"),key:"myconversation",type:"value",value:at.PROJECT_OWNER},{label:C("noumena.message.other_users_conversation"),key:"othersconversation",type:"value",value:at.PROJECT_OWNER_OTHERS}];function pr({placement:e}){const{flags:{noumEditor2:a}}=le(),{isNewConversation:n,isOthersConversations:o,setIsOthersConversations:i}=r.useContext(Mt),{setActiveConversationSid:s}=r.useContext(Tt),[l,d]=r.useState(at.PROJECT_OWNER);r.useEffect(()=>{const h=o?at.PROJECT_OWNER_OTHERS:at.PROJECT_OWNER;d(h)},[o]);const c=r.useCallback(h=>{h===at.PROJECT_OWNER_OTHERS?i(!0):i(!1),s(""),d(h)},[s,i]);return t(je,{hideIcons:!0,placement:e||"bottom-end",options:Ao,usePopStyle:!0,isAnimation:!1,containerStyle:{minHeight:"97px",padding:0,maxWidth:a?"250px":"unset"},onSelectOption:({value:h})=>c(h),optionsRenderer:(h,p)=>Ao.map(g=>m(Nl,{isBottomBorder:!0,onClick:()=>p(g),"data-test":"DropdownItemLayout",children:[t(Pl,{"data-test":"DropDownLabel",children:t(E,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"TSpan",children:g.label})}),t(Nn,{icon:t(L,{name:"radio_btn_m",size:12,color:g.value===l?"--icon-radiobutton-brand-primary-default":"--icon-radiobutton-inactive-default","data-test":"Icon"}),isChecked:g.value===l,"data-test":"Radiobox"})]},g.key)),"data-test":"Dropdown",children:({targetRef:h,toggle:p})=>t(X,{tertiary:!0,size:"small",icon:t(L,{name:"filters_m",size:16,color:"--icon-button-neutral-default","data-test":"Icon"}),onClick:p,ref:h,disabled:n,"data-test":"Button"})})}const Qp=u.div`
  padding: 16px;
  position: relative;
`,Lo=u.div`
  width: 100%;
  height: 100%;
  overflow: auto;
  display: flex;
  box-sizing: border-box;
  flex-direction: ${({isCollapse:e})=>e?"row":"column"};
  align-items: center;
  ${({justify:e})=>e?"justify-content: center;":void 0}
  @media ${ue.TABLET} {
    padding: ${({isCollapse:e})=>e?"15px 42px 16px 16px;":"0"};
  }
  ${({isCollapse:e})=>e&&de`
      padding: 16px;

      @media ${ue.MOBILE_L} {
        padding-right: 35px;
      }

      @media ${ue.LAPTOP} {
        padding: 16px 30px 24px 24px;
      }
    `};
`,jp=u.div`
  display: flex;
  flex-direction: row;
  padding-left: 22px;
  ${e=>e.isFlex?"flex: 1;":void 0}
`,qp=u.div`
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;

  div {
    margin-top: 2px;
  }
`,Xp=({onClick:e})=>{const{t:a}=G();return m(qp,{onClick:e,"data-test":"SeeAllButton-SeeAllMessages",children:[t(E,{font:"button-m",colorToken:"--text-button-brand-primary-default","data-test":"SeeAllButton-TSpan",children:a("noumena.chat.see_all_messages")}),t(L,{name:"chevron_small_right_m",size:24,color:"--icon-button-brand-secondary-default","data-test":"SeeAllButton-Icon"})]})};function hr(){var d;const{user:e}=ye(),{isMasterNoum:a,space:n}=ge(),{setConversationType:o,isOthersConversations:i}=r.useContext(Mt),s=((d=n==null?void 0:n.uid)==null?void 0:d._id)===(e==null?void 0:e._id),l=r.useMemo(()=>a?s?at.HOME_OWNER:at.HOME_USER:s?i?at.PROJECT_OWNER_OTHERS:at.PROJECT_OWNER:at.PROJECT_USER,[a,s,i]);return r.useEffect(()=>{o(l)},[l,o]),l}const an=()=>{const a=Wt()===gt.MOBILE,{isEditing:n,isNoumEditor2:o}=Rt(),i=hr(),{privateConversation:s,conversations:l,networkStatus:d,loading:c,count:h,totalCount:p,unreadCount:g,onFetchMore:b}=Xt.useConversationsList(i),f=!!s,x=d===bt.fetchMore,w=h<p,S=x?"loading":w?"hasNextPage":"end",y=i===at.HOME_USER,k=r.useMemo(()=>Ke([s,...l]),[l,s]),v=r.useMemo(()=>Ke(k.map(D=>D.__typename==="ConversationOutput"?D.cid:null)),[k]),T=n&&o&&v.length===0&&d===bt.ready,{isNewConversation:F,setIsNewConversation:P,isCollapse:_,setIsCollapse:M,viewMode:W,setViewMode:O,isNoumLayoutSmallViewMode:U,noumLayoutViewMode:Q}=r.useContext(Mt),{activeConversationSid:V,setActiveConversationSid:$}=r.useContext(Tt),q=r.useMemo(()=>_?a?5:11:a&&W===vt.DEFAULT||U?5:v.length,[_,a,W,U,v.length]),z=a&&W===vt.DEFAULT||U,I=r.useMemo(()=>v.slice(0,q),[v,q]),B=p-I.length,N=r.useCallback(D=>{$(D),M(!1),P(!1)},[$,M,P]);return r.useLayoutEffect(()=>{if(!(c||U)&&!F&&!V){if(i===at.HOME_USER&&!f)$(ea),M(!1);else if(v.length>0){const D=v[0];$(D||"")}}},[V,i,v,f,F,c,$,M,U]),{unreadCount:g,onFetchMore:b,handleItemClick:N,leftChannels:B,showSlicedConversations:z,showExampleConversation:T,noumLayoutViewMode:Q,infiniteStatus:S,loading:c,cids:v,isNewConversation:F,isCollapse:_,isHomeUserConversation:y,activeConversationSid:V,allConversations:k,cidsToRender:I,hasPrivateConversation:f,setViewMode:O,viewMode:W,isNoumLayoutSmallViewMode:U}},Gp=({isOpen:e,onClose:a})=>{const o=Re().width<qe.TABLET,{t:i}=G(),{handleItemClick:s,cids:l,onFetchMore:d,activeConversationSid:c,infiniteStatus:h}=an();return m(Ne,{open:e,size:Ve.L,onClose:a,testId:"chat-list-modal",disableBackdropClick:!0,style:{padding:o?"16px 0 0":8},enableCloseButton:!0,isFullScreen:o,noPaddingNoBorder:o,isScrollableContent:!0,"data-test":"ChatListModal-Modal",children:[t(Qe,{topPadding:14,bottomPadding:14,"data-test":"ChatListModal-ModalHeader",children:i("noumena.chat.conversations_modal.title")}),t(Ue,{style:{padding:0},noFooter:!0,"data-test":"ChatListModal-ModalBody",children:t(aa,{onFetchMore:d,status:h,width:"100%",scrollbarWidth:4,isSpinnerRelative:!0,"data-test":"ChatListModal-Infinite",children:l.map((p,g)=>t(Pn,{index:g,sid:p,isActive:p===c&&!o,isMarginRight:g!==l.length-1,onClick:s,size:o?"L":"S","data-test":`ChatListModal-ChatItem-${p}`},p))})})]})},Yp=()=>{const{openModal:e,closeModal:a,modalType:n}=Ca(),{isMasterNoum:o,isOwner:i}=ge(),{isNoumLayoutSmallViewMode:s,isNoumLayoutCompactViewMode:l}=r.useContext(Mt),d=!o&&i&&l,{cids:c,cidsToRender:h,setViewMode:p}=an(),g=()=>{if(s){e("chat-list-modal");return}p(vt.FULLCHAT)};return m(R,{fullWidth:!0,"data-test":"ChatFooter-Stack",children:[d&&t(R,{padding:"12px 8px","data-test":"ChatFooter-Stack",children:t(pr,{placement:"top-start","data-test":"ChatFooter-FilterDropDown"})}),t(R,{fullWidth:!0,justify:"center","data-test":"ChatFooter-Stack",children:c.length>h.length&&t(Xp,{onClick:g,"data-test":"ChatFooter-SeeAllButton"})}),n==="chat-list-modal"&&t(Gp,{isOpen:!0,onClose:a,"data-test":"ChatFooter-ChatListModal"})]})};function fr(){const{role:e,permissions:a}=Bu(),{flags:n}=le(),o=r.useCallback(c=>!!e&&e.isDefault&&e.name===c,[e]),i=r.useCallback(c=>!!e&&!e.isDefault&&e.name===c,[e]),s=r.useCallback((c,h,p)=>!n.elementPermission||!!a.find(g=>g.level===c&&g.elementType===h&&g.permissionIDs.includes(p)),[n.elementPermission,a]),l=r.useCallback((c,h)=>s(lo.Element,c,h),[s]),d=r.useCallback(c=>s(lo.Noum,null,c),[s]);return{hasDefaultRole:o,hasCustomRole:i,hasElementPermission:l,hasNoumPermission:d}}const Jp=u.div`
  ${({noumLayoutViewMode:e})=>e===$e.NOUMLAYOUTCOMPACT?void 0:"width: 100%;"}
  display: flex;
  align-items: center;
  gap: 12px;
`,Zp=r.forwardRef(({currentTitle:e=""},a)=>{const{flags:{noumEditor2:n}}=le(),{user:o}=ye(),{t:i}=G(),{isMasterNoum:s,isOwner:l}=ge(),{isMobile:d}=ot(),{hasElementPermission:c}=fr(),{isCollapse:h,setIsCollapse:p,isNewConversation:g,setIsNewConversation:b,viewMode:f,setViewMode:x,conversationType:w,noumLayoutViewMode:S,isNoumLayoutCompactViewMode:y}=r.useContext(Mt),{activeConversationSid:k,setActiveConversationSid:v}=r.useContext(Tt),{count:T}=Xt.useConversationsList(w),F=c(et.Messages,"create-new-message-conversation")||s,P=!k&&!l&&!s&&!g&&T===0,_=!h&&!s&&l&&!y,M=r.useMemo(()=>!De.isInactive(o)&&(!s||l),[s,l,o]),W=r.useCallback(Q=>{P?Q.preventDefault():p(!h)},[h,p,P]),O=r.useCallback(()=>{x(vt.DEFAULT)},[x]),U=r.useCallback(Q=>{Q.stopPropagation(),b(!0),v("")},[v,b]);return r.useLayoutEffect(()=>{p(h||P)},[P,h,p]),m(Jp,{ref:a,noumLayoutViewMode:S,"data-test":"ChatHeader-Wrapper",children:[f===vt.FULLCHAT?t(X,{"data-testid":"back-button",neutral:!0,size:"small",icon:t(L,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"ChatHeader-Icon"}),onClick:O,"data-test":"ChatHeader-Button"}):t(j,{children:!n&&t(X,{"data-testid":"collapse-button",tertiary:!0,icon:h?t(L,{name:"chevron_small_down_m",size:24,color:P?"--icon-button-neutral-disabled":"--icon-button-neutral-default","data-test":"ChatHeader-Icon"}):t(L,{name:"chevron_small_up_m",size:24,color:P?"--icon-button-neutral-disabled":"--icon-button-neutral-default","data-test":"ChatHeader-Icon"}),disabled:!!P,size:"small",onClick:W,"data-test":"ChatHeader-Button"})}),!y&&t(E,{font:"heading-xs-bold",colorToken:"--text-body-header-neutral-default","data-test":"ChatHeader-TSpan",children:e}),!y&&t(K,{isFlex:!0,"data-test":"ChatHeader-Spacer"}),_&&t(pr,{"data-test":"ChatHeader-FilterDropDown"}),M&&t(X,{"data-testid":"new-conversation-button",size:"small",disabled:!F,tooltipText:F?"":i("noumena.chat.no_permission.create_conversation_text"),tooltipPosition:d?"top-left":y?"top-right":"top-center",icon:t(L,{name:"add_s",size:16,color:n?"--icon-button-brand-secondary-default":"--icon-button-neutral-alt-default","data-test":"ChatHeader-Icon"}),primary:!n,secondary:n,onClick:U,"data-test":"ChatHeader-Button"})]})}),Kp=({isMobile:e,noumLayoutViewMode:a})=>{const{exampleConversation:n,exampleMessages:o}=Hn(),{setActiveConversationSid:i}=r.useContext(Tt);return r.useEffect(()=>{n!=null&&n.cid&&i(n.cid)},[n,n.cid,i]),t(oc,{index:0,sid:n.cid??"",isActive:!0,isMarginRight:!1,onClick:()=>{},size:e?"L":"S",author:"author",lastMessage:o[0],messages:o,title:"General",unread:0,users:[{_id:"example-user-id",placeholder:!1}],noumLayoutViewMode:a,"data-test":"ChatItemExample-ChatItemView"})},eh=({sid:e,isMarginRight:a=!0,onClick:n,size:o,users:i=[]})=>{const{user:s}=ye(),l=Xt.useConversationUnreadMessageCount({sid:e}),d=r.useMemo(()=>Ke(i.filter(c=>(c==null?void 0:c._id)!==(s==null?void 0:s._id)).map(c=>c&&Al(c))),[s==null?void 0:s._id,i]);return m(ic,{"data-testid":"chatavatar-wrapper",isMarginRight:a,onClick:()=>n(e),children:[t(rc,{users:d,size:o,"data-test":"CollapsedChatItem-ChatItemAvatar"}),l!==0&&t(lc,{children:t(yi,{text:`${l}`,"data-test":"CollapsedChatItem-Badge"})})]})},th=({sid:e=ea,isCollapsed:a=!1})=>{const{space:n}=ge(),o=Wt(),{setViewMode:i,setIsNewConversation:s}=r.useContext(wi),{activeConversationSid:l,setActiveConversationSid:d}=r.useContext(Tt),{setSelectedUsers:c}=r.useContext(Ya),h=De.getProfilePicture(n==null?void 0:n.uid),p=De.renderFullName(n==null?void 0:n.uid),g=r.useMemo(()=>e===l&&o!==gt.MOBILE,[l,o,e]),b=r.useCallback(()=>{n!=null&&n.uid&&(d(ea),c([n.uid]),i(vt.FULLCONVERSATION),s(!1))},[d,s,c,i,n==null?void 0:n.uid]);return r.useEffect(()=>{l===ea&&(n!=null&&n.uid)&&c([n.uid])},[l,c,n==null?void 0:n.uid]),a?null:m(sc,{"data-testid":"chatitem-testid",active:g,onClick:b,"data-test":"HomeOwnerChatItem-ChatItemWrapper",children:[t(dc,{"data-test":"HomeOwnerChatItem-AvatarWrapper",children:t(Yt,{"data-testid":"avatar-testid",url:h||"",size:"M","data-test":"HomeOwnerChatItem-Avatar"})}),t(cc,{"data-test":"HomeOwnerChatItem-Content",children:t(uc,{font:"body-m-bold",overflow:"ellipsis",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"HomeOwnerChatItem-TitleTSPan",children:p})})]})},gr=()=>{const{t:e}=G(),{activeConversationSid:a}=r.useContext(Tt);return t(R,{fullWidth:!0,align:"center",justify:"center",grow:!0,vertical:!0,padding:"32px 0","data-test":"ConversationEmptyState-Stack",children:a?t(it,{"data-test":"ConversationEmptyState-Spinner"}):t(E,{colorToken:"--text-placeholder-neutral-default",font:"body-m","data-test":"ConversationEmptyState-TSpan",children:e("noumena.chat.no_conversation_yet")})})},ah=()=>{const e=r.useRef(null),a=r.useRef(null),{t:n}=G(),o=Wt(),i=o===gt.MOBILE,s=o===gt.LAPTOP,{loading:l,cids:d,isNewConversation:c,isHomeUserConversation:h,isCollapse:p,showExampleConversation:g,activeConversationSid:b,noumLayoutViewMode:f,unreadCount:x,allConversations:w,handleItemClick:S,leftChannels:y,showSlicedConversations:k,infiniteStatus:v,onFetchMore:T,cidsToRender:F,hasPrivateConversation:P}=an();return l&&d.length===0?t(R,{justify:"center",align:"center",vertical:!0,grow:!0,"data-test":"ChatList-Stack",children:t(Qp,{"data-test":"ChatList-SpinnerContainer",children:t(it,{"data-test":"ChatList-Spinner"})})}):g?t(Kp,{noumLayoutViewMode:f,isMobile:i,"data-test":"ChatList-ChatItemExample"}):!c&&d.length===0&&f!==$e.NOUMLAYOUTCOMPACT&&(!h||p)?t(gr,{"data-test":"ChatList-ConversationEmptyState"}):p?m(Lo,{"data-testid":"chatlist-wrapper",isCollapse:!0,"data-test":"ChatList-ChatListWrapper",children:[t(E,{colorToken:x?"--link-card-brand-primary-default":"--text-body-neutral-default",font:"body-m",ref:a,"data-test":"ChatList-TSpan",children:n(i?"noumena.chat.new":"noumena.chat.new_messages",{count:x||n("noumena.chat.no")})}),t(jp,{ref:e,isFlex:!(i||s),"data-test":"ChatList-ChatListContent",children:w.map(_=>_.__typename==="ConversationOutput"?t(eh,{sid:_.cid??"",onClick:S,users:_.participants??[],"data-test":"ChatList-CollapsedChatItem"},_._id):null)}),!!y&&y>0&&m(E,{colorToken:"--text-tab-chips-neutral-default",font:"body-m","data-test":"ChatList-TSpan",children:["+",y]})]}):t(Lo,{"data-testid":"chatlist-wrapper","data-test":"ChatList-ChatListWrapper",children:k?t(R,{vertical:!0,fullWidth:!0,align:"center",overflow:"initial","data-test":"ChatList-Stack",children:F.map((_,M)=>t(Pn,{index:M,sid:_,isActive:_===b&&!i,isMarginRight:M!==F.length-1,onClick:S,size:i?"L":"S","data-test":`ChatList-ChatItem-${_}`},_))}):m(aa,{onFetchMore:T,status:v,width:"100%",scrollbarWidth:0,isSpinnerRelative:!0,"data-test":"ChatList-Infinite",children:[!b&&c&&t(mc,{"data-test":"ChatList-NewChatItem"}),h&&!P&&t(th,{isCollapsed:p,"data-test":"ChatList-HomeOwnerChatItem"}),F.map((_,M)=>t(Pn,{index:M,sid:_,isActive:_===b&&!i,isMarginRight:M!==F.length-1,onClick:S,size:i?"L":"S","data-test":`ChatList-ChatItem-${_}`},_))]})})},br=u.div`
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding: 0 16px 16px;
  display: flex;
  flex: 1;
  flex-direction: column;
  ${({isNoumLayoutSmallViewMode:e})=>e&&`
      padding: 0px;
      overflow: hidden;
    `}
`,xr=u.div`
  padding-right: 16px;
  flex: 1;
  overflow: auto;
  ${Qa}

  @media ${ue.TABLET} {
    padding-right: 0;
  }
`,nh=u.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px 0;
`,oh=u.div`
  padding-top: 8px;
`,ih=({isNoumLayoutSmallViewMode:e})=>{const{exampleMessages:a}=Hn();return t(br,{"data-testid":"conversionbody-wrapper",isNoumLayoutSmallViewMode:e,"data-test":"ConversationExampleBody-Wrapper",children:t(xr,{"data-test":"ConversationExampleBody-MessageListWrapper",children:t(aa,{scrollbarWidth:0,reverse:!0,grow:!0,style:{height:"100%",justifyContent:"flex-end"},"data-test":"ConversationExampleBody-Infinite",children:t(pc,{message:a[0],"data-test":"ConversationExampleBody-MessageItem"})})})})},rh=()=>{const{t:e}=G(),{user:a}=ye(),{isOwner:n,isMasterNoum:o}=ge(),{isOthersConversations:i,isNoumLayoutSmallViewMode:s}=r.useContext(Mt),{isEditing:l,isNoumEditor2:d}=Rt(),{activeConversationSid:c}=r.useContext(Tt),{ecLoading:h,selectedUsers:p,isConversationCreatable:g,createNewConversation:b,createHomeNoumNewConversation:f}=r.useContext(Ya),{setIsNewConversation:x}=r.useContext(wi),{conversation:w}=Xt.useConversation({sid:c}),{users:S}=Xt.useConversationDetails({sid:c}),{cids:y,noumLayoutViewMode:k}=an(),{sendMessage:v,sendFile:T,messages:F,isLoading:P}=Xt.useConversationMessages({sid:c}),_=l&&d&&F.length===0&&!P&&!h,M=!h,W=!h&&!c&&g,O=r.useMemo(()=>!i&&(c||g)&&!De.isInactive(a)&&(S.length===1?S[0].source!==null:!0),[c,g,i,a,S]),U=async(Q,V)=>{let $=w;g&&($?x(!1):$=o?await f():await b()),Ll(Q,4e3).forEach(z=>v(z,$)),V.forEach(z=>T(z,$))};return _?t(ih,{isNoumLayoutSmallViewMode:s,"data-test":"ConversationBody-ConversationExampleBody"}):y.length===0&&k===$e.NOUMLAYOUTCOMPACT&&!O?t(gr,{"data-test":"ConversationBody-ConversationEmptyState"}):m(br,{"data-testid":"conversionbody-wrapper",isNoumLayoutSmallViewMode:s,"data-test":"ConversationBody-Wrapper",children:[t(xr,{"data-test":"ConversationBody-MessageListWrapper",children:M&&t(hc,{"data-test":"ConversationBody-MessageList"})}),m(oh,{"data-test":"ConversationBody-MessageInputWrapper",children:[W&&m(nh,{"data-test":"ConversationBody-StartConversationMessage",children:[t(E,{font:"body-s",colorToken:"--text-placeholder-neutral-default","data-test":"ConversationBody-TSpan",children:c===ea?e("noumena.message.start_home_owner_conversation"):p.length===1?e("noumena.message.start_single_conversation",{name:`${p[0].firstName} ${p[0].lastName}`}):e("noumena.message.start_group_conversation")}),t(E,{font:"body-s",colorToken:"--text-placeholder-neutral-default","data-test":"ConversationBody-TSpan",children:!o&&!n&&e("noumena.message.start_disclaimer_to_connected_user")})]}),O&&t(vc,{onSendMessage:U,"data-test":"ConversationBody-MessageInput"})]})]})},lh=r.forwardRef((e,a)=>{var M,W;const{t:n}=G(),{user:o}=ye(),{spaceId:i,space:s}=ge(),l=Wt(),{selectedUsers:d,setSelectedUsers:c}=r.useContext(Ya),[h,p]=r.useState(""),{hasElementPermission:g}=fr(),b=g(et.Messages,"create-new-group-message-conversation"),{data:f,fetchMore:x,loading:w,networkStatus:S}=Bl({variables:{search:h,offset:0,limit:l===gt.MOBILE?Fl:Ol,activeUserOnly:!1,chamberId:i,type:Wl.Connected,filter:{includeNonMembers:!0,includeNoumOwner:!0},ownerID:((M=s==null?void 0:s.uid)==null?void 0:M._id)??""},fetchPolicy:"cache-and-network"}),y=((W=f==null?void 0:f.allUsers)==null?void 0:W.count)||0,k=r.useMemo(()=>Ye.uniqBy(Ke([f==null?void 0:f.user,...(f==null?void 0:f.allUsers.data)||[]].filter(O=>(O==null?void 0:O._id)!==(o==null?void 0:o._id))),"_id"),[o==null?void 0:o._id,f==null?void 0:f.allUsers.data,f==null?void 0:f.user]),v=r.useRef(null),T=r.useCallback(async()=>{x({variables:{offset:k.length}})},[x,k.length]),F=r.useCallback(O=>{c(O.filter(U=>U!==void 0))},[c]),P=r.useCallback(()=>{var O,U;(U=(O=v==null?void 0:v.current)==null?void 0:O.cancel)==null||U.call(O)},[v]);r.useImperativeHandle(a,()=>({cancel(){P()}}),[P]);const _=t(R,{padding:"12px","data-test":"NewConversationUserSelector-CustomOptionsContent-Stack",children:t(E,{font:"body-m",colorToken:"--text-tablecell-header-neutral-default","data-test":"NewConversationUserSelector-CustomOptionsContent-TSpan",children:n("noumena.chat.no_permission.create_group_conversation_text")})});return t(R,{align:"center",fullWidth:!0,"data-testid":"newconversation","data-test":"NewConversationUserSelector-Stack",children:t(fc,{ref:v,data:k,initialValue:d,CustomOptionsContent:d.length>0&&!b?_:null,multiselect:b,onSelectUsers:F,initLoading:w&&!k.length,loading:w&&S===bt.fetchMore,hasMore:k.length<y,onFetchMore:T,onSetSearch:p,"data-test":"NewConversationUserSelector-MessageUserPicker"})})}),sh=u.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
`,dh=u.div`
  padding: 8px;
  border-radius: 8px;
`,ch=u(R).attrs(e=>({...e,align:"center",fullWidth:!0}))``,uh=u(R).attrs(e=>({...e,align:"center",fullWidth:!0}))`
  cursor: pointer;
`,mh=()=>{var i;const{space:e}=ge(),a=De.getProfilePicture(e==null?void 0:e.uid),n=De.renderFullName(e==null?void 0:e.uid),o=(i=e==null?void 0:e.uid)==null?void 0:i.title;return t(ch,{"data-testid":"receiverprofile","data-test":"HomeOwnerConversationProfile-ProfileWrapper",children:m(uh,{"data-test":"HomeOwnerConversationProfile-ProfileInfo",children:[t(Yt,{"data-testid":"avatar-testid",url:a||"",size:"M","data-test":"HomeOwnerConversationProfile-Avatar"}),t(K,{width:16,"data-test":"HomeOwnerConversationProfile-Spacer"}),m(R,{vertical:!0,style:{overflow:"hidden"},"data-test":"HomeOwnerConversationProfile-Stack",children:[t(E,{font:"body-m",overflow:"ellipsis",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"HomeOwnerConversationProfile-TSpan",children:n}),t(E,{font:"body-s",colorToken:"--text-tablecell-body-neutral-default","data-test":"HomeOwnerConversationProfile-TSpan",children:o})]})]})})},ph=()=>{const e=r.useRef(null),{isMobile:a}=ot(),{isMasterNoum:n,isOwner:o}=ge(),{activeConversationSid:i,setActiveConversationSid:s}=r.useContext(Tt),{isNewConversation:l,viewMode:d,setViewMode:c,isNoumLayoutCompactViewMode:h}=r.useContext(Mt),p=hr(),{totalCount:g}=Xt.useConversationsList(p),{exampleUser:b}=Hn(),{isEditing:f,isNoumEditor2:x}=Rt(),w=f&&x&&g===0,S=r.useCallback(()=>{var y,k;c(vt.FULLCHAT),(k=(y=e==null?void 0:e.current)==null?void 0:y.cancel)==null||k.call(y),s("")},[s,c]);return m(R,{vertical:!0,fullWidth:!0,gap:16,"data-testid":"conversationheader-wrapper","data-test":"ConversationHeader-Stack",children:[l&&t(R,{fullWidth:!0,justify:a?"flex-start":"center","data-test":"ConversationHeader-Stack",children:t(E,{font:"heading-xs-bold",colorToken:"--text-modal-header-neutral-default","data-test":"ConversationHeader-TSpan",children:"Start a New Conversation"})}),m(sh,{"data-test":"ConversationHeader-Wrapper",children:[h&&!f&&g===0&&!l&&t(R,{vertical:!0,grow:!0,justify:"stretch",fullWidth:!0,align:"stretch","data-test":"ConversationHeader-Stack",children:t(E,{font:"heading-xs-bold",colorToken:"--text-modal-header-neutral-default","data-test":"ConversationHeader-TSpan",children:C("noumena.chambers.toolbox.element.messages")})}),d===vt.FULLCONVERSATION&&t(dh,{"data-testid":"back-button",onClick:S,"data-test":"ConversationHeader-ButtonView",children:t(L,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"ConversationHeader-Icon"})}),l?n?t(gc,{ref:e,"data-test":"ConversationHeader-NewHomeConversationUserSelector"}):t(R,{fullWidth:!0,vertical:!0,"data-test":"ConversationHeader-Stack",children:t(lh,{ref:e,"data-test":"ConversationHeader-NewConversationUserSelector"})}):n&&!o&&i===ea?t(mh,{"data-test":"ConversationHeader-HomeOwnerConversationProfile"}):w?t(bc,{title:"General",users:[b],isConversationBlocked:!1,"data-test":"ConversationHeader-ConversationProfileView"}):t(xc,{"data-test":"ConversationHeader-ConversationProfile"})]})]})},hh=u(R)`
  min-height: 42px;
  align-items: center;
`,fh=u(Ue)`
  padding: 0;
  height: 100%;
  flex: 1;
`,Bo={ModalHeader:hh,ModalBodyStyled:fh},gh=e=>{const n=Re().width<qe.TABLET,{isNewConversation:o,isNoumLayoutSmallViewMode:i,setIsNewConversation:s}=r.useContext(Mt),{activeConversationSid:l,setActiveConversationSid:d}=r.useContext(Tt),c=()=>{d(""),s(!1)};return m(Ne,{open:!!l||!!o&&!!i,size:Ve.L,onClose:c,testId:"noum-conversation-modal",disableBackdropClick:!0,isScrollableContent:!1,style:{padding:16,minHeight:300},enableCloseButton:!o,isFullScreen:n,"data-test":"ConversationModal-Modal",children:[t(Bo.ModalHeader,{children:e.ConversationHeader}),t(Bo.ModalBodyStyled,{noFooter:!0,children:e.ConversationBody})]})},Cr=de`
  z-index: 99;
  position: fixed;
  top: 0;
  width: 100vw;
  height: 100%;
  background: var(--bg-modal-neutral-alt-default);
`,bh=de`
  width: 100% !important;
`,xh=de`
  width: 56px !important;
`,Ch=de`
  width: 300px !important;
`,yh=u(R)`
  justify-content: center;
  align-items: center;
  padding: 4px;

  @media ${ue.LAPTOP} {
    padding: 12px;
  }
`,wh=u(ve)`
  position: relative;
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;
  overflow: visible;

  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,Sh=u.div`
  display: flex;
  flex-direction: column;
  width: 100%;

  ${({viewMode:e})=>e===vt.FULLCHAT?Cr:void 0}

  @media ${ue.TABLET} {
    width: ${({isCollapse:e})=>e?"100%":"313px"};
  }

  ${({noumLayoutViewMode:e})=>e===$e.NOUMLAYOUTSMALL?bh:e===$e.NOUMLAYOUTCOMPACT?xh:e===$e.NOUMLAYOUTBIG?Ch:void 0}
`,vh=u.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  border-left: 1px solid var(--bg-separator-neutral-default);
  overflow: hidden;

  ${({viewMode:e})=>e===vt.FULLCONVERSATION?Cr:de`
          display: none;
        `}

  @media ${ue.TABLET} {
    ${({isCollapse:e})=>e?de`
            display: none;
          `:de`
            display: flex;
            flex-direction: column;
          `};
  }

  ${({noumLayoutViewMode:e})=>e===$e.NOUMLAYOUTSMALL?`
        padding: 0px !important;
        border: none !important;
        width: 100%;
      `:void 0}
`,kh=u.div`
  z-index: 10;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: ${ks(Es("--bg-overlay-neutral-light"),.1)};
  border-radius: 0;

  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,Fo=u.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  border-bottom: 1px solid var(--bg-separator-neutral-default);
  padding: ${({noumEditor2:e})=>e?"0px":"16px"};

  @media ${ue.TABLET} {
    ${({isElement:e})=>e?de`
            height: 80px;
            padding: 22px 24px 16px;
          `:de`
            min-height: 80px;
            padding-right: 24px;
          `};
  }

  ${({noumLayoutViewMode:e})=>e===$e.NOUMLAYOUTCOMPACT?`padding : 0px !important; 
          height : 72px;
          width: 100%;
          justify-content: center;
        `:e===$e.NOUMLAYOUTSMALL?`
          border: none;
          min-height: 46px !important;
        `:void 0}
`,Oo=u.div`
  height: calc(100% - ${e=>e.headerHeight||72}px);
  display: flex;
  flex-direction: column;

  @media ${ue.TABLET} {
    max-height: 340px;

    ${({noumLayoutViewMode:e,footerHeight:a})=>e===$e.NOUMLAYOUTCOMPACT?`
          height: calc(340px + ${a||0}px);
          max-height: calc(340px + ${a||0}px)
      `:e===$e.NOUMLAYOUTSMALL?`
          max-height: none; 
        `:""}
  }

  ${({noumLayoutViewMode:e})=>e===$e.NOUMLAYOUTSMALL?"padding : 0px !important; width: 100%; ":void 0}
`,Eh=u.div`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 9px;
  border-bottom: 1px solid var(--bg-separator-neutral-default);
`,_h=r.forwardRef((e,a)=>{var w,S,y;const n=r.useRef(null),o=r.useRef(null),i=r.useRef(null),s=[((w=n.current)==null?void 0:w.scrollHeight)??0,((S=o.current)==null?void 0:S.scrollHeight)??0],{isEditing:l}=Rt(),d=((y=i==null?void 0:i.current)==null?void 0:y.scrollHeight)??0,{isCollapse:c,viewMode:h,isOthersConversations:p,noumLayoutViewMode:g,isNoumLayoutSmallViewMode:b,isNoumLayoutCompactViewMode:f}=r.useContext(Mt),{loading:x}=r.useContext(Ya);return m(wh,{ref:a,"data-testid":"mew-wrapper",id:e.id,"data-test":"ViewModeLayout-Wrapper",children:[x&&t(kh,{"data-testid":"mew-spinner","data-test":"ViewModeLayout-ConversationLoadingWrapper",children:t(it,{"data-test":"ViewModeLayout-Spinner"})}),m(Sh,{isCollapse:c,viewMode:h,noumLayoutViewMode:g,"data-testid":"mew-main-wrapper","data-test":"ViewModeLayout-MainWrapper",children:[t(Fo,{"data-testid":"msg-header-wrapper",isElement:!0,ref:n,noumLayoutViewMode:g,"data-test":"ViewModeLayout-HeaderWrapper",children:e.ElementHeader}),m(Oo,{headerHeight:s[0],isCollapse:c,noumLayoutViewMode:g,footerHeight:0,"data-test":"ViewModeLayout-BodyWrapper",children:[p&&!f&&t(Eh,{"data-test":"ViewModeLayout-InfoWrapper",children:t(E,{font:"body-s",colorToken:"--text-body-neutral-default","data-test":"ViewModeLayout-TSpan",children:C("noumena.message.other_users_conversation_notice")})}),e.ChatList,e.ChatFooter]})]}),g!==$e.NOUMLAYOUTSMALL&&m(vh,{isCollapse:c,viewMode:h,"data-testid":"mew-conversation-wrapper","data-test":"ViewModeLayout-ConversationWrapper",children:[t(Fo,{ref:o,"data-test":"ViewModeLayout-HeaderWrapper",children:e.ConversationHeader}),t(Oo,{headerHeight:s[1],isCollapse:c,noumLayoutViewMode:$e.NOUMLAYOUTCOMPACT,footerHeight:d,"data-test":"ViewModeLayout-BodyWrapper",children:e.ConversationBody})]}),b&&!l&&t(gh,{ConversationBody:e.ConversationBody,ConversationHeader:e.ConversationHeader,"data-test":"ViewModeLayout-ConversationModal"})]})}),Mh=r.forwardRef((e,a)=>{const{currentTitle:n}=e;return t(_h,{id:e.element._id||"",ref:a,ElementHeader:t(Zp,{currentTitle:n,"data-test":"MessageElementViewMode-ChatHeader"}),ChatList:t(ah,{"data-test":"MessageElementViewMode-ChatList"}),ChatFooter:t(Yp,{"data-test":"MessageElementViewMode-ChatFooter"}),ConversationHeader:t(ph,{"data-test":"MessageElementViewMode-ConversationHeader"}),ConversationBody:t(rh,{"data-test":"MessageElementViewMode-ConversationBody"}),"data-test":"MessageElementViewMode-ViewModeLayout"})}),Th=r.forwardRef((e,a)=>t(Xe,{ref:a,isBorder:!1,...e,"data-test":"MessageElementEditMode-ElementWrapper",children:t(yh,{justify:"center",align:"center","data-test":"MessageElementEditMode-EditModeWrapper",children:t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"MessageElementEditMode-TSpan",children:C("noumena.chat.edit_mode_message")})})})),Ih=r.forwardRef((e,a)=>{const{flags:{noumEditor2:n}}=le(),{isLoading:o}=Ct(),i=_s();return r.useEffect(()=>()=>i.clear(),[]),e.isEditing&&!n?t(Th,{...e,ref:a,"data-test":"MessageElement-MessageElementEditMode"}):o?t(Up,{"data-test":"MessageElement-SkeletonLoaderMessageElement"}):t(Cc,{"data-test":"MessageElement-ConversationViewProvider",children:t($l,{"data-test":"MessageElement-MessageElementProvider",children:t(yc,{"data-test":"MessageElement-TwilioClientProvider",children:t(wc,{"data-test":"MessageElement-ActiveConversationProvider",children:t(Sc,{"data-test":"MessageElement-NewConversationProvider",children:t(Mh,{...e,"data-test":"MessageElement-MessageElementViewMode"})})})})})})}),Nh=Ih;var yr=(e=>(e.DEFAULT="default",e.FULLDATA="full-data",e))(yr||{});const Ph={loading:!1,space:void 0,spaceId:void 0,isCollapse:!1,setIsCollapse:()=>{},viewMode:"default",setViewMode:()=>{}},wr=r.createContext(Ph),Ah=({children:e})=>{const{flags:{noumEditor2:a}}=le(),n=Wt(),{loading:o,spaceId:i,space:s}=ge(),[l,d]=r.useState(!0),[c,h]=r.useState("default"),p=r.useCallback(b=>{n===gt.MOBILE?h(b):h("default")},[n]);r.useEffect(()=>{n===gt.MOBILE&&h("full-data")},[n]),r.useEffect(()=>{n!==gt.MOBILE&&h("default")},[n]);const g=r.useMemo(()=>({loading:o,spaceId:i,space:s,isCollapse:l&&!a,setIsCollapse:d,viewMode:c,setViewMode:p}),[o,i,s,l,a,c,p]);return t(wr.Provider,{value:g,children:e})},Sr=()=>r.useContext(wr),vr=de`
  padding: 12px 16px !important;
`,Lh=de`
  z-index: 999;
  position: fixed;
  top: 0;
  width: 100vw;
  height: 100vh;
  background-color: var(--bg-body-neutral-alt-default);
`,Wo=u(R)`
  justify-content: center;
  align-items: center;
  padding: 4px;

  @media ${ue.LAPTOP} {
    padding: 12px;
  }
`,Bh=u(R)`
  display: flex;
  flex-direction: column;
  justify-content: start;
  padding: 16px;
  @media ${ue.LAPTOP} {
    padding: 16px;
  }
  ${({noumEditor2:e})=>e&&vr}
`,Fh=u(ve)`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;

  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,Oh=u.div`
  display: flex;
  flex-direction: column;
  width: 100%;

  ${({viewMode:e})=>e===yr.FULLDATA?Lh:void 0}

  @media ${ue.TABLET} {
    width: 100%;
  }
`,Wh=u.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 16px;

  @media ${ue.TABLET} {
    ${({isElement:e})=>e?de`
            // height: 80px;
            padding: 22px 24px 16px;
          `:de`
            min-height: 80px;
            padding-right: 24px;
          `};
  }

  ${({noumEditor2:e})=>e&&vr}
`,$h=u.div`
  height: fit-content;
  display: flex;
  flex-direction: column;
  padding: 20px;
  ${Si}
  ${({noumEditor2:e})=>e&&`
  padding:0px;
  border-radius: unset !important;
  `}
`,Rh=u.span`
  border-radius: ${({isCollapse:e})=>e?"16px":"16px 16px 0px 0px"};
  border: ${({isBorder:e})=>e&&"1px solid var(--border-card-neutral-highlighted)"};

  border-radius: ${({noumEditor2:e})=>e&&"unset"};
  ${({noumEditor2:e})=>e&&`border-top: 1px solid var(--border-card-neutral-highlighted);
    border-bottom: 1px solid var(--border-card-neutral-highlighted);
  `}
`,zh=u.span`
  padding: 16px 0px;
  border-radius: 0px 0px 16px 16px;
  height: fit-content;
  border: ${({isBorder:e})=>e?"1px solid var(--border-card-neutral-highlighted)":"none"};
  ${({hidden:e})=>e?"display: none;":""}
`,Hh=u(E)``,Dh=u(R)``,$o=u.div`
  font-size: 14px;
  font-weight: 400;
  font-style: normal;
  color: var(--text-button-brand-primary-default);
  font-family: var(--font-family);
  line-height: 22.4px;
  text-align: ${({textAlign:e})=>e||"center"};
`,Vh=u.div`
  font-size: 16px;
  font-weight: 500;
  color: var(--text-button-brand-primary-default);
  line-height: 16px;
  font-family: var(--font-button-medium-font);
  text-align: center;
  ${({disabled:e})=>e?"pointer-events: none;":""}
  &:hover {
    cursor: pointer;
    color: var(--text-button-brand-primary-hover);
  }
`,Uh=r.forwardRef((e,a)=>{var d,c;const{element:n,spaceId:o,isNoumEditor2:i}=e,{t:s}=G(),{subWalletData:l}=qi(o,n==null?void 0:n.tempStatus);return t(Xe,{isBorder:!1,...e,ref:a,"data-test":"WalletElementEditMode-ElementWrapper",children:m(j,{children:[t(Wo,{justify:"center",align:"center","data-test":"WalletElementEditMode-EditModeWrapper",children:t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"WalletElementEditMode-TSpan",children:n.status===_t.Published?`${s("noumena.money.money-detail.balanceLabel")}
                ${ta(Number(((d=l.subWalletBalance)==null?void 0:d.value)||0),(c=l==null?void 0:l.subWalletBalance)==null?void 0:c.currency,2)}`:s("noumena.chamber_view.walletEditUnPublishedBalanceMode")})}),(e.element.status===_t.Draft||e.element.tempStatus===_t.Unsaved)&&i&&t(Wo,{justify:"center",align:"center","data-test":"WalletElementEditMode-EditModeWrapper",children:t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"WalletElementEditMode-TSpan",children:s("noumena.chamber_view.walletEditUnpublishedMode")})})]})})}),Qh=()=>t(ve,{"data-test":"SkeletonLoaderWalletElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderWalletElement-StyledFlexColumn",children:[m(Je,{gap:12,justify:"space-between",fullWidth:!0,"data-test":"SkeletonLoaderWalletElement-StyledFlexRow",children:[t(kt,{"data-test":"SkeletonLoaderWalletElement-SkeletonLoaderElementHeader"}),m(Je,{gap:12,"data-test":"SkeletonLoaderWalletElement-StyledFlexRow",children:[t(ae,{w:118,h:40,r:8,"data-test":"SkeletonLoaderWalletElement-SizedSkeleton"}),t(ae,{w:118,h:40,r:8,"data-test":"SkeletonLoaderWalletElement-SizedSkeleton"})]})]}),m(Ge,{gap:12,fullWidth:!0,style:{border:"solid 1px var(--border-card-neutral-default)",padding:"8px",borderRadius:"16px"},align:"flex-start","data-test":"SkeletonLoaderWalletElement-StyledFlexColumn",children:[t(ae,{w:118,h:16,r:8,"data-test":"SkeletonLoaderWalletElement-SizedSkeleton"}),t(ae,{w:186,h:31,r:8,"data-test":"SkeletonLoaderWalletElement-SizedSkeleton"})]})]})}),jh=u(R)`
  background: var(--bg-card-neutral-alt-default);
  box-sizing: border-box;
  border-radius: 8px;
  padding-top: 20px;
  padding-left: 16px;
  padding-right: 16px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: row;
  gap: 16px;
  width: 100%;
  height: fit-content;
  border-bottom: 1px solid var(--bg-tablecell-neutral-alt-default);
  box-sizing: border-box;
`,qh=u.img`
  height: 40px;
  width: 40px;
`,Xh=u.div`
  width: 40px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  align-self: center;
`,Gh=u.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  width: 80%;
  overflow: hidden;
`,Ro=u.div`
  width: 100%;
  color: var(--text-tablecell-header-neutral-highlighted);
  font-size: var(--font-body-medium-size);
  font-weight: var(--font-link-large-weight);
  line-height: var(--font-link-xlarge-lineheight);
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  &:hover {
    overflow: visible;
    white-space: nowrap;
  }
`,Yh=u.div`
  width: 100%;
  color: var(--text-tablecell-body-neutral-default);
  font-size: var(--font-footnote-size);
  font-weight: var(--font-footnote-regular-weight);
  line-height: var(--font-link-xlarge-lineheight);
  text-align: left;
`,Jh=u.div`
  font-family: var(--font-family);
  align-self: center;
  color: ${e=>e.isTransactionWithOwnAccounts?"var(--text-tablecell-header-neutral-default)":"var(--text-tablecell-header-neutral-highlighted)"};
  font-size: 14px;
  font-weight: 600;
  line-height: 22.4px;
  justify-content: flex-end;
`,Zh=u.div`
  height: 100%;
  display: flex;
  align-items: center;
  align-self: center;
  color: var(--text-tablecell-header-neutral-highlighted);
  font-size: var(--font-link-medium-size);
  font-weight: var(--font-link-xlarge-weight);
  line-height: var(--font-link-xlarge-lineheight);
  justify-content: flex-end;
`,Kh=e=>{const{t:a}=G(),[n,o]=r.useState(1),{data:i,loading:s}=vi({fetchPolicy:"network-only",variables:{filter:{chamberId:e.chamberId||"",userId:e.userId,endDate:new Date().toISOString().split("T")[0],startDate:"",accountId:e.connectedNoumWalletId,accountType:[Fa.SubWallet]},limit:10,page:n}}),l=r.useMemo(()=>{var h,p,g;return i!=null&&i.getConnectedChamberPayments&&((h=i==null?void 0:i.getConnectedChamberPayments)!=null&&h.data)?i==null?void 0:i.getConnectedChamberPayments:{data:(p=i==null?void 0:i.getConnectedChamberPayments)==null?void 0:p.data,count:(g=i==null?void 0:i.getConnectedChamberPayments)==null?void 0:g.count}},[i]),d=h=>{o(h)},c=Ye.groupBy(l==null?void 0:l.data,h=>kc(h==null?void 0:h.createdAt));return t(Ne,{enableCloseButton:!0,size:Ve.L,disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:()=>e.onClose(),open:e.open,"data-test":"TransactionWindow-Modal",children:s?t(j,{children:t(Ue,{align:"center","data-test":"TransactionWindow-ModalBody",children:t(X,{loading:!0,neutral:!0,"data-test":"TransactionWindow-Button"})})}):m(j,{children:[t(Qe,{"data-test":"TransactionWindow-ModalHeader",children:a("noumena.connected_noum_transactions")}),m(Ue,{hideScrollbar:!0,overflowY:"scroll","data-test":"TransactionWindow-ModalBody",children:[Object.keys(c).map(h=>m("div",{style:{width:"100%"},children:[t(Vd,{children:t(Ud,{children:t(E,{font:"body-s",colorToken:"--text-card-neutral-default","data-test":"TransactionWindow-TSpan",children:new Date().getUTCFullYear()===Number(h.split(",")[1])?h.split(",")[0]:h})})}),c[h].length>0&&c[h].map(p=>{var g,b,f,x,w;return m(jh,{"data-test":"TransactionWindow-Wrapper",children:[t(Xh,{"data-test":"TransactionWindow-ProfileWarpper",children:t(qh,{src:Hi,alt:"profile","data-test":"TransactionWindow-Profile"})}),t(K,{width:16,"data-test":"TransactionWindow-Spacer"}),m(Gh,{isMobile:!1,"data-test":"TransactionWindow-TransactionDetails",children:[m(Ro,{"data-test":"TransactionWindow-AccountName",children:[t("span",{style:{fontWeight:"400"},children:a("noumena.money.money-detail.viewStatements.from")})," ",`${((g=p==null?void 0:p.sourceDetail)==null?void 0:g.name)||""} ${((b=p==null?void 0:p.sourceDetail)==null?void 0:b.maskNumber)||""} ${((f=p==null?void 0:p.sourceDetail)==null?void 0:f.accountName)||""}`]}),t(K,{height:2,"data-test":"TransactionWindow-Spacer"}),m(Ro,{"data-test":"TransactionWindow-AccountName",children:[t("span",{style:{fontWeight:"400"},children:a("noumena.money.money-detail.viewStatements.to")})," ",`${((x=p==null?void 0:p.destinationDetail)==null?void 0:x.name)||""}  ${((w=p==null?void 0:p.destinationDetail)==null?void 0:w.accountName)||""}`]}),t(K,{height:2,"data-test":"TransactionWindow-Spacer"}),m(Yh,{"data-test":"TransactionWindow-Account",children:[`${Ec(p==null?void 0:p.paymentDate)} `,p==null?void 0:p.transactionReason]})]}),t(Zh,{"data-test":"TransactionWindow-AmountWrapper",children:m(Jh,{isTransactionWithOwnAccounts:!1,"data-test":"TransactionWindow-TransactionAmout",children:[Number(p==null?void 0:p.amount)<0?"-":"+",ta(Math.abs(Number(p==null?void 0:p.amount)),p==null?void 0:p.currency,2)]})})]},p==null?void 0:p.id)}),t(K,{height:8,"data-test":"TransactionWindow-Spacer"})]},h)),Ye.isEmpty(c)&&t(E,{font:"body-l",colorToken:"--text-modal-neutral-default",textAlign:"center","data-test":"TransactionWindow-TSpan",children:a("noumena.money.noTransactions")}),(l==null?void 0:l.count)>10&&m("div",{style:{alignSelf:"center"},children:[t(K,{height:4,"data-test":"TransactionWindow-Spacer"}),t(Qn,{currentPage:n,pageSize:10,totalCount:l.count,onPageChange:d,"data-test":"TransactionWindow-Pagination"})]})]})]})})},ef=u.div`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  ${({flexDirection:e})=>e&&`flex-direction: ${e};`}
`,tf=u(R)`
  display: flex;
  ${({isFullHeader:e})=>e&&`
  display:grid;
  grid-template-columns: 1fr 1fr;
  `}
`,af=u.div`
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  ${({isBackground:e})=>e&&`
      background-color: var(--bg-button-neutral-default);
      :hover {
       background-color: var(--bg-button-neutral-alt-hover);
      }
  `}
`,nf=u.div`
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
`,zo=(e,a)=>a?t(L,{name:e,size:24,color:"--icon-button-brand-secondary-default","data-test":"IconForButton-Icon"}):void 0,of=r.forwardRef(({currentTitle:e="",refresh:a,isOwner:n,subWalletId:o,columnWidth:i,element:s,isEditing:l,spaceId:d},c)=>{var Z;const{flags:{noumEditor2:h}}=le(),{t:p}=G(),{user:g}=ye(),{space:b}=ge(),[f,x]=r.useState(!1),[w,{loading:S,error:y}]=Rl(),[k]=zl(),[v]=Hl({fetchPolicy:"cache-and-network"}),[T]=Dl({fetchPolicy:"cache-and-network"}),[F,{loading:P}]=so({fetchPolicy:"cache-and-network"}),[_,{loading:M}]=Vl({fetchPolicy:"cache-first"}),[W,{loading:O}]=ki({fetchPolicy:"cache-first"}),[U]=so({fetchPolicy:"cache-first"}),V=Wt()===gt.MOBILE,{isCollapse:$,setIsCollapse:q}=Sr(),{addToast:z}=st(),{isUnregistered:I}=ye(),B=r.useMemo(()=>(V||i<475&&h)&&!l,[i,l,V,h]);r.useEffect(()=>{async function ee(){var J;try{const{data:ce}=await F();((J=ce==null?void 0:ce.getWalletBalance)==null?void 0:J.status)===ql.CUSTOMER_NOT_CREATED&&await w()}catch(ce){lt(ce,{tags:{section:"createCustomerPayeeMutationPayeeInNoumena"}}),ce instanceof Error?z("error","none",`${ce.message}`):z("error","none","Unexpected error occured")}}I&&ee()},[z,F,w,I]);const N=r.useCallback(()=>{q(!$)},[$,q]),[D,ie]=r.useState({open:!1,modalType:fa.PAY,defaultFrom:void 0,defaultTo:void 0}),{id:te=""}=Vn(),[H]=Ul(),se=r.useCallback(async()=>{var J,ce;let ee=!0;return I?await W({variables:{targetUserId:((J=b==null?void 0:b.uid)==null?void 0:J._id)||""},onError:re=>{re instanceof Error&&(ee=!1,z("error","none",p("noumena.container.close_subwallet.error_checkwalletquery")))},onCompleted:re=>{var Ee;(Ee=re==null?void 0:re.checkWalletExists)!=null&&Ee.target||(z("error","none",p("noumena.container.close_subwallet.error_receiver")),ee=!1)}}):await _({variables:{sourceUserId:(g==null?void 0:g._id)||"",targetUserId:((ce=b==null?void 0:b.uid)==null?void 0:ce._id)||"",noumId:te},onError:re=>{re instanceof Error&&(ee=!1,z("error","none",p("noumena.container.close_subwallet.error_checkwalletquery")))},onCompleted:re=>{var Ee,Le;(Ee=re==null?void 0:re.checkWalletExistDetail)!=null&&Ee.sourceWallet||(z("error","none",p("noumena.container.close_subwallet.error_owner")),ee=!1),(Le=re==null?void 0:re.checkWalletExistDetail)!=null&&Le.targetWallet||(z("error","none",p("noumena.container.close_subwallet.error_receiver")),ee=!1)}}),ee},[z,_,W,te,I,(Z=b==null?void 0:b.uid)==null?void 0:Z._id,g==null?void 0:g._id,p]),Y=r.useCallback(async ee=>{await U({onError:J=>{J instanceof Error&&z("error","none",p("noumena.container.close_subwallet.error_checkwalletquery"))},onCompleted:J=>{var ce;((ce=J==null?void 0:J.getWalletBalance)==null?void 0:ce.noumenaStatus)===Ql.APPROVED?ie({open:!0,modalType:ee,defaultFrom:void 0,defaultTo:void 0}):z("error","none",p("noumena.container.close_subwallet.error_owner"))}})},[z,U,p]),Me=r.useCallback(async()=>{var Ee,Le,He,he;if(I&&y){z("error","none","Failed to create customer");return}if(!await se())return;x(!0);const ee=await Promise.all([H({fetchPolicy:"cache-first",variables:{chamberId:te}}),v(),T({variables:{input:{self:!0,limit:100,page:1}}})]),J=(Ee=ee[0].data)==null?void 0:Ee.getSubWalletBalance,re=(((Le=ee[1].data)==null?void 0:Le.getCustomerPayeeList)||[]).findIndex(be=>(be==null?void 0:be.accountId)===(J==null?void 0:J.id));try{let be;re===-1&&(be=await k({variables:{input:{masterWalletId:(J==null?void 0:J.masterWalletId)||"",accountId:(J==null?void 0:J.id)||""}}})),!be||(he=(He=be==null?void 0:be.data)==null?void 0:He.createCustomerPayee)!=null&&he.message?ie({open:!0,modalType:fa.PAY,defaultFrom:I?"PAY_BY_CARD":void 0,defaultTo:(J==null?void 0:J.id)||""}):z("error","none","Failed to add payee")}catch(be){lt(be,{tags:{section:"createCustomerPayeeMutationPayeeInNoumena"}}),be instanceof Error?z("error","none",`${be.message}`):z("error","none","Unexpected error occured")}x(!1)},[I,y,H,te,v,T,z,k,se]),oe=n||D==null?void 0:D.defaultTo,[ke,Pe]=r.useState(!1),[ze,xe]=r.useState(!1),ne=()=>{Pe(!1)},Te=()=>{xe(!1)},Se=r.useMemo(()=>i&&i<=jl.BIG_700PX?"70%":"fit-content",[i]),pe=r.useMemo(()=>V?"100%":"65%",[V]);return m(nf,{"data-test":"WalletHeader-ParentWrapper",children:[m(ef,{ref:c,flexDirection:B?"column":"row","data-test":"WalletHeader-Wrapper",children:[m(R,{fullWidth:!Se,maxWidth:h?Se:pe,gap:h?0:12,align:"center","data-test":"WalletHeader-Stack",children:[I||h?void 0:t(af,{"data-testid":"collapse-button",onClick:N,isBackground:!0,"data-test":"WalletHeader-ButtonView",children:$?t(L,{name:"chevron_small_down_m",size:24,color:"--icon-button-neutral-default","data-test":"WalletHeader-Icon"}):t(L,{name:"chevron_small_up_m",size:24,color:"--icon-button-neutral-default","data-test":"WalletHeader-Icon"})}),t(E,{font:"heading-xs-bold",colorToken:"--text-body-header-neutral-default",overflow:"ellipsis","data-test":"WalletHeader-TSpan",children:e})]}),l?null:m(tf,{gap:8,fullWidth:B,isOwner:n,isFullHeader:n,"data-test":"WalletHeader-HeaderButtonsWrapper",children:[n&&t(X,{secondary:!0,icon:zo("transfer_m",!h),size:"full_small",primary:!0,onClick:()=>{Y(fa.TRANSFER)},"data-test":"WalletHeader-Button",children:p("noumena.subWalletHeader.Transfer")}),t(X,{secondary:!0,icon:zo("send_with_m",!h),loading:f||S||P||M||O,size:"full_small",primary:!0,onClick:()=>{n?Y(fa.PAY):Me()},"data-test":"WalletHeader-Button",children:p("noumena.subWalletHeader.Pay")})]})]}),D.open&&t(Di,{open:D.open,handleClose:()=>{ie({...D,open:!1}),a==null||a()},type:D.modalType,defaultAccountID:n?o:D.defaultFrom,defaultPayeeID:oe,defaultWalletPayee:D.walletPayee,isDestinationDropdownDisabled:!!D.walletPayee||!!oe,hideToDropdownIcon:I,"data-test":"WalletHeader-TransactionModal"}),t(Ad,{spaceId:d,elementId:s._id||"",isOpen:ke,handleClose:ne,setShowNonZeroWalletModal:xe,"data-test":"WalletHeader-CloseWallet"}),t(Ld,{isOpen:ze,handleClose:Te,"data-test":"WalletHeader-NonZeroWalletModal"})]})}),rf=u(R)`
  width: 100%;
  height: 102px;
  border-bottom: 1px solid var(--bg-tablecell-neutral-alt-default);
  box-sizing: border-box;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  padding: 20px 0px;
  gap: 16px;
`,lf=u(R)``,sf=u.img`
  height: 40px;
  width: 40px;
`,df=u.div`
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  width: 40px;
`,cf=u.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  width: 80%;
  overflow: hidden;
`,Ho=u.div`
  width: 100%;
  color: var(--text-tablecell-header-neutral-highlighted);
  font-size: var(--font-body-medium-size);
  font-weight: var(--font-link-large-weight);
  line-height: var(--font-link-xlarge-lineheight);
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  &:hover {
    overflow: visible;
    white-space: nowrap;
  }
`,uf=u.div`
  width: 80%;
  color: var(--text-card-neutral-default);
  font-size: var(--font-footnote-size);
  font-weight: var(--font-footnote-regular-weight);
  line-height: var(--font-link-xlarge-lineheight);
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,mf=u.div`
  height: 100%;
  display: flex;
  align-items: center;
  align-self: flex-end;
  float: right;
  color: var(--text-tablecell-header-neutral-highlighted);
  font-size: var(--font-link-medium-size);
  font-weight: var(--font-link-xlarge-weight);
  line-height: var(--font-link-xlarge-lineheight);
  justify-content: flex-end;
  width: ${e=>e.isMobile?"20%":"100%"};
  ${({noumEditor2:e})=>e&&"width:67px;"}}
`,Do=({sourceDetail:e,destinationDetail:a,paymentDate:n,amount:o,transactionReason:i,currency:s,hideTo:l=!1,columnWidth:d})=>{const{flags:{noumEditor2:c}}=le(),h=f=>{if(!f)return"";const x=new Date(Number(f));let w=x.getHours();const S=x.getMinutes(),y=w>=12?"PM":"AM";w%=12,w=w||12;const k=`0${S}`.slice(-2);return`${w}:${k} ${y}`},{t:p}=G(),g=Wt(),b=r.useMemo(()=>c&&d?d-100-32:void 0,[d,c]);return m(R,{fullWidth:!0,vertical:!0,padding:"0 16px","data-test":"TransactionCard-Stack",children:[m(rf,{justify:"space-between","data-test":"TransactionCard-Wrapper",children:[m(lf,{gap:16,fullWidth:!b,align:"center",maxWidth:b,"data-test":"TransactionCard-TransactionContent",children:[t(df,{"data-test":"TransactionCard-ProfileWarpper",children:t(sf,{src:Hi,alt:"profile","data-test":"TransactionCard-Profile"})}),m(cf,{"data-test":"TransactionCard-TransactionDetails",children:[m(Ho,{"data-test":"TransactionCard-AccountName",children:[t("span",{style:{fontWeight:"400"},children:p("noumena.money.money-detail.viewStatements.from")})," ",`${(e==null?void 0:e.name)||""} ${(e==null?void 0:e.maskNumber)||""} ${(e==null?void 0:e.accountName)||""}`]}),!l&&m(Ho,{"data-test":"TransactionCard-AccountName",children:[t("span",{style:{fontWeight:"400"},children:p("noumena.money.money-detail.viewStatements.to")})," ",`${(a==null?void 0:a.name)||""}  ${(a==null?void 0:a.accountName)||""}`]}),m(uf,{"data-test":"TransactionCard-Account",children:[`${h(n)} `,i]})]})]}),m(mf,{isMobile:gt.MOBILE===g,noumEditor2:c,"data-test":"TransactionCard-TransactionAmout",children:[Number(o)<0?"-":"+",ta(Math.abs(Number(o)),s,2)]})]}),t(Xl,{fullWidth:!0,noMargin:!0,"data-test":"TransactionCard-Separator"})]})},pf=r.forwardRef((e,a)=>{var z,I,B,N,D,ie,te;const{flags:{noumEditor2:n}}=le(),{spaceId:o,currentTitle:i,element:s,isOwner:l,isEditing:d}=e,{space:c}=ge(),{columnWidth:h}=Rt(),{id:p=""}=Vn(),[g,b]=r.useState({}),f=r.useRef(Sa(new Date,"yyyy-MM-dd")),[x,w]=r.useState(!1),{isCollapse:S}=Sr(),{t:y}=G(),{subWalletData:k,refetch:v}=qi(o,s==null?void 0:s.status),T=(c==null?void 0:c.connectionRole)==="FAVORITE",{data:F}=Zo({variables:{chamberId:(c==null?void 0:c._id)||""},skip:l||!T}),P=((z=F==null?void 0:F.getSubWalletBalance)==null?void 0:z.id)??void 0,_=(I=F==null?void 0:F.getSubWalletBalance)==null?void 0:I.amount,{data:M,refetch:W}=vi({variables:{filter:{chamberId:p||"",userId:((B=c==null?void 0:c.uid)==null?void 0:B._id)||"",endDate:f.current,startDate:"",accountId:P,accountType:[Fa.SubWallet]},limit:2,page:1},skip:l}),O=((N=M==null?void 0:M.getConnectedChamberPayments)==null?void 0:N.data)??[];r.useEffect(()=>{k!=null&&k.id&&b({endDate:f.current,startDate:"",accountId:`${k.id}`,accountType:[Fa.SubWallet]})},[k.id]);const{transactionData:U,refresh:Q}=_c({filter:g,limit:2,page:1,disabled:S||!l||n&&d&&s.status!==_t.Published}),V=wa(),$=r.useCallback(async()=>{d||(l?V(`/view-transactions/${Fa.SubWallet}/${k.id}`):w(!0))},[d,l,V,k.id]),q=r.useCallback(()=>{w(!1)},[]);return k!=null&&k.loading?t(Qh,{"data-test":"WalletElementViewMode-SkeletonLoaderWalletElement"}):t(Fh,{"data-testid":"mew-wrapper",ref:a,id:s._id||"","data-test":"WalletElementViewMode-Wrapper",children:m(Oh,{"data-testid":"mew-main-wrapper","data-test":"WalletElementViewMode-MainWrapper",children:[t(Wh,{isElement:!0,noumEditor2:n,"data-test":"WalletElementViewMode-HeaderWrapper",children:t(of,{...e,subWalletId:k.id||"",spaceId:o,currentTitle:i,refresh:()=>{v(),l?Q():W()},isOwner:l,"data-test":"WalletElementViewMode-WalletHeader"})}),!k.loading&&m($h,{isCollapse:S,headerHeight:0,noumEditor2:n,"data-test":"WalletElementViewMode-BodyWrapper",children:[t(Rh,{isBorder:!n,isCollapse:S,noumEditor2:n,"data-test":"WalletElementViewMode-WrapperChildContainer",children:(l||T)&&m(Bh,{noumEditor2:n,"data-test":"WalletElementViewMode-ViewModeWrapper",children:[t(E,{font:"footnote",colorToken:"--text-card-neutral-default","data-test":"WalletElementViewMode-TSpan",children:y("noumena.container.close_subwallet.view_availablebanlance")}),t(E,{font:"heading-s",colorToken:"--text-card-neutral-highlighted","data-test":"WalletElementViewMode-TSpan",children:l?ta(Number((D=k.subWalletBalance)==null?void 0:D.value),(ie=k==null?void 0:k.subWalletBalance)==null?void 0:ie.currency,2):T?ta(Number(_==null?void 0:_.value),_==null?void 0:_.currency,2):null}),e.isEditing&&s.status!==_t.Published&&t(E,{font:"footnote",colorToken:"--text-card-neutral-default","data-test":"WalletElementViewMode-TSpan",children:y("noumena.editor.wallet.publish_description")})]})}),m(zh,{isBorder:!n,hidden:S,"data-test":"WalletElementViewMode-WrapperRecentTransactions",children:[t(R,{fullWidth:!0,padding:"0 16px","data-test":"WalletElementViewMode-Stack",children:t(Hh,{font:"body-m-bold",colorToken:"--text-card-neutral-default","data-test":"WalletElementViewMode-TransactionHeading",children:y("noumena.container.close_subwallet.view_recentTransactions")})}),t(Dh,{vertical:!0,"data-test":"WalletElementViewMode-TransactionListsContainer",children:l?U.data.length>0&&U.data.map(H=>t(Do,{sourceDetail:H==null?void 0:H.sourceDetail,destinationDetail:H==null?void 0:H.destinationDetail,paymentDate:H==null?void 0:H.paymentDate,amount:H==null?void 0:H.amount,transactionReason:H==null?void 0:H.transactionReason,currency:H==null?void 0:H.currency,columnWidth:h,"data-test":"WalletElementViewMode-TransactionCard"},H==null?void 0:H.id)):O.length>0&&O.map(H=>t(Do,{sourceDetail:H==null?void 0:H.sourceDetail,destinationDetail:H==null?void 0:H.destinationDetail,paymentDate:H==null?void 0:H.paymentDate,amount:H==null?void 0:H.amount,transactionReason:H==null?void 0:H.transactionReason,currency:H==null?void 0:H.currency,hideTo:!l,columnWidth:h,"data-test":"WalletElementViewMode-TransactionCard"},H==null?void 0:H.id))}),U.data.length===0&&l&&t($o,{textAlign:"center",style:{padding:"0 16px"},"data-test":"WalletElementViewMode-SeeAllButton",children:t(E,{font:"footnote",colorToken:"--text-placeholder-neutral-default","data-test":"WalletElementViewMode-TSpan",children:y(n?"noumena.editor.wallet.no_transactions":"noumena.container.close_subwallet.noTransactionsFound")})}),O.length===0&&!l&&t($o,{textAlign:"center",style:{padding:"0 16px"},"data-test":"WalletElementViewMode-SeeAllButton",children:t(E,{font:"footnote",colorToken:"--text-placeholder-neutral-default","data-test":"WalletElementViewMode-TSpan",children:y(n?"noumena.editor.wallet.no_transactions":"noumena.container.close_subwallet.noTransactionsFound")})}),(!!U.data.length||!!O.length)&&t(R,{fullWidth:!0,justify:"center",padding:"16px 0px 0px 0px","data-test":"WalletElementViewMode-Stack",children:t(Vh,{onClick:()=>$(),disabled:d,"data-test":"WalletElementViewMode-LinkButton",children:y("noumena.container.subwallet.seeAllTransactions")})})]}),x&&t(Kh,{open:x,onClose:q,userId:((te=c==null?void 0:c.uid)==null?void 0:te._id)||"",connectedNoumWalletId:P,chamberId:p,"data-test":"WalletElementViewMode-TransactionWindow"})]})]})})}),hf=r.forwardRef((e,a)=>{const{flags:{noumEditor2:n}}=le();return e.isEditing&&!n?t(Uh,{...e,ref:a,"data-test":"WalletElement-WalletElementEditMode"}):t(Ah,{"data-test":"WalletElement-WalletElementProvider",children:t(pf,{...e,isOwner:e.isEditing&&n?!0:e.isOwner,ref:a,"data-test":"WalletElement-WalletElementViewMode"})})}),ff={isCollapse:!0,setIsCollapse:()=>{}},kr=r.createContext(ff),gf=({children:e})=>{const{flags:{noumEditor2:a}}=le(),[n,o]=r.useState(!0),i=r.useMemo(()=>({isCollapse:n&&!a,setIsCollapse:o}),[n,a]);return t(kr.Provider,{value:i,children:e})},Er=()=>r.useContext(kr),bf=u.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
`,xf=u.div`
  cursor: pointer;
  padding: 8px;
  color: var(--icon-button-neutral-default);
  border-radius: 8px;
  ${({isBackground:e})=>e&&`
      background-color: var(--bg-button-neutral-default);
      :hover {
       background-color: var(--bg-button-neutral-alt-hover);
      }
    `}
`,Cf="quick-questions-wrapper",yf="no-questions-added-yet-text",wf="no-questions-icon",Sf="add-first-question-button",vf="quick-questions-collapse-button",kf="quick-questions-edit-wrapper",Ef=r.forwardRef(({currentTitle:e="",openAddQuestionModal:a,isAllowed:n,selectedCustomPreviewTab:o,openQuestionCount:i},s)=>{const{flags:{noumEditor2:l}}=le(),{isCollapse:d,setIsCollapse:c}=Er(),h=r.useCallback(()=>{c(!d)},[d,c]);return m(bf,{ref:s,"data-test":"QuickQuestionsElementHeader-Wrapper",children:[!l&&t(xf,{"data-testid":vf,onClick:h,isBackground:!0,"data-test":"QuickQuestionsElementHeader-ButtonView",children:t(L,{name:d?"chevron_small_down_m":"chevron_small_up_m",color:"--icon-button-neutral-default",size:24,"data-test":"QuickQuestionsElementHeader-Icon"})}),t(E,{font:"heading-xs-bold",colorToken:"--text-body-header-neutral-default","data-test":"QuickQuestionsElementHeader-TSpan",children:e}),t(K,{isFlex:!0,"data-test":"QuickQuestionsElementHeader-Spacer"}),n&&(!l||i)?o!==wt.Preview&&t(X,{size:"small",type:"button",onClick:a,icon:t(L,{name:"add_s",size:16,color:l?"--icon-button-brand-secondary-default":"--icon-button-neutral-alt-default","data-test":"QuickQuestionsElementHeader-Icon"}),primary:!l,secondary:l,"data-test":"QuickQuestionsElementHeader-Button"}):null]})}),_f=u.div`
  display: flex;
  flex-direction: column;
  gap: 16px;

  ${({fullWidth:e})=>e&&"width: 100%;"}

  @media (max-width: ${me.MOBILE_MAX}) {
    padding-top: 0;
  }
`,Mf=({question:e,date:a,url:n,handleChangeTitle:o,handleChangeDate:i,onContentChange:s})=>m(_f,{"data-testid":"EditElementWrapper",fullWidth:!0,"data-test":"EditElement-StyledTabWrapper",children:[t(Da,{"data-testid":"tTextArea",placeholder:C("noumena.chamber.quick_question.question"),value:e,resize:!1,maxLength:250,onChange:l=>o(l.target.value),"data-test":"EditElement-TextArea"}),t(Gl,{minDate:new Date,required:!0,placement:"bottom-end",value:a&&new Date(a),label:C("noumena.chamber.quick_question.expiry_date"),onChange:i,disabled:{from:new Date(0),to:Ms(new Date,1)},"data-test":"EditElement-DatePicker"}),t(lr,{url:n,onContentChange:s,noumEditor2:!1,"data-test":"EditElement-ImageEditor"})]});function Tf({spaceId:e,resetData:a,closeModal:n,question:o,url:i,date:s,refetch:l}){const{addToast:d}=st(),[c,{loading:h}]=Yl(),p=r.useCallback(f=>{d("error","none",`${f}`)},[d]),g=r.useCallback(()=>{d("success","none",`${C("noumena.chamber_edit.add_question.question_saved")}`)},[d]),b=r.useCallback(async()=>{const f={body:o,spaceId:e,questionImage:i,expiryDate:(s==null?void 0:s.toDateString())??new Date().toDateString()};await c({variables:{input:f},onError:({networkError:x=null,graphQLErrors:w=[]})=>{const[S]=w,y=C("noumena.toast_error.text");p(S!=null&&S.message?`${y}: ${S==null?void 0:S.message}`:`${y}: ${x}`),lt(new Error((S==null?void 0:S.message)??x),{tags:{section:"createQuestionMutation"}})},onCompleted:()=>{g(),l&&l(),a(),n()}})},[o,e,i,s,c,p,g,l,a,n]);return{loading:h,handleSaveChanges:b}}const If=({isEmpty:e=!0,spaceId:a,refetch:n,onClose:o,isOpen:i})=>{const[s,l]=r.useState(""),[d,c]=r.useState(""),[h,p]=r.useState(),g=M=>{p(M)},b=M=>{c(M)},f=Dn({question:Lt().required().max(250),date:Ts().required()}).required(),{reset:x,trigger:w,setValue:S,formState:{isValid:y}}=oa({resolver:ia(f),mode:"all",reValidateMode:"onBlur"}),k=r.useCallback(()=>{x(),l(""),p(void 0),c("")},[x]),v=r.useCallback(()=>{k(),o()},[o,k]),{width:T}=Re(),{handleSaveChanges:F,loading:P}=Tf({spaceId:a,resetData:k,closeModal:v,question:s,url:d,date:h,refetch:n}),_=T>qe.LAPTOP-1;return r.useEffect(()=>{S("question",s),S("date",h??new Date),w("date"),w("question")},[s,h,S,w]),m(Ne,{open:i,onClose:v,testId:"add_question_modal",enableCloseButton:!0,size:Ve.XL,disableBackdropClick:!0,"data-test":"AddQuestion-Modal",children:[t(Qe,{"data-test":"AddQuestion-ModalHeader",children:C("noumena.chamber_edit.add_question")}),m(Ue,{tabletFlex:!0,isFullScreen:!_,minHeight:"60vh","data-test":"AddQuestion-ModalBody",children:[t(Mf,{question:s,date:h,url:d,handleChangeTitle:l,handleChangeDate:g,onContentChange:b,"data-test":"AddQuestion-EditElement"}),t(K,{height:8,"data-test":"AddQuestion-Spacer"})]}),m(xt,{gap:16,marginTop:16,"data-test":"AddQuestion-ModalFooter",children:[t(X,{"data-testid":"cancel_button",tertiary:!0,size:"full",onClick:v,"data-test":"AddQuestion-Button",children:C("noumena.cancel")}),t(X,{"data-testid":"ask_question_button",size:"full",primary:!e||y,disabled:!y||P,onClick:F,loading:P,"data-test":"AddQuestion-Button",children:C("noumena.chamber_edit.visibility.ask_question")})]})]})},Nf=u(R).attrs(e=>({...e,gap:16}))``,Pf=u.div``,Af=u.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  border-radius: 8px;
  background-color: ${({isMyAnswer:e})=>e?"var(--bg-comment-brand-secondary-default)":"var(--bg-comment-neutral-default)"};
`,Lf=u(R).attrs(e=>({...e,justify:"space-between"}))``,Bf=u(R).attrs(e=>({...e,align:"center",gap:12}))``;var Bt=(e=>(e.MY_ANSWERS="MyAnswers",e.MY_TIPS="MyTips",e.ALL_ANSWERS_MODAL="AllAnswersModal",e))(Bt||{});const Ff=e=>{const[a,n]=r.useState(!1),{userId:o,tips:i,showTipButton:s,onTip:l,onShowAllTips:d}=e,c=i.length>0,h=i.some(x=>{var w;return((w=x.tipBy)==null?void 0:w._id)===o}),p=h&&i.length===1?"noumena.quick_questions.users_tipped":"noumena.quick_questions.tipped_by_users",g=ta(Ye.sumBy(i,"amount"),Zl.Usd,2),b=r.useMemo(()=>{if(!c)return;let x=h?C("noumena.quick_questions.you"):De.renderFullName(i[0].tipBy);return i.length===2&&(x+=` and ${i.length-1} user`),i.length>2&&(x+=` and ${i.length-1} users`),x},[h,c,i]),f=r.useCallback(async()=>{n(!0),await(l==null?void 0:l()),n(!1)},[l]);return m(Bf,{"data-test":"TipsSection-TipWrapper",children:[s&&!h&&t(X,{loading:a,size:"small",neutral:!0,onClick:f,"data-test":"TipsSection-Button",children:C("noumena.quick_questions.tip")}),c&&t(E,{cursor:d?"pointer":void 0,font:"body-m",colorToken:"--text-card-neutral-default",onClick:d,"data-test":"TipsSection-TSpan",children:t(xa,{i18nKey:p,values:{users:b,tipAmount:g},components:{TipAmount:t(E,{font:"body-m-bold",colorToken:"--text-card-neutral-highlighted","data-test":"TipsSection-TSpan"})},"data-test":"TipsSection-Trans"})})]})},On=e=>{const{answer:a,type:n,isClosedQuestion:o,onTip:i,onShowAllTips:s}=e,{user:l}=ye(),{isConnected:d,isOwner:c}=ge(),{flags:{webTips:h}}=le(),{fullName:p,createdDateAtTime:g,avatarUrl:b,isAvatar:f,isAllAnswersModal:x,isMyAnswer:w}=r.useMemo(()=>{var k;return{fullName:De.renderFullName(a==null?void 0:a.user),createdDateAtTime:Jl(a.createdAt),avatarUrl:De.getProfilePicture(a.user),isAvatar:[Bt.ALL_ANSWERS_MODAL,Bt.MY_TIPS].includes(n),isAllAnswersModal:n===Bt.ALL_ANSWERS_MODAL,isMyAnswer:((k=a.user)==null?void 0:k._id)===(l==null?void 0:l._id)}},[a,n,l]),S=!(w||De.isUnregistered(l)||De.isUnregistered(a.user)),y=r.useCallback(()=>{S&&De.goToUserProfile(a.user)},[a.user,S]);return m(Nf,{fullWidth:!0,"data-test":"Answer-Wrapper",children:[f&&t(Pf,{"data-test":"Answer-AvatarWrapper",children:t(Yt,{url:b,size:"L",onClick:y,overridedIcon:n===Bt.MY_TIPS?w?"arrow_down_m":"arrow_up_m":void 0,"data-test":"Answer-Avatar"})}),m(Af,{isMyAnswer:w&&x,"data-test":"Answer-ContentWrapper",children:[m(Lf,{fullWidth:!0,"data-test":"Answer-HeaderWrapper",children:[t(E,{font:"body-m-bold",cursor:S?"pointer":"default  ",colorToken:w&&x?"--text-comment-brand-primary-default":"--text-comment-header-neutral-highlighted",onClick:y,"data-test":"Answer-TSpan",children:w?C(x?"noumena.quick_questions.you":"noumena.quick_questions.your_answer"):p}),x&&t(E,{font:"body-m",colorToken:w?"--text-timestamp-brand-primary-default":"--text-timestamp-neutral-default","data-test":"Answer-TSpan",children:g})]}),t(E,{font:"body-m",colorToken:"--text-comment-neutral-highlighted","data-test":"Answer-TSpan",children:a.body}),h&&t(Ff,{userId:(l==null?void 0:l._id)||"",tips:a.tipDetails||[],showTipButton:!o&&(d||c)&&!w&&x,onTip:i,onShowAllTips:s,"data-test":"Answer-TipsSection"})]})]})},Of=({question:e,onClose:a,isOpen:n,onShowAllTips:o})=>{var b;const[i,s]=r.useState(!1),[l,d]=r.useState([]),c=r.useMemo(()=>e.expiryDate?new Date(e.expiryDate).getTime()<new Date(_i()).getTime():!0,[e]),{refetch:h}=Kl({skip:!n,variables:{spaceId:(b=e.spaceId)==null?void 0:b._id,questionId:e._id,offset:0},onCompleted:f=>{var x;d(es(Ke((x=f==null?void 0:f.getQuestionAnswers)==null?void 0:x.data),"createdAt"))}}),[p]=ki({fetchPolicy:"network-only"}),g=r.useCallback(async f=>{var x;await p({variables:{targetUserId:(x=f.user)==null?void 0:x._id},onCompleted:w=>{var S,y,k;if((S=w.checkWalletExists)!=null&&S.success){s(f);return}if(!((y=w.checkWalletExists)!=null&&y.source)){alert("Display a modal for setting up my wallet");return}(k=w.checkWalletExists)!=null&&k.target||alert("Display a modal for notifying to receiver")}})},[p]);return m(Ne,{open:n,onClose:a,testId:"all_answer_modal",enableCloseButton:!0,size:Ve.XL,disableBackdropClick:!0,"data-test":"AllAnswerModal-Modal",children:[t(Qe,{"data-test":"AllAnswerModal-ModalHeader",children:C("noumena.chamber.quick_question.all_answers")}),m(Ue,{maxHeight:"100%",minHeight:"40vh","data-test":"AllAnswerModal-ModalBody",children:[t(E,{font:"body-xl-bold",colorToken:"--text-modal-header-neutral-default","data-test":"AllAnswerModal-TSpan",children:e.body}),t(K,{height:24,"data-test":"AllAnswerModal-Spacer"}),t(R,{gap:16,vertical:!0,fullWidth:!0,"data-test":"AllAnswerModal-Stack",children:l&&l.length>0&&(l==null?void 0:l.map(f=>t(On,{answer:f,type:Bt.ALL_ANSWERS_MODAL,isClosedQuestion:c,onTip:()=>g(f),onShowAllTips:()=>o==null?void 0:o(f),"data-test":"AllAnswerModal-Answer"},f._id)))})]}),i&&t(Di,{type:fa.TIP,open:!0,handleClose:()=>s(!1),onSuccessfulTransaction:h,answerForTip:i,"data-test":"AllAnswerModal-TransactionModal"})]})},Wf=({questionId:e,refetch:a})=>{const{addToast:n}=st(),o=r.useCallback(c=>{n("error","none",`${C("noumena.toast_error.text")}: ${c}`)},[n]),i=r.useCallback(()=>{n("success","none",C("noumena.chamber.quick_question.answer_published"))},[n]),[s,{loading:l}]=ts(),d=r.useCallback(async c=>{await s({variables:{questionId:e,answerBody:c},onError:({networkError:h=null,graphQLErrors:p=[]})=>{const[g]=p;o((g==null?void 0:g.message)??h),lt(new Error((g==null?void 0:g.message)??h),{tags:{section:"deleteQuestionMutation"}})},onCompleted:()=>{i(),a&&a()}})},[s,o,i,e,a]);return{loading:l,addAnswer:d}},Vo=u(E)`
  text-align: center;
`,$f=u.div`
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  width: 100%;
`,Rf=({questionId:e,isOpenModal:a,isClosedModal:n,loading:o,onClose:i,onConfirm:s})=>{const l=r.useCallback(()=>{s&&s()},[s]);return t(Ne,{isFullScreen:!1,open:a??!1,testId:"question_modal",onClose:i,disableBackdropClick:!0,"data-test":"QuestionModal-Modal",children:m(R,{gap:16,vertical:!0,maxWidth:327,align:"center",justify:"center","data-test":"QuestionModal-Stack",children:[t(Vo,{font:"heading-s-bold",colorToken:"--text-modal-header-neutral-default","data-test":"QuestionModal-StyledTSpan",children:n?C("noumena.quick_questions.modal.close_title"):C("noumena.quick_questions.modal.delete_title")}),t(Vo,{"data-testid":"confirm_text",font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"QuestionModal-StyledTSpan",children:n?C("noumena.quick_questions.modal.close_description"):C("noumena.quick_questions.modal.delete_description")}),m($f,{"data-test":"QuestionModal-ActionButtonContainer",children:[t(X,{primary:!0,size:"full",testId:"confirm_btn",disabled:!e||o,intent:n?void 0:"negative",onClick:l,loading:o,"data-test":"QuestionModal-Button",children:n?C("noumena.quick_questions.modal.close_confirm"):C("noumena.quick_questions.modal.delete_confirm")}),t(X,{tertiary:!0,onClick:i,size:"full",testId:"cancel_btn","data-test":"QuestionModal-Button",children:n?C("noumena.quick_questions.modal.close_cancel"):C("noumena.quick_questions.modal.delete_cancel")})]})]})})},zf=({questionId:e,isClosedModal:a,onClose:n,refetch:o})=>{const{addToast:i}=st(),s=r.useCallback(x=>{i("error","none",`${C("noumena.toast_error.text")}: ${x}`)},[i]),l=r.useCallback(()=>{i("primary","none",a?C("noumena.quick_questions.modal.close_success"):C("noumena.quick_questions.modal.delete_success")),o&&o(),n&&n()},[i,a,n,o]),[d,{loading:c}]=as(),[h,{loading:p}]=ns(),g=r.useMemo(()=>c||p,[c,p]),b=r.useCallback(async()=>{await d({variables:{questionId:e},onError:({networkError:x=null,graphQLErrors:w=[]})=>{const[S]=w;s((S==null?void 0:S.message)??x),lt(new Error((S==null?void 0:S.message)??x),{tags:{section:"deleteQuestionMutation"}})},onCompleted:l})},[d,s,l,e]),f=r.useCallback(async()=>{const x=new Date;x.setDate(x.getDate()-1),await h({variables:{questionId:e,input:{expiryDate:x.toDateString()}},onError:({networkError:w=null,graphQLErrors:S=[]})=>{const[y]=S;s((y==null?void 0:y.message)??w),lt(new Error((y==null?void 0:y.message)??w),{tags:{section:"updateQuestionMutation"}})},onCompleted:l})},[h,s,l,e]);return{loading:g,deleteQuestion:b,closeQuestion:f}},Hf=({questionId:e,isOwner:a,isQuestionOwner:n,isClosed:o,refetch:i})=>{const s=r.useMemo(()=>[],[]);r.useEffect(()=>{(n&&!o||!o&&a)&&s.push({label:C("noumena.quick_questions.close_question"),key:C("noumena.quick_questions.close_question"),type:"value",value:C("noumena.quick_questions.close_question"),icon:t(L,{size:24,name:"close_m",color:"--icon-tablecell-neutral-highlighted","data-test":"EllipsisMenu-Icon"}),labelColor:"--text-tablecell-header-neutral-highlighted"}),(a||n)&&s.push({label:C("noumena.quick_questions.delete_question"),key:C("noumena.quick_questions.delete_question"),type:"value",value:C("noumena.quick_questions.delete_question"),icon:t(L,{size:24,name:"delete_m",color:"--icon-tablecell-danger-primary-default","data-test":"EllipsisMenu-Icon"}),labelColor:"--text-tablecell-header-danger-primary-highlighted",intent:"danger"})},[n,o,a,s]);const[l,d]=r.useState(!1),[c,h]=r.useState(!1),p=()=>{d(!1),h(!1)},{loading:g,deleteQuestion:b,closeQuestion:f}=zf({questionId:e,isClosedModal:c,onClose:p,refetch:i}),x=()=>{c?f():b()},w=S=>{S===C("noumena.quick_questions.close_question")&&h(!0),d(!0)};return m(j,{children:[t(je,{placement:"bottom-end",onSelectOption:S=>{w(S.value)},options:s,isPopperStyle:!0,"data-test":"EllipsisMenu-Dropdown",children:({targetRef:S,toggle:y})=>t(X,{ref:S,size:"small",textOnly:!0,onClick:y,"data-test":"EllipsisMenu-Button",children:t(L,{size:24,name:"more_m",color:"--icon-button-brand-primary-default","data-test":"EllipsisMenu-Icon"})})}),t(Rf,{refetch:i,isClosedModal:c,questionId:e,onClose:p,onConfirm:x,isOpenModal:l,loading:g,"data-test":"EllipsisMenu-QuestionModal"})]})},Df=u.div`
  position: relative;
  transition: all 0.1s ease-in-out;
  display: flex;
  flex-direction: column;
  border: 1px solid var(--border-card-neutral-highlighted);
  border-radius: 8px;
  background: var(--bg-card-neutral-alt-default);
  padding: 16px;
  vertical-align: middle;
  overflow: hidden;
  ${({noumEditor2:e})=>e&&de`
      border: none;
      border-bottom: 1px solid var(--border-card-neutral-highlighted);
      border-radius: unset;
    `}
`,Vt=u.div`
  box-sizing: border-box;
  position: relative;
  display: flex;
  flex-direction: ${e=>e.vertical?"column":"row"};
  align-items: ${e=>e.vertical?"flex-start":"center"};
  ${e=>e.vertical&&"gap: 16px"};
  ${e=>e.gap&&`gap:${e.gap}`};
  width: ${e=>e.width?e.width:"100%"};
  height: 100%;
  ${({hasBackground:e})=>e&&"background-color:var(--bg-comment-neutral-default) "};
  ${({hasBorderRadius:e})=>e&&"border-radius:8px "};
  ${({hasPadding:e})=>e&&"padding:12px "};
`,Vf=u.div`
  max-width: ${({isMobile:e})=>e?"95%":"none"};
`,Uf=u.div``,Qf=u(X)`
  min-width: auto;
  position: relative;
  max-height: 40px;
  margin: -22px 0px 0px 10px;

  height: 30px;
  width: 30px;
  :disabled {
    background: transparent;
  }
  :hover,
  :active {
    background-color: transparent;
  }
  path {
    fill: ${e=>e.disabled?"var(--icon-button-neutral-disabled)":"var(--icon-button-neutral-pressed)"};
  }
`,Uo=u.img`
  width: ${e=>e.isCollapse?"120px":"100%"};
  height: ${e=>e.isCollapse?"90px":"auto"};
  object-fit: cover;
  border-radius: 8px;
`,jf=u.div`
  width: 100%;

  textarea {
    height: 40px;
    padding: 10px 12px;
    z-index: 1;
    ${({noumEditor2:e})=>e&&`
    padding: 8px 12px;
    margin:0px !important;
    `}
  }
  label {
    transform: translate(2px, -8px);
    z-index: 1;
    ${e=>e.value&&de`
        transform: translate(12px, -10px);
      `};
  }
  textarea:focus + fieldset + label {
    transform: translate(12px, -10px);
  }
  fieldset {
    z-index: 1;
  }
  textarea:focus + fieldset {
    z-index: 1;
  }
`,Qo=u.div`
  button {
    height: 24px;
    width: 24px;
    display: flex;
    margin-top: 2px;
    justify-content: center;
    align-items: center;
  }
  ${e=>e.isAbsolute&&de`
      position: absolute;
      top: 0;
      right: 0;
    `};
`,qf=u(E)`
  padding-top: 2px;
  ${e=>e.isActive&&"cursor: pointer;"}
`;u.div`
  position: absolute;
  right: 0;
  top: 0;
  margin-top: ${e=>e.isSpinner?"8px":"10px"};
  ${e=>e.isSpinner&&"margin-right: -5px"};
`;u.div`
  position: relative;
`;const Xf=u.form`
  width: 100%;
  position: relative;
  display: inline-flex;
  ${e=>e.disabled&&de`
      button[disabled]:hover {
        background-color: transparent;
      }
    `};
`;u.div`
  width: 100%;
  fieldset {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-width: -webkit-fill-available;
    padding: 16px;
    padding-top: 6px;
    border-radius: 16px;
    border: 1px solid var(--border-card-neutral-highlighted);
    background: var(--bg-card-neutral-default);
  }
`;const Gf=u(E)`
  padding-top: 2px;
`,Oa=5,bn=3,Yf=[{id:Ce.Active,name:Ce.Active,image:"terms_m",text:C("noumena.quick_questions.open"),labelSize:"small"},{id:Ce.Closed,name:Ce.Closed,image:"terms_m",text:C("noumena.quick_questions.closed"),labelSize:"small"},{id:Ce.Answered,name:Ce.Answered,image:"terms_m",text:C("noumena.quick_questions.my_answers"),labelSize:"small"},{id:Ce.Tipped,name:Ce.Tipped,image:"terms_m",text:C("noumena.quick_questions.my_tips"),labelSize:"small"}],Jf=r.forwardRef(({question:e,refetch:a,isCollapse:n,selectedCustomPreviewTab:o,selectedTab:i,isOwner:s},l)=>{const{flags:{noumEditor2:d}}=le(),{user:c}=ye(),{isConnected:h,isFollowing:p}=ge(),g=c==null?void 0:c._id,{questionerNoumId:b,questionId:f,name:x,closesDate:w,questionBody:S,profileImageURL:y,questionImageURL:k,isQuestionOwner:v,answerCount:T,hasOwnAnswer:F,answersWithTip:P,numMoreAnswers:_}=r.useMemo(()=>{var pe,Z,ee,J,ce,re,Ee,Le,He;const Se=Ke((pe=e==null?void 0:e.answers)==null?void 0:pe.filter(he=>{var be,ct,rt;return((be=he==null?void 0:he.tipDetails)==null?void 0:be.some(Jt=>{var zt;return((zt=Jt.tipBy)==null?void 0:zt._id)===g}))||((ct=he==null?void 0:he.user)==null?void 0:ct._id)===g&&!!((rt=he==null?void 0:he.tipDetails)!=null&&rt.length)}));return{questionerNoumId:(ee=(Z=e==null?void 0:e.user)==null?void 0:Z.chamber)==null?void 0:ee._id,questionId:(e==null?void 0:e._id)??"",name:g===((J=e==null?void 0:e.user)==null?void 0:J._id)?C("noumena.you"):`${(ce=e==null?void 0:e.user)==null?void 0:ce.firstName} ${(re=e==null?void 0:e.user)==null?void 0:re.lastName}`,closesDate:e==null?void 0:e.expiryDate,questionBody:e==null?void 0:e.body,profileImageURL:De.getProfilePicture(e==null?void 0:e.user),questionImageURL:e==null?void 0:e.questionImage,isQuestionOwner:g===((Ee=e==null?void 0:e.user)==null?void 0:Ee._id),answerCount:((Le=e==null?void 0:e.answers)==null?void 0:Le.length)??0,hasOwnAnswer:(He=e==null?void 0:e.answers)==null?void 0:He.find(he=>{var be;return((be=he==null?void 0:he.user)==null?void 0:be._id)===g}),answersWithTip:Se.filter((he,be)=>be<bn),numMoreAnswers:Se.length>bn?Se.length-bn:0}},[e,g]),M=r.useMemo(()=>w?Sa(new Date(w),"MM/dd/yyyy"):void 0,[w]),W=r.useMemo(()=>T>0,[T]),O=r.useMemo(()=>new Date(w).getTime()<new Date(_i()).getTime(),[w]),U=r.useMemo(()=>!O&&!v&&!F&&(s||!s&&(h||p)),[F,O,h,p,s,v]),[Q,V]=r.useState(!1),[$,q]=r.useState(!1),[z,I]=r.useState(""),B=()=>{W&&q(!0)},N=Re(),D=parseInt(me.MOBILE_MAX,10),ie=r.useCallback(()=>{const Se=s&&k&&n||v&&k&&!O,pe=n&&k,Z=!n&&k||!s&&!v||v&&O;return Se?"auto":pe?"130px":Z?"auto":"30px"},[O,n,s,v,k]),te=Dn({answer:Lt().required().max(600)}).required(),{handleSubmit:H,trigger:se,getValues:Y,setValue:Me,formState:{isValid:oe}}=oa({resolver:ia(te),mode:"all",reValidateMode:"onSubmit"});r.useEffect(()=>{Me("answer",z),se("answer")},[z,Me,se]);const{addAnswer:ke,loading:Pe}=Wf({questionId:f,refetch:a}),ze=()=>ke(Y("answer"));r.useEffect(()=>{V(N.width<D)},[D,N.width]);const xe=r.useCallback(()=>{!b||v||De.isUnregistered(c)||De.isUnregistered(e.user)||window.open(`/noum/${b}`,"_blank")},[v,e.user,b,c]),ne=r.useCallback(Se=>{q(!1),alert(Se?"Display the modal for tips per answer":"Display the modal for tips for all answers")},[]),Te=(i===Ce.Answered||i===Ce.Active)&&F;return m(Df,{ref:l,"data-testid":"tQuestionAnswer",noumEditor2:d,"data-test":"QuestionAnswer-Container",children:[m(Vt,{vertical:!0,"data-test":"QuestionAnswer-SubConatiner",children:[m(Vt,{"data-test":"QuestionAnswer-SubConatiner",children:[m(Vt,{vertical:!0,"data-test":"QuestionAnswer-SubConatiner",children:[t(Vf,{isMobile:Q,"data-test":"QuestionAnswer-QuestionBodyWrapper",children:t(E,{font:"body-l",colorToken:"--text-card-neutral-highlighted","data-test":"QuestionAnswer-TSpan",children:S})}),k&&(!n||n&&Q)&&t(Uo,{"data-testid":"tQINotCollapsed",isCollapse:n,alt:C("noumena.quick_questions.question_image"),src:k,"data-test":"QuestionAnswer-StyleImage"}),i!==Ce.Tipped&&m(Vt,{gap:"8px","data-test":"QuestionAnswer-SubConatiner",children:[!d&&t(Uf,{onClick:xe,"data-test":"QuestionAnswer-AvatarContainer",children:t(Yt,{url:y??void 0,size:"M","data-test":"QuestionAnswer-Avatar"})}),m(Vt,{gap:"4px","data-test":"QuestionAnswer-SubConatiner",children:[t(E,{font:"footnote",colorToken:"--text-card-neutral-highlighted",onClick:xe,"data-test":"QuestionAnswer-TSpan",children:x}),m(E,{font:"footnote",colorToken:"--text-card-neutral-default","data-test":"QuestionAnswer-TSpan",children:[" ",""," "]}),O?t(E,{colorToken:"--text-card-neutral-default",font:"footnote","data-test":"QuestionAnswer-TSpan",children:C("noumena.quick_questions.closed")}):m(Gf,{font:"footnote-bold",colorToken:"--text-card-neutral-highlighted","data-test":"QuestionAnswer-ClosesText",children:[C("noumena.quick_questions.closes_on")," ",M??""]}),m(E,{font:"footnote",colorToken:"--text-card-neutral-default","data-test":"QuestionAnswer-TSpan",children:[" ",""]})," ",m(qf,{onClick:B,isActive:W,font:W?"link-s":"footnote-bold",colorToken:W?"--link-card-brand-primary-default":"--text-card-neutral-default","data-test":"QuestionAnswer-AnswerCount",children:[T," ",C("noumena.chambers.toolbox.element.quick_questions.answers")]})]})]})]}),m(Vt,{gap:"16px",width:ie(),"data-test":"QuestionAnswer-SubConatiner",children:[k&&n&&!Q&&t(Uo,{"data-testid":"tQuestionImage",isCollapse:n,alt:C("noumena.quick_questions.question_image"),src:k,"data-test":"QuestionAnswer-StyleImage"}),i&&![Ce.Answered,Ce.Tipped].includes(i)&&(v&&!O||s)&&o!==wt.Preview&&t(Qo,{isAbsolute:!k||!n||Q,"data-test":"QuestionAnswer-EllipsisButton",children:t(Hf,{refetch:a,questionId:f,isOwner:s,isQuestionOwner:v,isClosed:O,"data-test":"QuestionAnswer-EllipsisMenu"})}),i===Ce.Tipped&&o!==wt.Preview&&t(Qo,{isAbsolute:!k||!n||Q,"data-test":"QuestionAnswer-EllipsisButton",children:t(X,{size:"small",textOnly:!0,onClick:B,"data-test":"QuestionAnswer-Button",children:t(L,{size:24,name:"chevron_small_right_m",color:"--icon-button-brand-primary-default","data-test":"QuestionAnswer-Icon"})})})]})]}),Te&&t(On,{answer:F,type:Bt.MY_ANSWERS,isClosedQuestion:O,"data-test":"QuestionAnswer-Answer"}),i===Ce.Tipped&&P.length?P.map(Se=>t(On,{answer:Se,type:Bt.MY_TIPS,isClosedQuestion:O,"data-test":"QuestionAnswer-Answer"},Se._id)):null,i===Ce.Tipped&&!!_&&t(E,{style:{margin:"auto"},cursor:"pointer",font:"button-m",colorToken:"--text-button-brand-primary-default",onClick:()=>ne(),"data-test":"QuestionAnswer-TSpan",children:C("noumena.quick_questions.show_more_tips",{numTips:_})}),U&&t(Xf,{onSubmit:H(ze),disabled:!oe,"data-test":"QuestionAnswer-StyledForm",children:m(Vt,{"data-test":"QuestionAnswer-SubConatiner",children:[t(jf,{value:Y("answer"),noumEditor2:d&&!Y("answer"),"data-test":"QuestionAnswer-StyledTextArea",children:t(Da,{"data-testid":"tTextArea",autoResize:!0,value:Y("answer"),resize:!1,maxLength:600,onChange:Se=>I(Se.target.value),label:C("noumena.quick_questions.type_your_answer"),"data-test":"QuestionAnswer-TextArea"})}),t(Qf,{"data-testid":"tSendButton",type:"submit",textOnly:!0,disabled:!oe,loading:Pe,"data-test":"QuestionAnswer-SendButton",children:t(L,{name:"send_m",size:24,color:oe?"--icon-button-brand-secondary-default":"--icon-button-neutral-disabled","data-test":"QuestionAnswer-Icon"})})]})})]}),t(Of,{question:e,onClose:()=>q(!1),isOpen:$,onShowAllTips:ne,"data-test":"QuestionAnswer-AllAnswerModal"})]})});function Zf(e,a,n,o){const{addToast:i}=st(),[s,l]=r.useState({openQuestionCount:0,closeQuestionCount:0,answeredQuestionCount:0,tippedQuestionCount:0,totalQuestionCount:0}),d={spaceId:e,sort:{column:"createdAt",operator:_n.Desc},limit:n?1:Oa,filter:n?{}:{status:a},offset:o},{data:c,loading:h,error:p,refetch:g}=os({variables:d,skip:!n&&!a||!e,fetchPolicy:"cache-and-network"});return r.useEffect(()=>{var y,k,v,T;if(!c)return;const b=((y=c==null?void 0:c.open)==null?void 0:y.count)||0,f=((k=c==null?void 0:c.close)==null?void 0:k.count)||0,x=((v=c==null?void 0:c.answered)==null?void 0:v.count)||0,w=((T=c==null?void 0:c.tipped)==null?void 0:T.count)||0,S=b+f;l({openQuestionCount:b,closeQuestionCount:f,answeredQuestionCount:x,tippedQuestionCount:w,totalQuestionCount:S})},[c]),r.useEffect(()=>{if(p){let b=C("noumena.error.unknown");p instanceof Error&&(b=p.message),i("error","none",b)}},[i,p]),{data:c,loading:h,refetch:g,...s}}const Kf=u.div`
  padding: ${e=>e.isCollapse?"0":"16px"} 0;
`,eg=u.div`
  width: 100%;
  height: 100%;
  overflow: auto;
  display: flex;
  box-sizing: border-box;
  flex-direction: ${e=>e.isCollapse?"row":"column"};
  align-items: center;
  justify-content: center;
  padding: 24px;

  @media ${ue.TABLET} {
    padding: ${e=>e.isCollapse?"15px 42px 16px 16px;":"24px"};
  }

  ${e=>e.isCollapse&&de`
      padding: 16px;

      @media ${ue.LAPTOP} {
        padding: 16px 30px 24px 24px;
      }
      @media ${ue.MOBILE_L} {
        padding-right: 35px;
      }
    `};

  ${Si}
`,tg=u(R)`
  justify-content: center;
  align-items: center;
  padding: 4px;

  @media ${ue.LAPTOP} {
    padding: 12px;
  }
`,ag=u(ve)`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;

  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,ng=u.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`,og=u.div`
  position: relative;
  min-height: 100px;
  width: 100%;
`,ig=u.div`
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 16px;

  @media ${ue.LAPTOP} {
    ${({isElement:e})=>e?de`
            height: 80px;
            padding: 22px 24px 16px;
          `:de`
            min-height: 80px;
            padding-right: 24px;
          `};
  }
  ${({noumEditor2:e})=>e&&de`
      padding: 16px 16px 12px !important;
    `}
`,rg=u.div`
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  ${({noumEditor2:e})=>e&&`
  padding:0px;
  gap:0px;
  `}
`,lg=u.div`
  padding: 16px 8px 0px 18px;
  margin-bottom: -8px;
  ${({noumEditor2:e})=>e&&`
    padding: 0px 8px !important;
  justify-content:center;
  margin-bottom:8px;
  `}
`,sg={getQuestionsForSpace:{count:3,data:[{_id:"64806ec884a29e0010739339",body:"This is an example content just to show you what questions will look like in your Noum. Dont worry, it will not be visible when you publish your Noum",questionImage:"",expiryDate:"2023-06-30T00:00:00.000Z",user:{_id:"62b1523ae60231000d355ecb",firstName:"Xudong",middleName:null,lastName:"Ding",profile:{profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/62b1523ae60231000d355ecb/profile/62b1523ae60231000d355ecb-1668767787669-thumbnail.png",profilePicture:"https://noumena-img.s3-accelerate.amazonaws.com/download (1).JbWIkvWB.png",__typename:"ProfileOutput"},chamber:{_id:"62b15325d66879000f7b358d",userId:"62b1523ae60231000d355ecb",__typename:"ChamberByUserIdRef"},userStatus:"ACTIVE",__typename:"UserOutput"},spaceId:{_id:"644bd3aa74e740000d90856d",__typename:"SpaceOutput"},createdAt:"2023-06-07T11:49:28.814Z",updatedAt:"2023-06-07T11:49:28.814Z",answers:[],__typename:"NoumQuestionOutput"},{_id:"64806c6f84a29e00107373b8",body:"You can control who can ask questions in your Noum. Note - if a user can see the Quick Questions tool, they can see all questions and answers inside it.",questionImage:"",expiryDate:"2023-06-17T00:00:00.000Z",user:{_id:"629ef35c2a240b000f5d62cd",firstName:"James",middleName:null,lastName:"Ding",profile:{profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/629ef35c2a240b000f5d62cd/profile/629ef35c2a240b000f5d62cd-1659677532584-thumbnail.png",profilePicture:"https://noumena-img.s3-accelerate.amazonaws.com/avatar.E2H4cWsp.jpg",__typename:"ProfileOutput"},chamber:{_id:"62a837eee1f9a80010e213b0",userId:"629ef35c2a240b000f5d62cd",__typename:"ChamberByUserIdRef"},userStatus:"ACTIVE",__typename:"UserOutput"},spaceId:{_id:"644bd3aa74e740000d90856d",__typename:"SpaceOutput"},createdAt:"2023-06-07T11:39:27.427Z",updatedAt:"2023-06-07T11:39:27.427Z",answers:[{_id:"64806d0184a29e00107379bc",user:{_id:"62b1523ae60231000d355ecb",firstName:"Xudong",middleName:null,lastName:"Ding",profile:{profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/62b1523ae60231000d355ecb/profile/62b1523ae60231000d355ecb-1668767787669-thumbnail.png",profilePicture:"https://noumena-img.s3-accelerate.amazonaws.com/download (1).JbWIkvWB.png",__typename:"ProfileOutput"},chamber:{_id:"62b15325d66879000f7b358d",userId:"62b1523ae60231000d355ecb",__typename:"ChamberByUserIdRef"},userStatus:"ACTIVE",__typename:"UserOutput"},body:"I play once a week.",spaceId:null,tipDetails:[],createdAt:"2023-06-07T11:41:53.498Z",updatedAt:"2023-06-07T11:41:53.498Z",__typename:"AnswerOutput"},{_id:"64806d0184a29e00107379bc",user:{_id:"62b1523ae60231000d355ecb",firstName:"Xudong",middleName:null,lastName:"Ding",profile:{profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/62b1523ae60231000d355ecb/profile/62b1523ae60231000d355ecb-1668767787669-thumbnail.png",profilePicture:"https://noumena-img.s3-accelerate.amazonaws.com/download (1).JbWIkvWB.png",__typename:"ProfileOutput"},chamber:{_id:"62b15325d66879000f7b358d",userId:"62b1523ae60231000d355ecb",__typename:"ChamberByUserIdRef"},userStatus:"ACTIVE",__typename:"UserOutput"},body:"I play once a week.",spaceId:null,tipDetails:[],createdAt:"2023-06-07T11:41:53.498Z",updatedAt:"2023-06-07T11:41:53.498Z",__typename:"AnswerOutput"}],__typename:"NoumQuestionOutput"},{_id:"64806c4984a29e001073733e",body:"Users can be tipped for valuable answers too.",questionImage:"",expiryDate:"2023-06-10T00:00:00.000Z",user:{_id:"629ef35c2a240b000f5d62cd",firstName:"James",middleName:null,lastName:"Ding",profile:{profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/629ef35c2a240b000f5d62cd/profile/629ef35c2a240b000f5d62cd-1659677532584-thumbnail.png",profilePicture:"https://noumena-img.s3-accelerate.amazonaws.com/avatar.E2H4cWsp.jpg",__typename:"ProfileOutput"},chamber:{_id:"62a837eee1f9a80010e213b0",userId:"629ef35c2a240b000f5d62cd",__typename:"ChamberByUserIdRef"},userStatus:"ACTIVE",__typename:"UserOutput"},spaceId:{_id:"644bd3aa74e740000d90856d",__typename:"SpaceOutput"},createdAt:"2023-06-07T11:38:49.948Z",updatedAt:"2023-06-07T11:38:49.948Z",answers:[],__typename:"NoumQuestionOutput"}],__typename:"QuestionOutputResponse"},tipped:{count:1,__typename:"QuestionOutputResponse"},answered:{count:1,__typename:"QuestionOutputResponse"},close:{count:1,__typename:"QuestionOutputResponse"},open:{count:3,__typename:"QuestionOutputResponse"}},dg=({isCollapse:e,isAllowed:a,openAddQuestionModal:n,totalQuestionCount:o,openQuestionCount:i,closeQuestionCount:s,selectedTab:l})=>{let d=C("noumena.quick_questions.no_questions_added_yet");return l===Ce.Active&&s&&(d=C("noumena.quick_questions.no_active_questions",{count:s})),l===Ce.Closed&&i&&(d=C("noumena.quick_questions.no_closed_questions")),m(eg,{isCollapse:e,"data-test":"NoQuestions-QuickQuestionsBodyWrapper",children:[!e&&t(L,{"data-testid":wf,name:"quick_questions_m",size:80,color:"--icon-placeholder-neutral-default","data-test":"NoQuestions-Icon"}),t(Kf,{isCollapse:e,"data-test":"NoQuestions-TextPadding",children:t(E,{"data-testid":yf,colorToken:"--text-placeholder-neutral-default",font:"body-m","data-test":"NoQuestions-TSpan",children:d})}),!e&&a&&i===0&&t(X,{"data-testid":Sf,size:"small",secondary:!0,onClick:n,"data-test":"NoQuestions-Button",children:o?C("noumena.chamber.quick_question.add_qustion"):C("noumena.chamber.quick_question.add_first_qustion")})]})},cg=r.forwardRef(({isEditing:e,spaceId:a,currentTitle:n,selectedCustomPreviewTab:o,isOwner:i},s)=>{var D,ie,te;const[l,d]=r.useState(!1),[c,h]=r.useState(0),[p,g]=r.useState(1),[b,f]=r.useState(void 0),{flags:{webTips:x,noumEditor2:w}}=le(),{isUnregistered:S}=ye(),{isCollapse:y}=Er(),{isConnected:k,isFollowing:v}=ge(),{data:T,loading:F,refetch:P,totalQuestionCount:_,openQuestionCount:M,closeQuestionCount:W,answeredQuestionCount:O,tippedQuestionCount:U}=Zf(a,b,y,c),Q=r.useMemo(()=>w&&e&&_<1,[e,w,_]),V=r.useMemo(()=>{const H=[Ce.Active,Ce.Closed];return Q?H.push(Ce.Answered,Ce.Tipped):(O&&H.push(Ce.Answered),x&&U&&H.push(Ce.Tipped)),[...Yf].filter(se=>H.includes(se.name))},[O,Q,U,x]),$=H=>{f(H),g(1),h(0)},q=()=>{d(!1)},z=()=>{d(!0)},I=r.useMemo(()=>S?!1:i||k||w&&e,[k,e,i,S,w]),B=r.useMemo(()=>{var H,se;return Ke(Q?(H=sg.getQuestionsForSpace)==null?void 0:H.data:(se=T==null?void 0:T.getQuestionsForSpace)==null?void 0:se.data)},[(D=T==null?void 0:T.getQuestionsForSpace)==null?void 0:D.data,Q]),N=H=>{g(H),h((H-1)*Oa)};return r.useEffect(()=>{y?f(void 0):$(Ce.Active)},[y]),r.useEffect(()=>{W<1&&b===Ce.Closed&&$(Ce.Active),M<1&&b===Ce.Active&&$(Ce.Closed)},[W,M]),t(j,{children:(v&&B&&B.length>0||_||I)&&t(ag,{ref:s,"data-testid":Cf,"data-test":"QuickQuestionsElementViewMode-Wrapper",children:m(ng,{"data-test":"QuickQuestionsElementViewMode-MainWrapper",children:[t(ig,{isElement:!0,noumEditor2:w,"data-test":"QuickQuestionsElementViewMode-HeaderWrapper",children:t(Ef,{spaceId:a,currentTitle:n,isAllowed:I,openAddQuestionModal:z,selectedCustomPreviewTab:o,openQuestionCount:M,"data-test":"QuickQuestionsElementViewMode-QuickQuestionsElementHeader"})}),!y&&b&&t(lg,{noumEditor2:w,"data-test":"QuickQuestionsElementViewMode-TabWrapper",children:t(Xa,{onChange:$,inputList:V,selectedId:b,mode:w?"isUnderline":"isBackground",isWithoutImage:!0,fontSize:"--font-link-medium-size",textFont:`--font-body-medium-regular-font
                    `,"data-test":"QuickQuestionsElementViewMode-BasicChipsTabsForm"})}),F?t(og,{"data-test":"QuickQuestionsElementViewMode-SpinnerWrapper",children:t(it,{"data-test":"QuickQuestionsElementViewMode-Spinner"})}):B&&B.length>0?m(rg,{noumEditor2:w,"data-test":"QuickQuestionsElementViewMode-QuestionWrapper",children:[B.map(H=>t(Jf,{question:H,isCollapse:y,selectedCustomPreviewTab:o,selectedTab:b,refetch:P,isOwner:i,"data-test":"QuickQuestionsElementViewMode-QuestionAnswer"},H==null?void 0:H._id)),!!((ie=T==null?void 0:T.getQuestionsForSpace)!=null&&ie.count)&&((te=T==null?void 0:T.getQuestionsForSpace)==null?void 0:te.count)>Oa&&!y&&m("div",{children:[t(K,{height:4,"data-test":"QuickQuestionsElementViewMode-Spacer"}),t(Qn,{currentPage:p,pageSize:Oa,totalCount:T.getQuestionsForSpace.count,onPageChange:N,"data-test":"QuickQuestionsElementViewMode-Pagination"})]})]}):t(dg,{totalQuestionCount:_,isAllowed:!!I,isCollapse:y,openAddQuestionModal:z,openQuestionCount:M,closeQuestionCount:W,selectedTab:b,"data-test":"QuickQuestionsElementViewMode-NoQuestions"}),t(If,{spaceId:a,onClose:q,isOpen:l,refetch:P,"data-test":"QuickQuestionsElementViewMode-AddQuestion"})]})})})}),ug=r.forwardRef((e,a)=>{const{t:n}=G();return t(Xe,{ref:a,isBorder:!1,...e,"data-test":"QuickQuestionsElementEditMode-ElementWrapper",children:t(tg,{"data-testid":kf,justify:"center",align:"center","data-test":"QuickQuestionsElementEditMode-EditModeWrapper",children:t(E,{font:"body-m",colorToken:"--text-placeholder-neutral-default","data-test":"QuickQuestionsElementEditMode-TSpan",children:n("noumena.quick_questions.edit_mode_message")})})})}),mg=r.forwardRef((e,a)=>{const{flags:{noumEditor2:n}}=le();return e.isEditing&&!n||e.isCustomPreview?t(ug,{...e,ref:a,"data-test":"QuickQuestionsElement-QuickQuestionsElementEditMode"}):t(gf,{"data-test":"QuickQuestionsElement-QuickQuestionsElementProvider",children:t(cg,{...e,"data-test":"QuickQuestionsElement-QuickQuestionsElementViewMode"})})}),pg=()=>t(ve,{style:{padding:24},"data-test":"SkeletonLoaderPostElement-Card",children:m(Ge,{gap:24,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderPostElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderPostElement-SkeletonLoaderElementHeader"}),m(An,{gap:12,justify:"flex-start",align:"center","data-test":"SkeletonLoaderPostElement-StyledFlexRowBordered",children:[t(Fu,{"data-test":"SkeletonLoaderPostElement-SkeletonLoaderPostII"}),t(ae,{w:"100%",h:56,r:8,"data-test":"SkeletonLoaderPostElement-SizedSkeleton"})]}),t(ae,{w:111,h:16,r:8,"data-test":"SkeletonLoaderPostElement-SizedSkeleton"})]})}),hg=u(ve)`
  padding: ${({noumEditor2:e})=>e?"0":" 24px"};
  display: flex;
  flex-direction: column;
  border-radius: 0;
  ${({noumEditor2:e})=>!e&&"gap: 16px"};
  @media ${ue.TABLET} {
    border-radius: 16px;
  }
  overflow: visible;
`,fg=u.div`
  padding: ${({noumEditor2:e})=>e?"16px 0px 0px 16px":"0"};
  display: flex;
  flex-direction: row;
  border-radius: 0;
`;u.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
`;const gg=u(X)`
  padding: 8px;
`,bg=u.div`
  ${ya};
  width: 100%;
  position: relative;
`,xg=u.div`
  ${ya};
  width: 100%;
  position: relative;
`,Cg=u(X)`
  width: 100%;
`,yg=u(X)`
  cursor: pointer;
`,wg=u.div`
  ${ya};
  width: 100%;
  position: relative;
`,Ma={type:"value",value:"all",key:"all_authors",label:"All"},Sg=e=>{const{setShowFilter:a,setFilter:n,authors:o,filter:i}=va(),{onClose:s}=e,[l,d]=r.useState(""),c=Ei(l,500),[h,p]=r.useState(!1),[g,b]=r.useState(!1),[f,x]=r.useState(_n.Desc),[w,S]=r.useState([$a.Connection]),[y,k]=r.useState(Ma),{width:v}=Re(),T=v<qe.TABLET,F=r.useCallback(()=>{a(!1)},[a]),P=r.useCallback(I=>{x(I.value)},[]),_=r.useCallback(I=>{const B=w.find(N=>N===I.value);S(B?w.filter(N=>N!==I.value):[...w,I.value])},[w]),M=r.useCallback(I=>{k(I)},[]),W=r.useMemo(()=>{var I,B;return(B=(I=bo.find(N=>N.value===f))==null?void 0:I.label)==null?void 0:B.toString()},[f]),O=r.useMemo(()=>w.length===2?"All":w.length===0?"Members":`${is(w[0])}s`,[w]),U=r.useMemo(()=>typeof y.value=="string"?"All":Mn(y.value.firstName,y.value.middleName,y.value.lastName),[y]),Q=r.useMemo(()=>o.filter(B=>co(`${B.firstName||""}${B.middleName||""}${B.lastName||""}`).includes(co(c))).slice(0,20),[o,c]),V=r.useMemo(()=>{const I=[{...Ma}];return Q.map(B=>{var D;const N={type:"value",value:B,key:B._id,label:Mn(B.firstName,B.middleName,B.lastName),icon:t(Yt,{url:((D=B.profile)==null?void 0:D.profilePictureThumbnail)||"",size:"M","data-test":"FilterPost-authorOptions-option-Avatar"})};I.push(N)}),I},[Q]),$=r.useCallback(I=>{d(I.target.value)},[]),q=r.useCallback(()=>{const I={};typeof y.value=="string"?I.filter={visibility:w}:I.filter={uid:y.value._id,visibility:w},I.sort={column:"createdAt",operator:f},n(I),s()},[y,f,w,n,s]),z=r.useCallback(()=>{n({})},[n]);return r.useEffect(()=>{var I,B,N;if(i){if((I=i.filter)!=null&&I.uid){const D=V.find(ie=>{var te;return typeof ie.value!="string"?((te=i.filter)==null?void 0:te.uid)===ie.value._id:!1});k(D||Ma)}else k(Ma);S(Ke((B=i.filter)==null?void 0:B.visibility)||[$a.Connection]),x(((N=i.sort)==null?void 0:N.operator)||_n.Desc)}},[i,V]),m(Ne,{isFullScreen:!1,open:!0,testId:"filter_post",onClose:F,enableCloseButton:!0,closeButtonStyles:{enforceRight:!T},style:{width:T?"100vw":450},disableBackdropClick:!0,"data-test":"FilterPost-Modal",children:[t(Qe,{isFullScreen:!1,justifyContent:T?"flex-start":"center","data-test":"FilterPost-ModalHeader",children:C("noumena.post.filter.title")}),m(Ue,{minHeight:T&&v<=qe.MOBILE_M?360:500,tabletFlex:!0,mobileFlex:!0,hideScrollbar:!0,isFullScreen:T,"data-test":"FilterPost-ModalBody",children:[t(K,{height:12,"data-test":"FilterPost-Spacer"}),t(bg,{"data-test":"FilterPost-SortWrap",children:t(je,{hideIcons:!0,closeOnSelect:!0,placement:"bottom-end",options:bo,containerWidth:"100%",onSelectOption:P,onOpen:()=>p(!0),onClose:()=>p(!1),usePortal:!1,calRefTop:!1,isAnimation:!1,usePopStyle:!0,"data-test":"FilterPost-Dropdown",children:({inputProps:I,inputRef:B,toggle:N})=>t(Oe,{readOnly:!0,inputSize:"small",ref:B,...I,value:W,label:C("noumena.post.filter.order_label"),spellCheck:"false",rightIcon:h?t(L,{name:"chevron_up_m",size:16,color:"--icon-input-neutral-default",onClick:N,"data-test":"FilterPost-Icon"}):t(L,{name:"chevron_down_m",color:"--icon-input-neutral-default",size:16,onClick:N,"data-test":"FilterPost-Icon"}),"data-test":"FilterPost-TextField"})})}),t(K,{height:24,"data-test":"FilterPost-Spacer"}),t(xg,{"data-test":"FilterPost-VisibilitySection",children:t(je,{multiselect:!0,closeOnSelect:!1,hideIcons:!0,placement:"bottom-end",options:Nc,containerWidth:"100%",onSelectOption:_,onOpen:()=>b(!0),onClose:()=>b(!1),usePortal:!1,calRefTop:!1,isAnimation:!1,usePopStyle:!0,optionsRenderer:(I,B)=>t(Pc,{handleSelectOption:B,options:I,activeItem:w,"data-test":"FilterPost-VisibilityoptionsRenderer"}),"data-test":"FilterPost-Dropdown",children:({inputProps:I,inputRef:B,toggle:N})=>t(Oe,{inputSize:"small",readOnly:!0,ref:B,...I,value:O,label:C("noumena.post.filter.visibility_label"),spellCheck:"false",rightIcon:g?t(L,{name:"chevron_up_m",color:"--icon-input-neutral-default",size:16,onClick:N,"data-test":"FilterPost-Icon"}):t(L,{name:"chevron_down_m",color:"--icon-input-neutral-default",size:16,onClick:N,"data-test":"FilterPost-Icon"}),"data-test":"FilterPost-TextField"})})}),t(K,{height:24,"data-test":"FilterPost-Spacer"}),t(wg,{"data-test":"FilterPost-SearchSection",children:t(je,{multiselect:!1,hideIcons:!1,closeOnSelect:!0,placement:"bottom-end",options:V,containerWidth:"100%",containerHeight:V.length>2&&!T?"150px":"auto",padding:V.length>2?"5px 8px 5px 0":"5px 0px",onSelectOption:M,usePortal:!1,calRefTop:!1,isAnimation:!1,usePopStyle:!0,optionsRenderer:(I,B)=>t(Ac,{options:I,handleSelectOption:B,activeItem:y,"data-test":"FilterPost-AuthorOptionsRenderer"}),"data-test":"FilterPost-Dropdown",children:({inputProps:I,inputRef:B,toggle:N})=>t(Oe,{inputSize:"small",ref:B,...I,value:U,onChange:$,label:C("noumena.post.filter.authors_label"),spellCheck:"false",rightIcon:t(L,{name:"search_m",size:16,color:"--icon-input-neutral-default",onClick:N,"data-test":"FilterPost-Icon"}),"data-test":"FilterPost-TextField"})})})]}),m(xt,{isFullScreen:!1,flexDirection:"row",gap:16,"data-test":"FilterPost-ModalFooter",children:[t(yg,{onClick:z,color:"primary",size:"full",tertiary:!0,"data-test":"FilterPost-EmptyButton",children:C("noumena.post.filter.reset_filters")}),t(Cg,{onClick:q,primary:!0,"data-test":"FilterPost-FullButton",children:C("noumena.post.filter.apply_filters")})]})]})},vg=e=>{const{spaceId:a,element:n,currentTitle:o,isCollapse:i,setIsCollapse:s,isCustomPreview:l}=e,{setShowFilter:d,showFilter:c,isCollapseDisabled:h,noumEditor2:p}=va(),{space:g}=ge();return t(fg,{noumEditor2:p&&!l,"data-test":"PostHeader-Container",children:p&&!l?t(Bd,{currentTitle:o,"data-test":"PostHeader-ViewModeNoumEditor"}):m(j,{children:[t(Ga,{spaceId:a,element:n,currentTitle:o,isCollapse:i,setIsCollapse:s,isCollapseDisabled:h,"data-test":"PostHeader-ViewMode"}),!i&&(g==null?void 0:g.type)!=="HOME"&&t(gg,{"data-testid":"filter-button",onClick:()=>d(!0),size:"small",icon:t(L,{name:"align_center_m",size:24,color:"--icon-button-neutral-default","data-test":"PostHeader-Icon"}),"data-test":"PostHeader-FilterButton"}),c&&t(Sg,{onClose:()=>d(!1),"data-test":"PostHeader-FilterPost"})]})})},kg=u.div`
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  padding: ${({noumEditor2:e})=>e?"0 16px":" 0"};
  box-sizing: border-box;
  gap: 10px;
  width: 100%;
  overflow-y: auto;
  min-height: 40px;
  ${Qa}
`,Eg=u(Ra)`
  ${({noumEditor2:e})=>e&&"background: none; border-radius: 0"};
  ${({noumEditor2:e,isDisabled:a})=>e&&!a&&"border-bottom: 2px solid var(--text-tab-chips-brand-primary-selected);"};
  span {
    font-size: 14px !important;
    ${({isDisabled:e})=>e?"color: var(--text-tab-chips-neutral-default) !important;":"color: var(--text-tab-chips-brand-primary-selected) !important;"}
  }
`,_g=u.div`
  ${na}
`,Mg=u.div`
  ${na}
  gap: 8px;
  left: 0px;
  top: 0px;
  border-radius: 8px;
  padding: 8px 12px 8px 12px;
  cursor: pointer;

  ${({isActive:e,noumEditor2:a})=>e&&!a&&"background: var(--bg-tab-chips-brand-secondary-selected);"}
  ${({noumEditor2:e,isActive:a})=>e&&a&&"border-bottom: 2px solid var(--text-tab-chips-brand-primary-selected); border-radius: 0"};
`,Tg=u(E)`
  padding-left: 8px;
`,Ta=6,Ig=()=>{const{authors:e,filter:a,setFilter:n,noumEditor2:o,isCustomPreview:i}=va(),{t:s}=G(),l=r.useMemo(()=>{var g;return((g=a.filter)==null?void 0:g.uid)||"all"},[a.filter]),d=r.useMemo(()=>[...e],[e]),c=r.useMemo(()=>d.length-Ta,[d]),h=r.useMemo(()=>{if(c>0){const g=d.slice(Ta,Ta+3),b=[];return g.map(f=>{var x;b.push(((x=f.profile)==null?void 0:x.profilePictureThumbnail)||"")}),b}return[]},[d,c]),p=r.useCallback(g=>{n(g==="all"?{...a,filter:{...a.filter,uid:void 0}}:{...a,filter:{...a.filter,uid:g}})},[a,n]);return m(kg,{noumEditor2:o&&!i,"data-test":"AuthorsList-Container",children:[t(Eg,{onClick:()=>{p("all")},size:"large",borderRadius:"8px",secondary:l!=="all",isDisabled:l!=="all",noumEditor2:o&&!i,"data-test":"AuthorsList-AllTab",children:s("noumena.post_all_authors")}),m(_g,{"data-test":"AuthorsList-UserFrame",children:[d.slice(0,Ta).map(g=>m(Mg,{onClick:()=>{p(g._id)},isActive:l===g._id,noumEditor2:o&&!i,"data-test":"AuthorsList-UserItem",children:[t(Yt,{size:"M",url:De.getProfilePicture(g)??"","data-test":"AuthorsList-Avatar"}),l===g._id&&t(E,{colorToken:"--text-tab-chips-brand-primary-selected","data-test":"AuthorsList-TSpan",children:Mn(g.firstName,g.middleName,g.lastName)})]},g._id)),c>0&&m(j,{children:[t(rs,{size:"M",urls:h,"data-test":"AuthorsList-DiagonalAvatar3"}),m(Tg,{colorToken:"--text-tab-chips-neutral-default","data-test":"AuthorsList-MoreText",children:["+",c]})]})]})]})},Ng=[{chamberId:"6358f4534eeb64000d8d30d6",createdAt:"2023-06-01T08:55:33.773Z",postStatus:uo.Accepted,rawJSON:{blocks:[{data:{},depth:0,entityRanges:[],inlineStyleRanges:[],key:"8v90q",text:"This is an example post just to show you what posts will look like in your Noum. Dont worry, it will not be visible when you publish your Noum",type:"unstyled"}],entityMap:{}},text:"<p>This is an example post just to show you what posts will look like in your Noum. Dont worry, it will not be visible when you publish your Noum</p>",uid:{__typename:"UserOutput",_id:"62fcdb69c2b876000fb22f71",firstName:"John",lastName:"Doe",userStatus:"ACTIVE"},updatedAt:"2023-06-01T08:55:33.773Z",visibility:$a.Connection,__typename:"PostOutput",_id:`${go}_1`},{chamberId:"6358f4534eeb64000d8d30d9",createdAt:"2023-06-01T08:55:33.773Z",postStatus:uo.Accepted,rawJSON:{blocks:[{data:{},depth:0,entityRanges:[],inlineStyleRanges:[],key:"8v90u",text:"This is an example post just to show you what posts will look like in your Noum. Dont worry, it will not be visible when you publish your Noum",type:"unstyled"}],entityMap:{}},text:"<p>This is an example post just to show you what posts will look like in your Noum. Dont worry, it will not be visible when you publish your Noum</p>",uid:{__typename:"UserOutput",_id:"62fcdb69c2b876000fb22f70",firstName:"John",lastName:"Doe",userStatus:"ACTIVE"},updatedAt:"2023-06-01T08:55:33.773Z",visibility:$a.Connection,__typename:"PostOutput",_id:`${go}_2`}],Pg=e=>{const{setShowCreate:a,showCreate:n,refetchPosts:o,posts:i,loading:s,fetchMore:l,networkStatus:d,totalCount:c,space:h,isSpaceOwner:p,noumEditor2:g}=va();sr((i==null?void 0:i.length)>0);const[b,f]=qt(!1),{isCollapse:x,spaceId:w,selectedCustomPreviewTab:S,isEditing:y}=e,k=wa(),{id:v}=Vn(),{user:T,isUnregistered:F}=ye(),{t:P}=G(),_=r.useMemo(()=>i[0],[i]),M=Tc(),W=r.useMemo(()=>(h==null?void 0:h.type)==="HOME"&&!p?!1:F?M("POST","CREATE","UNREGISTERED"):(p||(h==null?void 0:h.isConnected))&&(T==null?void 0:T.userStatus)===oi.Active,[p,h,T,F,M]),O=v||(h==null?void 0:h._id),U=r.useMemo(()=>g&&S!==wt.Preview?2:1,[g,S]),Q=r.useMemo(()=>b?i:i.slice(0,U),[b,i,U]);return m(j,{children:[m(Bc,{"data-testid":"post-body-container","data-test":"PostBody-Container",children:[W&&S!==wt.Preview&&t(Lc,{onClick:()=>a(!0),isCreatable:W??!1,size:g?"L":"M",noumEditor2:g,"data-test":"PostBody-CreateSection"}),n&&t(Mc,{spaceId:w,onClose:()=>a(!1),onSuccess:()=>{a(!1),o()},isMasterNoum:(h==null?void 0:h.type)==="HOME","data-test":"PostBody-CreatePost"}),x?_&&t(dn,{recent:!0,collapsed:!0,data:_,isMasterNoum:(h==null?void 0:h.type)===We.Home,selectedCustomPreviewTab:S,"data-test":"PostBody-PostItem"}):m(j,{children:[(h==null?void 0:h.type)!==We.Home&&!y&&t(Ig,{"data-test":"PostBody-AuthorsList"}),Q.length>0&&t(Fc,{showAll:b,"data-test":"PostBody-AllPosts",children:t(aa,{width:"100%",onFetchMore:l,unsetOverflow:!0,status:b?hi({networkStatus:d,totalCount:c,currentCount:i.length}):"end","data-test":"PostBody-Infinite",children:Q.map(V=>t(dn,{data:V,"data-test":"PostBody-PostItem"},`post-item-${V._id}`))})}),(!g||S===wt.Preview)&&i.length>1&&t(X,{size:"small",onClick:f,secondary:!0,"data-test":"PostBody-Button",children:P(b?"noumena.post_show_less":"noumena.post_show_all")})]}),!s&&i.length<1&&t(j,{children:y?t(j,{children:Ng.map(V=>t(dn,{data:V,"data-test":"PostBody-PostItem"},`post-item-${V._id}`))}):m(Oc,{"data-test":"PostBody-NoPostsContainer",children:[t(Wc,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"PostBody-NoPosts",children:P("noumena.post.no_posts_yet")}),t(K,{height:16,"data-test":"PostBody-Spacer"})]})})]}),g&&S!==wt.Preview&&i.length>2&&m(j,{children:[t(K,{height:6,"data-test":"PostBody-Spacer"}),t(X,{textOnly:!0,size:"small",onClick:()=>k(`/posts/${O}`),secondary:!0,rightIcon:t(L,{size:12,name:"chevron_right_m","data-test":"PostBody-Icon"}),"data-test":"PostBody-Button",children:P("noumena.editor.all_posts")}),t(K,{height:16,"data-test":"PostBody-Spacer"})]})]})},Ag=e=>{const{isCollapse:a,setIsCollapse:n,loading:o,noumEditor2:i}=va();return m(hg,{"data-testid":"view-userpost",id:"post",noumEditor2:i&&!e.isCustomPreview,"data-test":"PostViewMode-Container",children:[t(vg,{...e,isCollapse:a,setIsCollapse:n,"data-test":"PostViewMode-PostHeader"}),o&&t(it,{"data-test":"PostViewMode-Spinner"}),t(Pg,{...e,isCollapse:a,setIsCollapse:n,"data-test":"PostViewMode-PostBody"})]})},Lg=e=>{const{t:a}=G(),{isLoading:n}=Ct(),{space:o}=ge(),{space:i}=Ot(),{flags:{noumEditor2:s}}=le(),l=r.useMemo(()=>e.isEditing?i:o,[i,e.isEditing,o]);return n?t(pg,{"data-test":"PostElement-SkeletonLoaderPostElement"}):e.isEditing&&(!s||e.isCustomPreview)?t(Xe,{...e,"data-test":"PostElement-ElementWrapper",children:e.isCustomPreview?t(j,{}):t(R,{justify:"center","data-test":"PostElement-Stack",children:t(E,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"PostElement-TSpan",children:a("noumena.post.edit_mode_message")})})}):t(Ic,{space:l,isCustomPreview:e.isCustomPreview,"data-test":"PostElement-PostElementProvider",children:t(Ag,{...e,"data-test":"PostElement-PostViewMode"})})},Bg={isCollapse:!0,setIsCollapse:()=>{},networks:[]},_r=r.createContext(Bg),Fg=({children:e})=>{const[a,n]=r.useState(!0),{user:o}=ye(),i=r.useMemo(()=>{var l;return Ke((l=o==null?void 0:o.profile)==null?void 0:l.socialLinks)},[o]),s=r.useMemo(()=>({isCollapse:a,setIsCollapse:n,networks:i}),[a,n,i]);return t(_r.Provider,{value:s,children:e})},qn=()=>r.useContext(_r),Og=()=>t(ve,{"data-test":"SkeletonLoaderNetworkElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderNetworkElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderElementHeader"}),m(Je,{gap:12,"data-test":"SkeletonLoaderNetworkElement-StyledFlexRow",children:[t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"}),t(tt,{"data-test":"SkeletonLoaderNetworkElement-SkeletonLoaderPost"})]})]})}),Wg=u.div`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;
`;u.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
`;u(X)`
  padding: 8px;
`;const $g=e=>{const{spaceId:a,element:n,currentTitle:o}=e,{isCollapse:i,setIsCollapse:s}=qn();return t(Wg,{"data-testid":"network-header-container","data-test":"NetworkHeader-Container",children:t(Ga,{spaceId:a,element:n,currentTitle:o,isCollapse:i,setIsCollapse:s,"data-test":"NetworkHeader-ViewMode"})})},Rg=u.a`
  position: relative;
  cursor: pointer;
  text-decoration: none;
  ${ya}
  ${ls}
  @media ${ue.MOBILE_L} {
    ${({isCollapse:e})=>e?de``:de`
            border-radius: 16px;
            padding: 16px 0px 16px 0px;
            gap: 8px;
            border: solid 1px var(--border-card-neutral-default);
            max-width: 128px;
            min-width: 128px;
            height: 115px;
          `}
  }

  ${({isCollapse:e})=>e?de``:de`
          border-radius: 16px;
          padding: 16px 0px 16px 0px;
          gap: 8px;
          border: solid 1px var(--border-card-neutral-default);
          width: calc(50% - 8px);
          height: 115px;
        `}
`,zg=u.div`
  width: 70%;
  ${na};
  justify-content: center;
`,Hg=e=>{const{isCollapse:a,data:n}=e,o=r.useMemo(()=>Vi(n==null?void 0:n.link),[n==null?void 0:n.link]),i=r.useCallback(l=>{const d=["https","http"];return!l.includes(d[0])&&!l.includes(d[1])?`https://${l}`:l},[]),s=r.useCallback(l=>{const d=l==null?void 0:l.toLowerCase(),c=a?40:56;switch(d){case"linkedin":return t(L,{size:c,name:"linkedin_xxl","data-testid":"item-linkedin","data-test":"NetworkItem-getIconFromName-Icon"});case"github":return t(L,{size:c,name:"github_xxl","data-testid":"item-github","data-test":"NetworkItem-getIconFromName-Icon"});case"twitter":return t(L,{size:c,name:"twitter_xxl","data-testid":"item-twitter","data-test":"NetworkItem-getIconFromName-Icon"});case"medium":return t(L,{size:c,name:"medium_xxl","data-testid":"item-medium","data-test":"NetworkItem-getIconFromName-Icon"});case"dribbble":return t(L,{size:c,name:"dribbble_xxl","data-testid":"item-dribble","data-test":"NetworkItem-getIconFromName-Icon"});case"behance":return t(L,{size:c,name:"behance_xxl","data-testid":"item-behance","data-test":"NetworkItem-getIconFromName-Icon"});case"instagram":return t(L,{size:c,name:"instagram_xxl","data-testid":"item-instagram","data-test":"NetworkItem-getIconFromName-Icon"});default:return t(L,{size:c,name:"my_networks_xxl","data-test":"NetworkItem-getIconFromName-Icon"})}},[a]);return n.link?m(Rg,{href:i(n.link),target:"_blank",isCollapse:a,"data-test":"NetworkItem-Container",children:[s($c(n.link)),!a&&t(zg,{"data-test":"NetworkItem-TextWrap",children:t(E,{colorToken:"--text-card-neutral-default",overflow:"ellipsis",font:"footnote","data-test":"NetworkItem-TSpan",children:o})})]}):null},Dg=u(ve)`
  padding: 24px;
  display: flex;
  flex-direction: column;
  border-radius: 0;
  gap: 16px;
  @media ${ue.TABLET} {
    border-radius: 16px;
  }
  @media ${ue.MOBILE_L} {
    border-radius: 16px;
  }
`,Vg=u.div`
  ${na}
  gap: 16px;
  flex-wrap: wrap;
  position: relative;
  justify-content: flex-start;
`,Ug=e=>{const{isCollapse:a,setIsCollapse:n,networks:o}=qn(),{body:i}=e,{isOwner:s,space:l}=ge(),d=r.useMemo(()=>{var g,b;return s?o:((b=(g=l==null?void 0:l.uid)==null?void 0:g.profile)==null?void 0:b.socialLinks)||[]},[s,o,l]),c=r.useMemo(()=>{const p=[];let g={};if(!i)d.map(b=>{g={...g,[b==null?void 0:b.name]:b==null?void 0:b.link}});else try{g=JSON.parse(i)}catch{g={}}return Object.keys(g).map(b=>{if(g[b]){const f=Ui(b,g[b]),x={name:b,link:f};p.push(x)}}),p.sort((b,f)=>b.name>f.name?1:b.name===f.name?0:-1)},[d,i]),{isLoading:h}=Ct();return h?t(Og,{"data-test":"NetworkViewMode-SkeletonLoaderNetworkElement"}):c.length?m(Dg,{"data-testid":"network-view-container","data-test":"NetworkViewMode-Container",children:[t($g,{isCollapse:a,setIsCollapse:n,...e,"data-test":"NetworkViewMode-NetworkHeader"}),t(Vg,{"data-test":"NetworkViewMode-Body",children:c.map(p=>t(Hg,{data:p,isCollapse:a,"data-test":"NetworkViewMode-NetworkItem"},p.link))})]}):t(j,{})},Qg=u.div`
  ${na}
  width: 100%;
  @media ${ue.MOBILE_L} {
    max-width: calc(50% - 8px);
  }
`,jg=e=>{const{handleChange:a,name:n,value:o,label:i}=e,s=r.useCallback(l=>{const d=l.toLocaleLowerCase();let c;return d.includes("linkedin")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"linkedin_m","data-testid":"item-linkedin","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("github")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"github_m","data-testid":"item-github","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("twitter")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"twitter_m","data-testid":"item-twitter","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("medium")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"medium_m","data-testid":"item-medium","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("dribbble")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"dribbble_m","data-testid":"item-dribbble","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("behance")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"behance_m","data-testid":"item-behance","data-test":"NetworkEditItem-getIconFromName-Icon"}):d.includes("instagram")?c=t(L,{size:24,color:"--icon-input-neutral-default",name:"instagram_m","data-testid":"item-instagram","data-test":"NetworkEditItem-getIconFromName-Icon"}):c=t(L,{size:24,color:"--icon-input-neutral-default",name:"network_m","data-testid":"item-network","data-test":"NetworkEditItem-getIconFromName-Icon"}),c},[]);return t(Qg,{"data-test":"NetworkEditItem-Container",children:t(Oe,{label:i,value:o,onChange:l=>{if(n==="www1"||n==="www2"||n==="www3"){const d=Rc(l.target.value);a(n,d??"")}a(n,l.target.value)},rightIcon:s(n),"data-test":"NetworkEditItem-TextField"})})},qg=u.div`
  ${ya}
  gap: 16px;
  position: relative;
`,Xg=u.div`
  ${na}
  gap: 16px;
  flex-wrap: wrap;
  position: relative;
`;let xn,Ia;const jo={github:"github.com/",linkedin:"linkedin.com/in/",behance:"behance.net/",twitter:"twitter.com/",instagram:"instagram.com/",medium:"medium.com/",dribbble:"dribbble.com/",www1:"Your Link",www2:"Your Link",www3:"Your Link"},Gg=e=>{const{networks:a}=qn(),{handleChange:n,body:o,element:i}=e,{t:s}=G(),l=r.useMemo(()=>Ae.getBodyContent(i)||void 0,[i]),d=r.useMemo(()=>{let p={};if(o){let g={};try{g=JSON.parse(o)}catch{g={}}return Object.keys(g).map(b=>{g[b]&&(p[b]=Ui(b,g[b])??"")}),p}return a.map(g=>{p={...p,[g.name]:g.link}}),p},[o,a]);r.useEffect(()=>{let p={};try{p=JSON.parse(l||"{}")}catch{p={}}Ia=p},[]);const c=r.useCallback(p=>{let g="";return p==="www1"||p==="www2"||p==="www3"?g=d[p]:(g=Vi(d[p]),g=g==null?void 0:g.replace("@","")),g},[d]),h=r.useCallback((p,g)=>(Ia={...Ia,[p]:g},clearTimeout(xn),xn=setTimeout(()=>{n(Ia)},10),()=>clearTimeout(xn)),[n]);return m(qg,{"data-testid":"network-edit-mode-container","data-test":"NetworkEditMode-Container",children:[t(E,{colorToken:"--text-body-header-neutral-default",font:"body-m","data-test":"NetworkEditMode-TSpan",children:s("noumena.element.mynetwork.edit_title")}),t(Xg,{"data-test":"NetworkEditMode-Body",children:Object.keys(jo).map(p=>t(jg,{name:p,label:jo[p],handleChange:h,value:c(p),"data-test":"NetworkEditMode-NetworkEditItem"},`network-edit-${p}`))})]})},Yg=e=>{const{onContentChange:a,element:n}=e;return t(Fg,{"data-test":"NetworkElement-NetworkElementProvider",children:e.isEditing?t(Xe,{...e,"data-test":"NetworkElement-ElementWrapper",children:t(Gg,{body:e.body,handleChange:a,element:n,"data-test":"NetworkElement-NetworkEditMode"})}):t(Ug,{...e,body:e.body,"data-test":"NetworkElement-NetworkViewMode"})})},Jg=({options:e=[],onSelect:a=()=>{},placeholder:n,...o})=>{const{t:i}=G(),s=r.useRef(null),[l,d]=r.useState(""),[c,h]=r.useState(!1),p=Ei(l,500),[g,b]=r.useState(e),f=w=>{d(w),h(!0)},x=r.useCallback(()=>{var w;d(""),(w=s.current)==null||w.focus()},[s]);return r.useEffect(()=>{const w=e.filter(S=>{var y;if(S&&S.type==="value"&&S.label){const k=new RegExp(`\\s*${p.trim()}\\w*`,"i");return(y=String(S.label))==null?void 0:y.match(k)}return!0});b(w)},[p,e]),t(je,{inputValue:l,options:g,onSelectOption:w=>{a(w),h(!1)},onInputChange:f,isMatchedBoldText:!0,hideIcons:!0,isOpen:!!l&&c,usePortal:!1,containerHeight:"230px",minHeight:"0px",placement:"bottom",noSearchOptionsText:"No results","data-test":"SearchSkill-Dropdown",children:({inputProps:w,inputRef:S,toggle:y})=>t(Oe,{...w,...o,placeholder:n??i("noumena.skills_search.placeholder"),ref:ss(s,S),rightIcon:p&&t(zc,{"data-test":"SearchSkill-ClearIconWrapper",children:t(L,{name:"clear_m",size:24,color:"--icon-input-brand-primary-default",onClick:()=>{x()},"data-test":"SearchSkill-Icon"})}),leftIcon:!p&&t(L,{name:"search_m",size:24,color:"--icon-input-neutral-default","data-test":"SearchSkill-Icon"}),"data-testid":"input-component",value:l,onChange:k=>f(k.target.value),onClick:p.trim().length>0?y:()=>{},"data-test":"SearchSkill-TextField"})})},Zg=u.div`
  flex-direction: row;
  width: 100%;
  overflow-x: auto;
  flex-wrap: nowrap;
  gap: 12px;
  > span {
    display: inline-flex;
  }
`,Kg=u.div`
  display: inline-flex;
  margin: 6px;
  span {
    cursor: default;
  }
`,eb=u.div`
  height: 100%;
  position: relative;
  @media (max-width: ${me.TABLET}) {
    width: 736px;
    margin-left: 16px;
    margin-right: 16px;
  }
  @media (max-width: ${me.MOBILE_MAX}) {
    width: 343px;
    margin-left: 16px;
    margin-right: 16px;
  }
`,qo=u.div`
  padding-right: 8px;
  padding-bottom: 8px;
  display: inline-flex;
`,tb=u.div`
  flex-direction: row;
  width: 100%;
  overflow-x: auto;
  flex-wrap: nowrap;
  ${Qa}
`,ab=u.div`
  margin-top: 24px;
  height: 56px;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  display: flex;
`,nb=u.div`
  cursor: pointer;
`;u.div`
  position: fixed;
  bottom: 40px;
  right: 40px;
  height: 56px;
  width: ${e=>e.selectedSkills?"322px":"207px"};
  @media (max-width: ${me.TABLET}) {
    width: 360px;
    bottom: 16px;
    left: 0;
    transform: translate(calc(50vw - 50%));
  }
  @media (max-width: ${me.MOBILE_L}) {
    width: 343px;
    bottom: 16px;
    left: 0;
    transform: translate(calc(50vw - 50%));
  }
`;const ob=u.div``,ib=e=>{const{options:a,selectSkill:n,selectedSkills:o,categories:i,getCategoryBadgeCount:s,isCategoryOpen:l,toggleOpenCategory:d,collapseAll:c,collapseStatus:h}=Hc(e.element),p=r.useCallback(f=>o.findIndex(w=>w.value===f._id)!==-1,[o]),g=r.useCallback(f=>f.map(x=>t(qo,{"data-test":"SkillsEditElement-renderAccordionChildren-ChipWrapper",children:t(Ra,{onClick:()=>n({key:x==null?void 0:x._id,type:"value",value:x==null?void 0:x._id,label:x==null?void 0:x.name}),primary:p(x),secondary:!p(x),size:"large",icon:p(x)?t(L,{color:"--icon-skillbadge-brand-primary-selected",name:"close_m",size:20,"data-test":"SkillsEditElement-renderAccordionChildren-Icon"}):void 0,"data-test":"SkillsEditElement-renderAccordionChildren-Chips",children:x==null?void 0:x.name})},x==null?void 0:x._id)),[n,p]),b=r.useCallback(f=>t(Kd,{expanded:l(f._id),onToggle:()=>d(f._id),right:s(f._id)?t(yi,{size:"large",text:`${s(f._id)}`,"data-test":"SkillsEditElement-renderCategory-Badge"}):void 0,title:f.name,"data-test":"SkillsEditElement-renderCategory-Accordion",children:g(f.skills)},`accord-${f._id}`),[g,s,l,d]);return t(Xe,{...e,"data-test":"SkillsEditElement-ElementWrapper",children:t(ob,{"data-test":"SkillsEditElement-MySkillsWrap",children:m(eb,{"data-test":"SkillsEditElement-Wrapper",children:[t(Jg,{options:a,onSelect:n,placeholder:C("noumena.homenoum.skills.search_placeholder"),"data-test":"SkillsEditElement-SearchSkill"}),t(K,{height:16,"data-test":"SkillsEditElement-Spacer"}),t(tb,{"data-test":"SkillsEditElement-ChipsSection",children:o==null?void 0:o.map(f=>t(qo,{"data-test":"SkillsEditElement-ChipWrapper",children:t(Ra,{onClick:()=>n(f),icon:t(L,{color:"--icon-skillbadge-brand-primary-selected",name:"close_m",size:20,"data-test":"SkillsEditElement-Icon"}),size:"large","data-test":"SkillsEditElement-Chips",children:f.label})},f.value))}),h&&(i==null?void 0:i.map(f=>b(f))),t(ab,{"data-test":"SkillsEditElement-ModalFooter",children:t(nb,{onClick:c,"data-test":"SkillsEditElement-CollapseWrap",children:t(E,{font:"button-m",colorToken:"--text-button-brand-secondary-default","data-test":"SkillsEditElement-TSpan",children:h?C("noumena.skill_select.collapse_skills"):C("noumena.skill_select.show_all_skills")})})})]})})})},rb=()=>t(ve,{"data-test":"SkeletonLoaderSkillElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderSkillElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderSkillElement-SkeletonLoaderElementHeader"}),m(Je,{gap:12,"data-test":"SkeletonLoaderSkillElement-StyledFlexRow",children:[t(ae,{w:140,h:40,r:8,"data-test":"SkeletonLoaderSkillElement-SizedSkeleton"}),t(ae,{w:140,h:40,r:8,"data-test":"SkeletonLoaderSkillElement-SizedSkeleton"}),t(ae,{w:94,h:40,r:8,"data-test":"SkeletonLoaderSkillElement-SizedSkeleton"}),t(ae,{w:168,h:40,r:8,"data-test":"SkeletonLoaderSkillElement-SizedSkeleton"}),t(ae,{w:145,h:40,r:8,"data-test":"SkeletonLoaderSkillElement-SizedSkeleton"})]})]})}),lb=e=>{var l;const{user:a}=ye(),{isOwner:n,space:o}=ge(),i=n?a==null?void 0:a.skills:((l=o==null?void 0:o.uid)==null?void 0:l.skills)||[],{isLoading:s}=Ct();return s?t(rb,{"data-test":"SkillsViewElement-SkeletonLoaderSkillElement"}):t(j,{children:i&&(i==null?void 0:i.length)>0&&t(Xe,{...e,"data-test":"SkillsViewElement-ElementWrapper",children:t(Zg,{"data-test":"SkillsViewElement-SkillListContainer",children:i==null?void 0:i.map(d=>t(Kg,{"data-test":"SkillsViewElement-SkillItem",children:t(Ra,{secondary:!0,size:"large","data-test":"SkillsViewElement-Chips",children:d==null?void 0:d.name})},d==null?void 0:d._id))})})})},sb=e=>e.isEditing?t(ib,{...e,"data-test":"SkillElement-SkillsEditElement"}):t(lb,{...e,"data-test":"SkillElement-SkillsViewElement"}),Mr=e=>{switch(e){case"zip":return"--icon-file-unknown-default";case"pdf":return"--icon-file-pdf-default";case"xls":case"xlsx":return"--icon-file-xls-default";case"doc":case"docx":return"--icon-file-doc-default";case"pptx":case"ppt":return"--icon-file-ppt-default";default:return"--icon-file-unknown-default"}},Xn=e=>Dc?["mp4"].includes(e):["mp4","mov"].includes(e),Gn=e=>["png","jpg","jpeg"].includes(e),Tr=e=>Xn(e)||Gn(e),db=u.div`
  flex-basis: 70%;
  margin-right: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  max-height: 100%;
  overflow: hidden;
  border-radius: 8px;
  border: 1px solid var(--border-file-unknown-default);

  @media (max-width: ${$t.TABLET_MAX}) {
    flex-basis: 100%;
    justify-content: center;
  }
`,cb=u.img`
  max-width: 100%;
  max-height: 100%;
  border-radius: 8px;
`,ub=u.video`
  max-width: 100%;
  max-height: 100%;
  border-radius: 8px;
`,mb=u.div`
  align-items: center;
  display: flex;
  flex-direction: column;
  width: 100%;
`,pb=u(E)`
  margin-top: 20px;
  color: var(--text-card-neutral-disabled);
`,hb=u.div`
  align-items: center;
  justify-content: center;
  position: absolute;
`,Zt={FilePreviewWrapper:db,Image:cb,PreviewVideo:ub,PreviewNotAvailableContainer:mb,PreviewNotAvailableText:pb,SpinnerContainer:hb};Is.GlobalWorkerOptions.workerSrc=`${window.location.origin}/pdf.worker.js`;const fb=e=>{const{file:a}=e,{height:n}=Re(),{t:o}=G(),[i,s]=r.useState(()=>!Tr(a.extension??"")),{isDesktop:l}=ot(),d=n-(l?240:100),c=()=>s(!0);return m(Zt.FilePreviewWrapper,{children:[Xn(a.extension??"")?t(Zt.PreviewVideo,{"data-testid":"preivew-video",autoPlay:!0,muted:!0,loop:!0,onLoadedData:c,children:t("source",{src:a.fileUrl??"","data-test":"FilePreview-source"})}):Gn(a.extension??"")?t(Zt.Image,{src:a.fileUrl??"","data-testid":"image-preview",onLoad:c}):a.extension==="pdf"?t(Ns,{file:a.fileUrl,onLoadSuccess:c,"data-test":"FilePreview-Document",children:t(Ps,{height:d,pageNumber:1,"data-test":"FilePreview-Page"})}):m(Zt.PreviewNotAvailableContainer,{children:[t(L,{name:"eye_off_m",size:64,color:"--icon-image-placeholder-neutral-default","data-test":"FilePreview-Icon"}),t(Zt.PreviewNotAvailableText,{children:o("noumena.file_manager.preview_modal.not_available")})]}),!i&&t(Zt.SpinnerContainer,{children:t(it,{"data-test":"FilePreview-Spinner"})})]})},Ir=r.createContext({}),gb=({children:e,...a})=>{const{flags:{noumEditor2:n}}=le(),[o,i]=r.useState(!0),[s,l]=r.useState(!1),[d,c]=r.useState(!1),[h,p]=r.useState(null),[g,b]=r.useState(null),[f,x]=r.useState(null),[w,S]=r.useState(Tn.All),[y,k]=r.useState(""),{data:v,refetch:T,loading:F,networkStatus:P}=ds({variables:{input:{filesManagerElementId:a.element._id??"",filterType:w,offset:0,limit:50,query:y}},skip:!a.element._id,fetchPolicy:"cache-and-network"}),[_]=cs({onCompleted:()=>{T()}}),[M]=us({onCompleted:()=>{T()}}),[W]=ms({onCompleted:()=>{T()}}),[O]=ps({onCompleted:()=>{T()}}),U=r.useCallback(async I=>{var N;return(N=(await _({variables:{input:I}})).data)==null?void 0:N.addNoumFile},[_]),Q=r.useCallback(async I=>{var N;return(N=(await M({variables:{input:I}})).data)==null?void 0:N.updateNoumFile},[M]),V=r.useCallback(async I=>{var N;return(N=(await W({variables:{fileId:I}})).data)==null?void 0:N.deleteNoumFile},[W]),$=r.useCallback(async I=>{var N;return(N=(await O({variables:{fileId:I}})).data)==null?void 0:N.markNoumFileAsDownloaded},[O]),q=r.useMemo(()=>Ke((v==null?void 0:v.noumFiles.data)??[]),[v==null?void 0:v.noumFiles.data]),z=r.useMemo(()=>({isCollapse:o&&!n,setIsCollapse:i,showAddFileModal:s,showEditFileModalId:g,showDeleteFileModalId:h,setShowAddFileModal:l,setShowEditFileModalId:b,setShowDeleteFileModalId:p,addNoumFileMutation:_,files:q,showFilePreviewModalId:f,setShowFilePreviewModalId:x,addFile:U,updateFile:Q,deleteFile:V,loading:F,filterType:w,setFilterType:S,networkStatus:P,markNoumFileAsDownloaded:$,showAllFilesModal:d,setShowAllFilesModal:c,hasFiles:q.length>0,setSearchQuery:k,searchQuery:y,...a}),[o,n,s,g,h,_,q,f,U,Q,V,F,w,P,$,d,a,k,y]);return t(Ir.Provider,{value:z,children:e})},dt=()=>r.useContext(Ir),Nr=({onDelete:e,onEdit:a,onPreview:n,fileOwnerId:o})=>{const{isOwner:i}=dt(),{user:s}=ye(),d=((s==null?void 0:s._id)??"")===o,{t:c}=G(),h=r.useMemo(()=>{const g=[];return n&&g.push({label:c("noumena.file_manager.action_buttons.preview"),key:"preview",type:"value",value:"preview",icon:t(L,{name:"eye_on_m",size:16,color:"--icon-tablecell-neutral-highlighted","data-test":"FileManagerEllipsisMenu-menuOptions-Icon"})}),a&&(i||d)&&g.push({label:c("noumena.file_manager.action_buttons.edit"),type:"value",key:"edit",value:"edit",icon:t(L,{name:"edit_m",size:16,color:"--icon-tablecell-neutral-highlighted","data-test":"FileManagerEllipsisMenu-menuOptions-Icon"})}),e&&(i||d)&&g.push({label:c("noumena.file_manager.action_buttons.delete"),type:"value",key:"delete",value:"delete",intent:"danger",icon:t(L,{name:"delete_m",size:16,color:"--icon-tablecell-danger-primary-default","data-test":"FileManagerEllipsisMenu-menuOptions-Icon"})}),g},[d,i,e,a,n,c]),p=g=>{switch(g){case"delete":e==null||e();break;case"edit":a==null||a();break;case"preview":n==null||n();break}};return h.length?t(Ri,{containerWidth:"125px",neutral:!0,onClick:p,menuOptions:h,iconColorToken:"--button-card-neutral-default","data-test":"FileManagerEllipsisMenu-EllipsisMenu"}):null},bb=u.div`
  display: flex;
  flex-direction: column;
  flex-basis: 30%;
  width: 100%;
  justify-content: space-between;

  @media (max-width: ${$t.TABLET_MAX}) {
    flex-basis: 100%;
  }
`,xb=u.div`
  display: flex;
  width: 100%;
  flex: 1;
  height: 100%;

  @media (max-width: ${$t.TABLET_MAX}) {
    flex-direction: column;
  }
`,Cb=u(E)`
  color: var(--text-card-neutral-default);
`,yb=u(E)`
  color: var(--text-modal-neutral-highlighted);
`,wb=u.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 12px;
  row-gap: 4px;
  margin-top: 16px;
`,Sb=u.div`
  margin-top: 16px;
  display: flex;
  justify-content: space-between;

  @media (max-width: ${$t.TABLET_MAX}) {
    display: grid;
    grid-template-columns: 0.3fr 0.7fr;
  }
`,vb=u.div`
  display: flex;
  gap: 16px;
  margin-top: 24px;

  @media (max-width: ${$t.TABLET_MAX}) {
    width: 100%;
    justify-content: space-between;
  }
`,kb=u.div`
  gap: 16px;
  display: flex;
`,Eb=u.div`
  max-height: 100%;
  width: 100%;
  flex-grow: 1;
`,we={FileInfoWrapper:bb,ModalBody:xb,LabelText:Cb,ValueText:yb,DescriptionWrapper:wb,TableRowItem:Sb,FooterButtons:vb,ButtonsWrapper:kb,ModalBodyInnerWrapper:Eb},_b=e=>{var v,T;const{file:a,isOpen:n,handleClose:o}=e,{isDesktop:i,isTablet:s,isMobile:l}=ot(),{t:d}=G(),{user:c}=ye(),h=hs(Ve.XXL),[p,g]=r.useState("preview"),b=Re(),f=((v=a==null?void 0:a.owner)==null?void 0:v._id)===(c==null?void 0:c._id),{setShowEditFileModalId:x,setShowDeleteFileModalId:w,isOwner:S,markNoumFileAsDownloaded:y}=dt();if(!a)return null;const k=t("a",{style:{flexGrow:1,display:"flex",textDecoration:"none"},href:a.fileUrl??"",download:!0,onClick:()=>{Ye.delay(()=>y(a._id),150)},rel:"noreferrer","data-test":"FilePreviewModal-DownloadButton",children:t(X,{primary:!0,size:l||s?"large":"small",leftIcon:t(L,{size:18,name:"download_m","data-test":"FilePreviewModal-DownloadButton-Icon"}),grow:!0,"data-test":"FilePreviewModal-DownloadButton-Button",children:d("noumena.file_manager.action_buttons.download")})});return m(Ne,{isFullScreen:!i,testId:"link-confirmation-modal",open:n,onClose:o,enableCloseButton:!0,size:Ve.XXL,disableBackdropClick:!0,"data-test":"FilePreviewModal-Modal",children:[m(Qe,{isFullScreen:!i,maxTitleWidth:h-300,"data-test":"FilePreviewModal-ModalHeader",children:[t(E,{font:"heading-xs","data-test":"FilePreviewModal-TSpan",children:a.name}),s&&t(Xa,{onChange:F=>g(F),inputList:[{id:"preview",name:"preview",text:d("noumena.file_manager.preview_modal.tabs.preview"),labelSize:"auto"},{id:"info",name:"info",text:d("noumena.file_manager.preview_modal.tabs.info"),labelSize:"auto"}],tabWidth:s?`${b.width-32}px`:"100%",selectedId:p,mode:"isUnderline",isWithoutImage:!0,windowSize:b.width,fontSize:s?"--font-input-small-size":"--font-button-small-size",isMobile:l,"data-test":"FilePreviewModal-BasicChipsTabsForm"})]}),t(Ue,{isFullScreen:!i,noFooter:!s,style:{alignItems:"stretch",flexDirection:"unset"},"data-test":"FilePreviewModal-ModalBody",children:t(we.ModalBodyInnerWrapper,{children:m(we.ModalBody,{children:[(!s||s&&p==="preview")&&t(fb,{file:a,"data-test":"FilePreviewModal-FilePreview"}),(!s||s&&p==="info")&&m(R,{vertical:!0,fullWidth:!0,justify:"space-between",gap:16,"data-test":"FilePreviewModal-Stack",children:[m(R,{vertical:!0,fullWidth:!0,"data-test":"FilePreviewModal-Stack",children:[a.description?m(we.DescriptionWrapper,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.description")}),t(we.ValueText,{font:"body-m",children:a.description})]}):null,m(we.FileInfoWrapper,{children:[m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.size")}),m(we.ValueText,{font:"footnote",children:[Qi(a.fileSize)," MB"]})]}),m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.date_added")}),t(we.ValueText,{font:"footnote",children:Sa(new Date(a.uploadedAt),"dd MMM yyyy")})]}),m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.uploaded_by")}),t(we.ValueText,{font:"footnote",children:De.renderFullName(a.owner)})]}),m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.file_type")}),t(we.ValueText,{font:"footnote",children:a.extension})]}),m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.downloads_count")}),t(we.ValueText,{font:"footnote",children:a.downloadsCount})]}),m(we.TableRowItem,{children:[t(we.LabelText,{font:"footnote",children:d("noumena.file_manager.preview_modal.visible_for")}),t(we.ValueText,{font:"footnote",children:a.visibilityRoles.map(F=>d(`noumena.file_manager.visibility_roles.${F.toLowerCase()}`)).join(", ")})]})]})]}),i&&m(R,{fullWidth:!0,gap:16,"data-test":"FilePreviewModal-Stack",children:[k,t(Nr,{onDelete:()=>{w(a._id)},onEdit:()=>{o(),x(a._id)},fileOwnerId:(T=a.owner)==null?void 0:T._id,"data-test":"FilePreviewModal-FileManagerEllipsisMenu"})]})]})]})})}),(s||l)&&t(xt,{isFullScreen:l,"data-test":"FilePreviewModal-ModalFooter",children:l?t(we.FooterButtons,{children:S||f?m(j,{children:[t(X,{intent:"negative",secondary:!0,size:"large",leftIcon:t(L,{size:18,name:"delete_m","data-test":"FilePreviewModal-Icon"}),onClick:()=>w(a._id),"data-test":"FilePreviewModal-Button"}),t(we.ButtonsWrapper,{children:t(X,{tertiary:!0,size:"large",onClick:()=>{o(),x(a._id)},leftIcon:t(L,{size:18,name:"edit_m","data-test":"FilePreviewModal-Icon"}),"data-test":"FilePreviewModal-Button"})}),k]}):k}):t(we.FooterButtons,{children:S||f?m(R,{justify:"space-between",fullWidth:!0,"data-test":"FilePreviewModal-Stack",children:[t(X,{intent:"negative",secondary:!0,size:"large",leftIcon:t(L,{size:18,name:"delete_m","data-test":"FilePreviewModal-Icon"}),onClick:()=>w(a._id),"data-test":"FilePreviewModal-Button"}),m(R,{gap:16,"data-test":"FilePreviewModal-Stack",children:[t(X,{tertiary:!0,size:"large",onClick:()=>{o(),x(a._id)},leftIcon:t(L,{size:18,name:"edit_m","data-test":"FilePreviewModal-Icon"}),"data-test":"FilePreviewModal-Button",children:d("noumena.file_manager.preview_modal.edit")}),k]})]}):k})})]})},Mb=r.memo(e=>{const{isOpen:a,handleClose:n}=e,{t:o}=G();return t(Ne,{open:a,onClose:n,size:Ve.S,disableBackdropClick:!0,"data-test":"DiscardChangesModal-Modal",children:m(j,{children:[t(Qe,{"data-test":"DiscardChangesModal-ModalHeader",children:o("noumena.file_manager.discard_changes_modal.title")}),t(Ue,{align:"center","data-test":"DiscardChangesModal-ModalBody",children:t(E,{colorToken:"--text-modal-neutral-default",font:"body-l",textAlign:"center","data-test":"DiscardChangesModal-TSpan",children:o("noumena.file_manager.discard_changes_modal.description")})}),m(xt,{flexDirection:"column",gap:16,"data-test":"DiscardChangesModal-ModalFooter",children:[t(X,{primary:!0,intent:"negative",size:"full",onClick:()=>n(!0),"data-test":"DiscardChangesModal-Button",children:o("noumena.file_manager.discard_changes_modal.confirm")}),t(X,{tertiary:!0,size:"full",onClick:()=>n(!1),"data-test":"DiscardChangesModal-Button",children:o("noumena.file_manager.discard_changes_modal.cancel")})]})]})})}),Tb=u.div`
  display: flex;
  width: 100%;
  flex-direction: column;
`,Ib=u.div`
  display: flex;
  width: 100%;
  gap: 16px;
`,Nb=u.div`
  display: flex;
  flex-direction: column;
  row-gap: 16px;
`,Pb=u.div`
  display: flex;
  align-items: center;
  padding-left: 8px;
`,Ab=u.label`
  padding-left: 16px;
`,Lb=u(E)`
  color: var(--text-modal-header-neutral-default);
`,Bb=u.div`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;
  flex: 0 0 1;
  justify-content: space-between;
  align-items: center;
  border: 1px solid var(--border-card-neutral-highlighted);
  border-radius: 8px;
  padding: 12px;
`,Fb=u.div`
  display: flex;
  align-items: center;
`,Ob=u.div`
  border: 1px solid var(--border-file-unknown-default);
  border-radius: 8px;
  padding: 12px;
`,Wb=u.div`
  display: flex;
  flex-direction: column;
  padding-left: 16px;
`,$b=u(E)`
  color: var(--text-card-header-neutral-highlighted);
`,Rb=u(E)`
  color: var(--text-card-neutral-default);
`,zb=u.div`
  position: relative;
  padding: 16px;
`,Hb=u(E)`
  color: var(--text-card-brand-primary-default);
`,Ze={ModalBody:Tb,FooterButtons:Ib,FormContainer:Nb,CheckBoxLabel:Ab,CheckBoxWrapper:Pb,VisibleForLabel:Lb,UploadedItem:Bb,UploadedItemLeftWrapper:Fb,UploadedItemIconContainer:Ob,UploadedItemTextContainer:Wb,UploadedItemFileName:$b,UploadedItemSizeText:Rb,SpinnerContainer:zb,UploadingText:Hb},Xo=e=>{var H,se;const{isOpen:a,handleClose:n,file:o}=e,{t:i}=G(),{element:s,addFile:l,updateFile:d,connectionRole:c,isOwner:h}=dt(),{isMobile:p}=ot(),[g,b]=r.useState((o==null?void 0:o.fileUrl)??""),[f,x]=r.useState(!1),[w,S]=r.useState(!1),[y,k]=r.useState({name:(o==null?void 0:o.name)??"",type:"",size:(o==null?void 0:o.fileSize)??0,extension:(o==null?void 0:o.extension)??""}),{addSuccessIconToast:v}=st(),T=!!o,[F,P]=r.useState(!1),_=()=>{S(!1),D(),n()},M=()=>{I||g?S(!0):_()},W=Y=>{k({name:Y.name,type:Y.type,size:Y.size,extension:Y.name.substring(Y.name.lastIndexOf(".")+1)})},{register:O,getValues:U,handleSubmit:Q,setValue:V,formState:{isValid:$,errors:q,isSubmitting:z,isDirty:I}}=oa({mode:"onChange",defaultValues:{fileName:(o==null?void 0:o.name)??"",description:(o==null?void 0:o.description)??"",visibleFor:(o==null?void 0:o.visibilityRoles)??[]},resolver:ia(Vc)}),B=async Y=>{T?(await d({name:Y.fileName,visibilityRoles:Y.visibleFor,description:Y.description,fileId:o==null?void 0:o._id,fileUrl:g??o.fileUrl}),v(i("noumena.file_manager.toast.file_updated"))):(await l({fileSize:y.size,fileUrl:g,name:Y.fileName,visibilityRoles:Y.visibleFor,description:Y.description,filesManagerElementId:s._id??""}),v(i("noumena.file_manager.toast.file_uploaded"))),n()},N=Y=>{Y&&(b(Y),x(!1))},D=()=>{b(""),P(!1),k({name:"",type:"",size:0,extension:""})},ie=(Y,Me)=>{const oe=U("visibleFor");Me?V("visibleFor",[...oe,Y],{shouldValidate:!0,shouldDirty:!0}):V("visibleFor",oe.filter(ke=>Y!==ke),{shouldValidate:!0,shouldDirty:!0})},te=Y=>m(Ze.CheckBoxWrapper,{children:[t(li,{isChecked:U("visibleFor").includes(Y),icon:t(L,{name:"tick_m",size:20,color:"--icon-checkbox-neutral-alt-default","data-test":"FileUploadModal-renderCheckbox-Icon"}),onChange:Me=>ie(Y,Me),"data-test":"FileUploadModal-renderCheckbox-Checkbox"}),t(Ze.CheckBoxLabel,{children:i(`noumena.file_manager.visibility_roles.${Y.toLowerCase()}`)})]});return m(j,{children:[t(Ne,{isFullScreen:p,testId:"link-confirmation-modal",open:a,onClose:M,enableCloseButton:!0,size:Ve.L,disableBackdropClick:!0,"data-test":"FileUploadModal-Modal",children:m("form",{onSubmit:Q(B),children:[t(Qe,{isFullScreen:p,"data-test":"FileUploadModal-ModalHeader",children:i(T?"noumena.file_manager.upload_modal.title_edit":"noumena.file_manager.upload_modal.title_create")}),t(Ue,{isFullScreen:p,"data-test":"FileUploadModal-ModalBody",children:t(Ze.ModalBody,{children:m(Ze.FormContainer,{children:[t(zi,{acceptedFileTypes:fs,allTypesSupported:!0,onUploading:x,maxSize:20,setMediaDetail:W,onContentChange:N,onError:Y=>P(Y),marginTop:0,isHidden:!!y.name,keepOriginalName:!0,"data-test":"FileUploadModal-UploadMedia"}),y.name?m(Ze.UploadedItem,{children:[m(Ze.UploadedItemLeftWrapper,{children:[f?t(Ze.SpinnerContainer,{children:t(it,{"data-test":"FileUploadModal-Spinner"})}):t(Ze.UploadedItemIconContainer,{children:t(L,{name:"file_m",size:24,color:Mr(y.extension??(o==null?void 0:o.extension)),"data-test":"FileUploadModal-Icon"})}),m(Ze.UploadedItemTextContainer,{children:[t(Ze.UploadedItemFileName,{font:"body-m",children:y.name??(o==null?void 0:o.name)}),m(Ze.UploadedItemSizeText,{font:"footnote",children:[i("noumena.file_manager.size_in_mb",{size:Qi(y.size??(o==null?void 0:o.fileSize))}),f?t(Ze.UploadingText,{font:"footnote",children:`  ${i("noumena.file_manager.upload_modal.uploading")}`}):F?t(E,{font:"footnote",colorToken:"--text-card-danger-primary-default","data-test":"FileUploadModal-TSpan",children:`  ${i("Upload failed")}`}):null]})]})]}),t(X,{size:"small",tertiary:!0,disabled:f||z,icon:t(L,{name:"delete_m",size:20,color:"--button-card-neutral-default","data-test":"FileUploadModal-Icon"}),onClick:D,neutral:!0,"data-test":"FileUploadModal-Button"})]}):null,t(Oe,{...O("fileName"),label:i("noumena.file_manager.upload_modal.file_name"),value:U("fileName"),error:!!q.fileName,helperText:(H=q.fileName)==null?void 0:H.message,"data-test":"FileUploadModal-TextField"}),t(Oe,{...O("description",{required:!1}),label:i("noumena.file_manager.upload_modal.description"),value:U("description"),error:!!q.description,helperText:(se=q.description)==null?void 0:se.message,"data-test":"FileUploadModal-TextField"}),m(R,{vertical:!0,"data-test":"FileUploadModal-Stack",children:[t(Ze.VisibleForLabel,{font:"footnote-bold",children:i("noumena.file_manager.upload_modal.visible_for")}),t(E,{colorToken:"--text-modal-neutral-default",font:"footnote","data-test":"FileUploadModal-TSpan",children:i("noumena.file_manager.upload_modal.visible_for_helper_text")})]}),h||c==="GUEST"?te(mo.Guest):null,h||c==="FAVORITE"?te(mo.Favorite):null]})})}),t(xt,{isFullScreen:p,"data-test":"FileUploadModal-ModalFooter",children:m(Ze.FooterButtons,{children:[t(X,{tertiary:!0,size:"large",grow:!0,onClick:M,"data-test":"FileUploadModal-Button",children:i("noumena.file_manager.upload_modal.cancel")}),t(X,{primary:!0,size:"large",grow:!0,disabled:!$||!g,type:"submit",loading:z,"data-test":"FileUploadModal-Button",children:i("noumena.file_manager.upload_modal.save")})]})})]})}),t(Mb,{isOpen:w,handleClose:Y=>Y?_():S(!1),"data-test":"FileUploadModal-DiscardChangesModal"})]})},Db=u.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 16px;
  margin-top: 16px;
`,Vb={ActionsButtonsContainer:Db},Ub=({isOpenModal:e,fileId:a,onClose:n,onConfirm:o})=>{const{deleteFile:i}=dt(),{logError:s}=gs(),[l,d]=r.useState(!1),{t:c}=G(),{addToast:h}=st(),p=async()=>{d(!0);try{await i(a),h("primary","icon",c("noumena.file_manager.toast.file_deleted")),o()}catch(g){s(g,"deleteNoumFile",!0)}finally{d(!1)}};return t(Ne,{isFullScreen:!1,open:e,testId:"question_modal",onClose:n,disableBackdropClick:!0,"data-test":"FileManagerDeleteModal-Modal",children:m(R,{gap:16,padding:14,vertical:!0,maxWidth:327,align:"center",justify:"center","data-test":"FileManagerDeleteModal-Stack",children:[t(E,{font:"heading-s-bold",colorToken:"--text-modal-header-neutral-default","data-test":"FileManagerDeleteModal-TSpan",children:c("noumena.file_manager.delete_modal.title")}),t(E,{"data-testid":"confirm_text",font:"body-l",textAlign:"center",colorToken:"--text-modal-neutral-default","data-test":"FileManagerDeleteModal-TSpan",children:c("noumena.file_manager.delete_modal.description")}),m(Vb.ActionsButtonsContainer,{children:[t(X,{primary:!0,size:"full",testId:"confirm_btn",intent:"negative",grow:!0,loading:l,onClick:p,"data-test":"FileManagerDeleteModal-Button",children:c("noumena.file_manager.delete_modal.confirm_button")}),t(X,{tertiary:!0,onClick:n,size:"full",testId:"cancel_btn","data-test":"FileManagerDeleteModal-Button",children:c("noumena.file_manager.delete_modal.cancel_button")})]})]})})},Wn=()=>m(R,{vertical:!0,fullWidth:!0,gap:8,"data-test":"SkeletonLoaderFileManagerBody-Stack",children:[m(An,{gap:12,fullWidth:!0,justify:"space-between","data-test":"SkeletonLoaderFileManagerBody-StyledFlexRowBordered",children:[m(Je,{gap:16,"data-test":"SkeletonLoaderFileManagerBody-StyledFlexRow",children:[t(ae,{w:48,h:48,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"}),m(Ge,{gap:8,"data-test":"SkeletonLoaderFileManagerBody-StyledFlexColumn",children:[t(ae,{w:140,h:20,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"}),t(ae,{w:140,h:16,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"})]})]}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"})]}),m(An,{gap:12,fullWidth:!0,justify:"space-between","data-test":"SkeletonLoaderFileManagerBody-StyledFlexRowBordered",children:[m(Je,{gap:16,"data-test":"SkeletonLoaderFileManagerBody-StyledFlexRow",children:[t(ae,{w:48,h:48,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"}),m(Ge,{gap:8,"data-test":"SkeletonLoaderFileManagerBody-StyledFlexColumn",children:[t(ae,{w:140,h:20,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"}),t(ae,{w:140,h:16,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"})]})]}),t(ae,{w:24,h:24,r:8,"data-test":"SkeletonLoaderFileManagerBody-SizedSkeleton"})]})]}),Qb=u.div`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--bg-separator-neutral-default);
  padding-bottom: 8px;
  min-width: 0;
  overflow: hidden;
`,jb=u.div`
  display: flex;
  flex-direction: column;
  padding-left: 16px;
  min-width: 0;
  flex-basis: 100%;
`,qb=u.div`
  display: flex;
`,Xb=u.div`
  border: 1px solid var(--border-file-unknown-default);
  border-radius: 8px;
  width: 46px;
  height: 46px;
  align-items: center;
  justify-content: center;
  display: flex;
`,Gb=u.div`
  display: flex;
  align-items: center;
  min-width: 0;
  overflow: hidden;
  cursor: pointer;
`,Yb=u(E)`
  color: var(--text-card-header-neutral-highlighted);
`,Jb=u(E)`
  color: var(--text-tablecell-body-neutral-default);
`,Zb=u.img`
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
`,Kb=u.video`
  border-radius: 8px;
  width: 48px;
  height: 48px;
  object-fit: cover;
`,ex=u.div`
  position: absolute;
  left: 24px;
  top: 50%;
`,tx=u.div`
  width: 48px;
  height: 48px;
  position: relative;
`,ut={Container:Qb,TextContainer:jb,IconsContainer:qb,LeftWrapper:Gb,FileName:Yb,FileDescription:Jb,FileIconContainer:Xb,Image:Zb,PreviewVideo:Kb,SpinnerContainer:ex,IconContainer:tx},ax=({file:e})=>{var c;const{setShowEditFileModalId:a,setShowDeleteFileModalId:n,setShowFilePreviewModalId:o,markNoumFileAsDownloaded:i}=dt(),[s,l]=r.useState(()=>!Tr(e.extension??"")),d=()=>l(!0);return m(ut.Container,{children:[m(ut.LeftWrapper,{onClick:()=>o(e._id),children:[m(ut.IconContainer,{children:[!s&&t(ut.SpinnerContainer,{children:t(it,{zIndex:10,"data-test":"FileListItem-Spinner"})}),Xn(e.extension??"")?t(ut.PreviewVideo,{"data-testid":"preivew-video",muted:!0,onLoadedData:d,preload:"metadata",children:t("source",{src:e.fileUrl??"","data-test":"FileListItem-source"})}):Gn(e.extension??"")?t(ut.Image,{src:e.fileUrl??"",onLoad:d}):t(ut.FileIconContainer,{children:t(L,{name:"file_m",size:24,color:Mr(e.extension??""),"data-test":"FileListItem-Icon"})})]}),m(ut.TextContainer,{children:[t(ut.FileName,{overflow:"ellipsis",font:"body-m",children:`${e.name}.${e.extension}`}),t(ut.FileDescription,{overflow:"ellipsis",font:"footnote",children:e.description})]})]}),m(ut.IconsContainer,{children:[t("a",{href:e.fileUrl??"",onClick:()=>Ye.delay(()=>i(e._id),150),download:!0,rel:"noreferrer",children:t(X,{size:"small",tertiary:!0,icon:t(L,{name:"download_m",size:20,color:"--button-card-neutral-default","data-test":"FileListItem-Icon"}),neutral:!0,"data-test":"FileListItem-Button"})}),t(Nr,{onDelete:()=>n(e._id),onEdit:()=>a(e._id),onPreview:()=>o(e._id),fileOwnerId:(c=e.owner)==null?void 0:c._id,"data-test":"FileListItem-FileManagerEllipsisMenu"})]})]})},nx=u.div`
  width: 100%;
  display: grid;
  column-gap: 8px;
  grid-template-columns: ${({fullWidth:e})=>e?"1fr":"1fr 1fr"};
  position: relative;

  @media (max-width: ${$t.MOBILE_L_MAX}) {
    grid-template-columns: 1fr;
  }
`,ox=u(R)`
  width: 100%;
  min-height: 140px;
`,ix=u(R).attrs({align:"center",vertical:!0,fullWidth:!0})``,rx=u(E)`
  color: var(--text-card-neutral-default);
  padding-top: 16px;
`,lx=u(R).attrs({vertical:!0})`
  width: 100%;
  align-self: center;
  gap: 16px;
`,jt={Container:nx,EmptyState:ix,EmptyStateText:rx,EmptyStateContainer:lx,ListWrapper:ox},sx=({isSeachResult:e})=>{const{t:a}=G(),{setShowAddFileModal:n,isEditing:o}=dt();return t(jt.EmptyStateContainer,{children:o?m(jt.EmptyState,{children:[t(L,{name:"file_m",size:64,color:"--icon-card-placeholder-neutral-default","data-test":"EmptyState-Icon"}),t(jt.EmptyStateText,{children:a("noumena.file_manager.edit_mode.empty_state_message")})]}):m(j,{children:[m(jt.EmptyState,{children:[t(L,{name:"file_m",size:64,color:"--icon-card-placeholder-neutral-default","data-test":"EmptyState-Icon"}),t(jt.EmptyStateText,{children:a("noumena.file_manager.empty_state_message")})]}),!e&&t(R,{fullWidth:!0,justify:"center","data-test":"EmptyState-Stack",children:t(X,{"data-testid":"add-button",onClick:()=>n(!0),size:"small",secondary:!0,"data-test":"EmptyState-Button",children:a("noumena.file_manager.button.add_a_file")})})]})})},Pr=({maxFilesToDisplay:e})=>{const{flags:{noumEditor2:a}}=le(),{isCollapse:n,files:o,networkStatus:i,hasFiles:s,searchQuery:l}=dt();return t(jt.ListWrapper,{children:s?t(jt.Container,{fullWidth:o.length===1||a,children:o.slice(0,e||o.length).map((d,c)=>n&&c>=2?null:t(ax,{file:d,"data-test":"FileList-FileListItem"},d._id))}):i===bt.ready?t(sx,{isSeachResult:!!l,"data-test":"FileList-EmptyState"}):t(Wn,{"data-test":"FileList-SkeletonLoaderFileManagerBody"})})};function dx(e,a){const n=r.useRef(e);return r.useLayoutEffect(()=>{n.current=e}),r.useMemo(()=>Ye.debounce(n.current,a),[a])}const cx=u(Oe)`
  svg path {
    fill: var(--icon-input-neutral-default);
  }
`,ux={SearchField:cx},Ar=()=>{const{t:e}=G(),{setSearchQuery:a,searchQuery:n}=dt(),o=dx(a,500);return t(ux.SearchField,{fullWidth:!0,inputSize:"small",placeholder:e("noumena.file_manager.search"),leftIcon:t(L,{name:"search_m",size:24,color:"--icon-input-neutral-default","data-test":"FileManagerSearch-Icon"}),rightIcon:n&&t(L,{onClick:()=>a(""),name:"clear_m",size:24,color:"--icon-input-neutral-default","data-test":"FileManagerSearch-Icon"}),rightIconColor:"var(--icon-input-brand-primary-default)",value:n||"",onChange:i=>o(i.currentTarget.value),"data-testid":"global-search-input"})},Lr=()=>{const{t:e}=G(),{filterType:a,setFilterType:n}=dt();return t(Xa,{onChange:n,inputList:[{id:Tn.All,name:"all",text:e("noumena.file_manager.tabs.all"),labelSize:"medium"},{id:Tn.UploadedByMe,name:"uploadedByMe",text:e("noumena.file_manager.tabs.uploadedByMe"),labelSize:"medium"}],selectedId:a,mode:"isUnderline",tabWidth:"120px",tabCSS:{maxHeight:35},isWithoutImage:!0,isMobile:!1,fontSize:"--font-button-small-size","data-test":"FileManagerTabs-BasicChipsTabsForm"})},mx=({isOpenModal:e,onClose:a})=>{const{t:n}=G(),{isDesktop:o,isMobile:i}=ot();return m(Ne,{isFullScreen:!o,open:e,testId:"file-manager-show-all-modal",onClose:a,disableBackdropClick:!0,size:Ve.XL,enableCloseButton:!0,"data-test":"FileManagerShowAllModal-Modal",children:[t(Qe,{"data-test":"FileManagerShowAllModal-ModalHeader",children:n("noumena.file_manager.modal.all_files.title")}),m(R,{fullWidth:!0,vertical:!0,"data-test":"FileManagerShowAllModal-Stack",children:[t(R,{fullWidth:!0,padding:i?"0 16px":void 0,"data-test":"FileManagerShowAllModal-Stack",children:t(Ar,{"data-test":"FileManagerShowAllModal-FileManagerSearch"})}),t(Lr,{"data-test":"FileManagerShowAllModal-FileManagerTabs"})]}),t(Ue,{style:{padding:"0px !important;"},"data-test":"FileManagerShowAllModal-ModalBody",children:t(R,{vertical:!0,gap:16,fullWidth:!0,padding:"16px 0 0","data-test":"FileManagerShowAllModal-Stack",children:t(Pr,{"data-test":"FileManagerShowAllModal-FileList"})})})]})},Br=()=>{const{isMobile:e}=ot();return t(ve,{"data-test":"SkeletonLoaderFileManagerElement-Card",children:m(Ge,{gap:21,justify:"baseline",align:"flex-start","data-test":"SkeletonLoaderFileManagerElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderFileManagerElement-SkeletonLoaderElementHeader"}),e?t(Ge,{fullWidth:!0,align:"flex-start",justify:"flex-start",gap:16,"data-test":"SkeletonLoaderFileManagerElement-StyledFlexColumn",children:t(Wn,{"data-test":"SkeletonLoaderFileManagerElement-SkeletonLoaderFileManagerBody"})}):t(Je,{fullWidth:!0,align:"flex-start",justify:"flex-start",gap:16,"data-test":"SkeletonLoaderFileManagerElement-StyledFlexRow",children:t(Wn,{"data-test":"SkeletonLoaderFileManagerElement-SkeletonLoaderFileManagerBody"})})]})})},px=u(R)`
  padding: 0;
  border-radius: 0;
  gap: 32px;
`;u.div`
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
`;const hx=u(X)`
  padding: 8px;
`,fx=u.div`
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  justify-content: flex-end;
`,gx=()=>{const{t:e}=G(),{isMobile:a}=ot(),{setShowAddFileModal:n,isCollapse:o,setIsCollapse:i,spaceId:s,element:l,currentTitle:d,files:c,hasFiles:h,isEditing:p,searchQuery:g,networkStatus:b}=dt(),{isNoumEditor2:f}=Rt(),x=()=>{i(!1)},w=!o&&(h||!!g||b===bt.setVariables),S=c.length,y=!p&&(h||!!g);return m(px,{"data-test":"FileManagerHeader-Container",children:[t(Ga,{spaceId:s,element:l,currentTitle:d,isCollapse:o,setIsCollapse:i,fullWidth:!f||!a,"data-test":"FileManagerHeader-ViewMode"}),m(fx,{"data-test":"FileManagerHeader-HeaderRightWrapper",children:[w?t(Ar,{"data-test":"FileManagerHeader-FileManagerSearch"}):null,o&&S>2&&t(X,{onClick:x,textOnly:!0,"data-test":"FileManagerHeader-Button",children:e("noumena.file_manager.header.see_all",{count:S})}),y&&t(hx,{"data-testid":"add-button",onClick:()=>n(!0),size:"small",primary:!f,secondary:f,icon:t(L,{name:"add_s",size:16,color:f?"--icon-button-brand-secondary-default":"--icon-button-neutral-alt-default","data-test":"FileManagerHeader-Icon"}),"data-test":"FileManagerHeader-AddButton"})]})]})},bx=u(ve)`
  width: 100%;
  box-sizing: border-box;
  border-radius: 0;
  position: relative;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;

  @media ${ue.LAPTOP} {
    border-radius: 16px;
    padding: 24px;
  }
  @media ${ue.TABLET} {
    border-radius: 16px;
  }
`,xx=u.div`
  display: flex;
  align-items: center;
  flex-direction: column;
`,Cx=u(E)`
  color: var(--text-card-neutral-default);
  padding-top: 16px;
`,yx={ViewModeWrapper:bx,EmptyState:xx,EmptyStateText:Cx},wx=()=>{const{t:e}=G(),{isCollapse:a,networkStatus:n,setShowAllFilesModal:o,hasFiles:i,files:s,searchQuery:l}=dt(),{isNoumEditor2:d}=Rt();return m(j,{children:[!a&&(i||n===bt.setVariables||!i&&l)?t(Lr,{"data-test":"FileManagerBody-FileManagerTabs"}):null,t(Pr,{maxFilesToDisplay:d?5:void 0,"data-test":"FileManagerBody-FileList"}),s.length>5&&d&&t(R,{fullWidth:!0,justify:"center","data-test":"FileManagerBody-Stack",children:t(X,{textOnly:!0,rightIcon:t(L,{name:"chevron_small_right_m",size:24,color:"--icon-tablecell-neutral-default","data-test":"FileManagerBody-Icon"}),onClick:()=>o(!0),"data-test":"FileManagerBody-Button",children:e("noumena.file_manager.button.all_files")})})]})},Sx=()=>{const{showAddFileModal:e,setShowAddFileModal:a,showEditFileModalId:n,setShowEditFileModalId:o,showDeleteFileModalId:i,setShowDeleteFileModalId:s,files:l,showFilePreviewModalId:d,setShowFilePreviewModalId:c,loading:h,networkStatus:p,showAllFilesModal:g,hasFiles:b,setShowAllFilesModal:f}=dt();return h&&!b&&p!==bt.setVariables?t(Br,{"data-test":"FileManagerViewMode-SkeletonLoaderFileManagerElement"}):m(j,{children:[m(yx.ViewModeWrapper,{children:[t(gx,{"data-test":"FileManagerViewMode-FileManagerHeader"}),t(wx,{"data-test":"FileManagerViewMode-FileManagerBody"})]}),!!d&&t(_b,{isOpen:!!d,handleClose:()=>c(null),file:l.find(({_id:x})=>d===x),"data-test":"FileManagerViewMode-FilePreviewModal"}),e&&t(Xo,{isOpen:e,handleClose:()=>{a(!1)},"data-test":"FileManagerViewMode-FileUploadModal"}),!!n&&t(Xo,{isOpen:!!n,file:l.find(({_id:x})=>x===n),handleClose:()=>{o(null)},"data-test":"FileManagerViewMode-FileUploadModal"}),!!i&&t(Ub,{isOpenModal:!!i,onClose:()=>s(null),onConfirm:()=>{s(null),c(null)},fileId:i,"data-test":"FileManagerViewMode-FileManagerDeleteModal"}),g&&t(mx,{isOpenModal:g,onClose:()=>f(!1),"data-test":"FileManagerViewMode-FileManagerShowAllModal"})]})},vx=e=>{const{flags:{noumEditor2:a}}=le(),{t:n}=G(),{isLoading:o}=Ct();if(o)return t(Br,{"data-test":"FileManagerElement-SkeletonLoaderFileManagerElement"});const{isEditing:i}=e;return i&&!a?t(Xe,{...e,"data-test":"FileManagerElement-ElementWrapper",children:e.isCustomPreview?t(j,{}):m(R,{justify:"center",vertical:!0,align:"center",gap:16,"data-test":"FileManagerElement-Stack",children:[t(L,{name:"file_m",size:64,color:"--icon-card-placeholder-neutral-default","data-test":"FileManagerElement-Icon"}),t(E,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"FileManagerElement-TSpan",children:n("noumena.file_manager.edit_mode_message")})]})}):t(gb,{...e,"data-test":"FileManagerElement-FileManagerElementProvider",children:t(Sx,{"data-test":"FileManagerElement-FileManagerViewMode"})})},kx=()=>t(ve,{"data-test":"SkeletonLoaderContractManagerElement-Card",children:m(Ge,{gap:16,align:"stretch","data-test":"SkeletonLoaderContractManagerElement-StyledFlexColumn",children:[t(kt,{"data-test":"SkeletonLoaderContractManagerElement-SkeletonLoaderElementHeader"}),t(Qt,{height:20,borderRadius:8,"data-test":"SkeletonLoaderContractManagerElement-Skeleton"}),t(Qt,{height:20,borderRadius:8,"data-test":"SkeletonLoaderContractManagerElement-Skeleton"}),t(Qt,{height:20,borderRadius:8,"data-test":"SkeletonLoaderContractManagerElement-Skeleton"}),t(Qt,{height:20,borderRadius:8,"data-test":"SkeletonLoaderContractManagerElement-Skeleton"}),t(Qt,{height:20,borderRadius:8,"data-test":"SkeletonLoaderContractManagerElement-Skeleton"})]})}),Ex=u.div`
  padding: 0;
  display: flex;
  flex-direction: row;
  border-radius: 0;
  justify-content: space-between;
`,_x=u.div`
  display: flex;
  align-items: center;
  gap: 12px;
`;function Go({setIsCollapse:e,spaceId:a,element:n,currentTitle:o,isOwner:i,handleNewContract:s,handleNewStatementOfWork:l,isEditing:d}){const{isNoumEditor2:c}=Rt();return m(Ex,{"data-test":"Container",children:[t(Ga,{spaceId:a,element:n,currentTitle:o,isCollapse:!1,setIsCollapse:e,isCollapseDisabled:!0,"data-test":"ViewMode"}),t(_x,{"data-test":"HeaderRightWrapper",children:(i||d)&&t(Uc,{primary:!c,secondary:c,icon:t(L,{name:"add_s",size:16,"data-test":"Icon"}),size:"small",disabled:d,onClick:h=>{switch(h){case"new_contract":return s();case"new_sow":return l();default:return null}},menuOptions:[{type:"value",key:"new_contract",label:"New Contract",value:"new_contract",icon:t(L,{name:"add_m",size:16,"data-test":"Icon"})},{type:"value",key:"new_sow",label:"New Statement of Work (SOW)",value:"new_sow",icon:t(L,{name:"add_m",size:16,"data-test":"Icon"})}],"data-test":"ButtonMenu"})})]})}const Mx=u.div`
  display: flex;
  align-items: center;
  flex-direction: column;
`,Tx=u(E)`
  color: var(--text-card-neutral-default);
  padding-top: 16px;
`,Ix=u(R).attrs(()=>({gap:12,align:"center"}))`
  padding-top: 16px;
`,Cn={EmptyState:Mx,EmptyStateText:Tx,EmptyStateButtons:Ix};function Nx({isOwner:e,handleNewContract:a,handleNewStatementOfWork:n}){const{t:o}=G();return t(j,{children:m(Cn.EmptyState,{children:[t(L,{name:"contract_m",size:64,color:"--icon-card-placeholder-neutral-default","data-test":"Icon"}),t(Cn.EmptyStateText,{children:o("noumena.noum_contract_manager.empty_state_message.contract")}),e&&m(Cn.EmptyStateButtons,{children:[t(X,{primary:!0,size:"small",leftIcon:t(L,{name:"plus_m",size:24,"data-test":"Icon"}),onClick:a,"data-test":"Button",children:o("noumena.noum_contract_manager.new_contract")}),t(X,{secondary:!0,size:"small",leftIcon:t(L,{name:"plus_m",size:24,"data-test":"Icon"}),onClick:n,"data-test":"Button",children:o("noumena.noum_contract_manager.new_statement_of_work")})]})]})})}const Yo=u(ve)`
  box-sizing: border-box;
  border-radius: 0;
  position: relative;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  overflow: visible;

  @media ${ue.LAPTOP} {
    border-radius: 16px;
    padding: 24px;
  }
  @media ${ue.TABLET} {
    border-radius: 16px;
  }

  ${({isEditing:e})=>e&&de`
      & * {
        pointer-events: none;
      }
    `}
`;var nt=(e=>(e.All="All",e.Drafts="Drafts",e.Sent="Sent",e.Signed="Signed",e))(nt||{});const Px=u.div`
  width: 100%;
  max-width: ${({iswrapped:e})=>e?"100%":"255px"};
`,Ax=({filterType:e,isOwner:a,isEmpty:n})=>{const{t:o}=G(),{flags:{noumEditor2:i}}=le(),s=r.useRef(null),{control:l,setValue:d}=As(),[c,h]=r.useState(!1);r.useLayoutEffect(()=>{i&&setTimeout(()=>{h(s.current?s.current.clientWidth<650:!1)},200)},[i]),r.useEffect(()=>{e&&d("type",e)},[e,d]);const p=r.useMemo(()=>{const g=[{id:nt.All,name:"all",text:o("noumena.noum.contract_manager.tabs.all"),labelSize:"auto"},{id:nt.Sent,name:"sent",text:o("noumena.noum.contract_manager.tabs.sent"),labelSize:"auto"},{id:nt.Signed,name:"signed",text:o("noumena.noum.contract_manager.tabs.signed"),labelSize:"auto"}];if(a){const b={id:nt.Drafts,name:"drafts",text:o("noumena.noum.contract_manager.tabs.drafts"),labelSize:"auto"};g.splice(2,0,b)}return g},[a,o]);return m(R,{ref:s,align:"center",justify:"space-between",wrap:i&&c?"reverse":"unset",gap:"12px",fullWidth:!0,"data-test":"InputFilters-Stack",children:[!n&&t(Ft,{name:"status",control:l,render:({field:{value:g,onChange:b}})=>t(Xa,{tabWidth:"46px",onChange:f=>b(f),inputList:p,selectedId:g,mode:"isUnderline",isWithoutImage:!0,isMobile:!1,fontSize:"--font-button-small-size","data-test":"InputFilters-BasicChipsTabsForm"}),"data-test":"InputFilters-Controller"}),t(Px,{iswrapped:c||!!n,"data-test":"InputFilters-TypeContainer",children:t(Ft,{name:"type",render:({field:{value:g,onChange:b}})=>t(Qc,{value:g,onChange:b,"data-test":"InputFilters-DocumentTypeFilterField"}),"data-test":"InputFilters-Controller"})})]})},$n=({filterType:e,filters:a,setFilters:n,isEmpty:o})=>t(Gt.Filters,{defaultValues:a,onSubmit:n,children:t(Ax,{filterType:e,isOwner:a.listPerspective===ha.Owner,isEmpty:o,"data-test":"FiltersViewMode-InputFilters"})});function Fr(e){switch(e){case nt.Drafts:return rn.Draft;case nt.Sent:return rn.Issued;case nt.Signed:return rn.Signed;default:return null}}function Or(e){switch(e){case nt.Drafts:return ln.Draft;case nt.Sent:return ln.Issued;case nt.Signed:return ln.Signed;default:return null}}function Lx(e,a){const n=Fr(a.status);return{noumIds:[e],status:n?[n]:null}}function Bx(e,a){const n=Or(a.status);return{noumIds:[e],status:n?[n]:null}}const Na={mapNoumDocumentStatusToContractStatus:Fr,mapNoumDocumentStatusToSowStatus:Or,toContractsList:Lx,toStatementsOfWorkList:Bx},Wr=({isOwner:e,spaceId:a,ROWS_PER_PAGE:n=5})=>{const o=wa(),{navigateAndSetOrigin:i}=Xc(),[s,l]=r.useState(!0),[d,c]=r.useState(),[h,p]=r.useState(),[g,b]=r.useState("hasNextPage"),[f,x]=r.useState("hasNextPage"),[w,S]=r.useState({type:St.Contract,status:nt.All,listPerspective:e?ha.Owner:ha.CounterParty}),y=jc(),k=qc(),{data:v,loading:T,fetchMore:F}=bs({fetchPolicy:"cache-and-network",variables:{viewingAs:w.listPerspective,filter:Na.toContractsList(a,w),limit:n,offset:0},skip:!a,onCompleted(z){var I;(I=z.getContractList)!=null&&I.data&&z.getContractList.data.length<n&&x("end")}}),{data:P,loading:_,fetchMore:M}=xs({fetchPolicy:"cache-and-network",variables:{viewingAs:w.listPerspective,filter:Na.toStatementsOfWorkList(a,w),limit:n,offset:0},skip:!a,onCompleted(z){var I;(I=z.getAllSOW)!=null&&I.data&&z.getAllSOW.data.length<n&&b("end")}});r.useEffect(()=>{c(Ke(v==null?void 0:v.getContractList.data))},[v==null?void 0:v.getContractList.data]),r.useEffect(()=>{p(Ke(P==null?void 0:P.getAllSOW.data))},[P==null?void 0:P.getAllSOW.data]);const W=r.useCallback(async()=>{const I=(await F({variables:{limit:n,offset:(d==null?void 0:d.length)||0}})).data.getContractList.data||[];(I.length||0)<n&&x("end");const B=[...d||[],...I];c(Ke(B))},[n,d,F]),O=r.useCallback(async()=>{const I=(await M({variables:{limit:n,offset:(h==null?void 0:h.length)||0}})).data.getAllSOW.data||[];(I.length||0)<n&&b("end");const B=[...h||[],...I];p(Ke(B))},[n,M,h]),U=w.type===St.Contract?W:O,Q=w.type===St.Contract?f:g,V=_||T,$=w.status===nt.All&&!V&&(d==null?void 0:d.length)===0&&(h==null?void 0:h.length)===0;return{...r.useMemo(()=>({filters:w,contracts:d,setFilters:S,isCollapse:s,setIsCollapse:l,hasNoDocuments:$,statementsOfWork:h,onFetchMore:U,infiniteState:Q,isLoading:V,handleNewContract:()=>{i(mt.createContract({noumId:a}))},handleNewStatementOfWork:()=>{i(mt.createStatementOfWork({noumId:a}))},handleNavigateToContract:z=>{if(w.listPerspective===ha.CounterParty){i(mt.viewContract({id:z._id}));return}i(y.canEdit(z)?mt.editContract({id:z._id}):mt.viewContract({id:z._id}))},handleNavigateToStatementOfWork:z=>{if(w.listPerspective===ha.CounterParty){i(mt.viewStatementOfWork({id:z._id}));return}i(k.canEdit(z)?mt.editStatementOfWork({id:z._id}):mt.viewStatementOfWork({id:z._id}))},handleNavigateToContractManager:()=>{const z=w.type===St.Contract?Na.mapNoumDocumentStatusToContractStatus(w.status):Na.mapNoumDocumentStatusToSowStatus(w.status);o(mt.contractManager({noumId:a,type:w.type,perspective:w.listPerspective,status:z??void 0}))}}),[U,Q,y,k,d,V,w,$,s,o,i,a,h])}},Fx=u.div`
  padding: 0 14px;
`,Ox=u(R)`
  position: absolute;
  min-height: 40px;
  padding: 0 14px;
  z-index: 9;
  ${({isTablet:e})=>e?"justify-content: end; flex-direction: row-reverse":"justify-content: space-between; padding-right: 102px"};
`;function Wx({data:e,rowsPerPage:a,loading:n,navigateToContract:o}){const{t:i}=G(),s=r.useMemo(()=>[{id:"title",title:i("noumena.contracts.title"),renderValue:l=>m(j,{children:[t(Ja,{type:St.Contract,style:{marginRight:8},"data-test":"columns-DocumentTypeTag"}),t(E,{font:"footnote-bold",color:"--text-card-neutral-highlighted","data-test":"columns-TSpan",children:l.title})]}),wordWrap:!1},{id:"status",title:i("noumena.contracts.status"),renderValue:l=>t(Za,{status:l.status,size:"small",contentFont:"footnote-bold","data-test":"columns-DocumentStatusTag"}),width:"10%"},{id:"buyer",title:i("noumena.contracts.buyer"),renderValue:l=>l.buyer?za.formatCompanyAndName(l.buyer):"",width:"20%",wordWrap:!1},{id:"serviceProvider",title:i("noumena.contracts.service_provider"),renderValue:l=>l.seller?za.formatCompanyAndName(l.seller):"",width:"20%",wordWrap:!1},{id:"effectiveDate",title:i("noumena.contracts.effective_date"),renderValue:l=>l.effectiveDate?en(Ka.parseDateString(l.effectiveDate)):"--",width:"15%"}],[i]);return t(Gt.Table,{loading:n&&!e.length,data:e,rowsPerPage:a,noResultsMessageRowSpan:5,columns:s,keyExtractor:l=>l._id,onRowClick:o})}function $x({data:e,rowsPerPage:a,loading:n,navigateToStatementOfWork:o}){const{t:i}=G(),s=r.useMemo(()=>[{id:"title",title:i("noumena.contracts.title"),renderValue:l=>m(j,{children:[t(Ja,{type:St.Sow,style:{marginRight:8},"data-test":"columns-DocumentTypeTag"}),t(E,{font:"footnote-bold",color:"--text-card-neutral-highlighted","data-test":"columns-TSpan",children:l.title})]}),wordWrap:!1},{id:"status",title:i("noumena.contracts.status"),renderValue:l=>t(Za,{status:l.status,size:"small",contentFont:"footnote-bold","data-test":"columns-DocumentStatusTag"}),width:"10%"},{id:"buyer",title:i("noumena.contracts.buyer"),renderValue:l=>{var d;return(d=l.linkedContract)!=null&&d.buyer?za.formatCompanyAndName(l.linkedContract.buyer):""},width:"20%",wordWrap:!1},{id:"serviceProvider",title:i("noumena.contracts.service_provider"),renderValue:l=>{var d;return(d=l.linkedContract)!=null&&d.seller?za.formatCompanyAndName(l.linkedContract.seller):""},width:"20%",wordWrap:!1},{id:"effectiveDate",title:i("noumena.contracts.effective_date"),renderValue:l=>{var d;return(d=l.linkedContract)!=null&&d.effectiveDate?en(Ka.parseDateString(l.linkedContract.effectiveDate)):"--"},width:"15%"}],[i]);return t(Gt.Table,{data:e,loading:n&&!e.length,rowsPerPage:a,noResultsMessageRowSpan:5,columns:s,keyExtractor:l=>l._id,onRowClick:o})}const yn=u(E).attrs({colorToken:"--text-card-neutral-default",font:"footnote"})``,wn=u(tn).attrs({colorToken:"--text-card-neutral-highlighted",font:"footnote"})``,Sn=u(R).attrs({justify:"space-between",fullWidth:!0})``;function Rx({data:e,loading:a,rowsPerPage:n,navigateToContract:o}){const{t:i}=G();return t(Gt.CollapsibleList,{data:e,loading:a,keyExtractor:s=>s._id,rowsPerPage:n,enableRowSelection:!1,renderLeft:s=>m(j,{children:[t(Ja,{type:St.Contract,style:{marginRight:8},"data-test":"DocumentTypeTag"}),t(tn,{font:"footnote-bold",colorToken:"--text-card-neutral-highlighted",onClick:()=>o(s),"data-test":"ButtonLink",children:s.title}),t(Za,{status:s.status,size:"small",contentFont:"footnote-bold","data-test":"DocumentStatusTag"})]}),renderRight:()=>t(j,{}),renderContent:s=>{var l,d;return m(R,{gap:8,vertical:!0,fullWidth:!0,padding:"16px 0","data-test":"Stack",children:[m(Sn,{children:[t(yn,{children:i("noumena.contracts.buyer")}),t(wn,{onClick:()=>o(s),children:(l=s.buyer)==null?void 0:l.displayName})]}),m(Sn,{children:[t(yn,{children:i("noumena.contracts.service_provider")}),t(wn,{onClick:()=>o(s),children:(d=s.seller)==null?void 0:d.displayName})]}),m(Sn,{children:[t(yn,{children:i("noumena.contracts.effective_date")}),t(wn,{onClick:()=>o(s),children:s.effectiveDate?en(Ka.parseDateString(s.effectiveDate)):"--"})]})]})}})}const Pa=u(E).attrs({colorToken:"--text-card-neutral-default",font:"footnote"})``,Aa=u(tn).attrs({colorToken:"--text-card-neutral-highlighted",font:"footnote"})``,La=u(R).attrs({justify:"space-between",fullWidth:!0})``;function zx({data:e,loading:a,rowsPerPage:n,navigateToStatementOfWork:o}){const{t:i}=G();return t(Gt.CollapsibleList,{data:e,loading:a,keyExtractor:s=>s._id,rowsPerPage:n,enableRowSelection:!1,renderLeft:s=>m(j,{children:[t(Ja,{type:St.Contract,style:{marginRight:8},"data-test":"DocumentTypeTag"}),t(tn,{font:"footnote-bold",colorToken:"--text-card-neutral-highlighted",onClick:()=>o(s),"data-test":"ButtonLink",children:s.title}),t(Za,{status:s.status,size:"small",contentFont:"footnote-bold","data-test":"DocumentStatusTag"})]}),renderRight:()=>t(j,{}),renderContent:s=>{var l,d,c,h,p,g;return m(R,{gap:8,vertical:!0,fullWidth:!0,padding:"16px 0","data-test":"Stack",children:[m(La,{children:[t(Pa,{children:i("noumena.contracts.contract")}),t(Aa,{onClick:()=>o(s),children:Gc.formatDocumentNameWithNumber(s.linkedContract)})]}),m(La,{children:[t(Pa,{children:i("noumena.contracts.buyer")}),t(Aa,{onClick:()=>o(s),children:(d=(l=s.linkedContract)==null?void 0:l.buyer)==null?void 0:d.displayName})]}),m(La,{children:[t(Pa,{children:i("noumena.contracts.service_provider")}),t(Aa,{onClick:()=>o(s),children:(h=(c=s.linkedContract)==null?void 0:c.seller)==null?void 0:h.displayName})]}),m(La,{children:[t(Pa,{children:i("noumena.contracts.effective_date")}),t(Aa,{onClick:()=>o(s),children:(p=s.linkedContract)!=null&&p.effectiveDate?en(Ka.parseDateString((g=s.linkedContract)==null?void 0:g.effectiveDate)):"--"})]})]})}})}function $r({isLoading:e,isContract:a,contracts:n,statementsOfWork:o,handleNavigateToContract:i,handleNavigateToStatementOfWork:s,rowsPerPage:l=5,layoutMode:d}){return d===$e.NOUMLAYOUTSMALL?a&&n?t(Rx,{data:n,loading:e,rowsPerPage:l,navigateToContract:i,"data-test":"ContractsCollapsibleList"}):o?t(zx,{data:o,loading:e,rowsPerPage:l,navigateToStatementOfWork:s,"data-test":"StatementsOfWorkCollapsibleList"}):t(j,{}):a&&n?t(Wx,{data:n,loading:e,rowsPerPage:l,navigateToContract:i,"data-test":"ContractsTable"}):o?t($x,{data:o,loading:e,rowsPerPage:l,navigateToStatementOfWork:s,"data-test":"StatementsOfWorkTable"}):t(j,{})}const Hx=r.memo(({isOpen:e,onClose:a,isOwner:n,spaceId:o,filterType:i,ROWS_PER_PAGE:s=10,handleNewContract:l})=>{const{t:d}=G(),{width:c}=Re(),h=c<qe.LAPTOP,{filters:p,setFilters:g,handleNavigateToStatementOfWork:b,handleNavigateToContractManager:f,handleNavigateToContract:x,statementsOfWork:w,contracts:S,isLoading:y,infiniteState:k,onFetchMore:v}=Wr({isOwner:n,spaceId:o,ROWS_PER_PAGE:s,filterType:i});return r.useEffect(()=>{e&&i&&g(T=>({...T,type:i}))},[i,e,g]),m(Ne,{open:e,onClose:a,enableCloseButton:!0,size:Ve.XL,testId:"testTellUsYourStoryModal",isFullScreen:h,disableBackdropClick:!0,style:{maxHeight:700},customCloseButton:m(j,{children:[m(Ox,{isTablet:h,gap:16,align:"center",fullWidth:!0,"data-test":"ContractViewAllModal-CustomHeadContainer",children:[t(X,{secondary:!0,textOnly:!0,size:"small",leftIcon:t(L,{name:"add_m",size:24,"data-test":"ContractViewAllModal-Icon"}),onClick:l,"data-test":"ContractViewAllModal-Button",children:d("noumena.noum_contract_manager.new_contract")}),t(X,{secondary:!0,textOnly:!0,size:"small",onClick:f,"data-test":"ContractViewAllModal-Button",children:d("noumena.noum_contract_manager.manage")})]}),t(Cs,{isFullScreen:h,onClose:a,"data-test":"ContractViewAllModal-ModalCloseButton"})]}),"data-test":"ContractViewAllModal-Modal",children:[t(Qe,{isFullScreen:h,justifyContent:"flex-start","data-test":"ContractViewAllModal-ModalHeader",children:d("noumena.chambers.toolbox.element.contracts")}),t(Fx,{"data-test":"ContractViewAllModal-FilterContainer",children:t($n,{filterType:i,filters:p,setFilters:g,"data-test":"ContractViewAllModal-FiltersViewMode"})}),t(K,{height:16,"data-test":"ContractViewAllModal-Spacer"}),t(Ue,{isFullScreen:h,mobileFlex:!0,"data-test":"ContractViewAllModal-ModalBody",children:t(aa,{onFetchMore:v,status:k,scrollbarWidth:0,width:"100%","data-test":"ContractViewAllModal-Infinite",children:t($r,{layoutMode:$e.NOUMLAYOUTBIG,isLoading:y,handleNavigateToStatementOfWork:b,handleNavigateToContract:x,isContract:p.type===St.Contract,contracts:S,rowsPerPage:s,statementsOfWork:w,"data-test":"ContractViewAllModal-BodyViewMode"})})})]})});function Dx({isOwner:e,spaceId:a,element:n,currentTitle:o,isEditing:i}){const s=!!(e||i),l=bi()??$e.NOUMLAYOUTBIG,{filters:d,setFilters:c,handleNavigateToContractManager:h,handleNavigateToStatementOfWork:p,handleNavigateToContract:g,handleNewStatementOfWork:b,handleNewContract:f,hasNoDocuments:x,statementsOfWork:w,contracts:S,isLoading:y,setIsCollapse:k}=Wr({isOwner:s,spaceId:a}),{flags:{noumEditor2:v}}=le(),T={element:n,currentTitle:o,isOwner:e,handleNewContract:f,handleNewStatementOfWork:b,setIsCollapse:k,spaceId:a,isEditing:i&&v},[F,P]=r.useState(!1),_=()=>{v?P(M=>!M):h()};return x?m(Yo,{"data-test":"ViewModeWrapper",children:[t(Go,{...T,"data-test":"ContractManagerHeader"}),s&&t(Gt.Provider,{data:[],children:t($n,{isEmpty:!0,filters:d,setFilters:c,"data-test":"FiltersViewMode"})}),t(Nx,{isOwner:e,handleNewContract:f,handleNewStatementOfWork:b,"data-test":"EmptyElement"})]}):m(Yo,{isEditing:i,"data-test":"ViewModeWrapper",children:[t(Go,{...T,"data-test":"ContractManagerHeader"}),m(Gt.Provider,{data:[],children:[m(R,{gap:16,align:"center",vertical:!0,fullWidth:!0,"data-test":"Stack",children:[t($n,{filters:d,setFilters:c,"data-test":"FiltersViewMode"}),t($r,{layoutMode:l,isLoading:y,handleNavigateToStatementOfWork:p,handleNavigateToContract:g,isContract:d.type===St.Contract,contracts:S,statementsOfWork:w,"data-test":"BodyViewMode"}),t(X,{size:"full_small",disabled:i,textOnly:!0,primary:!0,onClick:_,"data-test":"Button",children:C("noumena.contracts.see_all")})]}),t(Hx,{isOpen:F,onClose:_,isOwner:e,spaceId:a,filterType:d.type,handleNewContract:f,handleNavigateToContractManager:h,"data-test":"ContractViewAllModal"})]})]})}const Vx=e=>{const{isEditing:a}=e,{t:n}=G(),{isLoading:o}=Ct(),{flags:{noumEditor2:i}}=le();return o?t(kx,{"data-test":"ContractManagerElement-SkeletonLoaderContractManagerElement"}):a&&!i?t(Xe,{...e,"data-test":"ContractManagerElement-ElementWrapper",children:e.isCustomPreview?t(j,{}):m(R,{justify:"center",vertical:!0,align:"center",gap:16,"data-test":"ContractManagerElement-Stack",children:[t(L,{name:"contract_m",size:64,color:"--icon-card-placeholder-neutral-default","data-test":"ContractManagerElement-Icon"}),t(E,{font:"body-m",colorToken:"--text-card-neutral-default","data-test":"ContractManagerElement-TSpan",children:n("noumena.contract_manager.edit_mode_message")})]})}):t(Dx,{isOwner:e.isOwner,spaceId:e.spaceId,currentTitle:e.currentTitle,element:e.element,isEditing:a,"data-test":"ContractManagerElement-ContractManagerViewMode"})},Ux={[A.PublicationDesignPatterns]:{image:"bulb_m",text:"No Publications, Designs or Patents Added Yet",buttonText:"Add New"},[A.EducationTraining]:{image:"education_m",text:"No Education Added Yet",buttonText:"Add Education"},[A.AchievementAward]:{image:"avard_m",text:"No Achievements Added Yet",buttonText:"Add Achievement"},[A.PersonalInterest]:{image:"interest_m",text:"No Personal Interests Added Yet",buttonText:"Add New"},[A.SocialInterest]:{image:"heart_m",text:"No Social Interests Added Yet",buttonText:"Add New"},[A.ProjectWorkExperience]:{image:"briefcase_m",text:"No Experience Added Yet",buttonText:"Add Experience"}},Qx={[A.Image]:C("noumena.chambers.toolbox.element.image"),[A.Text]:C("noumena.chambers.toolbox.element.text"),[A.Video]:C("noumena.chambers.toolbox.element.video"),[A.QuickQuestions]:C("noumena.chambers.toolbox.element.quick_questions")},Wy=r.memo(e=>{var Q,V;const{flags:a}=le(),{user:n}=ye(),{id:o,space:i,updateToolMutation:s,noumSidePanelId:l}=Ot(),{isMasterNoum:d,isConnected:c,space:h}=ge(),{setDisableUpdate:p}=r.useContext(xi),{updateElementHelper:g,loading:b}=Ci();r.useEffect(()=>{p(b)},[p,b]);const{element:f,isEditing:x,hideContent:w,isHighlight:S,columnWidth:y}=e,k=x?((Q=i==null?void 0:i.uid)==null?void 0:Q._id)===(n==null?void 0:n._id):((V=h==null?void 0:h.uid)==null?void 0:V._id)===(n==null?void 0:n._id),[v,T]=r.useState(Ae.getBodyContent(f,!x&&f.status==="PUBLISHED",void 0,!a.noumEditor2&&x&&(f.elementType===A.Video||f.elementType===A.Image))||void 0),F=r.useMemo(()=>{const $=(f==null?void 0:f.elementType)||"";switch($){case A.Message:return C("noumena.chambers.toolbox.element.message");case A.Text:return Ae.getHeaderContent(f,!x)||C("noumena.chambers.toolbox.element.text");case A.Wallet:return C("noumena.chambers.toolbox.element.wallet",{name:x?`${(i==null?void 0:i.name)||""} Wallet `:`${h==null?void 0:h.name} Wallet`});case A.Userposts:return C("noumena.chambers.toolbox.element.posts");case A.Calendar:return C("noumena.chambers.toolbox.element.calendar");case A.Usernetwork:return C("noumena.chambers.toolbox.element.usernetwork");case A.Skills:return C("noumena.homenoum.skills.title");case A.FilesManager:return C("noumena.chambers.toolbox.element.file");case A.ContractManager:return C("noumena.chambers.toolbox.element.contracts");default:return Ae.getHeaderContent(f,!x)||(Qx[$]??f.elementType??"UNKNOWN")}},[f,x]),P=r.useCallback($=>{const q={...Ae.getBodyContentJson(f),fileSize:$==null?void 0:$.fileSize,fileName:$==null?void 0:$.fileName,...($==null?void 0:$.type)==="video"&&{thumbnail:$.thumbnail,videoURL:$.videoURL}};return Object.keys(q).length===0?null:q},[f]),_=r.useCallback(($,q)=>{T($);const z={elementId:f._id,bodyContent:$,bodyContentJson:P(q),headerContent:Ae.getHeaderContent(f),position:Ae.getPosition(f),status:_t.Unsaved};o&&(a.noumEditor2&&Ae.isMediaElement(f)?s==null||s(z):g(o,z))},[f,a.noumEditor2,P,o,g,s]),M=r.useCallback($=>{const q={elementId:f._id,bodyContent:JSON.stringify($),headerContent:Ae.getHeaderContent(f),position:Ae.getPosition(f),status:_t.Unsaved};o&&g(o,q)},[f,o,g]),W=r.useMemo(()=>{switch(f.elementType){case A.Text:return!x&&(!v||v==="<p><br></p>")?null:t(Po,{...e,currentTitle:F,hideContent:w,isBorder:!1,isEditing:x,textEditor:{initialValue:v,onContentChange:$=>{$.isChanged&&_($.value,{type:"text"})},editEnabled:x,showToolbar:!a.noumEditor2||a.noumEditor2&&l===f._id},"data-test":"Element-content-TextElement"});case A.Userposts:return t(Lg,{...e,currentTitle:F,hideContent:w,isBorder:!1,isEditing:x,"data-test":"Element-content-PostElement"});case A.Message:return d||k||c||x?t(Nh,{...e,currentTitle:F,"data-test":"Element-content-MessageElementV2"}):null;case A.Wallet:return t(hf,{id:f._id||"",...e,currentTitle:F,isOwner:k,"data-test":"Element-content-WalletElement"});case A.QuickQuestions:return t(mg,{isOwner:k,...e,currentTitle:F,"data-test":"Element-content-QuickQuestionsElement"});case A.Calendar:return a.noumsSocialHall?t(zp,{...e,isOwner:k,currentTitle:F,"data-test":"Element-content-CalendarElement"}):null;case A.BusinessBrief:return t(Dp,{wrapperProps:{...e},currentTitle:F,isBorder:!1,spaceId:o,elementId:f._id,elementPosition:Ae.getPosition(f),isEditing:x,textEditor:{initialValue:v,onContentChange:$=>{$.isChanged&&_($.value,{type:"text"})},editEnabled:x},basicToolbar:(i==null?void 0:i.type)!==We.Home&&(i==null?void 0:i.type)!==We.Project,"data-test":"Element-content-BusinessBrief"});case A.Image:return t(Um,{...e,isActiveTool:e.isNoumEditor2&&l===f._id,currentTitle:F,hideContent:w,url:v,onContentChange:_,"data-test":"Element-content-ImageElement"});case A.Video:return t(Km,{...e,currentTitle:F,hideContent:w,url:v,onContentChange:_,"data-test":"Element-content-VideoElement"});case A.Usernetwork:return t(Yg,{...e,currentTitle:F,hideContent:w,body:v,onContentChange:M,element:f,"data-test":"Element-content-NetworkElement"});case A.Skills:return t(sb,{...e,currentTitle:F,isOwner:!0,isBorder:!1,"data-test":"Element-content-SkillElement"});case A.FilesManager:return a.filesManager?t(vx,{...e,currentTitle:F,isOwner:k,isBorder:!1,connectionRole:h==null?void 0:h.connectionRole,"data-test":"Element-content-FileManagerElement"}):null;case A.ContractManager:return a.contractTool?t(Vx,{...e,currentTitle:F,isOwner:k,isBorder:!1,connectionRole:h==null?void 0:h.connectionRole,"data-test":"Element-content-ContractManagerElement"}):null;default:return t(Po,{...e,currentTitle:F,textEditor:{initialValue:v,onContentChange:$=>{$.isChanged&&_($.value,{type:"text"})},editEnabled:x},"data-test":"Element-content-TextElement"})}},[v,f,a.contractTool,a.filesManager,a.noumEditor2,a.noumsSocialHall,_,M,F,w,c,x,d,k,l,e,i==null?void 0:i.type,o,h==null?void 0:h.connectionRole]),O=f.elementType&&Ux[f.elementType],{isLoading:U}=Ct();return!O||U?t(ys,{isLoading:U,"data-test":"Element-SkeletonLoaderProvider",children:t(Zc,{columnWidth:y,isEditing:x??!1,isNoumEditor2:a.noumEditor2,"data-test":"Element-NoumElementProvider",children:W})}):t(nu,{isHighlight:S,image:O.image,text:O.text,buttonText:O.buttonText,elementType:f.elementType,isEditing:x,wrapperProps:{...e},currentTitle:F,isBorder:!1,spaceId:o,elementId:f._id,position:Ae.getPosition(f),hideContent:w,bodyContentJson:x?Ae.getBodyContentJson(f):Ae.getBodyContentJson(f,!0),columnWidth:y,"data-test":"Element-HomeChambers"})});export{KC as $,uy as A,Oy as B,Fy as C,dy as D,Wy as E,Ay as F,Iy as G,My as H,ar as I,GC as J,du as K,UC as L,Lu as M,qC as N,Ge as O,Nm as P,Je as Q,QC as R,Vp as S,Po as T,ae as U,Ln as V,jC as W,ly as X,ry as Y,Ut as Z,sy as _,XC as a,iy as a0,ty as a1,ay as a2,ny as a3,oy as a4,ey as a5,fy as a6,hy as a7,my as b,Sy as c,Ey as d,vy as e,Pm as f,ky as g,_y as h,yy as i,wy as j,gy as k,py as l,by as m,xy as n,Cy as o,cy as p,ZC as q,JC as r,YC as s,vm as t,Zf as u,Py as v,Ny as w,Ly as x,By as y,Ty as z};
//# sourceMappingURL=Element-9cea61d7.js.map
