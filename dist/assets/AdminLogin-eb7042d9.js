import{N as j,c as f,j as e,P as H,n as y,F as g,x as Z,B as O,I as k,Q as D,U as F,V as L,W as G,X as _,Y as J,Z as Q,_ as B,$ as V,f as Y,G as q,a0 as $,R as X}from"./index-cd84bcc9.js";import{C as K,aB as R,r as h,bc as v,bz as z}from"./vendor-51460554.js";import{P as ee,I as te,a as ae,b as oe}from"./InvoiceTimeline-e66f8fb7.js";import{R as P}from"./index-38931f83.js";import{S}from"./styles-2c16e7fb.js";import{S as C}from"./StickyFormHeader-043ef98d.js";import{u as ie}from"./useInvoicePdfDownload-84ddf906.js";import{D as U}from"./Section-2a57cf43.js";import{u as ne,S as re}from"./useStatementOfWorkPreviewScreen-5a4349a4.js";import{u as se}from"./statementOfWorkPdf-95417ec8.js";import{S as ce}from"./statementOfWork-e03c986f.js";import{u as de,C as le}from"./useContractPreviewScreen-f7a52406.js";import{C as me}from"./contract-47e31a61.js";import"./styles-548b0144.js";import"./styles-5db1c009.js";import{u as ue}from"./contractPdf-f9d6c58f.js";import{C as pe,G as fe}from"./Goals-de02e71c.js";import{u as M,L as W,E}from"./useDownload-7aa57628.js";import{u as ge,R as be}from"./useCampaignReport-8e968a8c.js";import{N as he}from"./NoumAdsModal-991c7b16.js";import"./invoice-e39dbdbc.js";import"./types-3fb18ef5.js";import"./contactDetails-4902172b.js";import"./countries-4aa86a38.js";import"./index-35efb18f.js";import"./ChamberLeftSideBar-2a7f8e7f.js";import"./index-2d186805.js";import"./useResizeObserver-0deb9469.js";import"./sideNavItems-22800105.js";import"./styles-b4894a1f.js";import"./index-4963229a.js";import"./Modal-5a254f40.js";import"./payloadParser-f4cc4e4f.js";import"./getTimeStampForDisplaying-22d5ca9d.js";import"./Infobox-cf6af02b.js";import"./RouterLink-30e622d4.js";import"./styles-58edde60.js";import"./statementOfWorkPermissions-68d8aac2.js";import"./statementOfWork-f09edc55.js";import"./contractPermissions-cf3fd14b.js";import"./Flag-d41fef47.js";import"./contract-546e6b09.js";import"./contactNoumConnection-819cdc27.js";import"./TickCheckbox-c4d9d4b6.js";import"./NoumCard-2fa806c2.js";import"./CountryCard-e0d91c6e.js";import"./generateCategoricalChart-e9d4ef07.js";import"./html2canvas.esm-f1efbbfd.js";import"./jspdf.es.min-1ca9e9b7.js";import"./index-1f4ed9fc.js";import"./styles-46bbc451.js";const Se=a=>{var c;const{data:i,loading:l,error:s}=j();return f("div",{"data-test":"CurrentUser",children:[e("h1",{children:"Current User component"}),f("p",{children:["Id: ",a.id||"Id not provided"]}),l&&e("p",{children:"Fetchi details..."}),s&&e("p",{children:"Error Fetching user..."}),i&&f("p",{children:["User Status: ",(c=i.currentUser)==null?void 0:c.userStatus]})]})},ye=()=>e("div",{"data-test":"NotFound",children:"Oops!! The component you requested is not supported yet..."});var p=(a=>(a.CurrentUser="currentuser",a.NotFound="notfound",a.Invoice="invoice",a.Contract="contract",a.CampaignOffer="Offer",a.CampaignReport="Report",a.Sow="sow",a.SeoSetting="SeoSetting",a))(p||{});const Ie=K.div`
  min-height: 100vh;
  display: flex;
  flex-direction: column;
`,ve={Container:Ie},w=({children:a})=>e(ve.Container,{"data-testid":"ops-invoice--summary-layout-container",children:a}),Ce=()=>{const a=R(),[i,l]=h.useState(""),{download:s,loading:c}=ie();h.useEffect(()=>{const d=a.search.split("&"),m=d[d.length-1].split("=");l(m[m.length-1])},[a]);const{data:o,loading:n}=H({variables:{id:i},skip:!i,fetchPolicy:"cache-and-network"}),t=e(g,{children:e(O,{size:"small",leftIcon:e(k,{name:"download_m",size:16,"data-test":"InvoicePreviewForOps-Buttons-Icon"}),tertiary:!0,type:"submit",loading:c,disabled:!i,onClick:()=>{var d;return s(i,((d=o==null?void 0:o.getInvoiceById)==null?void 0:d.invoiceNumber)??"")},"data-test":"InvoicePreviewForOps-Buttons-Button",children:"Download PDF"})});return e(w,{"data-test":"InvoicePreviewForOps-OpsInvoiceSummaryLayout",children:!(o!=null&&o.getInvoiceById)&&n?e(y,{"data-test":"InvoicePreviewForOps-Spinner"}):o!=null&&o.getInvoiceById?f(g,{children:[e(S.FormHeaderContainer,{children:e(C,{title:"Invoice Summary",buttons:t,showBackButton:!1,"data-test":"InvoicePreviewForOps-StickyFormHeader"})}),e(P,{"data-test":"InvoicePreviewForOps-ResponsiveMain",children:e(S.Content,{gap:16,padding:"16px 0",oneColumn:!0,children:o!=null&&o.getInvoiceById?f(Z,{vertical:!0,gap:16,"data-test":"InvoicePreviewForOps-Stack",children:[e(ee,{invoice:o==null?void 0:o.getInvoiceById,"data-test":"InvoicePreviewForOps-PlanDetails"}),e(te,{invoice:o==null?void 0:o.getInvoiceById,"data-test":"InvoicePreviewForOps-InvoiceSummary"}),e(ae,{invoice:o==null?void 0:o.getInvoiceById,"data-test":"InvoicePreviewForOps-InvoiceDetailsSection"}),e(oe,{invoice:o==null?void 0:o.getInvoiceById,"data-test":"InvoicePreviewForOps-InvoiceTimeline"})]}):null})})]}):null})},N={_id:"6414680debb250000d1c23b0",contractNumber:14,title:"Contract with Activity Log 2",status:D.Signed,linkedNoum:{_id:"62c80e7cb731d5000d0f250e",name:"Jakub Drozdek's Social Noum",profileImage:"https://noumena-img.s3-accelerate.amazonaws.com/Simulator Screen Shot - iPhone 13 - 2022-06-08 at 09,56,29.iNUFcRg5.png"},buyer:{_id:"63e9e3c6944620000ecc66d0",displayName:"Mikolajj Wargowskiii",userId:{_id:"62c536adb13baa000e684b11",profile:{_id:"62c536adb13baa000e684b12",profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/62c536adb13baa000e684b11/profile/62c536adb13baa000e684b11-1667984600553-thumbnail.png"},firstName:"Mikolajj",lastName:"Wargowskiii",userStatus:"ACTIVE",email:"mi********@noumena.global"},title:"Developer",companyName:"MikoÅ‚aj Inc.",street:"NY",city:"NY",country:"us",zipCode:"10001",state:"NY",apartmentNo:"123",createdAt:"2023-02-13T07:16:22.670Z",isConnectedWithNoum:!1,status:F.Active,ownerId:{_id:"6220c66f2b41f7600d1b5955"}},seller:{_id:"64065b57b0d57f8ba258a628",displayName:"Jakub Drozdek",userId:{_id:"6220c66f2b41f7600d1b5955",profile:{_id:"6220c66f2b41f75c7b1b5956",profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/6220c66f2b41f7600d1b5955/profile/6220c66f2b41f7600d1b5955-1655455202246-thumbnail.png"},firstName:"Jakub",lastName:"Drozdek",userStatus:"ACTIVE",email:"ja********@noumena.global"},title:"test",companyName:"",street:"test",city:"test",country:"us",zipCode:"123123",state:"test",apartmentNo:"test",createdAt:"2023-03-06T21:29:59.007Z",isConnectedWithNoum:!1,status:F.Active,ownerId:{_id:"6220c66f2b41f7600d1b5955"}},createdBy:{_id:"6220c66f2b41f7600d1b5955"},templateName:null,effectiveDate:"2023-03-17T13:15:49.820Z",terminationDate:null,terminationNoticeInDays:0,legalJurisdiction:{country:"us-ny",state:null,region:null},arbitrationJurisdiction:{country:"us-ny",state:null,region:null},logo:null};L.Signed,D.Draft;const T={_id:"6426a4dbfe5603000de7c8aa",SOWNumber:18,status:L.Signed,title:"Statement of Work",scopeOfWork:"scope of work",effectiveDate:null,deliverables:[{title:"deli 1",description:"",dueDate:null}],milestones:[{title:"mile 1",description:"",dueDate:"1680275969211"}],commission:[{description:"bonus 1",amount:200},{description:"bonus 2",amount:50}],expenseReimbursement:[{description:"expense 1",amount:100},{description:"expense 2",amount:10}],fees:{type:G.Installments,feesData:[{description:null,amount:200,dueDate:"1680275969211"},{description:null,amount:300,dueDate:"1682632800000"}]},linkedNoum:{_id:"62c80e7cb731d5000d0f250e",name:"Jakub Drozdek's Social Noum",profileImage:"https://noumena-img.s3-accelerate.amazonaws.com/Simulator Screen Shot - iPhone 13 - 2022-06-08 at 09,56,29.iNUFcRg5.png"},linkedContract:{_id:"64269f81aa8761000db7b890",status:D.Draft,title:"Service Agreement 31 Mar",effectiveDate:"2023-03-31T08:53:26.781Z",buyer:{_id:"6426f7c2b1bc4e000dcf073c",displayName:"Michael Jordan",title:"FIFA Coach",userId:{_id:"619f5f21433523318c243250",profile:{_id:"619f5f2143352374bd243251",profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/619f5f21433523318c243250/profile/619f5f21433523318c243250-1659232050478-thumbnail.png"}}},seller:{_id:"64065b57b0d57f8ba258a628",displayName:"Jakub Drozdek",title:"Owner Title",userId:{_id:"6220c66f2b41f7600d1b5955",profile:{_id:"6220c66f2b41f75c7b1b5956",profilePictureThumbnail:"https://noumena-img.s3-accelerate.amazonaws.com/6220c66f2b41f7600d1b5955/profile/6220c66f2b41f7600d1b5955-1655455202246-thumbnail.png"}}},contractNumber:18},createdBy:{_id:"6220c66f2b41f7600d1b5955"},logo:null,timeline:[{timestamp:"2023-03-31T09:16:11.445Z",userId:"6220c66f2b41f7600d1b5955",fromStatus:null,toStatus:"DRAFT"},{timestamp:"2023-03-31T15:20:50.523Z",userId:"6220c66f2b41f7600d1b5955",fromStatus:"DRAFT",toStatus:"ISSUED"},{timestamp:"2023-03-31T15:21:06.991Z",userId:"619f5f21433523318c243250",fromStatus:"ISSUED",toStatus:"DRAFT"},{timestamp:"2023-03-31T15:21:23.846Z",userId:"6220c66f2b41f7600d1b5955",fromStatus:"DRAFT",toStatus:"ISSUED"},{timestamp:"2023-03-31T15:22:28.351Z",userId:"619f5f21433523318c243250",fromStatus:"ISSUED",toStatus:"SIGNED"}]},we=({sowId:a,setState:i,componentFromUrl:l})=>{const[s]=v(),c=s.get("id")??void 0,{summary:o,statementOfWork:n}=ne({id:a}),t=se(),d=()=>{a&&t(a,ce.formatPdfFileName(n))},m=e(g,{children:e(U,{onClick:()=>{d()}})});return e(w,{"data-test":"SowDetailOps-OpsInvoiceSummaryLayout",children:e(z,{...o.form,"data-test":"SowDetailOps-FormProvider",children:T?T?f(g,{children:[e(S.FormHeaderContainer,{children:e(C,{title:"Sow Summary",buttons:m,showBackButton:l!==p.Sow,onGoBack:()=>{i==null||i({sowId:void 0,contractId:c})},"data-test":"SowDetailOps-StickyFormHeader"})}),e(P,{"data-test":"SowDetailOps-ResponsiveMain",children:e(S.Content,{gap:16,padding:"16px 0",oneColumn:!0,children:o.isLoading?e(y,{"data-test":"SowDetailOps-Spinner"}):n?e(re,{statementOfWork:n,openContractFromSow:i,"data-test":"SowDetailOps-StatementOfWorkPreview"}):null})})]}):null:e(y,{"data-test":"SowDetailOps-Spinner"})})})},Oe=({contractId:a,setState:i,componentFromUrl:l})=>{const[s]=v(),c=s.get("id")??void 0,{summary:o,contract:n,linkedSows:t}=de({id:a}),d=ue(),m=()=>{a&&d(a,me.formatPdfFileName(n))},u=e(g,{children:e(U,{onClick:()=>{m()}})});return e(w,{"data-test":"ContractDetailOps-OpsInvoiceSummaryLayout",children:e(z,{...o.form,"data-test":"ContractDetailOps-FormProvider",children:N?N?f(g,{children:[e(S.FormHeaderContainer,{children:e(C,{title:"Contract Summary",buttons:u,showBackButton:l!==p.Contract,onGoBack:()=>{i==null||i({sowId:c,contractId:void 0})},"data-test":"ContractDetailOps-StickyFormHeader"})}),e(P,{"data-test":"ContractDetailOps-ResponsiveMain",children:e(S.Content,{gap:16,padding:"16px 0",oneColumn:!0,children:o.isLoading?e(y,{"data-test":"ContractDetailOps-Spinner"}):n?e(le,{contract:n,linkedSows:t.data,isLoadingLinkedSows:t.loading,onLinkedSowClick:i,"data-test":"ContractDetailOps-ContractPreview"}):null})})]}):null:e(y,{"data-test":"ContractDetailOps-Spinner"})})})},A=({contractId:a,sowId:i,componentFromUrl:l})=>{const[s,c]=h.useState({contractId:a,sowId:i});return s.contractId?e(Oe,{contractId:s.contractId,setState:c,componentFromUrl:l,"data-test":"ContractSow-ContractDetailOps"}):s.sowId?e(we,{sowId:s.sowId,setState:c,componentFromUrl:l,"data-test":"ContractSow-SowDetailOps"}):null},ke=h.memo(({offeriD:a})=>{const i=_(),[l]=v(),s=l.get("campaignId")??void 0,c=J(),{Ref:o,handleDownloadPdf:n}=M(),{data:t,loading:d}=Q({variables:{campaignId:s??""},skip:!s,fetchPolicy:"cache-and-network",onError:I=>c.logError(I,"campaign-summary-in-offer",!0)}),m=B.mapCampaignForOffer(t==null?void 0:t.getSelectedAdCampaignDetails),{data:u}=V({skip:!a,variables:{offerId:a??""},onError:I=>c.logError(I,"offer-by-id",!0)}),r=B.cleanOffer(u==null?void 0:u.getAdCampaignOfferOne),b=e(g,{children:e(O,{size:"small",leftIcon:e(k,{name:"download_m",size:16,"data-test":"CampaignOfferOps-Buttons-Icon"}),tertiary:!0,type:"submit",onClick:()=>n({document:"offer",documentId:r.oid}),disabled:!a,"data-test":"CampaignOfferOps-Buttons-Button",children:"Download PDF"})});return e(w,{"data-test":"CampaignOfferOps-OpsInvoiceSummaryLayout",children:!(t!=null&&t.getSelectedAdCampaignDetails)&&d?e(y,{"data-test":"CampaignOfferOps-Spinner"}):t!=null&&t.getSelectedAdCampaignDetails?f(g,{children:[e(S.FormHeaderContainer,{children:e(C,{title:"Offer Details",buttons:b,showBackButton:!1,"data-test":"CampaignOfferOps-StickyFormHeader"})}),e("div",{ref:o,style:{alignSelf:"center",width:"100%",display:"flex",justifyContent:"center"},children:f(W.Main,{children:[e(pe,{title:m.title,startAt:r.startAt,endAt:r.endAt,adId:m.adId,category:m.category,targetLanguage:m.targetLanguage,targetLocation:m.targetLocation,clicksWeekly:r.clicksWeekly,costTotal:r.costTotal,costWeekly:r.costWeekly,reachTotal:r.reachTotal,cpc:r.cpc,noumId:m.noumId,estimatedDuration:r.estimatedDuration,createdAt:r.createdAt,"data-test":"CampaignOfferOps-CampaignOfferSummary"}),e(E,{campaignCreatedBy:m.createdBy.firstName??"",createdBy:r.createdBy,message:r.message,"data-test":"CampaignOfferOps-ExpertMessage"}),e(fe,{isMobile:i.isMobile,goalConnectedUsers:r.goalConnectedUsers,goalNoumVisibility:r.goalNoumVisibility,status:r.status,estimatedDuration:r.estimatedDuration,isTablet:i.isTablet,"data-test":"CampaignOfferOps-Goals"})]})})]}):null})}),De=h.memo(({reportId:a})=>{const[i]=v(),l=_(),{Ref:s,handleDownloadPdf:c}=M(),o=i.get("campaignId")??void 0,{report:n,campaign:t}=ge({campaignIdFromOps:o,reportIdFromOps:a}),d=e(g,{children:e(O,{size:"small",leftIcon:e(k,{name:"download_m",size:16,"data-test":"CampaignReportOps-Buttons-Icon"}),onClick:()=>c({document:"report",documentId:(n==null?void 0:n.reportId)??""}),tertiary:!0,type:"submit",disabled:!a,"data-test":"CampaignReportOps-Buttons-Button",children:"Download PDF"})});return n?e(w,{"data-test":"CampaignReportOps-OpsInvoiceSummaryLayout",children:f(g,{children:[e(S.FormHeaderContainer,{children:e(C,{title:"Report Details",buttons:d,showBackButton:!1,"data-test":"CampaignReportOps-StickyFormHeader"})}),e("div",{ref:s,style:{alignSelf:"center",width:"100%",display:"flex",justifyContent:"center"},children:f(W.Main,{children:[e(be,{metrics:n.metrics,createdAt:n.createdAt,title:t.title,campaignCreatedAt:(t==null?void 0:t.createdBy)||"",adId:t.adId??"",isMobile:l.isMobile,isTablet:l.isTablet,"data-test":"CampaignReportOps-ReportSummary"}),e(E,{message:n.clientMessage,createdBy:n.createdBy,campaignCreatedBy:t.campaignCreatedBy??"","data-test":"CampaignReportOps-ExpertMessage"})]})})]})}):null}),Pe=()=>{const a=R(),{signIn:i,signOut:l,user:s,setIsOpsUser:c}=Y(),[o]=v(),n=o.get("id")??void 0,[t,d]=h.useState({authenticating:!0,failed:!1,signOutComplete:!1,capturedParams:!1,handleTokenCalled:!1}),m=h.useCallback(async u=>{const r=await q.verifyWithOneTimeAuth(u);$(r)?d(b=>({...b,authenticating:!1,failed:!0})):r.accessToken&&(d(b=>({...b,authenticating:!1,failed:!1})),i({accessToken:r.accessToken,refreshToken:r.refreshToken},{}))},[i]);switch(h.useEffect(()=>{if(window.location.pathname.includes(X.ADMIN_LOGIN)){if(!t.capturedParams){const u=new URLSearchParams(a.search),r=u.get("token"),b=u.get("component"),I=(()=>{switch(b){case p.CurrentUser:return{id:u.get("id")};default:return{}}})();c(!0),d(x=>({...x,token:r,component:b,componentParams:I,capturedParams:!0}))}t.token&&(t.signOutComplete||(d(u=>({...u,signOutComplete:!0})),l()),!s&&t.signOutComplete&&t.token&&!t.handleTokenCalled&&(d(u=>({...u,handleTokenCalled:!0})),m(t.token)))}},[s,t.signOutComplete,t.token,t.capturedParams,t.handleTokenCalled,m,l,a.search,c]),!0){case!t.capturedParams:return e("div",{"data-test":"AdminLogin",children:"Wait!!Checking your request"});case!t.token:return e("div",{"data-test":"AdminLogin",children:"Token not provided"});case t.authenticating:return e("div",{"data-test":"AdminLogin",children:"Be Patient. Token is being verified!!"});case t.failed:return e("div",{"data-test":"AdminLogin",children:"Your token is useless, try again!!"});case(!t.authenticating&&!t.failed):default:return e("div",{"data-test":"AdminLogin",children:(()=>{switch(t.component){case p.CurrentUser:return e(Se,{...t.componentParams,"data-test":"AdminLogin-CurrentUser"});case p.Invoice:return e(Ce,{"data-test":"AdminLogin-InvoicePreviewForOps"});case p.Contract:return e(A,{contractId:n||"",componentFromUrl:p.Contract,"data-test":"AdminLogin-ContractSow"});case p.Sow:return e(A,{sowId:n||"",componentFromUrl:p.Sow,"data-test":"AdminLogin-ContractSow"});case p.CampaignOffer:return e(ke,{offeriD:n||"","data-test":"AdminLogin-CampaignOfferOps"});case p.CampaignReport:return e(De,{reportId:n||"","data-test":"AdminLogin-CampaignReportOps"});case p.SeoSetting:return e(he,{isOpen:!0,onClose:()=>null,campaignId:n,"data-test":"AdminLogin-NoumAdsModal"});case p.NotFound:default:return e(ye,{"data-test":"AdminLogin-NotFound"})}})()})}},kt=Pe;export{kt as default};
//# sourceMappingURL=AdminLogin-eb7042d9.js.map
