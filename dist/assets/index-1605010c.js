import{m as ct,ae as K,h3 as x,pJ as B,pK as O,pL as D,pM as ut,pN as mt,j as a,T,f as Q,X as q,g$ as pt,fj as tt,aj as ht,c as m,F as L,x as p,I as V,pO as gt,o as G,b7 as j,gu as ft,pP as et,g_ as bt,bE as St,pQ as ot,aR as yt,h7 as Et,di as _t,q as $,h2 as J,au as wt,v as It,d as rt,l1 as Tt,pR as At,mr as Nt,n as Ct,B as xt,pq as Bt,mB as kt,R as lt,a1 as vt,d9 as Mt}from"./index-cd84bcc9.js";import{C as k,B as l,l as Lt,r as u,N as Vt,a8 as zt,af as Ut,ay as dt,aa as Pt,aB as Rt,b8 as Ht,a9 as Ft}from"./vendor-51460554.js";import{A as W}from"./index-4963229a.js";import{C as jt}from"./index-401975c0.js";import{c as Ot}from"./capitalizeFirstLetter-92ef0abb.js";import{E as $t}from"./EllipsisMenu-8495dca0.js";import"./useResizeObserver-0deb9469.js";import"./Modal-5a254f40.js";import"./index-2d186805.js";import"./ChamberCompleteness-c76bd15d.js";import"./styles-0c3f5396.js";import"./RichTextEditorView-3d7dc014.js";import"./purify.es-89df9bf9.js";import"./url-8d85408e.js";import"./styles-1a9b9e59.js";import"./UploadMedia-5fe81e87.js";import"./helper-53a5becb.js";import"./HandleUnlinkNoum-c385ad89.js";import"./MemberStatusTag-69ed5aaa.js";import"./ChamberActionModal-ce3fca40.js";import"./LinkNoumOption-dc9c410c.js";import"./consts-be860660.js";import"./SelectField-54706174.js";import"./forms-18e3c53a.js";import"./index-022aaf3d.js";import"./styles-26e8a352.js";import"./Pagination-43542d57.js";import"./TickCheckbox-c4d9d4b6.js";import"./Accordion-ea03839b.js";import"./MultiselectField-a1e665cb.js";import"./useElementDimensions-84b2a778.js";import"./utils-87d126b1.js";import"./styles-75177d6f.js";import"./Radiobox-c1e62033.js";import"./NoSearchResultsForNoums-50e9f00f.js";import"./index-ea5d695b.js";import"./index-1f4ed9fc.js";import"./styles-46bbc451.js";import"./trackingEvents-87d8ea4c.js";import"./styles-d2f9f396.js";import"./generateCategoricalChart-e9d4ef07.js";import"./CustomDateInputMaskField-46ce4df4.js";import"./styles-e426deab.js";import"./browser-f98ef106.js";import"./useGenerateTokenForCQ-2d299743.js";k(K)`
  width: 100%;
  padding: ${({noumEditor2:t})=>t?"0":"unset"};
`;const Wt=k(K)`
  position: fixed;
  width: calc(100% - 65px);
  z-index: 49;
  max-height: max-content;
  border-radius: 0%;
  box-sizing: border-box;
  @media (max-width: ${ct.TABLET_L}) {
    padding: 16px;
    left: 0px;
    width: 100%;
  }
`,Gt=k.div`
  font-family: var(--font-family);
  background: var(--bg-body-neutral-alt-highlighted) fixed;
  min-height: calc(100vh - 69px);
`,Jt=k.div`
  box-sizing: border-box;
  display: grid;
  transition: all 0.1s ease-in-out;
  width: 100%;
  justify-content: center;
  grid-template-columns: 2fr 1fr;
  grid-template-rows: auto;
  grid-template-areas: 'body';
  background: var(--bg-card-neutral-alt-default);
  border-radius: 16px;

  #atcb-customTrigger-atcb-btn-noumena-atc-host {
    top: 42px !important;
    width: 0;
    position: absolute !important;
    left: 0 !important;
  }
`,at=k.div`
  ${({isBorder:t})=>t&&"border-right: 1px solid var(--bg-separator-neutral-default)"}
`,Kt=k.div`
  min-height: 567px;
`,Qt=k.div`
  label {
    width: 85%;
    div {
      font-weight: var(--font-body-medium-bold-weight);
    }
  }
`,qt=t=>({title:l("noumena.social_hall.remove_user_modal.title",{name:t}),description:l("noumena.social_hall.remove_user_modal.description"),confirmButton:l("noumena.social_hall.remove_user_modal.confirm"),cancelButton:l("noumena.cancel")}),Xt=t=>({name:"attending",labelSize:"medium",text:l("noumena.event.button.attending_count",{count:t})}),Yt=t=>({name:"pending",labelSize:"medium",text:l("noumena.event.attendees.pending",{count:t})}),Zt=t=>[{id:"Details",name:"Details",text:l("noumena.editor.details"),labelSize:"large"},{id:"Attendees",name:"Attendees",text:l("noumena.event.attendees.active",{count:t}),labelSize:"large"}],nt=t=>{var e,n;return((n=(e=t.find(i=>i.userRole===x.Host))==null?void 0:e.userId)==null?void 0:n.firstName)??""},Dt=({attendees:t,isHost:e,noumName:n,isCoHost:i,isProjectNoum:o,currentUserName:r})=>{var s,b;const c=t.filter(({userRole:_,invitationStatus:S})=>_===x.Cohost&&S===B.Accepted),d=c.length,h=i?nt(t):((b=(s=Lt.first(c))==null?void 0:s.userId)==null?void 0:b.firstName)??"",g=i||e?r:nt(t),f=e||i?{0:"noumena.event.self.hosting",1:"noumena.event.self_and_cohost.hosting",default:"noumena.event.self_and_multiple_users.hosting"}:{0:"noumena.event.host.hosting",1:"noumena.event.host_and_cohost.hosting",default:"noumena.event.multiple_hosts.hosting"};return{i18nString:f[d.toString()]??f.default,options:{hostName:g,cohostName:h,noumName:o?n:"",additionalText:o?l("noumena.event.via"):"",count:d>1?d.toString():""}}},te=t=>t.filter(({userRole:e,invitationStatus:n})=>e!==x.Host&&n===B.Accepted),ee=({custom:t,frequency:e,interval:n=1,weekDays:i,monthDates:o})=>{const r=u.useMemo(()=>{var c;if(!t)switch(e){case O.Monthly:return l("noumena.event.occurrence_monthly");case O.Weekly:return l("noumena.event.occurrence_weekly");default:return l("noumena.event.occurrence_daily")}switch(e){case O.Monthly:return l("noumena.event.custom_occurrence_monthly",{interval:n===1?"":n,days:o==null?void 0:o.map(d=>`${d}${D(d)}`),word:n>1?"s":""});case O.Weekly:return l("noumena.event.custom_occurrence_weekly",{interval:n===1?"":n,days:(c=ut(i))==null?void 0:c.map(d=>` ${mt(Ot(d.toLowerCase()))}`),word:n>1?"s":""});default:return n===1?l("noumena.event.occurrence_daily"):l("noumena.event.custom_occurrence_daily",{interval:`${n}${D(n)}`})}},[t,e,n,i,o]);return a(T,{font:"body-l-bold","data-test":"EventRecurringDetail-TSpan",children:r})},ae=({attendees:t,eventData:e,isEventDetailPage:n})=>{var b,_,S;const{user:i}=Q(),{isMobile:o}=q(),r=u.useMemo(()=>pt({dateTime:new Date(e==null?void 0:e.eventDate)}),[e==null?void 0:e.eventDate]),c=((b=e==null?void 0:e.currentUser)==null?void 0:b.userRole)===x.Host,d=((_=e==null?void 0:e.currentUser)==null?void 0:_.userRole)===x.Cohost&&((S=e==null?void 0:e.currentUser.invitation)==null?void 0:S.status)===B.Accepted,h=u.useMemo(()=>{let y;const A=new Date(e==null?void 0:e.eventDate),N=Vt(A,"MMM dd, yyyy, hh:mm a"),C=tt({dateTime:e==null?void 0:e.eventDate,returnFormat:"hh:mm a"}),w=tt({dateTime:zt(new Date(e==null?void 0:e.eventDate),{seconds:(e==null?void 0:e.duration)||0}),returnFormat:"hh:mm a"});return(r?Ut(r):!1)?y=`${l("noumena.date.today")}, ${C} - ${w}`:y=`${N} - ${w}`,y},[e==null?void 0:e.duration,e==null?void 0:e.eventDate,r]),g=e.recurring?"repeat_xs":"calendar_m",f=o?"16px 6px":"16px",{i18nString:I,options:s}=u.useMemo(()=>{var N,C;const y=((N=e==null?void 0:e.chamberId)==null?void 0:N.type)===ht.Project,A=((C=e==null?void 0:e.chamberId)==null?void 0:C.name)??"";return Dt({attendees:t,isHost:c,isCoHost:d,noumName:A,isProjectNoum:y,currentUserName:(i==null?void 0:i.firstName)??""})},[t,c,d,e==null?void 0:e.chamberId,i==null?void 0:i.firstName]);return m(L,{children:[m(p,{padding:f,align:"center",borderBottom:!0,justify:"space-between","data-test":"Details-Stack",children:[e.eventDate&&m(p,{gap:10,align:"center","data-test":"Details-Stack",children:[a(V,{name:g,size:24,"data-test":"Details-Icon"}),m(p,{vertical:!0,"data-test":"Details-Stack",children:[e.recurring&&a(ee,{...e.recurringDetails,"data-test":"Details-EventRecurringDetail"}),a(T,{font:"body-l","data-test":"Details-TSpan",children:h})]})]}),a(gt,{event:e,isNoumEditor2:!0,isEventDetailPage:n,"data-test":"Details-AddToCalendarButton"})]}),a(p,{padding:"16px",align:"center",borderBottom:!0,"data-test":"Details-Stack",children:a(T,{font:"body-l",colorToken:"--text-card-neutral-highlighted","data-test":"Details-TSpan",children:a(dt,{i18nKey:I,values:s,components:{gray:a(T,{"data-testid":"gray-text",font:"body-l",colorToken:"--text-card-neutral-default","data-test":"Details-TSpan"})},"data-test":"Details-Trans"})})}),a(p,{padding:"16px",align:"center",borderBottom:!0,"data-test":"Details-Stack",children:a(T,{font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"Details-TSpan",children:e==null?void 0:e.description})})]})},ne=({event:t})=>{var i,o,r,c,d,h;const e=G((o=(i=t.chamberId)==null?void 0:i.uid)==null?void 0:o.firstName,(c=(r=t.chamberId)==null?void 0:r.uid)==null?void 0:c.middleName,(h=(d=t.chamberId)==null?void 0:d.uid)==null?void 0:h.lastName),n=u.useMemo(()=>[j.getProfilePicture(t.userId)||"",...t.cohosts.filter(g=>g.status===B.Accepted).map(g=>j.getProfilePicture(g.userId)??"").filter((g,f)=>f<3)],[t]);return m(p,{align:"center",gap:5,"data-test":"EventInvitationNote-Stack",children:[a(ft,{size:"L",urls:n,"data-test":"EventInvitationNote-InlineAvatar"}),a(dt,{i18nKey:"noumena.event_detials.event_attendees.host_invitation_note",values:{fullName:e},components:{note1:a(et,{"data-test":"EventInvitationNote-EventAttendeesNote"}),note2:a(et,{color:"gray","data-test":"EventInvitationNote-EventAttendeesNote"})},"data-test":"EventInvitationNote-Trans"})]})},st=bt(({event:t,onEventAccepted:e,onEventDeclined:n,masterId:i,refetch:o})=>{var U,P,R,H;const r=((P=(U=t.currentUser)==null?void 0:U.invitation)==null?void 0:P.status)===B.Pending,{onGoLive:c,onAccept:d,onAttend:h,onAttending:g,onDecline:f,onNotAttending:I,onJoinEvent:s,refetchEvents:b}=St({preventGetEvents:!1,chamberId:i||""}),{userRole:_}=ot({chamberId:i,event:t}),S=u.useCallback(()=>{var F;s((t==null?void 0:t._id)??"",((F=t==null?void 0:t.socialHall)==null?void 0:F._id)??"")},[t==null?void 0:t._id,(R=t==null?void 0:t.socialHall)==null?void 0:R._id,s]),y=u.useCallback(async()=>{t&&(await(e==null?void 0:e(t,d)),o())},[t,d,o,e]),A=u.useCallback(async()=>{t&&(await(n==null?void 0:n(t,f)),o())},[t,f,o,n]),N=u.useCallback(async()=>{t&&(await(e==null?void 0:e(t,h)),o())},[t,h,o,e]),C=u.useCallback(async()=>{t&&(await(n==null?void 0:n(t,I)),o())},[t,I,o,n]),w=u.useCallback(async()=>{t&&(await(e==null?void 0:e(t,g)),o())},[t,g,o,e]),v=u.useCallback(async()=>{t&&(await c(t==null?void 0:t._id),S())},[t,S,c]),{openModal:M,closeModal:z,modalType:E}=yt();return m(L,{children:[r&&a(ne,{event:t,"data-test":"EventDetailActions-EventInvitationNote"}),a(Et,{event:t,role:_,onGoLive:v,onAccept:y,onDecline:A,onAttending:w,onNotAttending:C,onJoinEvent:S,onAttend:N,onEditEvent:()=>M("edit-event"),isEventDetail:!0,"data-test":"EventDetailActions-EventItemButtons"}),E==="edit-event"&&a(_t,{isOpen:!0,onClose:z,event:t,eventSuccessCallback:b,chamberId:((H=t.chamberId)==null?void 0:H._id)??"",isProjectNoum:!1,"data-test":"EventDetailActions-CreateEditEventModal"})]})}),se=({event:t,masterId:e,refetch:n})=>{const{isMobile:i}=q(),{userRole:o}=ot({chamberId:e,event:t}),r=[x.Host,x.Cohost].includes(o);return a(L,{children:i?a(p,{align:"center",vertical:!0,"data-test":"NavBar-Stack",children:a(st,{event:t,masterId:e,refetch:n,"data-test":"NavBar-EventDetailActions"})}):a(Wt,{"data-test":"NavBar-EventDetailsWrapper",children:m(p,{padding:"0 10px",fullWidth:!0,justify:"space-between",align:"center","data-test":"NavBar-Stack",children:[a(p,{gap:16,"data-test":"NavBar-Stack",children:m(p,{gap:12,"data-test":"NavBar-Stack",children:[r&&a($,{size:"small",secondary:!0,"data-test":"NavBar-Tag",children:l("noumena.social_hall.host")}),t.status===J.Live&&a($,{size:"small",bgColor:"var(--bg-badge-danger-primary-default)",icon:a(V,{name:"wave_left_m",size:16,"data-test":"NavBar-Icon"}),rightIcon:a(V,{name:"wave_right_m",size:16,"data-test":"NavBar-Icon"}),"data-test":"NavBar-Tag",children:l("noumena.event.event_duration.live_now")}),m(T,{font:"body-xl-bold","data-test":"NavBar-TSpan",children:[" ",t.title," "]})]})}),a(p,{align:"center",gap:12,"data-test":"NavBar-Stack",children:a(st,{event:t,masterId:e,refetch:n,"data-test":"NavBar-EventDetailActions"})})]})})})},ie=[{key:l("noumena.editor.remove_from_event"),value:l("noumena.editor.remove_from_event"),type:"value",label:l("noumena.editor.remove_from_event"),icon:a(V,{name:"close_m",size:24,color:"--text-tablecell-danger-primary-default","data-test":"attendeesOptions-Icon"}),intent:"danger"}],it={Details:"Details",Attendees:"Attendees"},oe=({isHost:t,attendees:e,onRemove:n,isExpired:i,setFullName:o})=>a(L,{children:e.length>0?e.map(r=>{var c,d,h,g;return a(p,{padding:"24px 16px",justify:"space-between",align:"center",borderBottom:!0,"data-test":"AttendeesView-Stack",children:m(p,{align:"center",justify:"space-between",fullWidth:!0,"data-test":"AttendeesView-Stack",children:[m(p,{gap:16,"data-test":"AttendeesView-Stack",children:[a(wt,{url:j.getProfilePicture(r.userId)??"",onClick:()=>j.goToUserProfile(r.userId),"data-test":"AttendeesView-Avatar"}),m(p,{vertical:!0,onClick:()=>j.goToUserProfile(r.userId),"data-test":"AttendeesView-Stack",children:[a(T,{font:"body-m-bold","data-test":"AttendeesView-TSpan",children:G((c=r.userId)==null?void 0:c.firstName,"",(d=r.userId)==null?void 0:d.lastName)}),a(T,{font:"footnote",colorToken:"--text-tablecell-body-neutral-default","data-test":"AttendeesView-TSpan",children:(h=r.userId)==null?void 0:h.title})]})]}),!i&&t&&a($t,{size:"small",textOnly:!0,menuOptions:ie,containerWidth:"max-content",placement:"bottom-end",onClick:()=>{var f,I;o(G((f=r.userId)==null?void 0:f.firstName,"",(I=r.userId)==null?void 0:I.lastName)),n(r)},"data-test":"AttendeesView-EllipsisMenu"})]})},(g=r.userId)==null?void 0:g._id)}):a(p,{padding:"16px",align:"center",borderBottom:!0,justify:"center","data-test":"AttendeesView-Stack",children:a(T,{font:"body-l","data-test":"AttendeesView-TSpan",children:l("noumena.editor.no_attendees_yet")})})}),re=({isHost:t,isCoHost:e,onCancel:n,isExpired:i,isLoading:o,activeTab:r,isAttending:c,pendingUsers:d,acceptedUsers:h})=>{const{addToast:g}=It(),[f,I]=u.useState(""),[s,b]=u.useState(!1),[_,S]=u.useState("0"),[y,A]=u.useState(),[N,C]=u.useState([]),w=u.useMemo(()=>h.filter(E=>E.invitationStatus===B.Accepted&&E.userRole!=="HOST"),[h]),v=E=>{A(E),b(!0)},M=u.useCallback(()=>{n(y,()=>{if(b(!1),A(void 0),r==="pending"){const E=l("noumena.social_hall.cancel_invitation.notification");g("primary","icon",E)}})},[n,y,r,g]),z=()=>{b(!1),A(void 0)};return u.useEffect(()=>{C(()=>{const E=[];return(c&&e||t)&&E.push(Xt(w.length)),!i&&t&&E.push(Yt(d.length)),E})},[t,e,i,c,d.length,w.length]),m(Qt,{"data-test":"AttendeesStatus-AttendeesStatusContainer",children:[a(rt,{onChange:S,tabWidth:"50%",inputList:N,selectedId:_,mode:"isUnderline",fontSize:"--font-input-small-size",textFont:"--font-body-medium-bold-weight","data-test":"AttendeesStatus-BasicChipsTabsForm"}),a(oe,{isHost:t,isExpired:i,onRemove:v,setFullName:I,attendees:_==="0"?w:d,"data-test":"AttendeesStatus-AttendeesView"}),a(Tt,{isOpen:!!y&&s,loading:o,onClose:z,onConfirm:M,isUnblocked:r==="blocked",...qt(f),"data-test":"AttendeesStatus-EventCancelAttendeeModal"})]})},le=()=>{var F,X,Y,Z;const{eventId:t}=Pt(),{isMobile:e}=q(),{masterId:n}=Q(),[i,o]=u.useState(it.Details),[r,c]=u.useState(!1),{pathname:d}=Rt(),{data:h,refetch:g,loading:f}=At({skip:!t,fetchPolicy:"cache-and-network",variables:{id:t}}),I=Ht({path:lt.SOCIAL_HALL_DETAILS},d),s=h==null?void 0:h.getEventById,b=((F=s==null?void 0:s.currentUser)==null?void 0:F.userRole)===x.Host,_=((Y=(X=s==null?void 0:s.currentUser)==null?void 0:X.invitation)==null?void 0:Y.status)===B.Accepted,S=((Z=s==null?void 0:s.currentUser)==null?void 0:Z.userRole)===x.Cohost&&_,y=(s==null?void 0:s.status)===J.Expired,A=!y&&(b||S),{onCancel:N,activeTab:C,attendeesToShow:w,refetchAudience:v,pendingAttendees:M,cancellingUser:z}=Nt({isHost:b||S,eventId:t,shouldFetch:!!t}),E=u.useMemo(()=>te(w),[w]),U=y||!_?E.length:E.length+M.length,P=()=>a(ae,{eventData:s,attendees:w,isEventDetailPage:!!I,"data-test":"EventDetail-DetailView-Details"}),R=()=>a(re,{eventId:t,isCoHost:S,onCancel:N,activeTab:C,isExpired:y,isLoading:z,isHost:b||S,isAttending:_,pendingUsers:M,acceptedUsers:w,"data-test":"EventDetail-AttendeesStatusView-AttendeesStatus"}),H=()=>a(se,{event:s,masterId:n,refetch:g,"data-test":"EventDetail-NavBarView-NavBar"});return f&&!s?a(Ct,{"data-test":"EventDetail-Spinner"}):m(L,{children:[e?m(K,{"data-test":"EventDetail-Card",children:[a(p,{gap:16,"data-test":"EventDetail-Stack",children:m(p,{gap:12,"data-test":"EventDetail-Stack",children:[b&&a($,{size:"small",secondary:!0,"data-test":"EventDetail-Tag",children:l("noumena.social_hall.host")}),(s==null?void 0:s.status)===J.Live&&a($,{size:"small",bgColor:"var(--bg-badge-danger-primary-default)",icon:a(V,{name:"wave_left_m",size:16,"data-test":"EventDetail-Icon"}),rightIcon:a(V,{name:"wave_right_m",size:16,"data-test":"EventDetail-Icon"}),"data-test":"EventDetail-Tag",children:l("noumena.event.event_duration.live_now")}),m(T,{font:"body-xl-bold","data-test":"EventDetail-TSpan",children:[" ",s==null?void 0:s.title," "]})]})}),a(rt,{onChange:o,inputList:Zt(U),selectedId:i,mode:"isUnderline",isWithoutImage:!0,fontSize:"--font-input-small-size",textFont:"--font-body-medium-regular-font",tabWidth:"auto",fullWidth:!0,"data-test":"EventDetail-BasicChipsTabsForm"}),a(Kt,{"data-test":"EventDetail-TabComponentContainer",children:s&&i===it.Details?a(P,{"data-test":"EventDetail-DetailView"}):a(R,{"data-test":"EventDetail-AttendeesStatusView"})}),s!=null&&s._id?a(H,{"data-test":"EventDetail-NavBarView"}):null]}):a(L,{children:s&&a(Gt,{"data-test":"EventDetail-EventDetialsStyled",children:a(jt,{leftSidebar:a(H,{"data-test":"EventDetail-NavBarView"}),isStickyContainer:!0,"data-test":"EventDetail-ChamberViewLayout",children:m(Jt,{"data-test":"EventDetail-EventDetialsLayout",children:[m(at,{isBorder:!0,"data-test":"EventDetail-Content",children:[a(p,{padding:"16px",align:"center",borderBottom:!0,"data-test":"EventDetail-Stack",children:a(T,{font:"body-l-bold","data-test":"EventDetail-TSpan",children:l("noumena.editor.details")})}),a(P,{"data-test":"EventDetail-DetailView"})]}),m(at,{"data-test":"EventDetail-Content",children:[m(p,{padding:"16px",justify:"space-between",align:"center",borderBottom:!0,"data-test":"EventDetail-Stack",children:[a(T,{font:"body-l-bold","data-test":"EventDetail-TSpan",children:l("noumena.event.attendees.active",{count:U})}),A&&a(xt,{size:"small",onClick:()=>c(!0),"data-test":"EventDetail-Button",children:"Invite"})]}),a(R,{"data-test":"EventDetail-AttendeesStatusView"})]})]})})})}),a(Bt,{"data-test":"EventDetail-SocialHallEventProvider",children:a(kt,{isOpen:r,handleClose:()=>c(!1),refetchAudience:v,"data-test":"EventDetail-InviteAttendeeModal"})})]})},ta=()=>{const{isUnregistered:t}=Q(),e=Ft();return a(W.Layout,{onGoBack:t?()=>e(lt.GUEST_HOME):()=>e(-1),topNavbar:t?a(vt,{isBorderRadius:!1,"data-test":"Index-Header",children:a(Mt,{leftNavButton:!0,"data-test":"Index-GuestHeader"})}):a(W.TopBar,{}),sideNav:a(W.SideNavigation,{}),children:a(le,{"data-test":"Index-EventDetail"})})};export{ta as Index,ta as default};
//# sourceMappingURL=index-1605010c.js.map
