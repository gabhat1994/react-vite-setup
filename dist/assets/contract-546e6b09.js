import{g as h}from"./contactDetails-4902172b.js";import{eR as v,aC as M,eW as k,eX as D,eY as A,eZ as S,eJ as L}from"./index-cd84bcc9.js";import{l as W}from"./vendor-51460554.js";import{A as R}from"./payloadParser-f4cc4e4f.js";import{S as O}from"./statementOfWork-e03c986f.js";const P=["us"],I=[{code:"us",label:"US"}],s={us:[{code:"NY",label:"New York"},{code:"AK",label:"Alaska"},{code:"AL",label:"Alabama"},{code:"AR",label:"Arkansas"},{code:"AZ",label:"Arizona"},{code:"CA",label:"California"},{code:"CO",label:"Colorado"},{code:"CT",label:"Connecticut"},{code:"DE",label:"Delaware"},{code:"FL",label:"Florida"},{code:"GA",label:"Georgia"},{code:"HI",label:"Hawaii"},{code:"IA",label:"Iowa"},{code:"ID",label:"Idaho"},{code:"IL",label:"Illinois"},{code:"IN",label:"Indiana"},{code:"KS",label:"Kansas"},{code:"KY",label:"Kentucky"},{code:"LA",label:"Louisiana"},{code:"MA",label:"Massachusetts"},{code:"MD",label:"Maryland"},{code:"ME",label:"Maine"},{code:"MI",label:"Michigan"},{code:"MN",label:"Minnesota"},{code:"MO",label:"Missouri"},{code:"MS",label:"Mississippi"},{code:"MT",label:"Montana"},{code:"NC",label:"North Carolina"},{code:"ND",label:"North Dakota"},{code:"NE",label:"Nebraska"},{code:"NH",label:"New Hampshire"},{code:"NJ",label:"New Jersey"},{code:"NM",label:"New Mexico"},{code:"NV",label:"Nevada"},{code:"OH",label:"Ohio"},{code:"OK",label:"Oklahoma"},{code:"OR",label:"Oregon"},{code:"PA",label:"Pennsylvania"},{code:"RI",label:"Rhode Island"},{code:"SC",label:"South Carolina"},{code:"SD",label:"South Dakota"},{code:"TN",label:"Tennessee"},{code:"TX",label:"Texas"},{code:"UT",label:"Utah"},{code:"VA",label:"Virginia"},{code:"VT",label:"Vermont"},{code:"WA",label:"Washington"},{code:"WI",label:"Wisconsin"},{code:"WV",label:"West Virginia"},{code:"WY",label:"Wyoming"}],gb:[{code:"EN",label:"England"},{code:"NI",label:"Northern Ireland"},{code:"SC",label:"Scotland"},{code:"WA",label:"Wales"}],pl:[],in:[]};function B(e){return e in s&&s[e].length>0}function F(e){return e in s&&s[e].length===0}function G(e){return!(e in s)}function Q(e){return P.includes(e)}function X(e){return!!e&&!!I.find(t=>t.code===e)}function J(e,t){var a;return(a=s[e])==null?void 0:a.find(o=>o.code===t)}function Z(e,t){const a=h(e),o=t?J(e,t):void 0;return[a==null?void 0:a.name,o?`(${o.label})`:void 0].filter(Boolean).join(" ")}function j(){return I}function q(e){return s[e]}function U(e){return{title:e.title??"",linkedNoum:e.noumId}}function E(e){var a,o,n,c;const t=parseInt(e.terminationNotice??"",10);return{title:e.title,linkedNoum:e.noumId,buyer:e.buyerId||null,seller:e.serviceProviderId||null,effectiveDate:e.effectiveDate?v(e.effectiveDate):null,legalJurisdiction:{country:(a=e.governingLaw)==null?void 0:a.country,state:(o=e.governingLaw)==null?void 0:o.region},arbitrationJurisdiction:{country:(n=e.arbitration)==null?void 0:n.country,state:(c=e.arbitration)==null?void 0:c.region},terminationNoticeInDays:Number.isInteger(t)?t:null,logo:void 0,templateName:void 0}}function V(e){var a,o,n,c,u,b,g,f,i,d,r,l,m;if(!e.linkedNoum._id)throw new Error("Invalid linkedNoum for provided contract.");const t=p({noumId:e.linkedNoum._id});return{noumId:e.linkedNoum._id,title:e.title??t.title,buyerId:((a=e.buyer)==null?void 0:a._id)??t.buyerId,serviceProviderId:((o=e.seller)==null?void 0:o._id)??t.serviceProviderId,effectiveDate:R.parseDateString(e.effectiveDate)??t.effectiveDate,terminationNotice:(n=e.terminationNoticeInDays||t.terminationNotice)==null?void 0:n.toString(),arbitration:{country:((c=e.arbitrationJurisdiction)==null?void 0:c.country)??((u=t.arbitration)==null?void 0:u.country),region:((b=e.arbitrationJurisdiction)==null?void 0:b.state)||((g=e.arbitrationJurisdiction)==null?void 0:g.region)||((f=t.arbitration)==null?void 0:f.region)},governingLaw:{country:((i=e.legalJurisdiction)==null?void 0:i.country)??((d=t.governingLaw)==null?void 0:d.country),region:((r=e.legalJurisdiction)==null?void 0:r.state)||((l=e.legalJurisdiction)==null?void 0:l.region)||((m=t.governingLaw)==null?void 0:m.region)}}}function T(e){return{linkedStatementsOfWork:W.orderBy(e,[t=>O.isDraft(t),"title"],["asc","asc"]).map(t=>({statementOfWorkId:t._id}))}}function p({noumId:e,linkedStatementsOfWork:t}){return{title:"Service Agreement",noumId:e??"",effectiveDate:new Date,buyerId:"",serviceProviderId:"",terminationNotice:"",governingLaw:{country:"us",region:""},arbitration:{country:"us",region:""},linkedStatementsOfWork:M(t).map(a=>({statementOfWorkId:a._id}))}}const y={toCreateNewContractInput:U,toUpdateContractInput:E,fromContract:V,fromLinkedSows:T,getDefaultValues:p};function z({id:e}){const[t]=k(),[a]=D(),[o]=A(),{data:n,loading:c}=S({variables:{id:e},skip:!e,fetchPolicy:"cache-and-network"}),u=(n==null?void 0:n.getSingleContract)??null;async function b(i){var l;const r=(l=(await t({variables:{input:y.toCreateNewContractInput(i)},update:(m,w)=>{var N;const C=(N=w.data)==null?void 0:N.createNewContract;C&&m.writeQuery({query:L,variables:{id:C._id},data:{getSingleContract:C}})}})).data)==null?void 0:l.createNewContract;if(!r)throw new Error("Unable to create a contract. Please try again later.");return r}async function g(i){var l;if(!e)return null;const r=(l=(await a({variables:{id:e,input:y.toUpdateContractInput(i)}})).data)==null?void 0:l.updateContract;if(!r)throw new Error("Unable to update the contract. Please try again later.");return r}async function f(i=e){if(!i)return;if(!await o({variables:{id:i}}))throw new Error("Unable to delete the contract. Please try again later.")}return{contract:u,isLoading:c,createContract:b,updateContract:g,deleteContract:f}}export{y as C,q as a,F as b,Q as c,G as d,Z as f,j as g,B as h,X as i,z as u};
//# sourceMappingURL=contract-546e6b09.js.map
