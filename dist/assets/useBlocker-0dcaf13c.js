import{a_ as $,r as j}from"./vendor-51460554.js";var p;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(p||(p={}));var A=function(n){return Object.freeze(n)};function z(n,o){if(!n){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}var B="beforeunload",C="popstate";function D(n){n===void 0&&(n={});var o=n,a=o.window,e=a===void 0?document.defaultView:a,i=e.history;function f(){var t=e.location,r=t.pathname,c=t.search,s=t.hash,u=i.state||{};return[u.idx,A({pathname:r,search:c,hash:s,state:u.usr||null,key:u.key||"default"})]}var l=null;function U(){if(l)v.call(l),l=null;else{var t=p.Pop,r=f(),c=r[0],s=r[1];if(v.length)if(c!=null){var u=h-c;u&&(l={action:t,location:s,retry:function(){y(u*-1)}},y(u))}else z(!1,"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.");else k(t)}}e.addEventListener(C,U);var w=p.Pop,m=f(),h=m[0],g=m[1],E=R(),v=R();h==null&&(h=0,i.replaceState($({},i.state,{idx:h}),""));function x(t){return typeof t=="string"?t:M(t)}function L(t,r){return r===void 0&&(r=null),A($({pathname:g.pathname,hash:"",search:""},typeof t=="string"?N(t):t,{state:r,key:K()}))}function T(t,r){return[{usr:t.state,key:t.key,idx:r},x(t)]}function O(t,r,c){return!v.length||(v.call({action:t,location:r,retry:c}),!1)}function k(t){w=t;var r=f();h=r[0],g=r[1],E.call({action:w,location:g})}function S(t,r){var c=p.Push,s=L(t,r);function u(){S(t,r)}if(O(c,s,u)){var d=T(s,h+1),P=d[0],b=d[1];try{i.pushState(P,"",b)}catch{e.location.assign(b)}k(c)}}function _(t,r){var c=p.Replace,s=L(t,r);function u(){_(t,r)}if(O(c,s,u)){var d=T(s,h),P=d[0],b=d[1];i.replaceState(P,"",b),k(c)}}function y(t){i.go(t)}var V={get action(){return w},get location(){return g},createHref:x,push:S,replace:_,go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(r){return E.push(r)},block:function(r){var c=v.push(r);return v.length===1&&e.addEventListener(B,H),function(){c(),v.length||e.removeEventListener(B,H)}}};return V}function H(n){n.preventDefault(),n.returnValue=""}function R(){var n=[];return{get length(){return n.length},push:function(a){return n.push(a),function(){n=n.filter(function(e){return e!==a})}},call:function(a){n.forEach(function(e){return e&&e(a)})}}}function K(){return Math.random().toString(36).substr(2,8)}function M(n){var o=n.pathname,a=o===void 0?"/":o,e=n.search,i=e===void 0?"":e,f=n.hash,l=f===void 0?"":f;return i&&i!=="?"&&(a+=i.charAt(0)==="?"?i:"?"+i),l&&l!=="#"&&(a+=l.charAt(0)==="#"?l:"#"+l),a}function N(n){var o={};if(n){var a=n.indexOf("#");a>=0&&(o.hash=n.substr(a),n=n.substr(0,a));var e=n.indexOf("?");e>=0&&(o.search=n.substr(e),n=n.substr(0,e)),n&&(o.pathname=n)}return o}function F(n,o=!1){const a=D();j.useEffect(()=>{if(!o)return;const e=a.block(i=>{const f={...i,retry(){e(),i.retry()}};n(f)});return e},[a,n,o])}export{F as u};
//# sourceMappingURL=useBlocker-0dcaf13c.js.map
