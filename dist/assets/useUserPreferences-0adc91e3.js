import{d2 as U,d3 as a,d4 as g}from"./index-cd84bcc9.js";import{r as c}from"./vendor-51460554.js";const y=[{id:"messagesAndConnections",label:"Messages & Connections"},{id:"postAndCommentMentions",label:"Post / Comment mentions"},{id:"paymentsAndOTPs",label:"Payments & OTP",disabled:!0},{id:"events",label:"Events",disabled:!0}],M=({disableQuery:l}={})=>{var o,t;const{data:e,loading:d,error:m}=U({fetchPolicy:"cache-and-network",skip:!!l}),b=c.useMemo(()=>y.map(i=>{var n;return{...i,isSubscribed:!!((n=e==null?void 0:e.getUserPreferences)!=null&&n.emailSubscriptions[i.id])}}),[(o=e==null?void 0:e.getUserPreferences)==null?void 0:o.emailSubscriptions]),[r,{loading:u}]=a(),P=c.useCallback(async(i,n)=>{await r({variables:{input:{emailSubscriptions:{[i]:n}}},update:(f,{data:s})=>{var p;s!=null&&s.updateUserPreferences&&f.writeQuery({query:g,variables:{input:{emailSubscriptions:{[i]:(p=s==null?void 0:s.updateUserPreferences)==null?void 0:p.emailSubscriptions[i]}}},data:{getUserPreferences:{...s==null?void 0:s.updateUserPreferences}}})}})},[r]);return{options:b,subscriptions:(t=e==null?void 0:e.getUserPreferences)==null?void 0:t.emailSubscriptions,loading:d,error:m,loadingUpdate:u,updatePreference:P}};export{M as u};
//# sourceMappingURL=useUserPreferences-0adc91e3.js.map
