{"version":3,"file":"index-a4b3e962.js","sources":["../../src/screens/SinglePost/styles.ts","../../src/screens/SinglePost/index.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport { Card } from '@/components/Card';\n\nexport const CardContainer = styled(Card)<{ noumEditor2?: boolean }>`\n  width: 100%;\n  padding: ${({ noumEditor2 }) => (noumEditor2 ? '0' : 'unset')};\n`;\n","import { useEffect } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { useNavigate } from 'react-router';\nimport SinglePageLayout from '@/layout/SinglePageLayout';\nimport { usePostQuery } from '@/apollo/graphql';\nimport PostItem from '@/screens/Chamber/components/elements/PostElement/components/PostItem';\nimport { Spinner } from '@/components/Spinner';\nimport { type PostOutput } from '@/apollo/generated/types';\nimport { useThemeContext } from '@/providers/ThemeProvider';\nimport { DefaultFonts } from '@/screens/Chamber/components/ThemePanel/constants';\nimport { useLaunchDarkly } from '@/hooks';\nimport { useNoumDetails } from '@/features/noums/hooks/noums';\nimport { PostElementProvider } from '../Chamber/components/elements/PostElement/PostElementProvider';\nimport { CardContainer } from './styles';\n\nexport const SinglePost = (): JSX.Element => {\n  const { id } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const {\n    flags: { noumEditor2 },\n  } = useLaunchDarkly();\n\n  const { setSelectedThemeId, setSelectedFonts } = useThemeContext();\n  const { data, loading, error } = usePostQuery({\n    variables: {\n      _id: id,\n    },\n  });\n  useEffect(() => {\n    if (\n      error &&\n      error.graphQLErrors[0].extensions.code === 'INTERNAL_SERVER_ERROR'\n    ) {\n      navigate(-1);\n    }\n  }, [error, navigate]);\n\n  useEffect(() => {\n    if (data?.post?.chamber) {\n      const { theme, fonts } = data.post.chamber;\n      if (theme && theme?._id) {\n        setSelectedThemeId(theme?._id);\n      } else {\n        setSelectedThemeId(undefined);\n      }\n      if (fonts && typeof fonts === 'object' && Object.keys(fonts).length > 0) {\n        setSelectedFonts(fonts);\n      } else {\n        setSelectedFonts(DefaultFonts);\n      }\n    }\n  }, [data?.post, setSelectedThemeId, setSelectedFonts]);\n\n  const noumId = searchParams.get('noumId') ?? '';\n  const { space } = useNoumDetails(noumId);\n\n  if (loading) return <Spinner />;\n  return (\n    <SinglePageLayout showBackButton responsiveMain>\n      {Boolean(data?.post) && (\n        <CardContainer noumEditor2={noumEditor2}>\n          <PostElementProvider space={space}>\n            <PostItem data={data?.post as PostOutput} pageView={!noumEditor2} />\n          </PostElementProvider>\n        </CardContainer>\n      )}\n    </SinglePageLayout>\n  );\n};\n\nexport default SinglePost;\n"],"names":["CardContainer","styled","Card","noumEditor2","SinglePost","id","useParams","searchParams","useSearchParams","navigate","useNavigate","flags","useLaunchDarkly","setSelectedThemeId","setSelectedFonts","useThemeContext","data","loading","error","usePostQuery","variables","_id","useEffect","graphQLErrors","extensions","code","post","chamber","theme","fonts","undefined","Object","keys","length","DefaultFonts","noumId","get","space","useNoumDetails","jsx","Spinner","SinglePageLayout","Boolean","PostElementProvider","PostItem"],"mappings":"kmBAGaA,MAAAA,EAAgBC,EAAOC,CAAI;AAAA;AAAA,aAE3B,CAAC,CAAEC,YAAAA,CAAY,IAAOA,EAAc,IAAM;AAAA,ECU1CC,EAAaA,IAAmB,CACrC,KAAA,CAAEC,GAAAA,GAAOC,EAAW,EACpB,CAACC,CAAY,EAAIC,IACjBC,EAAWC,IACX,CACJC,MAAO,CAAER,YAAAA,CAAY,GACnBS,EAAiB,EAEf,CAAEC,mBAAAA,EAAoBC,iBAAAA,GAAqBC,EAAiB,EAC5D,CAAEC,KAAAA,EAAMC,QAAAA,EAASC,MAAAA,GAAUC,EAAa,CAC5CC,UAAW,CACTC,IAAKhB,CACP,CAAA,CACD,EACDiB,EAAAA,UAAU,IAAM,CAEZJ,GACAA,EAAMK,cAAc,CAAC,EAAEC,WAAWC,OAAS,yBAE3ChB,EAAS,EAAE,CACb,EACC,CAACS,EAAOT,CAAQ,CAAC,EAEpBa,EAAAA,UAAU,IAAM,OACVN,IAAAA,EAAAA,GAAAA,YAAAA,EAAMU,OAANV,MAAAA,EAAYW,QAAS,CACjB,KAAA,CAAEC,MAAAA,EAAOC,MAAAA,CAAAA,EAAUb,EAAKU,KAAKC,QAC/BC,IAASA,GAAAA,MAAAA,EAAOP,KAClBR,EAAmBe,GAAAA,YAAAA,EAAOP,GAAG,EAE7BR,EAAmBiB,MAAS,EAE1BD,GAAS,OAAOA,GAAU,UAAYE,OAAOC,KAAKH,CAAK,EAAEI,OAAS,EACpEnB,EAAiBe,CAAK,EAEtBf,EAAiBoB,CAAY,IAGhC,CAAClB,GAAAA,YAAAA,EAAMU,KAAMb,EAAoBC,CAAgB,CAAC,EAErD,MAAMqB,EAAS5B,EAAa6B,IAAI,QAAQ,GAAK,GACvC,CAAEC,MAAAA,CAAAA,EAAUC,EAAeH,CAAM,EAEnClB,OAAAA,EAAgBsB,EAACC,EAAU,CAAA,YAAA,oBAAA,CAAA,EAE5BD,EAAAE,EAAA,CAAiB,eAAc,GAAC,eAAc,GAAA,YAAA,8BAC5CC,SAAAA,GAAQ1B,GAAAA,MAAAA,EAAMU,OACZa,EAAAvC,EAAA,CAAc,YAAAG,EAAyB,YAAA,2BACtC,SAACoC,EAAAI,EAAA,CAAoB,MAAAN,EAAa,YAAA,iCAChC,SAAAE,EAACK,GAAS,KAAM5B,GAAAA,YAAAA,EAAMU,KAAoB,SAAU,CAACvB,EAAY,YAAA,qBAAA,CAAA,CACnE,CAAA,EACF,CAEJ,CAAA,CAEJ"}