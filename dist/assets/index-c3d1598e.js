import{A as w,G as y,j as e,n as M,F as a,c as d,B as v,T as c,a4 as j}from"./index-cd84bcc9.js";import{ar as C,r as S}from"./vendor-51460554.js";import{S as E,a as F,b as $,c as A,d as W,e as g}from"./styles-ba20ba6a.js";const x={0:"noumena.resend_otp_please_wait_24h.text",1:"noumena.resend_otp_last_resend_code.text",2:"noumena.resend_otp_limit_resend_code.text",phone:"noumena.resend_otp_correct_phone_number.text",email:"noumena.resend_otp_correct_email.text"},H=({loginData:t,minHeight:O,isResendLoading:R,remainingRequests:o,beforeSubmit:l,onLoginFailed:u,onLoginSuccess:p,timeLeftForNextResend:P=0})=>{const{t:r}=C(),{recaptchaToken:m,returnNewReCaptcha:T}=w(),[_,f]=S.useState(!1),b=S.useCallback(async()=>{if(!t||(f(!1),!m))return;l(!0);const s=await T(),n=await(t.type==="phone"?y.signInPhone:y.signInEmail)(t.value,s);if(n!=null&&n.errorMessage){u(t.type,n.errorStatus,n.errorMessage);return}p(n.message,n.nextRequestAfterInSecond,n.remainingRequest,t,!0)},[t,m,l,T,p,u]),k=()=>{f(!0)},h=()=>e(A,{children:e(v,{secondary:!0,textOnly:!0,onClick:b,"data-testid":"resend-verify-button","data-test":"OTPResend-resendButton-Button",children:e(c,{colorToken:"--text-button-brand-secondary-default",font:"button-m","data-test":"OTPResend-resendButton-TSpan",children:r("noumena.resend_verification_code.text")})})}),B=s=>{let i="";return s===2&&(i=x[(t==null?void 0:t.type)??0]??e(a,{})),e("div",{"data-test":"OTPResend-loadMessage",children:d(c,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-testid":"resend-caution-message","data-test":"OTPResend-loadMessage-TSpan",children:[r(i)," ",r(x[s])]})})},I=s=>d(a,{children:[e(W,{"data-testid":"code-sent-span",children:d(c,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"OTPResend-loadTimer-TSpan",children:[r("noumena.resend_otp_code_sent.text")," "]})}),e(g,{duration:s,"data-testid":"resend-wait-span",children:d(c,{font:"body-m",$fill:!0,colorToken:"--text-body-neutral-default","data-test":"OTPResend-loadTimer-TSpan",children:[r("noumena.resend_otp_please_wait.text")," ",e(j,{initialSeconds:s,timedOut:k,"data-test":"OTPResend-loadTimer-Timer"})," ",r("noumena.resend_otp_before_request.text")]})})]});return e(E,{minHeight:O,children:R?e(F,{children:e(M,{"data-test":"OTPResend-Spinner"})}):(()=>o!==0&&!_?e(a,{children:I(P)}):_||o===0?d(a,{children:[B(o),e($,{}),o>0?h():e(a,{})]}):e(a,{children:h()}))()})};export{H as O};
//# sourceMappingURL=index-c3d1598e.js.map
