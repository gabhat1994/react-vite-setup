import{jj as In,v as Ce,Y as it,jk as kn,jl as Mn,jm as et,s as Fe,i as lt,h as Ie,B as X,k as Ee,T,I as ue,o as Dn,f as He,jn as ce,c as g,j as n,jo as be,jp as qt,jq as Qt,dP as Kt,aQ as ne,et as Se,S as D,x as W,jr as Rn,js as On,aC as Xt,jt as Fn,t as Be,aa as Jt,ab as pt,ju as Ln,F as Oe,am as Nt,b7 as Zt,jv as Bn,y as We,bb as _t,w as en,jw as Wn,jx as $n,jy as Yn,jz as jn,jA as zn,jB as Un,jC as It,jD as Hn,jE as Vn,jF as Gn,R as ht,n as gt,c4 as qn,f7 as Qn,hw as tn,hy as Kn,jG as Xn,jH as Jn,jI as Zn,jJ as ea,jK as ta,jL as na,cZ as aa,M as oa}from"./index-cd84bcc9.js";import{f as le,r as l,C as k,B as p,ab as Pt,ad as ra,ap as bt,a9 as nn,aQ as ia,aS as ie,ac as H,ar as la,g as St,u as an}from"./vendor-51460554.js";import{u as sa}from"./useInvoice-3a46c6ed.js";import{u as ca}from"./helper-53a5becb.js";import{O as on,S as da}from"./OtpInput-6d75f9c8.js";import{D as rn}from"./done-439b31ee.js";import{R as ua}from"./Radiobox-c1e62033.js";import{S as Le,a as je}from"./SetupPin-06f1ecff.js";const ln=()=>{const[e,{loading:t}]=In({fetchPolicy:"cache-and-network"});return{isNonNoumenaMemberConnected:async({chamberId:o})=>{var c;const{data:r,error:s}=await e({variables:{id:o}}),d=((c=r==null?void 0:r.getSpaceById)==null?void 0:c.isConnected)||!1;return s&&le(s,{tags:{section:"non-noumena-member-connected space"}}),{isConnectedToNoum:d,error:s}},loading:t}},ma=()=>{const{addToast:e}=Ce(),[t,a]=l.useState(""),[o,{loading:r}]=ca({onCompleted:s=>{var c;const d=((c=s.createPlaidLink)==null?void 0:c.link_token)||"";a(d)},onError:s=>{e("error","none",s.message)}});return l.useEffect(()=>{t||o()},[t,o]),{plaidToken:t,loading:r}};function fa(){const[e,t]=l.useState(),[a,o]=l.useState([]),{logError:r}=it(),[s]=kn({fetchPolicy:"cache-and-network",onError:i=>{r(i,"GetSecurityQUestions")},onCompleted:({getSecurityQuestionsForReset:i})=>{if(e)o(i);else{const u=Math.floor(Math.random()*3);o([{id:i[u].id,question:i[u].question}])}}}),{data:d,error:c}=Mn({variables:{},onError:()=>{r(c,"allowPassCodeReset")}});return l.useEffect(()=>{var i,u;t((i=d==null?void 0:d.allowPassCodeReset)==null?void 0:i.allowReset),typeof((u=d==null?void 0:d.allowPassCodeReset)==null?void 0:u.allowReset)=="boolean"&&s()},[d,s]),{resetSecurityQuestions:e,questions:a}}const me=l.createContext({loading:!1,fromList:[],toList:[],defaultPayeeID:void 0,defaultWalletPayee:void 0,source:"PAY_BY_CARD",setSource:()=>null,destination:null,setDestination:()=>null,handleTransactionChange:()=>null,isDestinationDropdownDisabled:!1,clientSecret:"",transactions:{amount:"",transactionReason:"",settlementPeriod:et.Sameday},setClientSecret:()=>{},isStripeFlow:!1,refetchPaymentData:()=>null,setPaymentStatus:()=>null,paymentStatus:null,maxTransactionAmount:void 0,transactionCardDetails:{brand:null,last4:null},invoice:null,disableAmountsField:!1,setTransactionCradDetails:null,paymentRef:"",setPaymentRef:()=>null}),Et=1440,ke=k(lt)`
  width: 400px;
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 90%;
    height: ${({hasSingleButton:e})=>e?"75vh":"calc(100% - 180px)"};
  }
`;k(Ie)``;const pa=k(X)`
  position: absolute;
  right: 0;
  width: 40px;
  height: 40px;
`;k.div`
  width: 100%;
`;const st=k(Ee)``,sn=k.div`
  width: 400px;
  height: 78px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 16px;
  border-radius: 8px;
`,cn=k.div`
  width: 100%;
  font-family: var(--font-header-xsmall-bold-font);
  color: var(--text-tablecell-header-neutral-highlighted);
  height: 100%;
  display: flex;
  align-items: center;
`,dn=k.div`
  width: 100%;
  font-family: var(--font-header-xsmall-bold-font);
  color: var(--text-tablecell-body-neutral-default);
  height: 100%;
`,Ve=k.div`
  width: 90%;
  display: flex;
  flex-direction: column;
  height: 100%;
  justify-content: center;
`,ct=k.img`
  width: 24px;
  height: 24px;
  border-radius: 6px;
`,Xe=k(T)`
  width: 100%;
`;k(ue)`
  transition: transform 0.3s;
  ${({isOpen:e})=>e&&"transform: rotate(180deg)"}
`;const ha=k.div`
  width: 100%;
  display: flex;
  flex-direction: column;
`,qe=k.div`
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
`,Qe=k(T)``,Ke=k(T)`
  max-width: 70%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,un=k.div`
  font-weight: var(--font-link-xlarge-weight);
  font-family: var(--font-header-xsmall-bold-font);
  font-size: ${({selected:e})=>e?"var(--font-body-large-size)":"var(--font-body-medium-size)"};
  color: var(--text-tablecell-header-neutral-highlighted);
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
`,mn=k.div`
  font-weight: var(--font-input-small-weight);
  font-family: var(--font-header-xsmall-bold-font);
  font-size: ${({selected:e})=>e?"var(--font-link-medium-size)":"var(--font-footnote-size)"};
  color: var(--text-tablecell-body-neutral-default);
  height: 100%;
  width: 100%;
`;k.img`
  width: 24px;
  height: 24px;
`;const fn=k.div`
  width: 400px;
  height: 78px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 16px;
  border-radius: 8px;
  background-color: ${({selected:e})=>e?"var(--bg-tablecell-neutral-pressed)":"var(--bg-tablecell-neutral-alt-default)"};
  cursor: ${({selected:e})=>e?"pointer":"var(--font-footnote-size)"};
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: ${({selected:e})=>e?"100%":""};
  }
`;var U=(e=>(e.TRANSFER="TRANSFER",e.PAY="PAY",e.TIP="TIP",e))(U||{}),I=(e=>(e.PAYMENT_SELECT="PAYMENT_SELECT",e.PAYMENT_DESCRIPTION="PAYMENT_DESCRIPTION",e.PAYMENT_REVIEW="PAYMENT_REVIEW",e.PAYMENT_CONFIRM="PAYMENT_CONFIRM",e.PAYMENT_DONE="PAYMENT_DONE",e.PAYMENT_ADD_PAYEE="PAYMENT_ADD_PAYEE",e.PAYMENT_STRIPE="PAYMENT_STRIPE",e.PAYMENT_FORGOT_PIN="PAYMENT_FORGOT_PIN",e.PAYMENT_SET_UP_PIN="PAYMENT_SET_UP_PIN",e))(I||{}),Ct=(e=>(e.WAITING_PROCESSING="AWAITING_PROCESSING",e.SUBMITTED_TO_PGTWY="SUBMITTED_TO_PGTWY",e.PROCESSED="PROCESSED",e.CANCELLED="CANCELLED",e.REJECTED="REJECTED",e))(Ct||{});const Ae=e=>(e==null?void 0:e.__typename)==="CustomerPayeeList",Re=e=>(e==null?void 0:e.__typename)==="AccountListOutput",pn=e=>{var t,a,o;return e?Re(e)||Ae(e)?(e==null?void 0:e.customerName)||"":(e==null?void 0:e.__typename)==="AnswerOutput"?Dn((t=e.user)==null?void 0:t.firstName,(a=e.user)==null?void 0:a.middleName,(o=e.user)==null?void 0:o.lastName):"":""},tt=(e,t)=>e===U.TRANSFER&&Re(t)?(t==null?void 0:t.id)||"":e===U.PAY&&Ae(t)?t.accountId||"":e===U.PAY&&Re(t)&&t.id||"",ya=(e,t,a)=>{let o="";switch(e){case U.TRANSFER:o=p("noumena.money.transer");break;case U.PAY:o=p("noumena.money.pay");break;case U.TIP:o=p("noumena.quick_questions.tip");break;default:o=""}const r=pn(a);switch(t){case I.PAYMENT_DESCRIPTION:return`${o} ${r}`.trim();case I.PAYMENT_REVIEW:return`${p("noumena.money.review")} ${o}`.trim();case I.PAYMENT_CONFIRM:return p("noumena.money.confirmTransaction");default:return e===U.TIP?`${o} ${r}`.trim():o}},ga=e=>e?String(e):"",Tt=({payee:e,selected:t=!1,fetchUpdatedBalance:a=!1,customStyles:o})=>{const r=Ae(e),s=Re(e),{user:d}=He(),c=l.useMemo(()=>e?!("chamberId"in e)&&"accountType"in e&&e.accountType===ce.Wallet:!1,[e]);if(!e)return null;const i=()=>{var h,m,f;return r?n(kt,{payee:e,selected:t,"data-test":"Payee-getDetails-CustomerPayee"}):s?((m=(h=e==null?void 0:e.chamber)==null?void 0:h.uid)==null?void 0:m._id)===(d==null?void 0:d._id)||((f=e==null?void 0:e.userId)==null?void 0:f._id)===(d==null?void 0:d._id)?n(Pa,{fetchUpdatedBalance:a,payee:e,selected:t,"data-test":"Payee-getDetails-AccountPayee"}):n(kt,{payee:e,selected:t,"data-test":"Payee-getDetails-CustomerPayee"}):null},u=()=>{var h,m,f;return s?((h=e.chamber)==null?void 0:h.profileImage)||be:r&&!c?((f=(m=e.userId)==null?void 0:m.profile)==null?void 0:f.profilePicture)||be:be};return g(fn,{selected:t,style:{...o},"data-test":"Payee-Wrapper",children:[n(ct,{src:u(),alt:"noum-logo",onError:({currentTarget:h})=>{h.onerror=null,h.src=be},"data-test":"Payee-Image"}),i()]})},hn=({customerName:e,customerAvatar:t,selected:a})=>g(fn,{selected:!!a,"data-test":"TipPayee-Wrapper",children:[n(ct,{src:t||be,alt:"noum-logo","data-test":"TipPayee-Image"}),g(Ve,{"data-test":"TipPayee-Account",children:[n(T,{font:"body-l-bold",color:"--text-tablecell-header-neutral-highlighted","data-test":"TipPayee-TSpan",children:e}),n(T,{font:"body-m",color:"--text-tablecell-body-neutral-default","data-test":"TipPayee-TSpan",children:p("noumena.container.close_subwallet.mainwallet")})]})]}),kt=({selected:e,payee:t})=>{const{customerName:a,walletName:o,maskAccountNumber:r,accountType:s}=t;return g(Ve,{"data-test":"CustomerPayee-Account",children:[n(un,{selected:e,"data-test":"CustomerPayee-Name",children:a}),n(mn,{selected:e,"data-test":"CustomerPayee-Description",children:s==="BANK"?`****${r}`:o})]})},Pa=({selected:e,payee:t,fetchUpdatedBalance:a})=>{const{accountName:o,accountType:r,maskAccountNumber:s,balance:d,walletName:c,createdAt:i}=t,{addToast:u}=Ce(),[h,{loading:m}]=qt(),[f,{loading:y}]=Qt(),[v,{loading:C}]=Kt(),[b,P]=l.useState(""),N=r==="WALLET"?c:`${o}****${s}`;l.useEffect(()=>{async function B(){switch(t.accountType){case"BANK":h({variables:{id:t.id},fetchPolicy:"network-only",onCompleted:_=>{var $,j,w,x;P(ne(((j=($=_.getBankAccountBalance)==null?void 0:$.balance)==null?void 0:j.value)||0,(x=(w=_.getBankAccountBalance)==null?void 0:w.balance)==null?void 0:x.currency,2))},onError:_=>{le(_,{tags:{section:"fetchAccountBalanceDoneScreen"}}),_ instanceof Error?u("error","none",`${_.message}`):u("error","none","Unable to fetch account balance")}});break;case"WALLET":t.chamberId?v({variables:{chamberId:t.chamberId},fetchPolicy:"network-only",onCompleted:_=>{var $,j,w,x;P(ne(((j=($=_.getSubWalletBalance)==null?void 0:$.amount)==null?void 0:j.value)||0,(x=(w=_.getSubWalletBalance)==null?void 0:w.amount)==null?void 0:x.currency,2))},onError:_=>{le(_,{tags:{section:"fetchSubwalletBalanceDoneScreen"}}),_ instanceof Error?u("error","none",`${_.message}`):u("error","none","Unable to fetch subwallet balance")}}):f({fetchPolicy:"network-only",onCompleted:_=>{var $,j,w,x;P(ne(((j=($=_.getWalletBalance)==null?void 0:$.balance)==null?void 0:j.value)||0,(x=(w=_.getWalletBalance)==null?void 0:w.balance)==null?void 0:x.currency,2))},onError:_=>{le(_,{tags:{section:"fetchMasterWalletBalanceDoneScreen"}}),_ instanceof Error?u("error","none",`${_.message}`):u("error","none","Unable to fetch master wallet balance")}});break}}a&&B()},[t.accountType,t.chamberId,t.id,u,a,h,f,v]);const M=ne(d||0,Se.Usd,2),S=m||y||C,A=Pt(Date.now(),new Date(i))>Et||r==="BANK"&&!d;return g(Ve,{"data-test":"AccountPayee-Account",children:[n(un,{selected:e,"data-test":"AccountPayee-Name",children:N}),!A&&n(mn,{selected:e,"data-test":"AccountPayee-Description",children:S?"Fetching..":r==="BANK"&&!A?p("noumena.money.payment.available.balance",{balanceString:`${a?b:M}`}):`${a?b:M}`})]})},ba=k(sn)`
  background-color: var(--bg-tablecell-neutral-alt-default);
  height: 65px;
`,Sa=k(cn)`
  color: var(--text-tablecell-header-neutral-highlighted);
  font-weight: var(--font-link-xlarge-weight);
  font-size: var(--font-body-medium-size);
`,Ea=k(dn)`
  color: var(--text-tablecell-body-neutral-default);
  font-weight: var(--font-input-small-weight);
  font-size: var(--font-footnote-size);
`,Ca=({account:e})=>{const{accountName:t,accountType:a,maskAccountNumber:o,balance:r,walletName:s,createdAt:d,chamber:c}=e,i=a==="WALLET"?s:`${t}****${o}`,u=ne(r||0,Se.Usd,2),h=Pt(Date.now(),new Date(d))>Et||a==="BANK"&&!r;return g(ba,{"data-test":"UnselectedAccount-UnselectedAccountWrapper",children:[n(ct,{src:(c==null?void 0:c.profileImage)||be,alt:"noum-logo",onError:({currentTarget:m})=>{m.onerror=null,m.src=be},"data-test":"UnselectedAccount-Image"}),g(Ve,{"data-test":"UnselectedAccount-Account",children:[h&&n(D,{height:5,"data-test":"UnselectedAccount-Spacer"}),n(Sa,{"data-test":"UnselectedAccount-Name",children:i}),!h&&n(Ea,{"data-test":"UnselectedAccount-Description",children:a==="BANK"?p("noumena.money.payment.available.balance",{balanceString:`${u}`}):`${u}`})]})]})},Ta=e=>(e==null?void 0:e.map(t=>({key:t.id,label:n(W,{"data-test":"generateAccountList-Stack",children:n(Ca,{account:t,"data-test":"generateAccountList-UnselectedAccount"})}),type:"value",value:t})))||[],Mt=e=>(e==null?void 0:e.map(t=>({key:(t==null?void 0:t.id)??"",label:n(W,{"data-test":"generatePayeeList-Stack",children:n(Tt,{payee:t,"data-test":"generatePayeeList-Payee"})}),type:"value",value:t})))||[],va=({children:e,defaultAccountID:t,defaultPayeeID:a,defaultWalletPayee:o,answerForTip:r,invoiceId:s,maxTransactionAmount:d,isSourceWalletExists:c,predefinedPayeeList:i=[],isDestinationDropdownDisabled:u,defaultAmount:h,disableAmountsField:m,offerId:f,campaignId:y,campaignRepayment:v,handleClose:C})=>{const{addToast:b}=Ce(),{isUnauthenticated:P}=He(),[N,M]=l.useState(null),[S,A]=l.useState({brand:null,last4:null}),[B,_]=l.useState("PAY_BY_CARD"),[$,j]=l.useState([]),[w,x]=l.useState([]),[F,E]=l.useState(null),[V,G]=l.useState(""),[q,O]=l.useState(""),{invoice:z}=sa({invoiceId:s}),oe="Customer KYC is in DEACTIVATED state",[J,Y]=l.useState({amount:ga(h),transactionReason:"",settlementPeriod:et.Sameday}),fe=l.useCallback(se=>{const{amount:xe,transactionReason:pe,settlementPeriod:Te}=se;Y(Z=>({...Z,amount:xe,transactionReason:pe,settlementPeriod:Te}))},[]),{loading:we,refetch:K}=Rn({fetchPolicy:"network-only",skip:P,variables:{input:{self:!0,limit:100,page:1}},onCompleted:se=>{const{getAccountList:xe}=se,pe=Ta(xe);j(pe),_(Te=>{if(t){const Z=pe.find(Ne=>Ne.value.id===t);if(Z)return Z.value}return pe.length?pe[0].value:Te})},onError:se=>{le(se,{tags:{section:"getAccountList"}}),b("error","none",`${se.message}`)}}),{loading:R,refetch:re}=On({fetchPolicy:"network-only",skip:!c||P,onCompleted:se=>{const{getCustomerPayeeList:xe}=se,pe=Xt(xe).filter(Z=>(Z==null?void 0:Z.accountType)===ce.Wallet||(Z==null?void 0:Z.accountType)===ce.Bank&&Z.subAccountType===Fn.External),Te=Mt(pe);i.length||x(Te),r||E(Z=>{if(a){const Ne=Te.find(Me=>{var De,Q;return Ae(Me.value)?((De=Me.value)==null?void 0:De.accountId)===a:((Q=Me.value)==null?void 0:Q.id)===a});if(Ne)return Ne.value}return Z})},onError:se=>{le(se,{tags:{section:"getCustomerPayeeListData"}}),se.message===oe&&C(),b("error","none",`${se.message}`)}}),$e=we||R;l.useEffect(()=>{!F&&o&&E(o),i.length&&x(Mt(i))},[o,F,i]),l.useEffect(()=>{r&&E({_id:r._id,user:r.user,__typename:r.__typename})},[r]);const Ye=l.useCallback(()=>{c&&re(),K()},[c,K,re]),Ge=l.useMemo(()=>({loading:$e,fromList:$,toList:w,source:B,setSource:_,destination:F,setDestination:E,handleTransactionChange:fe,transactions:J,clientSecret:V,setClientSecret:G,isStripeFlow:B==="PAY_BY_CARD",refetchPaymentData:Ye,setPaymentStatus:M,paymentStatus:N,defaultPayeeID:a,defaultWalletPayee:o,transactionCardDetails:S,setTransactionCradDetails:A,invoice:z,maxTransactionAmount:d,isDestinationDropdownDisabled:u,predefinedPayeeList:i,disableAmountsField:m,campaignId:y,offerId:f,paymentRef:q,setPaymentRef:O,campaignRepayment:v}),[$e,$,w,B,F,fe,J,V,Ye,N,a,o,S,z,d,u,i,m,y,f,q,v]);return n(me.Provider,{value:Ge,children:e})},Aa={type:U.PAY,handleForwardStateChange:()=>null,handleBackwardsStateChange:()=>null,handleClose:()=>null,paymentState:I.PAYMENT_SELECT,setPaymentState:()=>{},onSuccessfulTransaction:()=>null,isMobile:!1,disableFromDropDown:!1,hideToDropdownIcon:!1,hideFromDropdownIcon:void 0,modalSize:Be.M,setModalSize:()=>null},ae=l.createContext(Aa),wa=({children:e,type:t,onSuccessfulTransaction:a=()=>null,handleClose:o=()=>null,disableFromDropDown:r=!1,hideToDropdownIcon:s=!1,hideFromDropdownIcon:d=!1,...c})=>{const[i,u]=l.useState(I.PAYMENT_SELECT),[h,m]=l.useState(Be.M),y=Jt()===pt.MOBILE,v=l.useCallback(()=>{i===I.PAYMENT_SELECT?u(I.PAYMENT_DESCRIPTION):i===I.PAYMENT_DESCRIPTION?u(I.PAYMENT_REVIEW):i===I.PAYMENT_REVIEW?u(I.PAYMENT_CONFIRM):i===I.PAYMENT_CONFIRM&&u(I.PAYMENT_DONE)},[i]),C=l.useCallback(()=>{i===I.PAYMENT_DESCRIPTION?u(I.PAYMENT_SELECT):i===I.PAYMENT_REVIEW?u(I.PAYMENT_DESCRIPTION):i===I.PAYMENT_CONFIRM?u(I.PAYMENT_REVIEW):i===I.PAYMENT_STRIPE&&u(I.PAYMENT_DONE)},[i]),b=l.useCallback(N=>{u(N)},[]),P=l.useMemo(()=>({type:t,modalSize:h,setModalSize:m,handleForwardStateChange:v,handleBackwardsStateChange:C,paymentState:i,setPaymentState:b,onSuccessfulTransaction:a,isMobile:y,disableFromDropDown:r,hideToDropdownIcon:s,hideFromDropdownIcon:d,handleClose:o,...c}),[t,h,m,i,v,C,b,a,y,r,s,d,o,c]);return n(ae.Provider,{value:P,children:e})},xa=k(sn)`
  background-color: var(--bg-tablecell-neutral-pressed);
  cursor: pointer;
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 100%;
  }
`,yn=k(cn)`
  font-weight: var(--font-link-xlarge-weight);
  font-size: var(--font-body-large-size);
  display: flex;
  align-items: center;
`,Na=k(dn)`
  font-weight: var(--font-input-small-weight);
  font-size: var(--font-link-medium-size);
`,gn=({account:e,showBalance:t=!0,fetchUpdatedBalance:a=!1,customStyles:o})=>{const{isStripeFlow:r}=l.useContext(me),s=()=>!r&&e!=="PAY_BY_CARD"?n(_a,{account:e,showBalance:t,fetchUpdatedBalance:a,"data-test":"SelectedAccount-getAccount-NonCardAccounts"}):n(Ia,{"data-test":"SelectedAccount-getAccount-CardAccount"});return n(xa,{style:{...o},"data-test":"SelectedAccount-SelectedAccountWrapper",children:s()})},_a=({account:e,showBalance:t=!0,fetchUpdatedBalance:a=!1})=>{const{addToast:o}=Ce(),[r,s]=l.useState(be),[d]=Ln(),[c,{loading:i}]=qt(),[u,{loading:h}]=Qt(),[m,{loading:f}]=Kt(),[y,v]=l.useState("");if(l.useEffect(()=>{e!=null&&e.chamberId&&d({variables:{id:e.chamberId},fetchPolicy:"cache-and-network",onCompleted:w=>{var x;s(((x=w.getSpaceById)==null?void 0:x.profileImage)||be)}})},[d,e]),l.useEffect(()=>{async function w(){switch(e==null?void 0:e.accountType){case"WALLET":e.chamberId?m({variables:{chamberId:e.chamberId},fetchPolicy:"network-only",onCompleted:x=>{var F,E,V,G;v(ne(((E=(F=x.getSubWalletBalance)==null?void 0:F.amount)==null?void 0:E.value)||0,(G=(V=x.getSubWalletBalance)==null?void 0:V.amount)==null?void 0:G.currency,2))},onError:x=>{le(x,{tags:{section:"fetchSubwalletBalanceDoneScreen"}}),x instanceof Error?o("error","none",`${x.message}`):o("error","none","Unable to fetch subwallet balance")}}):u({fetchPolicy:"network-only",onCompleted:x=>{var F,E,V,G;v(ne(((E=(F=x.getWalletBalance)==null?void 0:F.balance)==null?void 0:E.value)||0,(G=(V=x.getWalletBalance)==null?void 0:V.balance)==null?void 0:G.currency,2))},onError:x=>{le(x,{tags:{section:"fetchMasterWalletBalanceDoneScreen"}}),x instanceof Error?o("error","none",`${x.message}`):o("error","none","Unable to fetch master wallet balance")}});break}}a&&w()},[e==null?void 0:e.accountType,e==null?void 0:e.chamberId,e==null?void 0:e.id,o,a,c,u,m]),!e)return null;const{accountName:C,accountType:b,maskAccountNumber:P,balance:N,walletName:M,createdAt:S}=e,A=b==="WALLET"?M:`${C}****${P}`,B=ne(N||0,Se.Usd,2),_=i||h||f,$=()=>{s(be)},j=Pt(Date.now(),new Date(S))>Et||b==="BANK"&&!N;return g(Oe,{children:[n(ct,{src:r,alt:"noum-logo",onError:$,"data-test":"NonCardAccounts-Image"}),g(Ve,{"data-test":"NonCardAccounts-Account",children:[n(yn,{"data-test":"NonCardAccounts-Name",children:A}),t&&!j&&n(Na,{"data-test":"NonCardAccounts-Description",children:_?"Fetching..":b==="BANK"?p("noumena.money.payment.available.balance",{balanceString:`${a?y:B}`}):`${a?y:B}`})]})]})},Ia=()=>{const{transactionCardDetails:{brand:e,last4:t}}=l.useContext(me),a=e?`${e[0].toUpperCase()}${e.substring(1).toLocaleLowerCase()}`:"NA",o=t||"0000",r=l.useMemo(()=>["amex","diners","discover","mastercard","unionpay","visa","jcb"],[]),s=l.useMemo(()=>e&&r.includes(e)?e:"creadit_card_m",[r,e]);return g(Oe,{children:[n(ue,{name:s,size:32,"data-test":"CardAccount-Icon"}),n(Ve,{"data-test":"CardAccount-Account",children:n(yn,{style:{marginTop:"2.5px"},"data-test":"CardAccount-Name",children:`${a}****${o}`})})]})},Pn=k.div`
  width: 400px;
  height: 78px;
  border-radius: 8px;
  box-sizing: border-box;
  position: relative;
  background-color: var(--bg-tablecell-neutral-pressed);
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 100%;
  }
`,ka=k(Pn)`
  display: flex;
  align-items: center;
  padding-left: 16px;
`,Ma=k(ue)`
  position: absolute;
  top: 40%;
  right: 10px;
  transition: transform 0.3s;
  ${({isOpen:e})=>e&&"transform: rotate(180deg)"}
`,Dt=({content:e,inpRef:t,toggle:a,open:o,placeHolder:r,hideDropDwonIcon:s=!1})=>g(Pn,{ref:t,onClick:a,"data-test":"Input-InputWrapper",children:[e||n(ka,{"data-test":"Input-LableContainer",children:n(Xe,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"Input-Label",children:r})}),s||n(Ma,{name:"chevron_small_down_m",size:24,"data-testid":"styledAddressDownArrow",isOpen:o,color:"--icon-tablecell-neutral-default","data-test":"Input-RightIcon"})]}),Da=k.div`
  font-weight: var(--font-link-xlarge-weight);
  font-family: var(--font-header-xsmall-bold-font);
  font-size: ${({selected:e})=>e?"var(--font-body-large-size)":"var(--font-body-medium-size)"};
  color: var(--text-tablecell-header-neutral-highlighted);
  height: 100%;
  width: 90%;
  display: flex;
  align-items: center;
  margin-top: ${({selected:e})=>e?"3px":"5px"};
`,Ra=k.div`
  width: 400px;
  height: ${({selected:e})=>e?"78px":"48px"};
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 16px;
  border-radius: 8px;
  background-color: ${({selected:e})=>e?"var(--bg-tablecell-neutral-pressed)":"var(--bg-tablecell-neutral-alt-default)"};
  cursor: ${({selected:e})=>e?"pointer":"var(--font-footnote-size)"};
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 100%;
  }
`,Rt=({selected:e=!1})=>g(Ra,{selected:e,"data-testid":"pay-by-card-wrapper","data-test":"PayByCard-Wrapper",children:[n(ue,{name:"creadit_card_m",size:24,color:"--icon-tablecell-neutral-highlighted","data-test":"PayByCard-Icon"}),n(Da,{selected:e,"data-test":"PayByCard-Name",children:p("noumena.money.pay.by.card")})]}),bn=k(W)`
  height: 48px;
`,Oa=({handleAddPayee:e})=>{const{type:t}=l.useContext(ae);return n(bn,{fullWidth:!0,align:"center","data-test":"AddPayeeCard-CardWrapper",children:g(W,{fullWidth:!0,align:"center",justify:"space-between","data-test":"AddPayeeCard-Stack",children:[n(T,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"AddPayeeCard-TSpan",children:p("noumena.money.payment.your_payees")}),t!==U.TRANSFER&&n(X,{onClick:e,neutral:!0,size:"small",leftIcon:n(ue,{name:"add_m",size:24,color:"--text-tablecell-body-neutral-default","data-test":"AddPayeeCard-Icon"}),"data-test":"AddPayeeCard-Button",children:n(T,{font:"body-m-bold",colorToken:"--text-tablecell-body-neutral-default","data-test":"AddPayeeCard-TSpan",children:p("noumena.money.payment.add.new")})})]})})},Fa=({handleAddAccount:e})=>{const{type:t}=l.useContext(ae),{isUnauthenticated:a}=He(),o=t!==U.TRANSFER&&!a;return n(bn,{fullWidth:!0,align:"center","data-test":"AddAccountCard-CardWrapper",children:g(W,{fullWidth:!0,align:"center",justify:"space-between","data-test":"AddAccountCard-Stack",children:[n(T,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"AddAccountCard-TSpan",children:"Accounts"}),o&&g(W,{style:{cursor:"pointer"},align:"center",justify:"space-between",maxWidth:120,fullWidth:!0,onClick:e,"data-test":"AddAccountCard-Stack",children:[n("div",{style:{paddingBottom:5.3},children:n(ue,{name:"add_m",size:24,color:"--icon-button-brand-primary-default","data-test":"AddAccountCard-Icon"})}),n(T,{font:"body-m",colorToken:"--text-button-brand-primary-default","data-test":"AddAccountCard-TSpan",children:p("noumena.payment.add.account")})]})]})})},La=()=>{var G,q;const[e,t]=l.useState(!1),[a,o]=l.useState(!1),{source:r,destination:s,setSource:d,setDestination:c,fromList:i,toList:u,defaultPayeeID:h,isDestinationDropdownDisabled:m,predefinedPayeeList:f}=l.useContext(me),{type:y,setPaymentState:v,handleForwardStateChange:C,isMobile:b,disableFromDropDown:P,hideToDropdownIcon:N,hideFromDropdownIcon:M,setModalSize:S}=l.useContext(ae),A=r==="PAY_BY_CARD",B=!A&&(r==null?void 0:r.accountType)===ce.Wallet,_=[{key:ra(),label:n(W,{"data-test":"PaymentSelect-payByCardFooter-Stack",children:n(Rt,{"data-test":"PaymentSelect-payByCardFooter-PayByCard"})}),type:"value",value:"PAY_BY_CARD"}],$=Xt([f!=null&&f.length?void 0:{label:n(W,{fullWidth:!0,"data-test":"PaymentSelect-addPayeeHeader-Stack",children:n(Oa,{handleAddPayee:()=>{v(I.PAYMENT_ADD_PAYEE)},"data-test":"PaymentSelect-addPayeeHeader-AddPayeeCard"})}),type:"header"}]),j=[{label:n(W,{fullWidth:!0,"data-test":"PaymentSelect-addAccountHeader-Stack",children:n(Fa,{handleAddAccount:()=>{S(Be.L),v(I.PAYMENT_SET_UP_PIN)},"data-test":"PaymentSelect-addAccountHeader-AddAccountCard"})}),type:"header"}],w=l.useCallback(O=>O==null?void 0:O.filter(z=>z.value.accountType===ce.Wallet||z.value.accountType===ce.SubWallet),[]),x=l.useCallback(O=>(O==null?void 0:O.filter(oe=>{var J;return Ae(s)?Ae(oe==null?void 0:oe.value)&&((J=oe==null?void 0:oe.value)==null?void 0:J.accountId)===(s==null?void 0:s.accountId):!0}))||[],[s]),F=l.useCallback(O=>(O==null?void 0:O.filter(z=>A?!0:z.value.accountType===ce.Wallet&&z.value.id!==r.id||z.value.accountType===ce.Bank))||[],[A,r]),E=l.useMemo(()=>{if(y!==U.TRANSFER)return null;let O=w(i);return B&&(O=F(i)),O},[i,F,w,B,y]),V=l.useMemo(()=>{if(y!==U.PAY)return null;let O=w(u);return B&&(O=F(u)),h&&(O=x(u)),O},[y,w,u,B,h,F,x]);return g(l.Fragment,{children:[g(ke,{hasSingleButton:!0,"data-test":"PaymentSelect-ModalContent",children:[y!==U.TIP&&n(W,{fullWidth:!0,vertical:!0,align:"center",justify:"center","data-test":"PaymentSelect-Stack",children:n(T,{colorToken:"--text-modal-neutral-default",font:"footnote-bold",textAlign:"center","data-test":"PaymentSelect-TSpan",children:y===U.TRANSFER?p("noumena.money.transer.subheading"):p("noumena.money.pay.subheading")})}),n(D,{height:24,"data-test":"PaymentSelect-Spacer"}),n(Xe,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentSelect-Label",children:p("noumena.money.money.select.from")}),n(D,{height:8,"data-test":"PaymentSelect-Spacer"}),n(W,{fullWidth:!0,"data-test":"PaymentSelect-Stack",children:n(Nt,{expandingDrillDown:!0,containerWidth:b?"100%":"400px",options:i,placement:"bottom-start",stickyHeaderOptions:j,showHeaderDivider:!1,stickyFooterOptions:_,showFooterDivider:!1,onSelectOption:O=>{d(O.value),y!==U.TIP&&!m&&c(null)},onClose:()=>{t(!1)},onOpen:()=>t(!0),hideIcons:!0,dropdownItemStyle:{padding:"1px 0px"},disabled:P,"data-test":"PaymentSelect-Dropdown",children:({inputRef:O,toggle:z})=>n(Dt,{hideDropDwonIcon:M,open:e,content:A?n(Rt,{selected:!0,"data-test":"PaymentSelect-PayByCard"}):r?n(gn,{account:r,"data-test":"PaymentSelect-SelectedAccount"}):void 0,inpRef:O,toggle:z,"data-test":"PaymentSelect-Input"})})}),n(D,{height:24,"data-test":"PaymentSelect-Spacer"}),n(Xe,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentSelect-Label",children:p("noumena.money.money.select.to")}),n(D,{height:8,"data-test":"PaymentSelect-Spacer"}),n(W,{fullWidth:!0,"data-test":"PaymentSelect-Stack",children:y!==U.TIP?n(Nt,{expandingDrillDown:!0,containerWidth:b?"100%":"400px",options:E||V||u||[],placement:"bottom-start",stickyHeaderOptions:$,showHeaderDivider:!1,onSelectOption:O=>{c(O.value)},onClose:()=>{o(!1)},onOpen:()=>o(!0),hideIcons:!0,dropdownItemStyle:{padding:"1px 0px"},disabled:!!m,"data-test":"PaymentSelect-Dropdown",children:({inputRef:O,toggle:z})=>n(Dt,{hideDropDwonIcon:!!m||N,open:a,placeHolder:y===U.TRANSFER?p("noumena.money.payment.transfer.placeholder"):p("noumena.money.payment.payee.placeholder"),content:s?n(Tt,{payee:s,selected:!0,"data-test":"PaymentSelect-Payee"}):void 0,inpRef:O,toggle:z,"data-test":"PaymentSelect-Input"})}):(s==null?void 0:s.__typename)==="AnswerOutput"&&n(hn,{selected:!0,customerName:Zt.renderFullName(s.user),customerAvatar:(q=(G=s.user)==null?void 0:G.profile)==null?void 0:q.profilePicture,"data-test":"PaymentSelect-TipPayee"})})]}),n(Ee,{"data-test":"PaymentSelect-ModalFooter",children:n(X,{primary:!0,size:"full",disabled:!(r&&s),onClick:C,"data-test":"PaymentSelect-Button",children:p("noumena.continue")})})]})},Ba=k.div`
  position: absolute;
  padding: 10px 16px 10px 16px;
  box-sizing: border-box;
  width: 240px;
  height: auto;
  background-color: var(--bg-tooltip-neutral-default);
  border-radius: 8px;
  opacity: 0.95;
  z-index: 1000000000;
  bottom: -350%;
  left: -20%;
  display: flex;
  flex-direction: column;
`;k(T)``;const Wa=()=>{var Z,Ne,Me,De,Q,ye,wt,xt;const[e,t]=l.useState(!1),a=Jt(),{addToast:o}=Ce(),r=a===pt.MOBILE||a===pt.TABLET,{handleTransactionChange:s,source:d,isStripeFlow:c,maxTransactionAmount:i,destination:u,transactions:h,disableAmountsField:m,invoice:f}=l.useContext(me),{handleForwardStateChange:y,handleBackwardsStateChange:v,isMobile:C,type:b}=l.useContext(ae),P=d==="PAY_BY_CARD",N=!P&&(d==null?void 0:d.accountType)==="BANK",M=c,{data:S}=Bn({skip:M,fetchPolicy:"network-only",variables:{sourceAccountId:c?"CARD":typeof d!="string"&&(d!=null&&d.id)?d==null?void 0:d.id:"",destinationAccountId:tt(b,u),invoicePayment:!!(f!=null&&f.id)}}),A=((Z=S==null?void 0:S.getCustomerLimitsV2)==null?void 0:Z.weeklyLimit)!==void 0?(Ne=S==null?void 0:S.getCustomerLimitsV2)==null?void 0:Ne.weeklyLimit:-1,B=((Me=S==null?void 0:S.getCustomerLimitsV2)==null?void 0:Me.availableWeeklyLimit)||0,_=((De=S==null?void 0:S.getCustomerLimitsV2)==null?void 0:De.transactionLimit)!==void 0?(Q=S==null?void 0:S.getCustomerLimitsV2)==null?void 0:Q.transactionLimit:-1,$=ne(!P&&(d==null?void 0:d.balance)||0,Se.Usd,2),[j,w]=l.useState(!1),x=!c&&!N,{register:F,formState:{errors:E,isDirty:V,isValid:G},getValues:q,setValue:O,handleSubmit:z,watch:oe,trigger:J}=bt({mode:"onChange",defaultValues:{amount:i?String(i):"",transactionReason:"",settlementPeriod:et.Sameday}}),Y=L=>L.replaceAll(",","").replaceAll("$",""),fe=L=>{const de={...L,amount:Y(L.amount)};de.amount&&!P&&(N||Number(de.amount)<=Number(d.balance||0)?s&&(s(de),y()):o("error","none",`${p("noumena.money.transaction.insufficient.balance")}`)),P&&s&&(s(de),y())};l.useEffect(()=>{O("settlementPeriod",et.Sameday),h.amount&&O("amount",h.amount)},[O,h.amount]);const we=oe("amount"),K=we.length>6?`${we.length+2}ch`:"8ch",R=L=>{if(/^[0-9]*\.?[0-9]*$/.test(Y(L)))return ne(Number(Y(L)),void 0,j?2:0);const de=L.replace(/[^\d.-]/g,"");return ne(Number(de),void 0,j?2:0)},re=L=>L.trim().length>0?!0:"Description should contain atleast 1 character",$e=L=>/^[0-9]*\.?[0-9]*$/.test(Y(L))?!0:"Invalid amount",Ye=L=>i&&i>0&&Number(Y(L))>i?"Exceeded max amount limit":!0,Ge=L=>Number.parseFloat(Y(L))>0?!0:"Invalid amount",se=L=>!M||Number.parseFloat(Y(L))<=999999.99?!0:"Invalid amount",xe=L=>{if(M)return!0;const de=Number.parseFloat(Y(L));return A===-1&&_===-1||_===-1&&de<=B||A===-1&&de<=_||de<=B&&de<=_},pe=()=>{const L=q("amount").replaceAll(/[^\d.-]/g,""),de=!L.includes("."),_n=L.includes(".")&&!L.split(".")[1].length;if(de){w(!0);const dt=`${L}.00`;O("amount",dt),J("amount");return}if(_n){w(!0);const dt=`${L}00`;O("amount",dt),J("amount");return}O("amount",L),J("amount")},Te=()=>{q("amount").includes(".00")&&O("amount",q("amount").replace(".00","")),w(!1)};return n(l.Fragment,{children:g("form",{onSubmit:z(fe),style:{width:"100%",height:"100%"},"data-test":"PaymentDescription",children:[g(ke,{align:"center","data-test":"PaymentDescription-ModalContent",children:[n(Xe,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentDescription-Label",children:"Amount"}),n(D,{height:8,"data-test":"PaymentDescription-Spacer"}),g(W,{fullWidth:!0,align:"center",justify:"center",vertical:!0,"data-test":"PaymentDescription-Stack",children:[n(We,{...F("amount",{required:{value:!0,message:p("noumena.input.not_empty")},validate:{validAmount:L=>$e(L),validateMaxAmount:L=>Ye(L),greatherThanZero:L=>Ge(L),greatherThanMaxValue:L=>se(L),validateTransactionLimit:L=>xe(L)}}),readOnly:m,autoFocus:!0,noBorder:!0,isCurrency:!0,placeholder:p("noumena.money.payment.amount.placeholder"),value:R(q("amount")),onBlur:pe,onFocus:Te,error:!!E.amount,helperText:(ye=E.amount)==null?void 0:ye.message,centerHelperText:!0,fullWidth:!1,style:{width:K,height:"66px",fontSize:"44px",textAlign:"center",borderBottom:"2px solid var(--text-input-neutral-default)",backgroundColor:"var(--bg-modal-neutral-alt-default)",borderRadius:"0",maxWidth:"15ch"},"data-test":"PaymentDescription-TextField"}),((wt=E.amount)==null?void 0:wt.type)==="validateTransactionLimit"&&g(Oe,{children:[n(D,{height:4,"data-test":"PaymentDescription-Spacer"}),g(W,{style:{width:"172px",position:"relative"},justify:"space-between","data-test":"PaymentDescription-Stack",children:[n(T,{colorToken:"--text-input-danger-primary-default",font:"footnote","data-test":"PaymentDescription-TSpan",children:"Transaction limit exceeded."}),n("div",{onMouseOver:()=>{r||t(!0)},onMouseLeave:()=>{r||t(!1)},onClick:()=>{r&&t(!e)},children:n(ue,{name:"info_m",size:16,color:"--icon-input-danger-primary-default",style:{cursor:"pointer"},"data-test":"PaymentDescription-Icon"})}),e&&(_>=-1||A>=-1)&&g(Ba,{"data-test":"PaymentDescription-Tooltip",children:[_!==-1&&g(W,{fullWidth:!0,align:"center",justify:"space-between","data-test":"PaymentDescription-Stack",children:[n(T,{colorToken:"--text-tooltip-neutral-alt-default",font:"body-m","data-test":"PaymentDescription-TSpan",children:"Transaction Limit"}),n(T,{font:"body-m",colorToken:"--text-tooltip-neutral-alt-default","data-test":"PaymentDescription-TSpan",children:ne(_,_t.Usd,2)})]}),A!==-1&&g(W,{fullWidth:!0,align:"center",justify:"space-between","data-test":"PaymentDescription-Stack",children:[n(T,{colorToken:"--text-tooltip-neutral-alt-default",font:"body-m","data-test":"PaymentDescription-TSpan",children:"Weekly Limit"}),n(T,{colorToken:"--text-tooltip-neutral-alt-default",font:"body-m","data-test":"PaymentDescription-TSpan",children:ne(A,_t.Usd,2)})]})]})]}),n(W,{style:{position:"relative"},justify:"space-between","data-test":"PaymentDescription-Stack",children:g(T,{colorToken:"--text-input-danger-primary-default",font:"footnote","data-test":"PaymentDescription-TSpan",children:["Please contact"," ",n(T,{colorToken:"--text-input-danger-primary-default",font:"link-s",cursor:"pointer",onClick:()=>{window.open("mailto:support@noumena.pro","_blank")},"data-test":"PaymentDescription-TSpan",children:"support@noumena.pro"})," ","for any inquiries."]})})]})]}),x&&n(Xe,{font:"body-l",colorToken:"--text-input-neutral-default",style:{textAlign:"center",fontSize:"var(--font-link-small-size)"},"data-test":"PaymentDescription-Label",children:p("noumena.balance",{amount:`${$}`})}),n(D,{height:24,"data-test":"PaymentDescription-Spacer"}),n(We,{label:p("noumena.money.payment.description.lable"),...F("transactionReason",{required:{value:!0,message:p("noumena.input.not_empty")},maxLength:{value:255,message:p("noumena.money.description.input.length.error")},validate:{validDescription:L=>re(L)}}),value:q("transactionReason"),error:!!E.transactionReason,helperText:(xt=E.transactionReason)==null?void 0:xt.message,"data-test":"PaymentDescription-TextField"})]}),g(st,{gap:12,flexDirection:C?"column":"row","data-test":"PaymentDescription-Footer",children:[n(X,{secondary:!0,size:"full",onClick:v,"data-test":"PaymentDescription-Button",children:p("noumena.go.back")}),n(X,{primary:!0,size:"full",type:"submit",disabled:!V||!G,"data-test":"PaymentDescription-Button",children:p("noumena.continue")})]})]})})},$a=()=>{var oe,J;const{addToast:e}=Ce(),{flags:t}=en(),[a,o]=l.useState(0),[r,s]=l.useState(""),[d,c]=l.useState(""),{transactions:{amount:i,settlementPeriod:u,transactionReason:h},source:m,destination:f,isStripeFlow:y,invoice:v}=l.useContext(me),{handleForwardStateChange:C,handleBackwardsStateChange:b,type:P,isMobile:N,isSourceWalletExists:M}=l.useContext(ae),S=m==="PAY_BY_CARD",A=!S&&m.accountType===ce.Bank,B=!S&&m.accountType===ce.Wallet&&!m.chamberId,_=!S&&m.accountType===ce.Wallet&&!!m.chamberId,$=Ae(f),j=(Ae(f)||Re(f))&&(f==null?void 0:f.accountType)===ce.Wallet&&!f.chamberId,w=(Ae(f)||Re(f))&&(f==null?void 0:f.accountType)===ce.Wallet&&!!(f!=null&&f.chamberId),x=(Ae(f)||Re(f))&&(f==null?void 0:f.accountType)===ce.SubWallet,F=Re(f)&&(f==null?void 0:f.accountType)===ce.Bank,E=`${ne(Number(i)-Number(a),Se.Usd,2)}`,{loading:V,data:G}=Wn({fetchPolicy:"network-only",skip:(f==null?void 0:f.__typename)!=="AnswerOutput",variables:{targetUserId:(f==null?void 0:f.__typename)==="AnswerOutput"?(oe=f.user)==null?void 0:oe._id:""}});l.useEffect(()=>{if(A)s(`${m.accountName}****${m.maskAccountNumber}`);else if(B){const Y=P===U.TRANSFER?p("noumena.container.close_subwallet.mainwallet"):P===U.PAY?m.customerName:"";s(Y||"")}else _?s(m.walletName||""):S&&s("Card")},[A,B,_,m,S,P]),l.useEffect(()=>{$?c(f.customerName):j?c(p("noumena.container.close_subwallet.mainwallet")):x||w?c(f.walletName||""):F&&c(`${f.accountName}****${f.maskAccountNumber}`)},[f,$,F,j,x,w]);const[q,{loading:O}]=$n({fetchPolicy:"network-only",onCompleted:Y=>{var fe;o(((fe=Y==null?void 0:Y.getPaymentProviderCharges)==null?void 0:fe.charges)||0)},onError:Y=>{e("error","none",`${Y.message}`),le(Y,{tags:{section:"getTransactionFeesForPayments"}})}});l.useEffect(()=>{var Y;M&&(P===U.TIP&&V||q({variables:{query:{amount:Number(i),enableNoumFees:t.paymentSubscriptions,settlementPeriod:u,invoicePayment:!!(v!=null&&v.id),sourceAccountId:y?"CARD":!S&&(m!=null&&m.id)?m==null?void 0:m.id:"",destinationAccountId:P===U.TIP?(Y=G==null?void 0:G.checkWalletExists)==null?void 0:Y.targetId:tt(P,f)}}}))},[i,V,(J=G==null?void 0:G.checkWalletExists)==null?void 0:J.targetId,f,t.paymentSubscriptions,q,S,y,M,u,m,P,v==null?void 0:v.id]);const z=O||V;return g(Oe,{children:[n(lt,{"data-test":"PaymentReview-ModalBody",children:g(W,{fullWidth:!0,vertical:!0,justify:"center",align:"center","data-test":"PaymentReview-Stack",children:[n(T,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-TSpan",children:p("noumena.money.payment.amount")}),n(D,{height:8,"data-test":"PaymentReview-Spacer"}),n(T,{font:"heading-xxl",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-TSpan",children:ne(Number(i),Se.Usd,2)}),P===U.TIP?g(Oe,{children:[n(T,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-TSpan",children:p("noumena.money.payment.transfer.fee",{feeString:z?p("noumena.loading"):ne(Number(a),Se.Usd,2)})}),n(D,{height:44,"data-test":"PaymentReview-Spacer"}),n(T,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-TSpan",children:p("noumena.description.text")}),n(T,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-TSpan",children:h}),n(D,{height:16,"data-test":"PaymentReview-Spacer"})]}):g(ha,{"data-test":"PaymentReview-PaymentReviewDescription",children:[n(D,{height:44,"data-test":"PaymentReview-Spacer"}),g(qe,{"data-test":"PaymentReview-ReviewCard",children:[n(Qe,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-ReviewLabel",children:p("noumena.uc_from")}),n(Ke,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-ReviewInformation",children:r})]}),g(qe,{"data-test":"PaymentReview-ReviewCard",children:[n(Qe,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-ReviewLabel",children:p("noumena.uc_to")}),n(Ke,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-ReviewInformation",children:d})]}),g(qe,{"data-test":"PaymentReview-ReviewCard",children:[n(Qe,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-ReviewLabel",children:p("noumena.description.text")}),n(Ke,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-ReviewInformation",children:h})]}),P===U.PAY&&(v!=null&&v.id)?null:g(Oe,{children:[g(qe,{"data-test":"PaymentReview-ReviewCard",children:[n(Qe,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-ReviewLabel",children:p("noumena.money.payment.fees")}),n(Ke,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-ReviewInformation",children:z?p("noumena.loading"):ne(Number(a),Se.Usd,2)})]}),g(qe,{"data-test":"PaymentReview-ReviewCard",children:[n(Qe,{font:"footnote",colorToken:"--text-input-neutral-default","data-test":"PaymentReview-ReviewLabel",children:p("noumena.money.payment.net_amount")}),n(Ke,{font:"body-m-bold",colorToken:"--text-input-neutral-filled","data-test":"PaymentReview-ReviewInformation",children:z?p("noumena.money.payment.calculating"):E})]})]})]})]})}),g(Ee,{gap:12,flexDirection:N?"column":"row","data-test":"PaymentReview-ModalFooter",children:[n(X,{secondary:!0,size:"full",onClick:b,"data-test":"PaymentReview-Button",children:p("noumena.go.back")}),n(X,{primary:!0,size:"full",type:"submit",onClick:C,loading:z,disabled:z,"data-test":"PaymentReview-Button",children:p("noumena.continue")})]})]})},Sn=()=>{const e=it(),[t,a]=Yn({onError:r=>e.logError(r,"update-campaign-mutation",!0)});return{mapPaymentAgainstCampaign:l.useCallback(async r=>({error:(await t({variables:{input:{campaignId:r.campaignId,paymentRef:r.paymentRef,offerId:r.campaignRepayment?void 0:r.offerId}}})).errors}),[t]),loading:a.loading}},Ya=k.div`
  height: 340px;
`,Ot=6,ja=()=>{const e=nn(),{flags:t}=en(),[a,{loading:o}]=jn(),[r,{loading:s}]=zn(),{isNonNoumenaMemberConnected:d,loading:c}=ln(),[i,{loading:u}]=Un(),{mapPaymentAgainstCampaign:h}=Sn(),{addToast:m}=Ce(),{isUnregistered:f,isUnauthenticated:y}=He(),v=o||c||s||u,C=y||f,[b,P]=l.useState(""),{source:N,destination:M,setClientSecret:S,isStripeFlow:A,transactions:B,setPaymentStatus:_,invoice:$,offerId:j,campaignId:w,setPaymentRef:x,campaignRepayment:F}=l.useContext(me),{setPaymentState:E,handleForwardStateChange:V,handleBackwardsStateChange:G,type:q,isMobile:O}=l.useContext(ae),[z,oe]=l.useState(()=>!!A),J=l.useRef(null);l.useEffect(()=>{var K,R;(b==null?void 0:b.length)===Ot?(K=J.current)==null||K.focus():(R=J.current)==null||R.blur()},[b]);const Y=l.useCallback(async()=>{if(q===U.TIP)r({variables:{input:{amount:Number(B.amount),answerId:(M==null?void 0:M.__typename)==="AnswerOutput"?M._id:"",currency:Se.Usd,passCode:C&&A?"000000":b,requestOriginator:It.NoumenaWeb,description:B.transactionReason}},onCompleted:()=>{V()},onError:K=>{C&&A&&E(I.PAYMENT_REVIEW),m("error","icon",`${K.message}`),le(K,{tags:{section:"tipForAnswerMutation"}})}});else{const K=A?"CARD":typeof N!="string"&&(N!=null&&N.id)?N==null?void 0:N.id:"";if($!=null&&$.id){i({variables:{input:{invoiceId:$.id,amount:Number(B.amount),requestOriginator:It.NoumenaWeb,sourceAccountId:K,passCode:C&&A?"000000":b,destinationAccountId:tt(q,M)}},onCompleted(R){var re;(re=R==null?void 0:R.raiseInvoicePayment)!=null&&re.clientSecret?(S(R.raiseInvoicePayment.clientSecret),E(I.PAYMENT_STRIPE)):(_(Hn.AwaitingProcessing),V())},onError:R=>{C&&A&&E(I.PAYMENT_REVIEW),m("error","icon",`${R.message}`),le(R,{tags:{section:"createPaymentMutation"}})}});return}a({variables:{input:{amount:Number(B.amount),currency:Se.Usd,destinationAccountId:tt(q,M),settlementPeriod:B.settlementPeriod,idempotencyKey:ia(),transactionType:Vn.Withdrawl,sourceAccountId:K,tenantId:"7837cbec-4fe9-4623-ae36-f6aed439c8b6",requestOriginator:Gn.NoumenaWeb,passCode:C&&A?"000000":b,transactionReason:B.transactionReason,enableNoumFees:t.paymentSubscriptions,enableTransactionLimit:!0,saveCard:z}},onCompleted:async({createPayment:R})=>{if(R!=null&&R.clientSecret&&S)S(R==null?void 0:R.clientSecret),E(I.PAYMENT_STRIPE),j&&w&&(R!=null&&R.id)&&x(R.id);else{if(j&&w&&(R!=null&&R.id)){const{error:re}=await h({offerId:j,campaignId:w,paymentRef:R.id,campaignRepayment:!!F});if(re)return}_((R==null?void 0:R.paymentStatus)||""),V()}},onError:R=>{C&&A&&E(I.PAYMENT_REVIEW),m("error","icon",`${R.message}`),le(R,{tags:{section:"createPaymentMutation"}})}})}},[m,w,F,a,M,t.paymentSubscriptions,V,$,C,A,h,j,b,i,z,S,x,E,_,N,r,B.amount,B.settlementPeriod,B.transactionReason,q]),fe=l.useCallback(async()=>{const K=M&&"chamberId"in M?M==null?void 0:M.chamberId:null;if(!K){Y();return}const{isConnectedToNoum:R,error:re}=await d({chamberId:K});if(!re&&R){Y();return}if(!re&&!R){m("error","icon","Payment is not allowed. You are not connected to the Noum"),E(I.PAYMENT_REVIEW);return}re&&(m("error","icon",`${re.message}`),e(ht.GUEST_HOME))},[m,M,Y,d,e,E]);l.useEffect(()=>{A&&(y?Y():f&&fe())},[]);const we=l.useCallback(()=>{E(I.PAYMENT_FORGOT_PIN)},[E]);return C&&v?n(Ya,{"data-test":"PaymentConfirm-FallbackContent",children:n(gt,{"data-test":"PaymentConfirm-Spinner"})}):g(l.Fragment,{children:[n(ke,{"data-test":"PaymentConfirm-ModalContent",children:g(W,{fullWidth:!0,vertical:!0,justify:"center",align:"center","data-test":"PaymentConfirm-Stack",children:[n(T,{font:"body-l",colorToken:"--text-body-neutral-default","data-test":"PaymentConfirm-TSpan",children:p("noumena.money.enter_your_pin_code")}),n(D,{height:24,"data-test":"PaymentConfirm-Spacer"}),n(on,{width:"44px",value:b,onChange:K=>P(K),numInputs:6,dataTestId:"pin-code",launchFrom:"PaymentModal",isInputPassword:!0,"data-test":"PaymentConfirm-OtpInput"}),n(D,{height:24,"data-test":"PaymentConfirm-Spacer"}),n(T,{style:{cursor:"pointer"},font:"button-m",colorToken:"--text-button-brand-primary-default",onClick:we,"data-test":"PaymentConfirm-TSpan",children:p("noumena.money.forgot_your_pin_code")}),n(D,{height:100,"data-test":"PaymentConfirm-Spacer"}),A&&g(W,{gap:10,justify:"flex-start",fullWidth:!0,style:{display:"none"},"data-test":"PaymentConfirm-Stack",children:[n(qn,{"data-testid":"check-box-one",isChecked:z,onChange:K=>oe(K),icon:n(ue,{name:"tick_m",size:23.5,color:"--icon-checkbox-neutral-alt-default","data-test":"PaymentConfirm-Icon"}),"data-test":"PaymentConfirm-Checkbox"}),g(T,{colorToken:"--text-body-header-neutral-default","data-test":"PaymentConfirm-TSpan",children:[" ",p("noumena.money.save_card_future")]})]})]})}),g(st,{gap:12,flexDirection:O?"column":"row","data-test":"PaymentConfirm-Footer",children:[n(X,{secondary:!0,size:"full",onClick:G,"data-test":"PaymentConfirm-Button",children:p("noumena.go.back")}),n(X,{ref:J,primary:!0,size:"full",type:"submit",loading:v,disabled:(b==null?void 0:b.length)!==Ot,onClick:Y,style:{outline:"none"},"data-test":"PaymentConfirm-Button",children:p("noumena.continue")})]})]})},za=k.img`
  width: 96px;
  height: 96px;
`,Ua=()=>{var y,v;const{isUnregistered:e}=He(),{source:t,destination:a,transactions:o,refetchPaymentData:r,paymentStatus:s,isStripeFlow:d}=l.useContext(me),{handleClose:c,type:i,onSuccessfulTransaction:u,isMobile:h}=l.useContext(ae);l.useEffect(()=>{u==null||u()},[]);const m=l.useCallback(()=>{c(),r()},[c,r]),f=l.useMemo(()=>{const C=ne(Number(o.amount),Se.Usd,2),b=pn(a);return i===U.TIP?p("noumena.money.transaction.done.users_tipped",{customerName:b,tipAmount:C}):`${p("noumena.money.payment.done.heading",{amount:C,transaction:i===U.TRANSFER?p("noumena.money.transaction.done.transfered"):p("noumena.money.transaction.done.paid")})}${e&&d?` ${p("noumena.to")} ${b}`:""}`},[a,d,e,o.amount,i]);return g(l.Fragment,{children:[n(ke,{hasSingleButton:!0,"data-test":"PaymentDone-ModalContent",children:g(W,{fullWidth:!0,vertical:!0,justify:"center",align:"center","data-test":"PaymentDone-Stack",children:[n(za,{src:rn,alt:"done","data-test":"PaymentDone-Image"}),n(D,{height:24,"data-test":"PaymentDone-Spacer"}),n(T,{font:"body-xl-bold",colorToken:"--text-modal-header-neutral-default","data-test":"PaymentDone-TSpan",children:f}),n(D,{height:8,"data-test":"PaymentDone-Spacer"}),n(T,{font:"body-m-bold",colorToken:"--text-modal-neutral-default","data-test":"PaymentDone-TSpan",children:o.transactionReason}),i!==U.TIP&&n(T,{font:"body-m-bold",colorToken:"--text-modal-neutral-default","data-test":"PaymentDone-TSpan",children:`${p("noumena.status")}: ${s===Ct.PROCESSED?p("noumena.completed"):p("noumena.processing")}`}),n(D,{height:24,"data-test":"PaymentDone-Spacer"}),n(W,{fullWidth:!0,"data-test":"PaymentDone-Stack",children:n(T,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentDone-TSpan",children:p("noumena.uc_from")})}),n(gn,{account:t,fetchUpdatedBalance:!0,showBalance:t!=="PAY_BY_CARD"&&t.accountType!=="BANK",customStyles:{backgroundColor:"var(--bg-tablecell-neutral-alt-default)",borderBottom:"1px solid var(--bg-separator-neutral-default)",borderRadius:"0px"},"data-test":"PaymentDone-SelectedAccount"}),n(D,{height:8,"data-test":"PaymentDone-Spacer"}),n(W,{fullWidth:!0,"data-test":"PaymentDone-Stack",children:n(T,{font:"body-l",colorToken:"--text-input-neutral-default","data-test":"PaymentDone-TSpan",children:p("noumena.uc_to")})}),a&&(a.__typename==="AnswerOutput"?n(hn,{customerName:Zt.renderFullName(a.user),customerAvatar:(v=(y=a.user)==null?void 0:y.profile)==null?void 0:v.profilePicture,"data-test":"PaymentDone-TipPayee"}):n(Tt,{selected:!0,payee:a,fetchUpdatedBalance:!0,customStyles:{backgroundColor:"var(--bg-tablecell-neutral-alt-default)",borderBottom:"1px solid var(--bg-separator-neutral-default)",borderRadius:"0px"},"data-test":"PaymentDone-Payee"}))]})}),n(Ee,{flexDirection:h?"column":"row","data-test":"PaymentDone-ModalFooter",children:n(X,{"data-testid":"close-button",secondary:!0,size:"full",onClick:m,"data-test":"PaymentDone-Button",children:p("noumena.close")})})]})},Ft=k.div`
  width: 400px;
  height: 88px;
  box-sizing: border-box;
  padding: 20px 16px;
  border: 1px solid var(--border-card-neutral-highlighted);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  &:hover {
    background-color: var(--bg-tablecell-neutral-pressed);
  }
`,Lt=k.div`
  width: 70%;
`;var he=(e=>(e.SELECT_PAEE="SELECT_PAEE",e.PAYEE_NOUMENA="PAYEE_NOUMENA",e.PAYEE_OUTSIDE_NOUMENA="PAYEE_OUTSIDE_NOUMENA",e))(he||{});const Ha=({handleStateChange:e})=>g(W,{fullWidth:!0,vertical:!0,align:"center",justify:"center","data-test":"SelectPayee-Stack",children:[n(D,{height:50,"data-test":"SelectPayee-Spacer"}),g(Ft,{onClick:()=>e(he.PAYEE_NOUMENA),"data-test":"SelectPayee-Option",children:[n(Lt,{"data-test":"SelectPayee-OptionName",children:n(T,{font:"body-l",colorToken:"--text-tablecell-body-neutral-highlighted","data-test":"SelectPayee-TSpan",children:p("noumena.money.addPayee.option.one")})}),n(ue,{name:"chevron_right_m",size:12,color:"--icon-tablecell-neutral-default","data-test":"SelectPayee-Icon"})]}),n(D,{height:16,"data-test":"SelectPayee-Spacer"}),g(Ft,{onClick:()=>e(he.PAYEE_OUTSIDE_NOUMENA),"data-test":"SelectPayee-Option",children:[n(Lt,{"data-test":"SelectPayee-OptionName",children:n(T,{font:"body-l",colorToken:"--text-tablecell-body-neutral-highlighted","data-test":"SelectPayee-TSpan",children:p("noumena.money.addPayee.option.two")})}),n(ue,{name:"chevron_right_m",size:12,color:"--icon-tablecell-neutral-default","data-test":"SelectPayee-Icon"})]})]}),Va=k.div`
  width: 390px;
  height: 65px;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 100%;
  }
`,Ga=k.img`
  width: 24px;
  height: 24px;
`,qa=k.div`
  width: 75%;
`,Bt=k.div`
  width: 100%;
  text-align: left;
`,Qa=k.div`
  width: 100%;
  height: 155px;
  @media (max-width: ${Fe.MOBILE_MAX}) {
    height: 100%;
  }
  overflow-y: scroll;
  overflow-x: hidden;
  position: relative;
  ${Qn};
`,Ka=k(ue)`
  cursor: pointer;
`,Xa=({payee:e,handleSelect:t,isSelected:a})=>{const o=r=>{t(r?e:null)};return g(Va,{"data-test":"NoumenaPayee-Payee",children:[n(Ga,{src:be,alt:"avatar","data-test":"NoumenaPayee-Avatar"}),g(qa,{"data-test":"NoumenaPayee-Account",children:[n(Bt,{"data-test":"NoumenaPayee-Details",children:n(T,{font:"body-m-bold",colorToken:"--text-tablecell-header-neutral-highlighted","data-test":"NoumenaPayee-TSpan",children:e.customerName})}),n(Bt,{"data-test":"NoumenaPayee-Details",children:n(T,{font:"footnote",colorToken:"--text-tablecell-body-neutral-default","data-test":"NoumenaPayee-TSpan",children:e.accountType==="BANK"?`****${e.maskAccountNumber}`:e.walletName})})]}),n(ua,{isChecked:a,onChange:o,icon:n(ue,{name:"flag_pl_m",size:12,color:a?"--icon-radiobutton-brand-primary-default":"--bg-radiobutton-neutral-alt-default","data-test":"NoumenaPayee-Icon"}),"data-test":"NoumenaPayee-Radiobox"})]})},Ja=()=>{const{setPaymentState:e,isMobile:t}=l.useContext(ae),{refetchPaymentData:a}=l.useContext(me),[o,r]=l.useState(null),[s,d]=l.useState(""),{addToast:c}=Ce(),[i,{loading:u}]=tn({variables:{input:{masterWalletId:(o==null?void 0:o.masterWalletId)||"",accountId:(o==null?void 0:o.id)||""}},onCompleted:({createCustomerPayee:P})=>{a(),c("success","none",`${P==null?void 0:P.message}`),e(I.PAYMENT_SELECT)},onError:P=>{c("error","none",`${P.message}`),le(P,{tags:{section:"createCustomerPayeeMutationPayeeInNoumena"}})}}),[h,{loading:m,data:f}]=Kn({onError(P){le(P,{tags:{section:"getAccountListPayeeInNoumena"}}),c("error","none",`${P.message}`)}}),y=(f==null?void 0:f.getAccountList)||[],v=P=>{r(P)},C=P=>{d(P.target.value)},b=y.length===0&&s.length>0&&!m;return l.useEffect(()=>{if(s){const P=setTimeout(()=>{h({variables:{input:{self:!1,limit:100,page:1,customerName:s,accountType:ce.Wallet}}})},600);return()=>clearTimeout(P)}return()=>null},[h,s]),g(l.Fragment,{children:[n(ke,{hasSingleButton:!0,"data-test":"PayeeInNoumena-ModalContent",children:g(W,{style:{overflow:"hidden"},vertical:!0,align:"center",justify:"center",fullWidth:!0,"data-test":"PayeeInNoumena-Stack",children:[n(T,{font:"body-l",colorToken:"--text-body-neutral-default",textAlign:"center","data-test":"PayeeInNoumena-TSpan",children:p("noumena.money.payment.add.payee.header")}),n(D,{height:12,"data-test":"PayeeInNoumena-Spacer"}),g(W,{fullWidth:!0,style:{position:"relative"},"data-test":"PayeeInNoumena-Stack",children:[!s.length&&n(ue,{"data-testid":"event-search-members-icon",name:"search_m",size:24,color:"--icon-input-neutral-default",style:{position:"absolute",left:"4%",top:"31%",zIndex:1},"data-test":"PayeeInNoumena-Icon"}),n(We,{value:s,onChange:C,placeholder:"       Payee Name",rightIcon:!!s.length&&n(Ka,{name:"clear_m",size:24,color:"--icon-input-brand-primary-default",onClick:()=>d(""),"data-test":"PayeeInNoumena-Close"}),"data-test":"PayeeInNoumena-TextField"})]}),n(D,{height:16,"data-test":"PayeeInNoumena-Spacer"}),g(Qa,{"data-test":"PayeeInNoumena-List",children:[!!s.length&&(y==null?void 0:y.map(P=>n(Xa,{isSelected:P.id===(o==null?void 0:o.id),payee:P,handleSelect:v,"data-test":"PayeeInNoumena-NoumenaPayee"},P.id))),m||b&&n(W,{fullWidth:!0,justify:"center","data-test":"PayeeInNoumena-Stack",children:n(T,{font:"body-l",colorToken:"--text-tablecell-header-neutral-highlighted",textAlign:"center","data-test":"PayeeInNoumena-TSpan",children:p("noumena.dropdown.nothing_found.text")})}),m&&n(gt,{"data-test":"PayeeInNoumena-Spinner"})]})]})}),n(Ee,{flexDirection:t?"column":"row","data-test":"PayeeInNoumena-ModalFooter",children:n(X,{onClick:()=>i(),"data-testid":"add-payee-in-noumena",primary:!0,size:"full",type:"submit",disabled:!o,loading:u,"data-test":"PayeeInNoumena-Button",children:p("noumena.money.payment.add.payee")})})]})};var ze=(e=>(e.PAYEE_DETAILS="PAYEE_DETAILS",e.PAYEE_CONFRIM="PAYEE_CONFRIM",e))(ze||{});const Za=({payee:{name:e,routingNumber:t,accountNumber:a},handleNext:o})=>{const{setPaymentState:r,isMobile:s}=l.useContext(ae),{refetchPaymentData:d}=l.useContext(me),{addToast:c}=Ce(),[i,{loading:u}]=tn({variables:{input:{name:e,routingNumber:t,accountNumber:a}},onCompleted:({createCustomerPayee:h})=>{d(),c("success","none",`${h==null?void 0:h.message}`),r(I.PAYMENT_SELECT)},onError:h=>{c("error","none",`${h.message}`),le(h,{tags:{section:"createPaymentMutation"}})}});return g(l.Fragment,{children:[n(lt,{"data-test":"PayeeConfirm-ModalBody",children:g(W,{vertical:!0,fullWidth:!0,align:"center",justify:"center","data-test":"PayeeConfirm-Stack",children:[n(D,{height:29,"data-test":"PayeeConfirm-Spacer"}),n(T,{font:"body-l",colorToken:"--text-modal-header-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.payment.add.outside.noumena.confirmation")}),n(D,{height:8,"data-test":"PayeeConfirm-Spacer"}),n(T,{font:"body-m",colorToken:"--text-modal-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.payment.add.outside.noumena.confirmation.note.one")}),n(D,{height:29,"data-test":"PayeeConfirm-Spacer"}),n(T,{font:"body-m",colorToken:"--text-modal-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.payment.add.outside.noumena.confirmation.note.two")}),n(D,{height:16,"data-test":"PayeeConfirm-Spacer"}),g(W,{fullWidth:!0,align:"center",justify:"space-between","data-test":"PayeeConfirm-Stack",children:[g(W,{vertical:!0,"data-test":"PayeeConfirm-Stack",children:[n(T,{font:"footnote",colorToken:"--text-input-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.addPayee.payee.name.label")}),n(T,{font:"body-m-bold",colorToken:"--text-input-neutral-filled",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:e})]}),g(W,{vertical:!0,"data-test":"PayeeConfirm-Stack",children:[n(T,{font:"footnote",colorToken:"--text-input-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.addPayee.payee.routing_number.label")}),n(T,{font:"body-m-bold",colorToken:"--text-input-neutral-filled",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:t})]}),g(W,{vertical:!0,"data-test":"PayeeConfirm-Stack",children:[n(T,{font:"footnote",colorToken:"--text-input-neutral-default",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:p("noumena.money.addPayee.payee.accounting_number.label")}),n(T,{font:"body-m-bold",colorToken:"--text-input-neutral-filled",textAlign:"center","data-test":"PayeeConfirm-TSpan",children:a})]})]})]})}),n("div",{style:{width:"100%"},children:g(st,{gap:12,flexDirection:s?"column":"row","data-test":"PayeeConfirm-Footer",children:[n(X,{secondary:!0,size:"full",onClick:()=>o(ze.PAYEE_DETAILS),"data-test":"PayeeConfirm-Button",children:p("noumena.cancel")}),n(X,{onClick:()=>i(),"data-testid":"add-payee-outside-noumena",primary:!0,size:"full",type:"submit",loading:u,disabled:u,"data-test":"PayeeConfirm-Button",children:p("noumena.money.payment.add.payee")})]})})]})},eo=({handleNext:e,handlePayeeChange:t})=>{var h,m,f;const{isMobile:a}=l.useContext(ae),{register:o,getValues:r,handleSubmit:s,formState:{isDirty:d,isValid:c,errors:i}}=bt({mode:"onChange",defaultValues:{name:"",routingNumber:"",accountNumber:""}}),u=y=>{t(y),e(ze.PAYEE_CONFRIM)};return n(l.Fragment,{children:g("form",{style:{width:"100%"},onSubmit:s(u),"data-test":"PayeeForm",children:[n(ke,{hasSingleButton:!0,"data-test":"PayeeForm-ModalContent",children:g(W,{fullWidth:!0,vertical:!0,align:"center",justify:"center","data-test":"PayeeForm-Stack",children:[n(D,{height:29,"data-test":"PayeeForm-Spacer"}),n(We,{...o("name",{required:`${p("noumena.input.not_empty")}`}),label:p("noumena.money.addPayee.payee.name.label"),value:r("name"),error:!!i.name,helperText:(h=i.name)==null?void 0:h.message,"data-test":"PayeeForm-TextField"}),n(D,{height:16,"data-test":"PayeeForm-Spacer"}),n(We,{maxLength:9,hideLengthHelperText:!0,...o("routingNumber",{required:`${p("noumena.input.not_empty")}`,pattern:{value:/^[0-9]+[0-9]*$/,message:p("noumena.money.payment.invalid.number")},validate:{checkLength:y=>(y==null?void 0:y.length)===9||"Routing number should be exact 9 characters"}}),label:p("noumena.money.addPayee.payee.routing_number.label"),value:r("routingNumber"),error:!!i.routingNumber,helperText:(m=i.routingNumber)==null?void 0:m.message,"data-test":"PayeeForm-TextField"}),n(D,{height:16,"data-test":"PayeeForm-Spacer"}),n(We,{...o("accountNumber",{required:`${p("noumena.input.not_empty")}`,pattern:{value:/^[0-9]+[0-9]*$/,message:p("noumena.money.payment.invalid.number")},validate:{checkLength:y=>(y==null?void 0:y.length)>3||"Account number should be 4 or more characters"}}),label:p("noumena.money.addPayee.payee.accounting_number.label"),value:r("accountNumber"),error:!!i.accountNumber,helperText:(f=i.accountNumber)==null?void 0:f.message,"data-test":"PayeeForm-TextField"})]})}),n(Ee,{flexDirection:a?"column":"row","data-test":"PayeeForm-ModalFooter",children:n(X,{"data-testid":"add-payee-outside-noumena",primary:!0,size:"full",type:"submit",disabled:!d||!c,"data-test":"PayeeForm-Button",children:p("noumena.money.payment.add.payee")})})]})})},to=()=>{const[e,t]=l.useState(ze.PAYEE_DETAILS),[a,o]=l.useState({name:"",routingNumber:"",accountNumber:""}),r=c=>{t(c)},s=c=>{const{name:i,accountNumber:u,routingNumber:h}=c;o(m=>({...m,name:i,accountNumber:u,routingNumber:h}))};return n(W,{fullWidth:!0,vertical:!0,align:"center",justify:"center","data-test":"PayeeOutSideNoumena-Stack",children:(()=>{switch(e){case ze.PAYEE_DETAILS:return n(eo,{handleNext:r,handlePayeeChange:s,"data-test":"PayeeOutSideNoumena-getScreen-PayeeForm"});case ze.PAYEE_CONFRIM:return n(Za,{payee:a,handleNext:r,"data-test":"PayeeOutSideNoumena-getScreen-PayeeConfirm"});default:return null}})()})},no=k(X)`
  position: absolute;
  left: 5px;
  width: 40px;
  height: 40px;
  cursor: pointer;
`;k.div`
  width: 100%;
  font-size: var(--font-header-xsmall-size);
  font-weight: var(--font-link-xlarge-weight);
  color: var(--text-card-neutral-highlighted);
  display: flex;
  justify-content: center;
  align-items: center;
  line-height: var(--font-input-small-lineheight);
  font-family: var(--font-header-xsmall-bold-font);
`;const ao=()=>{const{setPaymentState:e}=l.useContext(ae),[t,a]=l.useState(he.SELECT_PAEE),o=c=>{a(c)},r=()=>{switch(t){case he.SELECT_PAEE:return n(Ha,{handleStateChange:o,"data-test":"AddPayee-getScreen-SelectPayee"});case he.PAYEE_NOUMENA:return n(Ja,{"data-test":"AddPayee-getScreen-PayeeInNoumena"});case he.PAYEE_OUTSIDE_NOUMENA:return n(to,{"data-test":"AddPayee-getScreen-PaymenetOuuSideNoumena"});default:return null}},s=()=>{switch(t){case he.SELECT_PAEE:return p("noumena.money.addPayee.heading");case he.PAYEE_NOUMENA:return p("noumena.money.addPayee.noumena.heading");case he.PAYEE_OUTSIDE_NOUMENA:return p("noumena.money.addPayee.out.of.noumena.heading");default:return""}},d=()=>{t===he.SELECT_PAEE?e(I.PAYMENT_SELECT):a(he.SELECT_PAEE)};return g(l.Fragment,{children:[g(Ie,{isFullScreen:!1,justifyContent:"center","data-test":"AddPayee-ModalHeader",children:[n(no,{"data-testid":"add-payee-back-button",size:"small",leftIcon:n(ue,{color:"--icon-button-neutral-default",name:"arrow_left_m",size:24,"data-test":"AddPayee-Icon"}),onClick:d,"data-test":"AddPayee-BackButton"}),s()]}),r()]})};function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,o)}return a}function $t(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Wt(Object(a),!0).forEach(function(o){En(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function Ze(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ze=function(t){return typeof t}:Ze=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(e)}function En(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ut(e,t){return oo(e)||ro(e,t)||io(e,t)||lo()}function oo(e){if(Array.isArray(e))return e}function ro(e,t){var a=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(a!=null){var o=[],r=!0,s=!1,d,c;try{for(a=a.call(e);!(r=(d=a.next()).done)&&(o.push(d.value),!(t&&o.length===t));r=!0);}catch(i){s=!0,c=i}finally{try{!r&&a.return!=null&&a.return()}finally{if(s)throw c}}return o}}function io(e,t){if(e){if(typeof e=="string")return Yt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yt(e,t)}}function Yt(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function lo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yt=function(t){var a=H.useRef(t);return H.useEffect(function(){a.current=t},[t]),a.current},Ue=function(t){return t!==null&&Ze(t)==="object"},so=function(t){return Ue(t)&&typeof t.then=="function"},co=function(t){return Ue(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},jt="[object Object]",uo=function e(t,a){if(!Ue(t)||!Ue(a))return t===a;var o=Array.isArray(t),r=Array.isArray(a);if(o!==r)return!1;var s=Object.prototype.toString.call(t)===jt,d=Object.prototype.toString.call(a)===jt;if(s!==d)return!1;if(!s&&!o)return t===a;var c=Object.keys(t),i=Object.keys(a);if(c.length!==i.length)return!1;for(var u={},h=0;h<c.length;h+=1)u[c[h]]=!0;for(var m=0;m<i.length;m+=1)u[i[m]]=!0;var f=Object.keys(u);if(f.length!==c.length)return!1;var y=t,v=a,C=function(P){return e(y[P],v[P])};return f.every(C)},Cn=function(t,a,o){return Ue(t)?Object.keys(t).reduce(function(r,s){var d=!Ue(a)||!uo(t[s],a[s]);return o.includes(s)?(d&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),r):d?$t($t({},r||{}),{},En({},s,t[s])):r},null):null},mo="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",zt=function(t){if(t===null||co(t))return t;throw new Error(mo)},fo=function(t){if(so(t))return{tag:"async",stripePromise:Promise.resolve(t).then(zt)};var a=zt(t);return a===null?{tag:"empty"}:{tag:"sync",stripe:a}},vt=H.createContext(null);vt.displayName="ElementsContext";var po=function(t,a){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(a," in an <Elements> provider."));return t},At=H.createContext(null);At.displayName="CartElementContext";var ho=function(t,a){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(a," in an <Elements> provider."));return t},Tn=function(t){var a=t.stripe,o=t.options,r=t.children,s=H.useMemo(function(){return fo(a)},[a]),d=H.useState(null),c=ut(d,2),i=c[0],u=c[1],h=H.useState(null),m=ut(h,2),f=m[0],y=m[1],v=H.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(o):null}}),C=ut(v,2),b=C[0],P=C[1];H.useEffect(function(){var S=!0,A=function(_){P(function($){return $.stripe?$:{stripe:_,elements:_.elements(o)}})};return s.tag==="async"&&!b.stripe?s.stripePromise.then(function(B){B&&S&&A(B)}):s.tag==="sync"&&!b.stripe&&A(s.stripe),function(){S=!1}},[s,b,o]);var N=yt(a);H.useEffect(function(){N!==null&&N!==a&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[N,a]);var M=yt(o);return H.useEffect(function(){if(b.elements){var S=Cn(o,M,["clientSecret","fonts"]);S&&b.elements.update(S)}},[o,M,b.elements]),H.useEffect(function(){var S=b.stripe;!S||!S._registerWrapper||!S.registerAppInfo||(S._registerWrapper({name:"react-stripe-js",version:"1.14.1"}),S.registerAppInfo({name:"react-stripe-js",version:"1.14.1",url:"https://stripe.com/docs/stripe-js/react"}))},[b.stripe]),H.createElement(vt.Provider,{value:b},H.createElement(At.Provider,{value:{cart:i,setCart:u,cartState:f,setCartState:y}},r))};Tn.propTypes={stripe:ie.any,options:ie.object};var nt=function(t){var a=H.useContext(vt);return po(a,t)},Ut=function(t){var a=H.useContext(At);return ho(a,t)},yo=function(){var t=nt("calls useElements()"),a=t.elements;return a},go=function(){var t=nt("calls useStripe()"),a=t.stripe;return a};ie.func.isRequired;var ge=function(t){var a=H.useRef(t);return H.useEffect(function(){a.current=t},[t]),function(){a.current&&a.current.apply(a,arguments)}},Pe=function(){},Po=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},ee=function(t,a){var o="".concat(Po(t),"Element"),r=function(i){var u=i.id,h=i.className,m=i.options,f=m===void 0?{}:m,y=i.onBlur,v=y===void 0?Pe:y,C=i.onFocus,b=C===void 0?Pe:C,P=i.onReady,N=P===void 0?Pe:P,M=i.onChange,S=M===void 0?Pe:M,A=i.onEscape,B=A===void 0?Pe:A,_=i.onClick,$=_===void 0?Pe:_,j=i.onLoadError,w=j===void 0?Pe:j,x=i.onLoaderStart,F=x===void 0?Pe:x,E=i.onNetworksChange,V=E===void 0?Pe:E,G=i.onCheckout,q=G===void 0?Pe:G,O=i.onLineItemClick,z=O===void 0?Pe:O,oe=nt("mounts <".concat(o,">")),J=oe.elements,Y=H.useRef(null),fe=H.useRef(null),we=Ut("mounts <".concat(o,">")),K=we.setCart,R=we.setCartState,re=ge(N),$e=ge(v),Ye=ge(b),Ge=ge($),se=ge(S),xe=ge(B),pe=ge(w),Te=ge(F),Z=ge(V),Ne=ge(q),Me=ge(z);H.useLayoutEffect(function(){if(Y.current==null&&J&&fe.current!=null){var Q=J.create(t,f);t==="cart"&&K&&K(Q),Y.current=Q,Q.mount(fe.current),Q.on("ready",function(ye){t==="cart"?(R&&R(ye),re(ye)):re(Q)}),Q.on("change",function(ye){t==="cart"&&R&&R(ye),se(ye)}),Q.on("blur",$e),Q.on("focus",Ye),Q.on("escape",xe),Q.on("loaderror",pe),Q.on("loaderstart",Te),Q.on("networkschange",Z),Q.on("click",Ge),Q.on("checkout",function(ye){t==="cart"&&R&&R(ye),Ne(ye)}),Q.on("lineitemclick",Me)}});var De=yt(f);return H.useEffect(function(){if(Y.current){var Q=Cn(f,De,["paymentRequest"]);Q&&Y.current.update(Q)}},[f,De]),H.useLayoutEffect(function(){return function(){Y.current&&(Y.current.destroy(),Y.current=null)}},[]),H.createElement("div",{id:u,className:h,ref:fe})},s=function(i){nt("mounts <".concat(o,">")),Ut("mounts <".concat(o,">"));var u=i.id,h=i.className;return H.createElement("div",{id:u,className:h})},d=a?s:r;return d.propTypes={id:ie.string,className:ie.string,onChange:ie.func,onBlur:ie.func,onFocus:ie.func,onReady:ie.func,onEscape:ie.func,onClick:ie.func,onLoadError:ie.func,onLoaderStart:ie.func,onNetworksChange:ie.func,onCheckout:ie.func,onLineItemClick:ie.func,options:ie.object},d.displayName=o,d.__elementType=t,d},te=typeof window>"u";ee("auBankAccount",te);ee("card",te);ee("cardNumber",te);ee("cardExpiry",te);ee("cardCvc",te);ee("fpxBank",te);ee("iban",te);ee("idealBank",te);ee("p24Bank",te);ee("epsBank",te);var bo=ee("payment",te);ee("paymentRequestButton",te);ee("linkAuthentication",te);ee("address",te);ee("shippingAddress",te);ee("cart",te);ee("paymentMethodMessaging",te);ee("affirmMessage",te);ee("afterpayClearpayMessage",te);const So=()=>{const e=go(),t=yo(),a=nn(),o=it(),{isUnregistered:r,isUnauthenticated:s}=He(),[d,c]=l.useState(!1),[i,u]=l.useState(!0),{setPaymentState:h}=l.useContext(ae),{setPaymentStatus:m,destination:f,setTransactionCradDetails:y,campaignId:v,offerId:C,paymentRef:b,campaignRepayment:P}=l.useContext(me),N=C&&v&&b,{isNonNoumenaMemberConnected:M}=ln(),{mapPaymentAgainstCampaign:S}=Sn(),A=()=>{m(Ct.WAITING_PROCESSING),h(I.PAYMENT_DONE)},[B]=Xn({onCompleted:({saveCardStripe:w})=>{const x=(w==null?void 0:w.brand)||null,F=(w==null?void 0:w.last4)||null;y&&y({brand:x,last4:F}),A()},onError:w=>{o.logError(w,"stripeSaveCard",!0)}}),_=async w=>{var x;try{if(!((x=w.paymentIntent)!=null&&x.client_secret))return;if(await(e==null?void 0:e.handleCardAction(w.paymentIntent.client_secret)),N){const{error:F}=await S({offerId:C,campaignId:v,paymentRef:b,campaignRepayment:!!P});if(F)return}A()}catch(F){o.logError(F,"stripeNextAction",!0)}},$=async()=>{var w,x,F;if(!(!e||!t)){try{const E=await e.confirmPayment({elements:t,redirect:"if_required",confirmParams:{return_url:"https://noumena-web.web.app/money"}}),V=((w=E.paymentIntent)==null?void 0:w.status)==="succeeded";if(((x=E.paymentIntent)==null?void 0:x.status)==="requires_action"){_(E);return}if(V&&s){A();return}if(V&&N){const{error:q}=await S({offerId:C,campaignId:v,paymentRef:b,campaignRepayment:!!P});if(q){o.logError(q,"stripePaymentByCard",!0);return}}B({variables:{paymentId:((F=E==null?void 0:E.paymentIntent)==null?void 0:F.id)??""}})}catch(E){o.logError(E,"stripePaymentByCard",!0)}c(!1)}};return n("div",{"data-test":"Form",children:g("form",{onSubmit:async w=>{w.preventDefault(),c(!0);const x=f&&"chamberId"in f&&(f==null?void 0:f.chamberId)||"";if(r&&x){const{isConnectedToNoum:F,error:E}=await M({chamberId:x});if(!E&&F){$();return}if(!E&&!F){o.logError(E,"Payment is not allowed. You are not connected to the Noum",!0),c(!1),a(ht.GUEST_HOME);return}E&&(c(!1),o.logError(E,"stripePaymentByCard",!0),a(ht.GUEST_HOME));return}$()},children:[n(bo,{onReady:()=>u(!1),"data-test":"Form-PaymentElement"}),n(D,{height:20,"data-test":"Form-Spacer"}),n(X,{primary:!0,loading:d,type:"submit",size:"full",disabled:i||d,"data-test":"Form-Button",children:p("noumena.continue")})]})})},Eo=()=>{const{stripeInstance:e}=l.useContext(Jn),{clientSecret:t}=l.useContext(me),a=getComputedStyle(document.body),o=l.useMemo(()=>({theme:"none",rules:{".Input":{color:a.getPropertyValue("--text-input-neutral-filled"),backgroundColor:a.getPropertyValue("--bg-input-neutral-default"),fontFamily:a.getPropertyValue("--font-input-medium-regular-font")},".Label":{color:a.getPropertyValue("--text-input-neutral-default"),fontFamily:a.getPropertyValue("--font-footnote-regular-font")},".Error":{color:a.getPropertyValue("--text-input-danger-primary-default"),fontFamily:a.getPropertyValue("--font-footnote-regular-font")},".TermsText":{color:a.getPropertyValue("--text-tablecell-body-neutral-default"),fontFamily:a.getPropertyValue("--font-footnote-regular-font")}}}),[a]),r=l.useMemo(()=>({clientSecret:t,appearance:o}),[o,t]);return n("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},"data-test":"Stripe",children:t.length?n(Tn,{stripe:e,options:r,"data-test":"Stripe-Elements",children:n(So,{"data-test":"Stripe-Form"})}):null})};var _e=(e=>(e.RESET_PIN_ANSWER="RESET_PIN_ANSWER",e.RESET_PIN_NEW_PIN="RESET_PIN_NEW_PIN",e.RESET_PIN_DONE="RESET_PIN_DONE",e))(_e||{});const Co=(e,t)=>{const a=[];if(e.length===t.length)for(let o=0;o<e.length;o+=1){const r={id:e[o].id,answer:t[o].answer};a.push(r)}return a},To=({securityQuestions:e,setPaylod:t,onChangeState:a,resetSecurityQuestions:o})=>{const{register:r,handleSubmit:s,getValues:d,formState:{errors:c,isValid:i,isDirty:u}}=bt({mode:"onChange",defaultValues:{answers:o?[{answer:""},{answer:""},{answer:""}]:[{answer:""}]}}),{isMobile:h}=l.useContext(ae),m=l.useCallback(f=>{f.answers&&(t(y=>({...y,securityQuestion:Co(e,f.answers)})),a(_e.RESET_PIN_NEW_PIN))},[t,a,e]);return g(l.Fragment,{children:[n(Ie,{"data-test":"Form-ModalHeader",children:p("noumena.money.forgotpin.form.heading")}),g("form",{style:{width:"100%"},onSubmit:s(m),children:[g(ke,{hasSingleButton:!0,"data-test":"Form-ModalContent",children:[g(W,{vertical:!0,fullWidth:!0,align:"center",justify:"center","data-test":"Form-Stack",children:[n(T,{font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"Form-TSpan",children:p("noumena.reset.transaction.pin.helper.text")}),n(D,{height:31,"data-test":"Form-Spacer"}),e.length>0&&e.map((f,y)=>{var v,C,b;return g(W,{fullWidth:!0,vertical:!0,"data-test":"Form-Stack",children:[n(T,{font:"body-l",colorToken:"--text-modal-neutral-highlighted","data-test":"Form-TSpan",children:f.question}),n(D,{height:16,"data-test":"Form-Spacer"}),l.createElement(We,{...r(`answers.${y}.answer`,{required:{value:!0,message:p("noumena.input.not_empty")}}),key:f.id,label:p("noumena.money.setupWallet.security_question.answer_text_field.label"),value:d(`answers.${y}.answer`),error:!!(c!=null&&c.answers&&((v=c==null?void 0:c.answers[y])!=null&&v.answer)),helperText:(c==null?void 0:c.answers)&&((b=(C=c==null?void 0:c.answers[y])==null?void 0:C.answer)==null?void 0:b.message),"data-test":"Form-TextField"}),n(D,{height:16,"data-test":"Form-Spacer"})]})}),g(T,{font:"body-m",colorToken:"--link-modal-neutral-highlighted","data-test":"Form-TSpan",children:[`${p("noumena.reset.transaction.pin.helper.note")} `,n(T,{font:"link-m",colorToken:"--link-modal-neutral-highlighted","data-test":"Form-TSpan",children:`${p("noumena.support")}`})]})]}),n(D,{height:16,"data-test":"Form-Spacer"})]}),n(Ee,{isFullScreen:h,"data-test":"Form-ModalFooter",children:n(X,{primary:!0,size:"full",type:"submit",disabled:!u||!i,"data-test":"Form-Button",children:p("noumena.continue")})})]})]})};var ve=(e=>(e.SETTING_THE_PIN="SETTING_THE_PIN",e.CONFIRMING_THE_PIN="CONFIRMING_THE_PIN",e))(ve||{});const Je=6;k.div`
  width: 90%;
  font-size: var(--font-header-xsmall-size);
  font-weight: var(--font-link-xlarge-weight);
  color: var(--text-card-neutral-highlighted);
  display: flex;
  justify-content: center;
  align-items: center;
  line-height: var(--font-input-small-lineheight);
  font-family: var(--font-header-xsmall-bold-font);
`;k(pa)`
  top: 0%;
`;k(T)`
  font-weight: var(--font-link-large-weight);
  font-size: var(--font-header-small-size);
  text-align: center;
  color: var(--text-card-neutral-highlighted);
  line-height: var(--font-header-xlarge-size);
`;const vo=k(T)`
  width: 100%;
`,Ao=k(on)`
  ${da};
  color: ${e=>e.color?e.color:"var(--text-code-form-neutral-default)"};
`,wo=({setupPinMainHeading:e,confirmPinMainHeading:t,subHeading:a,onBackButtonClick:o,onContinueButtonClick:r,onPassCodeConfirm:s,isMobile:d,loadingState:c})=>{const{t:i}=la(),[u,h]=l.useState(""),[m,f]=l.useState(""),{addToast:y}=Ce(),v=l.useMemo(()=>Zn,[]),[C,b]=l.useState(ve.SETTING_THE_PIN);l.useEffect(()=>{(m==null?void 0:m.length)===Je&&(u==null?void 0:u.length)===Je&&(m===u?s(u):y("error","none",`${i("noumena.invalid.pin_code")}`))},[u,m,i,y]);const P=()=>{C===ve.SETTING_THE_PIN?v.test(m)?b(ve.CONFIRMING_THE_PIN):y("error","none",`${i("Invalid pincode, only numbers are allowed")}`):r()},N=()=>{C===ve.CONFIRMING_THE_PIN?(h(""),f(""),b(ve.SETTING_THE_PIN)):o()},M=A=>{C===ve.SETTING_THE_PIN?f(A):h(A)},S=C===ve.SETTING_THE_PIN?(m==null?void 0:m.length)!==Je:(u==null?void 0:u.length)!==Je;return g(l.Fragment,{children:[n(Ie,{isFullScreen:d||!1,"data-test":"PassCode-ModalHeader",children:C===ve.SETTING_THE_PIN?e:t}),g(ke,{isFullScreen:d||!1,"data-test":"PassCode-ModalContent",children:[n(vo,{font:"body-l",colorToken:"--text-body-neutral-default","data-test":"PassCode-FormHelperText",children:a}),n(D,{height:32,"data-test":"PassCode-Spacer"}),n(Ao,{width:"44px",value:C===ve.SETTING_THE_PIN?m:u,onChange:A=>M(A),numInputs:6,isInputPassword:!0,dataTestId:"pin-code","data-test":"PassCode-PinCode"})]}),g(Ee,{isFullScreen:d||!1,gap:10,"data-test":"PassCode-ModalFooter",children:[n(X,{style:{width:"40%"},"data-testid":"step-four-back-button",type:"button",size:"full",onClick:N,leftIcon:n(ue,{name:"arrow_left_m",size:24,color:"--icon-button-neutral-default","data-test":"PassCode-Icon"}),"data-test":"PassCode-Button",children:i("noumena.back.text")}),n(X,{"data-testid":"step-four-submit-button",type:"submit",primary:!0,size:"full",loading:c,disabled:S||c,onClick:P,"data-test":"PassCode-Button",children:i("noumena.continue")})]})]})},xo=({onChangeState:e,setPaylod:t,payLoad:a,resetSecurityQuestions:o})=>{var m,f;const{logError:r}=it(),{isMobile:s}=l.useContext(ae),d=l.useCallback(()=>{e(_e.RESET_PIN_ANSWER)},[e]),c=l.useCallback(y=>{t(v=>({...v,passCode:y}))},[t]),[i,{loading:u}]=ea({variables:{input:{passCode:a.passCode,securityQuestion:{id:(m=a.securityQuestion[0])==null?void 0:m.id,answer:(f=a.securityQuestion[0])==null?void 0:f.answer}}},onCompleted:()=>e(_e.RESET_PIN_DONE),onError:y=>{r(y,"resetPassward")}}),[h]=ta({variables:{input:{passCode:a.passCode,securityQuestions:a.securityQuestion}},onCompleted:()=>e(_e.RESET_PIN_DONE),onError:y=>{r(y,"createPassCode")}});return n("div",{style:{position:"relative"},"data-test":"PassCodeScreen",children:n(wo,{loadingState:u,isMobile:s,setupPinMainHeading:p("noumena.money.forgotpin.passcode.main_heading"),confirmPinMainHeading:p("noumena.money.forgotpin.passcode.confirm_new_pin"),subHeading:p("noumena.money.forgotpin.passcode.sub_heading"),onBackButtonClick:d,onPassCodeConfirm:y=>c(y),onContinueButtonClick:()=>o?h():i(),"data-test":"PassCodeScreen-PassCode"})})},No=()=>{const{setPaymentState:e,isMobile:t}=l.useContext(ae);return g(l.Fragment,{children:[n(Ie,{isFullScreen:t,"data-test":"Done-ModalHeader",children:p("noumena.money.forgotpin.done.heading")}),n(ke,{isFullScreen:t,"data-test":"Done-ModalContent",children:g(W,{vertical:!0,fullWidth:!0,align:"center",justify:"center","data-test":"Done-Stack",children:[n(D,{height:21,"data-test":"Done-Spacer"}),n(T,{font:"body-l",colorToken:"--text-modal-neutral-default","data-test":"Done-TSpan",children:p("noumena.money.forgotpin.done.new_pin_setup_done")}),n(D,{height:40,"data-test":"Done-Spacer"}),n("img",{src:rn,alt:"done"}),n(D,{height:110,"data-test":"Done-Spacer"})]})}),n(st,{isFullScreen:t,"data-test":"Done-Footer",children:n(X,{primary:!0,size:"full",onClick:()=>e(I.PAYMENT_CONFIRM),"data-test":"Done-Button",children:p("noumena.close")})})]})},_o=()=>{const[e,t]=l.useState(_e.RESET_PIN_ANSWER),[a,o]=l.useState([]),[r,s]=l.useState({securityQuestion:[],passCode:""}),{resetSecurityQuestions:d,questions:c}=fa();l.useEffect(()=>{o(c)},[c]);const i=l.useCallback(h=>{t(h)},[]),u=l.useCallback(()=>{switch(e){case _e.RESET_PIN_ANSWER:return n(To,{onChangeState:i,securityQuestions:a,setPaylod:s,resetSecurityQuestions:d,"data-test":"ForgotPin-getScreen-Form"});case _e.RESET_PIN_NEW_PIN:return n(xo,{payLoad:r,onChangeState:i,setPaylod:s,resetSecurityQuestions:d,"data-test":"ForgotPin-getScreen-PassCodeScreen"});case _e.RESET_PIN_DONE:return n(No,{"data-test":"ForgotPin-getScreen-Done"});default:return null}},[e,i,a,d,r]);return n(l.Fragment,{children:u()})};function Ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,o)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ht(Object(a),!0).forEach(function(o){vn(e,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ht(Object(a)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))})}return e}function vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mt(e,t){return Io(e)||ko(e,t)||Mo(e,t)||Do()}function Io(e){if(Array.isArray(e))return e}function ko(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var o=[],r=!0,s=!1,d,c;try{for(a=a.call(e);!(r=(d=a.next()).done)&&(o.push(d.value),!(t&&o.length===t));r=!0);}catch(i){s=!0,c=i}finally{try{!r&&a.return!=null&&a.return()}finally{if(s)throw c}}return o}}function Mo(e,t){if(e){if(typeof e=="string")return Vt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vt(e,t)}}function Vt(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function Do(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function An(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wn(e,t){return t={exports:{}},e(t,t.exports),t.exports}var rt=wn(function(e,t){var a=ot&&ot.__rest||function(d,c){var i={};for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&c.indexOf(u)<0&&(i[u]=d[u]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(d);h<u.length;h++)c.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(d,u[h])&&(i[u[h]]=d[u[h]]);return i};Object.defineProperty(t,"__esModule",{value:!0}),t.scripts=void 0,t.scripts={};var o=function(d){var c=document.querySelector('script[src="'+d+'"]');if(c)return t.scripts[d]={loading:!1,error:null,scriptEl:c}};function r(d){var c=d.src,i=d.checkForExisting,u=i===void 0?!1:i,h=a(d,["src","checkForExisting"]),m=c?t.scripts[c]:void 0;!m&&u&&c&&s&&(m=o(c));var f=(0,H.useState)(m?m.loading:!!c),y=f[0],v=f[1],C=(0,H.useState)(m?m.error:null),b=C[0],P=C[1];return(0,H.useEffect)(function(){if(!(!s||!c||!y||b)){m=t.scripts[c],!m&&u&&(m=o(c));var N;m?N=m.scriptEl:(N=document.createElement("script"),N.src=c,Object.keys(h).forEach(function(A){N[A]===void 0?N.setAttribute(A,h[A]):N[A]=h[A]}),m=t.scripts[c]={loading:!0,error:null,scriptEl:N});var M=function(){m&&(m.loading=!1),v(!1)},S=function(A){m&&(m.error=A),P(A)};return N.addEventListener("load",M),N.addEventListener("error",S),document.body.appendChild(N),function(){N.removeEventListener("load",M),N.removeEventListener("error",S)}}},[c]),[y,b]}t.default=r;var s=typeof window<"u"&&typeof window.document<"u"});An(rt);rt.scripts;var xn=wn(function(e,t){var a=ot&&ot.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.scripts=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(rt).default}}),Object.defineProperty(t,"scripts",{enumerable:!0,get:function(){return rt.scripts}})}),Ro=An(xn);xn.scripts;var Oo=function(t,a,o){var r={};return delete Object.assign(r,t,vn({},o,t[a]))[a],r},Fo=function(t){var a={plaid:null,open:!1,onExitCallback:null};if(typeof window>"u"||!window.Plaid)throw new Error("Plaid not loaded");var o=Oo(t,"publicKey","key");a.plaid=window.Plaid.create(at(at({},o),{},{onExit:function(i,u){a.open=!1,o.onExit&&o.onExit(i,u),a.onExitCallback&&a.onExitCallback()}}));var r=function(){a.plaid&&(a.open=!0,a.onExitCallback=null,a.plaid.open())},s=function(i,u){if(!a.open||!a.plaid){u&&u();return}a.onExitCallback=u,a.plaid.exit(i),i&&i.force&&(a.open=!1)},d=function(){a.plaid&&(a.plaid.destroy(),a.plaid=null)};return{open:r,exit:s,destroy:d}},Lo="https://cdn.plaid.com/link/v2/stable/link-initialize.js",Bo=function(){},Wo=function(t){var a=Ro({src:Lo,checkForExisting:!0}),o=mt(a,2),r=o[0],s=o[1],d=l.useState(null),c=mt(d,2),i=c[0],u=c[1],h=l.useState(!1),m=mt(h,2),f=m[0],y=m[1],v=(t.product||[]).slice().sort().join(",");l.useEffect(function(){if(!r&&!(!t.token&&!t.publicKey)){if(s||!window.Plaid){console.error("Error loading Plaid",s);return}i!=null&&i.exit({force:!0},function(){return i.destroy()});var P=Fo(at(at({},t),{},{onLoad:function(){y(!0),t.onLoad&&t.onLoad()}}));return u(P),function(){return P.exit({force:!0},function(){return P.destroy()})}}},[r,s,t.publicKey,t.token,v]);var C=i!=null&&(!r||f),b=function(){t.token||console.warn("react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.")};return{error:s,ready:C,exit:i?i.exit:Bo,open:i?i.open:b}},Gt;(function(e){e.OPEN="OPEN",e.EXIT="EXIT",e.HANDOFF="HANDOFF",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.ERROR="ERROR"})(Gt||(Gt={}));const Nn={},$o=St`
    mutation createAccountDwolla($plaidToken: String!) {
  createAccountDwolla(plaidToken: $plaidToken) {
    message
  }
}
    `;function Yo(e){const t={...Nn,...e};return an($o,t)}const jo=St`
    mutation removeAccount($id: String!) {
  removeAccount(id: $id) {
    message
  }
}
    `;function Zo(e){const t={...Nn,...e};return an(jo,t)}St`
    mutation updatePersonalInfo($input: CustomerAddressInput!) {
  updateCustomerAddressDetails(input: $input) {
    street
  }
}
    `;const ft=k(lt)`
  @media (max-width: ${Fe.MOBILE_MAX}) {
    width: 90%;
    height: ${({hasSingleButton:e})=>e?"75vh":"60vh"};
  }
`,zo=()=>{const{addToast:e}=Ce(),{plaidToken:t,loading:a}=ma(),{isMobile:o,setPaymentState:r,setModalSize:s}=l.useContext(ae),{refetchPaymentData:d}=l.useContext(me),[c,i]=l.useState(""),[u,h]=l.useState(!1),[m,f]=l.useState(0),[y,v]=l.useState(!0),{loading:C}=na({fetchPolicy:"network-only",onCompleted:({checkPassCodeExists:E})=>h(E),onError:E=>{e("error","none",E.message),le(E,{tags:{section:"checkpasscode-exists-Non-noumena"}})}}),[b,{loading:P}]=Yo({onCompleted:()=>{e("success","none",p("noumena.money.money-detail.accountLinkSuccess")),s&&(s(Be.M),r(I.PAYMENT_SELECT),d())},onError:E=>{e("error","none",E.message),le(E,{tags:{section:"create-account-dwolla-non-noumena"}})}}),N=l.useCallback(()=>{s(Be.M),f(2)},[s]),M=l.useCallback(()=>{s(Be.M),f(1)},[s]),S=l.useCallback(()=>{s(Be.L),f(0)},[s]),A=l.useCallback(E=>{i(E)},[]),B=()=>{window.open(aa.HOW_PLAID_WORKS,"_blank")},_=()=>{v(!y)},$=l.useMemo(()=>({token:t,onSuccess:E=>{E&&b({variables:{plaidToken:E}})},onExit:()=>{}}),[t,b]),{open:j,ready:w}=Wo($),x=()=>g(W,{vertical:!0,align:"center",justify:"center","data-test":"PlaidFlow-PlaidIntroText-Stack",children:[n(T,{font:"heading-xs-bold",colorToken:"--text-modal-header-neutral-default",textAlign:"center","data-test":"PlaidFlow-PlaidIntroText-TSpan",children:p("noumena.money.nonnoumena.plaid.intro.screen")}),n(D,{height:20,"data-test":"PlaidFlow-PlaidIntroText-Spacer"}),n(T,{textAlign:"center",colorToken:"--text-modal-neutral-default","data-test":"PlaidFlow-PlaidIntroText-TSpan",children:p("noumena.money.nonnoumena.plaid.intro.helperTextOne")}),n(D,{height:20,"data-test":"PlaidFlow-PlaidIntroText-Spacer"}),n(T,{textAlign:"center",colorToken:"--text-modal-neutral-default","data-test":"PlaidFlow-PlaidIntroText-TSpan",children:p("noumena.money.nonnoumena.plaid.intro.helperTextTwo")}),n(D,{height:20,"data-test":"PlaidFlow-PlaidIntroText-Spacer"}),n(T,{font:"link-m",colorToken:"--text-modal-neutral-default",textAlign:"center",onClick:_,cursor:"pointer","data-test":"PlaidFlow-PlaidIntroText-TSpan",children:p("noumena.money.money-detail.howPalidWorkd")})]}),F=()=>g(W,{vertical:!0,align:"center",justify:"center","data-test":"PlaidFlow-PlaidHowItWorksText-Stack",children:[n(T,{colorToken:"--text-modal-neutral-default","data-test":"PlaidFlow-PlaidHowItWorksText-TSpan",children:p("noumena.non.noumena.plaid.how.it.works.one")}),g(T,{colorToken:"--text-modal-neutral-default","data-test":"PlaidFlow-PlaidHowItWorksText-TSpan",children:[p("noumena.non.noumena.plaid.how.it.works.two"),n(T,{font:"link-m",colorToken:"--text-modal-neutral-default",textAlign:"center",onClick:B,cursor:"pointer","data-test":"PlaidFlow-PlaidHowItWorksText-TSpan",children:"here."})]})]});return g(Oe,{children:[m===0&&g("div",{children:[n(Ie,{"data-test":"PlaidFlow-ModalHeader",children:y?p("noumena.money.money-detail.addAccount"):p("noumena.money.money-detail.howPalidWorkd")}),n(ft,{align:"center","data-test":"PlaidFlow-ModalContent",children:y?n(x,{"data-test":"PlaidFlow-PlaidIntroText"}):n(F,{"data-test":"PlaidFlow-PlaidHowItWorksText"})}),n(Ee,{"data-test":"PlaidFlow-ModalFooter",children:y?n(X,{loading:a||C||P,disabled:!w||P,size:"full",primary:!0,onClick:()=>{if(u){w&&j&&j();return}M()},"data-test":"PlaidFlow-Button",children:p("noumena.money.money-detail.Continue")}):n(X,{loading:a||C||P,disabled:!w||P,size:"full",primary:!0,onClick:_,"data-test":"PlaidFlow-Button",children:p("noumena.close")})})]}),m===1&&g(Le,{onPassCodeConfirm:A,onContinueButtonClick:N,handleBack:S,"data-test":"PlaidFlow-SetupPin",children:[n(Ie,{"data-test":"PlaidFlow-ModalHeader",children:n(Le.Header,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default"})}),g(ft,{align:"center","data-test":"PlaidFlow-ModalContent",children:[n(Le.HelperText,{}),n(D,{height:24,"data-test":"PlaidFlow-Spacer"}),n(Le.Otp,{}),n(D,{height:28,"data-test":"PlaidFlow-Spacer"}),n(Le.ShowPasswordButton,{}),n(D,{height:79,"data-test":"PlaidFlow-Spacer"})]}),g(Ee,{gap:12,flexDirection:o?"column":"row","data-test":"PlaidFlow-ModalFooter",children:[n(Le.BackButton,{}),n(Le.ContinueButton,{})]})]}),m===2&&g(je,{handleNextStep:()=>{w&&j&&j()},passCode:c,handlePreviousStep:M,loading:P,"data-test":"PlaidFlow-SecurityQuestions",children:[n(Ie,{"data-test":"PlaidFlow-ModalHeader",children:n(je.Header,{font:"heading-s-bold",colorToken:"--text-body-header-neutral-default"})}),g(ft,{align:"center","data-test":"PlaidFlow-ModalContent",children:[n(je.HelperText,{}),n(D,{height:16,"data-test":"PlaidFlow-Spacer"}),n(je.Questions,{})]}),g(Ee,{gap:12,flexDirection:o?"column":"row","data-test":"PlaidFlow-ModalFooter",children:[n(je.BackButton,{}),n(je.ContinueButton,{})]})]})]})},er=({open:e,handleClose:t,type:a,defaultAccountID:o,defaultPayeeID:r,onSuccessfulTransaction:s=()=>null,defaultWalletPayee:d,disableFromDropDown:c=!1,hideToDropdownIcon:i=!1,hideFromDropdownIcon:u=!1,answerForTip:h,maxTransactionAmount:m,invoiceId:f,isSourceWalletExists:y=!0,predefinedPayeeList:v,isDestinationDropdownDisabled:C,defaultAmount:b,disableAmountsField:P=!1,offerId:N,campaignId:M,campaignRepayment:S})=>n(va,{defaultAccountID:o,defaultPayeeID:r,defaultWalletPayee:d,answerForTip:h,invoiceId:f,maxTransactionAmount:m,isSourceWalletExists:y,predefinedPayeeList:v,isDestinationDropdownDisabled:C,defaultAmount:b,disableAmountsField:P,offerId:N,campaignId:M,campaignRepayment:S,handleClose:t,"data-test":"TransactionModal-PaymentDataProvider",children:n(wa,{type:a,onSuccessfulTransaction:s,disableFromDropDown:c,hideToDropdownIcon:i,hideFromDropdownIcon:u,handleClose:t,"data-test":"TransactionModal-PaymentStateProvider",children:n(Uo,{handleClose:t,open:e,"data-test":"TransactionModal-StepsModal"})})}),Uo=({open:e,handleClose:t})=>{const{loading:a,destination:o}=l.useContext(me),{paymentState:r,modalSize:s,type:d}=l.useContext(ae),c=()=>{switch(r){case I.PAYMENT_SELECT:return n(La,{"data-test":"StepsModal-getComponentAccordingToState-PaymentSelect"});case I.PAYMENT_DESCRIPTION:return n(Wa,{"data-test":"StepsModal-getComponentAccordingToState-PaymentDescription"});case I.PAYMENT_REVIEW:return n($a,{"data-test":"StepsModal-getComponentAccordingToState-PaymentReview"});case I.PAYMENT_CONFIRM:return n(ja,{"data-test":"StepsModal-getComponentAccordingToState-PaymentConfirm"});case I.PAYMENT_DONE:return n(Ua,{"data-test":"StepsModal-getComponentAccordingToState-PaymentDone"});case I.PAYMENT_ADD_PAYEE:return n(ao,{"data-test":"StepsModal-getComponentAccordingToState-AddPayee"});case I.PAYMENT_STRIPE:return n(Eo,{"data-test":"StepsModal-getComponentAccordingToState-Stripe"});case I.PAYMENT_FORGOT_PIN:return n(_o,{"data-test":"StepsModal-getComponentAccordingToState-ForgotPin"});case I.PAYMENT_SET_UP_PIN:return n(zo,{"data-test":"StepsModal-getComponentAccordingToState-PlaidFlow"});default:return null}},i=l.useMemo(()=>[I.PAYMENT_DONE,I.PAYMENT_ADD_PAYEE,I.PAYMENT_FORGOT_PIN,I.PAYMENT_SET_UP_PIN],[]),u=!(r===I.PAYMENT_ADD_PAYEE||r===I.PAYMENT_DONE),h=l.useMemo(()=>i.includes(r),[i,r]);return n(oa,{enableCloseButton:u,disableBackdropClick:!0,onClose:t,open:e,size:s,disableEscapeKeyDown:!0,"data-test":"StepsModal-Modal",children:a?n("div",{style:{width:"400px",height:d===U.TIP?"412px":"545px"},children:n(gt,{"data-test":"StepsModal-Spinner"})}):g(Oe,{children:[h||n(Ie,{"data-test":"StepsModal-ModalHeader",children:ya(d,r,o)}),c()]})})};export{Et as M,U as T,er as a,Wo as b,Zo as c,ma as d,Yo as u};
//# sourceMappingURL=index-594821a1.js.map
