import{al as u,r as S}from"./vendor-51460554.js";import{eM as w,a$ as f,v as y,eN as P,eq as m,eO as b,eG as h,eK as F,Q as k}from"./index-cd84bcc9.js";import{u as D}from"./styles-5db1c009.js";function Q({id:t}){var s,n;const{data:a,networkStatus:e,refetch:o}=w({fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,variables:{id:t},skip:!t}),c=(n=(s=a==null?void 0:a.getSingleContract)==null?void 0:s.contractPDF)==null?void 0:n.base64;return{pdfData:c?f(c,"application/pdf"):null,loading:[u.loading,u.refetch].includes(e),refetch:o}}function _(){const{addPrimaryIconToast:t}=y(),[a]=P({fetchPolicy:"network-only"});return S.useCallback(async(o,c)=>{var n,l;t("PDF download will begin shortly.");const{data:r}=await a({variables:{id:o}}),s=(l=(n=r==null?void 0:r.getSingleContract)==null?void 0:n.contractPDF)==null?void 0:l.base64;s&&await m(f(s,"application/pdf"),"application/pdf",c)},[t,a])}function I({id:t,contract:a}){var g;const{signee:e}=D(a??null),{data:o,networkStatus:c}=b({fetchPolicy:"cache-and-network",variables:{id:t,contactId:(e==null?void 0:e._id)??""},skip:!t||!a||!e}),[r]=h({update(d,i){var p;!((p=i.data)!=null&&p.sendDocumentForSigning)||!t||d.updateFragment({fragment:F,fragmentName:"Contract",id:d.identify({__typename:"Contract",_id:t})},C=>C?{...C,status:k.Issued}:null)}}),s=S.useCallback(async()=>{var i;return t?((i=(await r({variables:{id:t}})).data)==null?void 0:i.sendDocumentForSigning)??!1:!1},[t,r]),n=(g=o==null?void 0:o.previewWithSign)==null?void 0:g.base64;return{pdfData:n?f(n,"application/pdf"):null,loading:[u.loading,u.refetch].includes(c),sendForSigning:s}}export{I as a,Q as b,_ as u};
//# sourceMappingURL=contractPdf-f9d6c58f.js.map
